!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=15)}([function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,i){e.exports=i(17)(2)},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,i){i.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,i){e.exports=i.p+"a8b605caa04feac6eab34454bb10435c.svg"},function(e,t,i){e.exports=i.p+"8cd9b6092e305a0cf45d0fdb3a3775f8.svg"},function(e,t,i){e.exports=i.p+"0bffeba020402fbadb3811d6aa1c7604.svg"},function(e,t,i){e.exports=i.p+"ddc7adc1a070b4a20d66ebd9676ff0c8.svg"},function(e,t,i){e.exports=i.p+"4ca3a211c5c89ca7d5d9b33353d75938.gif"},function(e,t,i){e.exports=i.p+"f7b0198ee3a27c5aa138358d190f60fb.gif"},function(e,t,i){i(16),__kbnBundles__.define("plugin/guidedOnboarding/public",i,18)},function(e,t,i){i.p=window.__kbnPublicPath__.guidedOnboarding},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,i){"use strict";i.r(t),i.d(t,"plugin",(function(){return q}));var n=i(6),s=i.n(n),a=i(2),o=i.n(a),u=i(7),r=i(8),d=i(1),c=i(3),l=i(0),p={name:"1se9e8c",styles:"p{margin-left:32px;margin-block-end:0;}ul{padding-left:28px;}"};const g=e=>{if("string"==typeof e)return e;const{descriptionText:t,linkText:i,linkUrl:n,isLinkExternal:s}=e;return Object(l.jsx)(o.a.Fragment,null,t,Object(l.jsx)("br",null),Object(l.jsx)(d.EuiLink,{"data-test-subj":"guidePanelStepDescriptionLink",href:n,target:s?"_blank":""},i))},b=({accordionId:e,stepStatus:t,stepNumber:i,stepConfig:n,handleButtonClick:s,telemetryGuideId:a,isLoading:u})=>{const{euiTheme:r}=Object(d.useEuiTheme)(),b=((e,t)=>({stepNumber:Object(l.css)("width:24px;height:24px;border-radius:50%;border:2px solid ","inactive"===t?e.colors.lightShade:e.colors.success,";font-weight:",e.font.weight.medium,";text-align:center;line-height:1.4;color:","inactive"===t?e.colors.subduedText:e.colors.text,";",""),stepTitle:Object(l.css)("font-weight:",e.font.weight.semiBold,";color:","inactive"===t?e.colors.subduedText:e.colors.text,";.euiAccordion-isOpen &{color:",e.colors.title,";}",""),description:p}))(r,t),f=Object(l.jsx)(d.EuiFlexGroup,{gutterSize:"s",responsive:!1},Object(l.jsx)(d.EuiFlexItem,{grow:!1},"complete"===t?Object(l.jsx)(d.EuiIcon,{type:"checkInCircleFilled",size:"l",color:r.colors.success}):Object(l.jsx)("span",{css:b.stepNumber},i)),Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiText,{size:"m",css:b.stepTitle},n.title))),j="in_progress"===t||"active"===t||"ready_to_complete"===t;return Object(l.jsx)("div",{"data-test-subj":"guidePanelStep"},"complete"===t?Object(l.jsx)(o.a.Fragment,null,f):Object(l.jsx)(d.EuiAccordion,{id:e,buttonContent:f,arrowDisplay:"right",initialIsOpen:j},Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiSpacer,{size:"s"}),Object(l.jsx)(d.EuiText,{size:"s","data-test-subj":"guidePanelStepDescription",css:b.description},n.description&&Object(l.jsx)("p",null,g(n.description)),n.descriptionList&&Object(l.jsx)("ul",null,n.descriptionList.map(((e,t)=>Object(l.jsx)("li",{key:`description-${t}`},g(e)))))),Object(l.jsx)(d.EuiSpacer,null),j&&Object(l.jsx)(d.EuiFlexGroup,{justifyContent:"flexEnd"},Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiButton,{isLoading:u,onClick:s,fill:!0,"data-test-subj":`onboarding--stepButton--${a}--step${i}`},(()=>{switch(t){case"active":return c.i18n.translate("guidedOnboarding.dropdownPanel.startStepButtonLabel",{defaultMessage:"Start"});case"in_progress":return c.i18n.translate("guidedOnboarding.dropdownPanel.continueStepButtonLabel",{defaultMessage:"Continue"});case"ready_to_complete":return c.i18n.translate("guidedOnboarding.dropdownPanel.markDoneStepButtonLabel",{defaultMessage:"Mark done"})}return""})()))))),Object(l.jsx)(d.EuiHorizontalRule,{margin:"l"}))};var f=i(5),j=i.n(f),h=i(4);const x="/api/guided_onboarding",O=e=>{const t=e.steps.find((e=>"in_progress"===e.status));return t?t.id:void 0},m=(e,t)=>{if(!e||"in_progress"!==e.status||!e.activeGuide)return!1;if(t){const{activeGuide:i}=e;return!(!i.isActive||i.guideId!==t)}return!0},v=(e,t,i,n)=>{if(!e||!e.isActive||e.guideId!==i)return!1;const s=e.steps.find((e=>e.id===n));return!!s&&s.status===t},S=(e,t,i)=>v(e,"in_progress",t,i),y=(e,t,i)=>v(e,"ready_to_complete",t,i);class config_service_ConfigService{constructor(){j()(this,"client",void 0),j()(this,"configs",void 0),j()(this,"isConfigInitialized",void 0)}setup(e){this.client=e,this.configs={},this.isConfigInitialized={}}async getGuideConfig(e){if(!this.client)throw new Error("ConfigService has not be initialized.");if(!this.isConfigInitialized||!this.isConfigInitialized[e])try{const{config:t}=await this.client.get(`${x}/configs/${e}`);this.isConfigInitialized||(this.isConfigInitialized={}),this.isConfigInitialized[e]=!0,this.configs||(this.configs={}),this.configs[e]=t}catch(t){this.isConfigInitialized||(this.isConfigInitialized={}),this.isConfigInitialized[e]=!0}return((e,t)=>{if(e&&t&&Object.keys(e).includes(t))return e[t]})(this.configs,e)}async getGuideStatusOnStepCompletion({isLastStepInGuide:e,isManualCompletion:t,isStepReadyToComplete:i}){return e&&!t||e&&t&&i?"ready_to_complete":"in_progress"}async isIntegrationInGuideStep(e,t){if(!e||!e.isActive)return!1;const i=((e,t)=>{const i=O(t);if(i&&e)return e.steps.find((e=>e.id===i))})(await this.getGuideConfig(e.guideId),e);return!!i&&i.integration===t}}const w=new class api_service_ApiService{constructor(){j()(this,"isCloudEnabled",void 0),j()(this,"client",void 0),j()(this,"pluginState$",void 0),j()(this,"isLoading$",new h.BehaviorSubject(!1)),j()(this,"isGuidePanelOpen$",new h.BehaviorSubject(!1)),j()(this,"configService",new config_service_ConfigService)}setup(e,t){this.isCloudEnabled=t,this.client=e,this.pluginState$=new h.BehaviorSubject(void 0),this.isGuidePanelOpen$=new h.BehaviorSubject(!1),this.isLoading$=new h.BehaviorSubject(!1),this.configService.setup(e)}createGetPluginStateObservable(){return new h.Observable((e=>{const t=new AbortController,i=t.signal;return this.isLoading$.next(!0),this.client.get(`${x}/state`,{signal:i}).then((({pluginState:t})=>{this.isLoading$.next(!1),e.next(t),this.pluginState$.next(t),e.complete()})).catch((t=>{this.isLoading$.next(!1),e.next({status:"error",isActivePeriod:!1}),this.pluginState$.next({status:"error",isActivePeriod:!1}),e.complete()})),()=>{this.isLoading$.next(!1),t.abort()}}))}fetchPluginState$(){if(!this.isCloudEnabled)return Object(h.of)(void 0);if(!this.client)throw new Error("ApiService has not be initialized.");return this.pluginState$.value||this.isLoading$.value?this.pluginState$:(this.isLoading$.next(!0),Object(h.concat)(this.createGetPluginStateObservable(),this.pluginState$))}async fetchAllGuidesState(){if(this.isCloudEnabled){if(!this.client)throw new Error("ApiService has not be initialized.");try{return await this.client.get(`${x}/guides`)}catch(e){throw e}}}async updatePluginState(e,t){if(this.isCloudEnabled){if(!this.client)throw new Error("ApiService has not be initialized.");try{this.isLoading$.next(!0);const i=await this.client.put(`${x}/state`,{body:JSON.stringify(e)});return this.isLoading$.next(!1),this.pluginState$.next(i.pluginState),this.isGuidePanelOpen$.next(t),i}catch(e){throw this.isLoading$.next(!1),e}}}async activateGuide(e,t){if(t)return await this.updatePluginState({status:"in_progress",guide:{...t,isActive:!0}},!0);const i=await this.configService.getGuideConfig(e);if(i){const t={guideId:e,isActive:!0,status:"not_started",steps:i.steps.map(((e,t)=>{const i=0===t;return{id:e.id,status:i?"active":"inactive"}}))};return await this.updatePluginState({status:"in_progress",guide:t},!0)}}async deactivateGuide(e){return await this.updatePluginState({status:"quit",guide:{...e,isActive:!1}},!1)}async completeGuide(e){const t=await Object(h.firstValueFrom)(this.fetchPluginState$());if(!m(t,e))return;const{activeGuide:i}=t;if(Boolean(i.steps.find((e=>"complete"===e.status)))){const e={...i,isActive:!1,status:"complete"};return await this.updatePluginState({status:"complete",guide:e},!1)}}isGuideStepActive$(e,t){return this.fetchPluginState$().pipe(Object(h.map)((i=>!!m(i,e)&&S(i.activeGuide,e,t))))}isGuideStepReadyToComplete$(e,t){return this.fetchPluginState$().pipe(Object(h.map)((i=>!!m(i,e)&&y(i.activeGuide,e,t))))}async startGuideStep(e,t){const i=await Object(h.firstValueFrom)(this.fetchPluginState$());if(!m(i,e))return;const{activeGuide:n}=i,s={guideId:e,isActive:!0,status:"in_progress",steps:n.steps.map((e=>e.id===t?{id:e.id,status:"in_progress"}:e))};return await this.updatePluginState({guide:s},!1)}async completeGuideStep(e,t){const i=await Object(h.firstValueFrom)(this.fetchPluginState$());if(!m(i,e))return;const{activeGuide:n}=i,s=S(n,e,t),a=y(n,e,t),o=await this.configService.getGuideConfig(e),u=((e,t,i)=>null==e?void 0:e.steps.find((e=>e.id===i)))(o,n.guideId,t),r=!!u&&!!u.manualCompletion,d=((e,t,i)=>{const n=((e,t,i)=>e?e.steps.findIndex((e=>e.id===i)):-1)(e,0,i),s=(null==e?void 0:e.steps.length)||0;return s>0&&n===s-1})(o,0,t);if(s||a){const i=((e,t,i)=>{const n=e.steps.findIndex((e=>e.id===t)),s=e.steps[n];return e.steps.map(((e,t)=>{const a=e.id===s.id,o=t===n+1;return a?{id:e.id,status:i?"ready_to_complete":"complete"}:o?i?e:{id:e.id,status:"active"}:e}))})(n,t,r&&s),o={guideId:e,isActive:!0,status:await this.configService.getGuideStatusOnStepCompletion({isLastStepInGuide:d,isManualCompletion:r,isStepReadyToComplete:a}),steps:i};return await this.updatePluginState({guide:o},!r||a)}}isGuidedOnboardingActiveForIntegration$(e){return this.fetchPluginState$().pipe(Object(h.concatMap)((t=>Object(h.from)(this.configService.isIntegrationInGuideStep(null==t?void 0:t.activeGuide,e)))))}async completeGuidedOnboardingForIntegration(e){if(!e)return;const t=await Object(h.firstValueFrom)(this.fetchPluginState$());if(!m(t))return;const{activeGuide:i}=t,n=O(i);return n&&await this.configService.isIntegrationInGuideStep(i,e)?await this.completeGuideStep(i.guideId,n):void 0}async skipGuidedOnboarding(){return await this.updatePluginState({status:"skipped"},!1)}async getGuideConfig(e){if(!this.isCloudEnabled)return;if(!this.client)throw new Error("ApiService has not be initialized.");this.isLoading$.next(!0);const t=await this.configService.getGuideConfig(e);return this.isLoading$.next(!1),t}},E=({closeModal:e,currentGuide:t,telemetryGuideId:i,notifications:n})=>{const[s,o]=Object(a.useState)(!1);return Object(l.jsx)(d.EuiModal,{"aria-label":"quitGuideModal","data-test-subj":"onboarding--quitGuideModal",maxWidth:448,onClose:e},Object(l.jsx)(d.EuiModalHeader,null,Object(l.jsx)(d.EuiModalHeaderTitle,null,c.i18n.translate("guidedOnboarding.quitGuideModal.modalTitle",{defaultMessage:"Quit this guide?"}))),Object(l.jsx)(d.EuiModalBody,null,Object(l.jsx)(d.EuiText,null,Object(l.jsx)("p",null,c.i18n.translate("guidedOnboarding.quitGuideModal.modalDescription",{defaultMessage:"You can restart the setup guide any time from the Help menu."})))),Object(l.jsx)(d.EuiModalFooter,null,Object(l.jsx)(d.EuiButtonEmpty,{"data-test-subj":`onboarding--cancelQuitGuideButton--${i}`,onClick:e},c.i18n.translate("guidedOnboarding.quitGuideModal.cancelButtonLabel",{defaultMessage:"Cancel"})),Object(l.jsx)(d.EuiButton,{"data-test-subj":`onboarding--quitGuideButton--${i}`,onClick:async()=>{try{o(!0),await w.deactivateGuide(t),e()}catch(e){o(!1),n.toasts.addDanger({title:c.i18n.translate("guidedOnboarding.quitGuideModal.deactivateGuideError",{defaultMessage:"Unable to update the guide. Wait a moment and try again."}),text:e.message})}},isLoading:s,fill:!0,color:"warning"},c.i18n.translate("guidedOnboarding.quitGuideModal.quitButtonLabel",{defaultMessage:"Quit guide"}))))};var _=i(9),G=i.n(_),C=i(10),P=i.n(C),k=i(11),I=i.n(k),$=i(12),L=i.n($),M={name:"1flj9lk",styles:"text-align:left"};const B=({button:e,isGuidePanelOpen:t,title:i,description:n})=>{const s=Object(a.useRef)(!0);Object(a.useEffect)((()=>{s.current=!1}),[]);const[o,u]=Object(a.useState)(!0);return Object(a.useEffect)((()=>{t&&!s.current&&u(!1)}),[t]),Object(l.jsx)(d.EuiPopover,{"data-test-subj":"manualCompletionPopover",button:e,isOpen:o,repositionOnScroll:!0,closePopover:()=>{}},i&&Object(l.jsx)(d.EuiTitle,{size:"xxs"},Object(l.jsx)("h3",null,i)),Object(l.jsx)(d.EuiSpacer,null),Object(l.jsx)(d.EuiText,{size:"s",style:{width:300}},n&&Object(l.jsx)("p",null,n)))},T=({pluginState:e,guideConfig:t,toggleGuidePanel:i,isGuidePanelOpen:n,navigateToLandingPage:s,isLoading:a})=>{var o;const u=(e=>{let t;return null==e||e.steps.forEach(((e,i)=>{"in_progress"!==e.status&&"ready_to_complete"!==e.status||(t=i+1),"active"===e.status&&(t=i)})),t})(null==e?void 0:e.activeGuide),r=null==e||null===(o=e.activeGuide)||void 0===o?void 0:o.steps.find((e=>"ready_to_complete"===e.status)),p=Object(l.jsx)(d.EuiButton,{isLoading:a,onClick:i,color:"success",fill:!0,size:"s","data-test-subj":"guideButton"},Boolean(u)?c.i18n.translate("guidedOnboarding.guidedSetupStepButtonLabel",{defaultMessage:"Setup guide: step {stepNumber}",values:{stepNumber:u}}):c.i18n.translate("guidedOnboarding.guidedSetupButtonLabel",{defaultMessage:"Setup guide"}));if(!e||!e.activeGuide||!e.activeGuide.isActive||"not_started"===e.activeGuide.status)return null==e||!e.isActivePeriod||"not_started"!==(null==e?void 0:e.status)&&"skipped"!==(null==e?void 0:e.status)&&"in_progress"!==e.status?"error"===(null==e?void 0:e.status)?p:null:Object(l.jsx)(d.EuiButton,{onClick:s,color:"success",fill:!0,size:"s","data-test-subj":"guideButtonRedirect"},c.i18n.translate("guidedOnboarding.guidedSetupRedirectButtonLabel",{defaultMessage:"Setup guides"}));if(r){const e=null==t?void 0:t.steps.find((e=>e.id===r.id));if(e&&e.manualCompletion)return Object(l.jsx)(B,{button:p,isGuidePanelOpen:n,title:e.manualCompletion.title,description:e.manualCompletion.description})}return p};var F=i(13),z=i.n(F),A=i(14),D=i.n(A);const R=Object(l.jsx)(d.EuiEmptyPrompt,{"data-test-subj":"guideErrorSection",iconType:"alert",color:"danger",title:Object(l.jsx)("h2",null,c.i18n.translate("guidedOnboarding.dropdownPanel.errorSectionTitle",{defaultMessage:"Unable to load the guide"})),body:Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiText,{color:"subdued"},c.i18n.translate("guidedOnboarding.dropdownPanel.errorSectionDescription",{defaultMessage:"Wait a moment and try again. If the problem persists, contact your administrator."})),Object(l.jsx)(d.EuiSpacer,null),Object(l.jsx)(d.EuiButton,{iconSide:"right",onClick:()=>window.location.reload(),iconType:"refresh",color:"danger"},c.i18n.translate("guidedOnboarding.dropdownPanel.errorSectionReloadButton",{defaultMessage:"Reload"})))}),N=({api:e,application:t,notifications:i,uiSettings:n})=>{var s;const{euiTheme:u}=Object(d.useEuiTheme)(),[r,p]=Object(a.useState)(!1),[g,f]=Object(a.useState)(!1),[j,h]=Object(a.useState)(void 0),[x,O]=Object(a.useState)(void 0),[m,v]=Object(a.useState)(!1),S=n.get("theme:darkMode"),y=(({euiTheme:e,isDarkTheme:t})=>({setupButton:Object(l.css)("margin-right:",e.size.m,";",""),wellDoneAnimatedPrompt:M,flyoutOverrides:{flyoutHeader:Object(l.css)("background:url(",t?P.a:G.a,") top right no-repeat;",""),flyoutContainer:Object(l.css)("top:55px!important;bottom:unset!important;right:calc(",e.size.s," + 128px);border-radius:6px;animation:euiModal 350ms cubic-bezier(0.34, 1.61, 0.7, 1);box-shadow:none;max-height:76vh;@media (max-width: ",e.breakpoint.s,"px){right:25px!important;}",""),flyoutBody:Object(l.css)("overflow:auto;.euiFlyoutBody__overflowContent{width:480px;padding-top:10px;@media (max-width: ",e.breakpoint.s,"px){width:100%;}}",""),flyoutFooter:Object(l.css)("border-radius:0 0 6px 6px;background:url(",t?L.a:I.a,") 0 7px no-repeat;padding:24px 30px;height:125px;",""),flyoutFooterLink:Object(l.css)("color:",e.colors.darkShade,";font-weight:400;","")}}))({euiTheme:u,isDarkTheme:S}),w=()=>{p((e=>!e))},_=Object(a.useCallback)((async(n,s)=>{if(j){const{id:o,status:u}=n,r=j.activeGuide.guideId;try{if("ready_to_complete"===u)return await e.completeGuideStep(r,o);var a;"active"!==u&&"in_progress"!==u||(await e.startGuideStep(r,o),s.location&&(await t.navigateToApp(s.location.appID,{path:s.location.path}),null!==(a=s.manualCompletion)&&void 0!==a&&a.readyToCompleteOnNavigation&&await e.completeGuideStep(r,o)))}catch(e){i.toasts.addDanger({title:c.i18n.translate("guidedOnboarding.dropdownPanel.stepHandlerError",{defaultMessage:"Unable to update the guide. Wait a moment and try again."}),text:e.message})}}}),[e,t,i.toasts,j]),C=()=>{p(!1),t.navigateToApp("home",{path:"#getting_started"})};Object(a.useEffect)((()=>{const t=e.fetchPluginState$().subscribe((e=>{h(e)}));return()=>t.unsubscribe()}),[e]),Object(a.useEffect)((()=>{const t=e.isLoading$.subscribe((e=>{v(e)}));return()=>t.unsubscribe()}),[e]),Object(a.useEffect)((()=>{const t=e.isGuidePanelOpen$.subscribe((e=>{p(e)}));return()=>t.unsubscribe()}),[e]);const k=Object(a.useCallback)((async()=>{var t;if(null!=j&&null!==(t=j.activeGuide)&&void 0!==t&&t.guideId){const t=await e.getGuideConfig(j.activeGuide.guideId);t&&O(t)}}),[e,j]);Object(a.useEffect)((()=>{k()}),[k]);const $=(B=null==j?void 0:j.activeGuide)?B.steps.reduce(((e,t)=>("complete"===t.status&&(e+=1),e)),0):0;var B;const F="ready_to_complete"===(null==j||null===(s=j.activeGuide)||void 0===s?void 0:s.status),A=Object(l.jsx)(d.EuiButtonEmpty,{onClick:C,iconSide:"left",iconType:"arrowLeft",flush:"left",color:"text"},c.i18n.translate("guidedOnboarding.dropdownPanel.backToGuidesLink",{defaultMessage:"Back to guides"}));return Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)("div",{css:y.setupButton},Object(l.jsx)(T,{isLoading:m,pluginState:j,guideConfig:x,toggleGuidePanel:w,isGuidePanelOpen:r,navigateToLandingPage:C})),r&&Object(l.jsx)(d.EuiFlyout,{ownFocus:!0,onClose:w,"aria-labelledby":"onboarding-guide",css:y.flyoutOverrides.flyoutContainer,maskProps:{headerZindexLocation:"above"},"data-test-subj":"guidePanel",maxWidth:480},x&&j&&"error"!==j.status?Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiFlyoutHeader,{css:y.flyoutOverrides.flyoutHeader},A,Object(l.jsx)(d.EuiTitle,{size:"m"},Object(l.jsx)("h2",{"data-test-subj":"guideTitle"},F?c.i18n.translate("guidedOnboarding.dropdownPanel.completeGuideFlyoutTitle",{defaultMessage:"Well done!"}):x.title)),Object(l.jsx)(d.EuiSpacer,{size:"s"}),Object(l.jsx)(d.EuiHorizontalRule,{margin:"s"})),Object(l.jsx)(d.EuiFlyoutBody,{css:y.flyoutOverrides.flyoutBody},Object(l.jsx)("div",null,F&&Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiImage,{size:"fullWidth",src:S?D.a:z.a,alt:c.i18n.translate("guidedOnboarding.dropdownPanel.wellDoneAnimatedGif",{defaultMessage:"Guide completed animated gif"})}),Object(l.jsx)(d.EuiSpacer,null)),Object(l.jsx)(d.EuiText,{size:"m"},Object(l.jsx)("p",{"data-test-subj":"guideDescription"},F?c.i18n.translate("guidedOnboarding.dropdownPanel.completeGuideFlyoutDescription",{defaultMessage:"You've completed the Elastic {guideName} guide. Feel free to come back to the Guides for more onboarding help or a refresher.",values:{guideName:x.guideName}}):x.description)),x.docs&&Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiSpacer,{size:"l"}),Object(l.jsx)(d.EuiText,{size:"m"},Object(l.jsx)(d.EuiLink,{external:!0,target:"_blank",href:x.docs.url},x.docs.text))),$>0&&Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(d.EuiSpacer,{size:"xl"}),Object(l.jsx)(d.EuiProgress,{"data-test-subj":"guideProgress",label:F?c.i18n.translate("guidedOnboarding.dropdownPanel.completedLabel",{defaultMessage:"Completed"}):c.i18n.translate("guidedOnboarding.dropdownPanel.progressLabel",{defaultMessage:"Progress"}),value:$,valueText:c.i18n.translate("guidedOnboarding.dropdownPanel.progressValueLabel",{defaultMessage:"{stepCount} steps",values:{stepCount:`${$} / ${x.steps.length}`}}),max:x.steps.length,size:"l"}),Object(l.jsx)(d.EuiSpacer,{size:"s"})),Object(l.jsx)(d.EuiHorizontalRule,null),null==x?void 0:x.steps.map(((e,t)=>{var i;const n=Object(d.htmlIdGenerator)(`accordion${t}`)(),s=null==j||null===(i=j.activeGuide)||void 0===i?void 0:i.steps[t];if(s)return Object(l.jsx)(b,{isLoading:m,accordionId:n,stepStatus:s.status,stepConfig:e,stepNumber:t+1,handleButtonClick:()=>_(s,e),key:n,telemetryGuideId:x.telemetryId})})),F&&Object(l.jsx)(d.EuiFlexGroup,{justifyContent:"flexEnd"},Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiButton,{isLoading:m,onClick:()=>(async n=>{try{if(await e.completeGuide(j.activeGuide.guideId),n){const{appID:e,path:i}=n;t.navigateToApp(e,{path:i})}}catch(e){i.toasts.addDanger({title:c.i18n.translate("guidedOnboarding.dropdownPanel.completeGuideError",{defaultMessage:"Unable to update the guide. Wait a moment and try again."}),text:e.message})}})(x.completedGuideRedirectLocation),fill:!0,"data-test-subj":`onboarding--completeGuideButton--${x.telemetryId}`},c.i18n.translate("guidedOnboarding.dropdownPanel.elasticButtonLabel",{defaultMessage:"Continue using Elastic"})))))),Object(l.jsx)(d.EuiFlyoutFooter,{css:y.flyoutOverrides.flyoutFooter},Object(l.jsx)(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center",gutterSize:"xs",responsive:!1,wrap:!0},Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiButtonEmpty,{iconType:"questionInCircle",iconSide:"right",href:"https://cloud.elastic.co/support ",target:"_blank",css:y.flyoutOverrides.flyoutFooterLink,iconSize:"m"},c.i18n.translate("guidedOnboarding.dropdownPanel.footer.support",{defaultMessage:"Need help?"}))),Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiText,{size:"xs",color:u.colors.disabled},"|")),Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiButtonEmpty,{iconType:"faceHappy",iconSide:"right",href:"https://www.elastic.co/kibana/feedback",target:"_blank",css:y.flyoutOverrides.flyoutFooterLink,iconSize:"s"},c.i18n.translate("guidedOnboarding.dropdownPanel.footer.feedback",{defaultMessage:"Give feedback"}))),Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiText,{size:"xs",color:u.colors.disabled},"|")),Object(l.jsx)(d.EuiFlexItem,{grow:!1},Object(l.jsx)(d.EuiButtonEmpty,{iconType:"exit",iconSide:"right",onClick:()=>{p(!1),f(!0)},"data-test-subj":"quitGuideButton",css:y.flyoutOverrides.flyoutFooterLink,iconSize:"s"},c.i18n.translate("guidedOnboarding.dropdownPanel.footer.exitGuideButtonLabel",{defaultMessage:"Quit guide"})))))):Object(l.jsx)(d.EuiFlyoutBody,null,A,R)),g&&Object(l.jsx)(E,{closeModal:()=>{f(!1)},currentGuide:j.activeGuide,telemetryGuideId:x.telemetryId,notifications:i}))};class plugin_GuidedOnboardingPlugin{constructor(){}setup(e){return{}}start(e,{cloud:t}){const{chrome:i,http:n,theme:s,application:a,notifications:o,uiSettings:u}=e;return w.setup(n,!(null==t||!t.isCloudEnabled)),null!=t&&t.isCloudEnabled&&i.navControls.registerExtension({order:1e3,mount:e=>this.mount({targetDomElement:e,theme$:s.theme$,api:w,application:a,notifications:o,uiSettings:u})}),{guidedOnboardingApi:w}}stop(){}mount({targetDomElement:e,theme$:t,api:i,application:n,notifications:a,uiSettings:o}){return s.a.render(Object(l.jsx)(r.KibanaThemeProvider,{theme$:t},Object(l.jsx)(u.I18nProvider,null,Object(l.jsx)(N,{api:i,application:n,notifications:a,uiSettings:o}))),e),()=>s.a.unmountComponentAtNode(e)}}function q(){return new plugin_GuidedOnboardingPlugin}}]);