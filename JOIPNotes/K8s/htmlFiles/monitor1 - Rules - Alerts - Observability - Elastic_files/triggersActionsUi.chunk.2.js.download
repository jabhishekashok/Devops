/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[2],{134:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(19),s=n(10);const a=(e,t)=>{const{rule:n}=e;switch(t.command.type){case"setRule":{const{key:n,value:r}=t.payload;return"rule"===n?{...e,rule:r}:e}case"setProperty":{const{key:s,value:a}=t.payload;return Object(r.isEqual)(n[s],a)?e:{...e,rule:{...n,[s]:a}}}case"setScheduleProperty":{const{key:s,value:a}=t.payload;return n.schedule&&Object(r.isEqual)(n.schedule[s],a)?e:{...e,rule:{...n,schedule:{...n.schedule,[s]:a}}}}case"setRuleParams":{const{key:s,value:a}=t.payload;return Object(r.isEqual)(n.params[s],a)?e:{...e,rule:{...n,params:{...n.params,[s]:a}}}}case"setRuleActionParams":{const{key:s,value:a,index:l}=t.payload;if(void 0===l||null==n.actions[l]||n.actions[l][s]&&Object(r.isEqual)(n.actions[l][s],a))return e;{const t=n.actions.splice(l,1)[0],r={...t,params:{...t.params,[s]:a}};return n.actions.splice(l,0,r),{...e,rule:{...n,actions:[...n.actions]}}}}case"setRuleActionFrequency":{const{key:l,value:i,index:o}=t.payload;if(void 0===o||null==n.actions[o]||n.actions[o][l]&&Object(r.isEqual)(n.actions[o][l],i))return e;{var a;const t=n.actions.splice(o,1)[0],r={...t,frequency:{...null!==(a=t.frequency)&&void 0!==a?a:s.DEFAULT_FREQUENCY,[l]:i}};return n.actions.splice(o,0,r),{...e,rule:{...n,actions:[...n.actions]}}}}case"setRuleActionProperty":{const{key:s,value:a,index:l}=t.payload;if(void 0===l||Object(r.isEqual)(n.actions[l][s],a))return e;{const t={...n.actions.splice(l,1)[0],[s]:a};return n.actions.splice(l,0,t),{...e,rule:{...n,actions:[...n.actions]}}}}}}},135:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return i}));var r=n(107),s=n(19);function a(e){return t=>{if(null==t)throw new Error(e);return t}}function l(e,t,n){const r="function"==typeof t?t:Object(s.constant)(t);return t=>{const s=new Set(t.map(n));for(const t of e.values())if(!s.has(t))throw new Error(r(t));return t}}function i(e,t,n,a){return Object.keys(t).forEach((n=>{t[n].length>=1&&void 0===Object(s.get)(e.params,n)&&Object(r.set)(e.params,n,null)})),Object.keys(n).forEach((t=>{n[t].length>=1&&void 0===Object(s.get)(e,t)&&Object(r.set)(e,t,null)})),a.forEach(((t,n)=>{const a=e.actions.length>n?e.actions[n]:null;a&&Object.keys(t).forEach((e=>{t[e].length>=1&&void 0===Object(s.get)(a.params,e)&&Object(r.set)(a.params,e,null)}))})),e}},153:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(19),s=n(2),a=n(14),l=n(98);function i(e,t,n){const r=t?t.validate(e.params).errors:[],i=function(e,t){const n={errors:{}},r={name:new Array,"schedule.interval":new Array,ruleTypeId:new Array,actionConnectors:new Array};n.errors=r,e.name||r.name.push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredNameText",{defaultMessage:"Name is required."})),e.schedule.interval.length<2?r["schedule.interval"].push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredIntervalText",{defaultMessage:"Check interval is required."})):t.minimumScheduleInterval&&t.minimumScheduleInterval.enforce&&Object(l.parseDuration)(e.schedule.interval)<Object(l.parseDuration)(t.minimumScheduleInterval.value)&&r["schedule.interval"].push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.belowMinimumText",{defaultMessage:"Interval must be at least {minimum}.",values:{minimum:Object(l.formatDuration)(t.minimumScheduleInterval.value,!0)}})),e.actions.filter((t=>{var n,r;const s=null!==(n=t.frequency)&&void 0!==n&&n.throttle?Object(l.parseDuration)(t.frequency.throttle):0,i=e.schedule.interval&&e.schedule.interval.length>1?Object(l.parseDuration)(e.schedule.interval):0;return(null===(r=t.frequency)||void 0===r?void 0:r.notifyWhen)===a.RuleNotifyWhen.THROTTLE&&s<i})).length&&r["schedule.interval"].push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.actionThrottleBelowSchedule",{defaultMessage:"Custom action intervals cannot be shorter than the rule's check interval"})),e.ruleTypeId||r.ruleTypeId.push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredRuleTypeIdText",{defaultMessage:"Rule type is required."}));const i=e.actions.find((e=>/^\d+$/.test(e.id)&&Object.keys(e.params).length>0));return void 0!==i&&r.actionConnectors.push(s.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.error.requiredActionConnector",{defaultMessage:"Action for {actionTypeId} connector is required.",values:{actionTypeId:i.actionTypeId}})),n}(e,n).errors;return{ruleParamsErrors:r,ruleBaseErrors:i,ruleErrors:{...r,...i}}}async function o(e,t){return await Promise.all(e.map((async e=>{var n;return(await(null===(n=t.get(e.actionTypeId))||void 0===n?void 0:n.validateParams(e.params))).errors})))}const u=e=>!!Object.values(e).find((e=>Object(r.isObject)(e)?u(e):e.length>=1));function c(e,t,n){return!u(t)&&n.every((e=>!u(e)))}},154:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n(1);var r=n(3),s=n(23),a=n(2),l=n(0);const i=({onConfirm:e,onCancel:t})=>Object(l.jsx)(r.EuiConfirmModal,{title:a.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseTitle",{defaultMessage:"Discard unsaved changes to rule?"}),onCancel:t,onConfirm:e,buttonColor:"danger",confirmButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseConfirmButtonText",{defaultMessage:"Discard changes"}),cancelButtonText:a.i18n.translate("xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseCancelButtonText",{defaultMessage:"Cancel"}),defaultFocusedButton:"confirm","data-test-subj":"confirmRuleCloseModal"},Object(l.jsx)("p",null,Object(l.jsx)(s.FormattedMessage,{id:"xpack.triggersActionsUI.sections.confirmRuleClose.confirmRuleCloseMessage",defaultMessage:"You can't recover unsaved changes."})))},155:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(70),s=n.n(r),a=n(19);const l=["tags","schedule","actions"];function i(e){const{name:t,ruleTypeId:n,throttle:r,notifyWhen:s}=e;return{...t&&t.length>0?{name:t}:{},...n&&n.length>0?{ruleTypeId:n}:{},...r&&r.length>0?{throttle:r}:{},...s&&s.length>0?{notifyWhen:s}:{}}}function o(e,t,n){let r=s()(Object(a.pick)(e,l),Object(a.pick)(t,l));n&&(r=r&&s()(e.params,t.params));const o=s()(i(e),i(t));return!r||!o}function u(e,t){return!s()(e,t)}},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return F}));var r=n(1),s=n.n(r),a=n(2),l=n(23),i=n(3),o=n(19),u=n(98),c=n(14),d=n(21),p=n(53),j=n(22),m=n(122),b=n(0);const g=({solutions:e,onChange:t})=>{const[n,s]=Object(r.useState)([]),[a,o]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{t&&t(n)}),[n]),Object(b.jsx)(i.EuiFilterGroup,null,Object(b.jsx)(i.EuiPopover,{isOpen:a,closePopover:()=>o(!1),button:Object(b.jsx)(i.EuiFilterButton,{iconType:"arrowDown",hasActiveFilters:n.length>0,numActiveFilters:n.length,numFilters:n.length,onClick:()=>o(!a),"data-test-subj":"solutionsFilterButton"},Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.solutionFilterLabel",defaultMessage:"Filter by use case"}))},Object(b.jsx)("div",{className:"euiFilterSelect__items"},[...e.entries()].map((([e,t])=>Object(b.jsx)(i.EuiFilterSelectItem,{key:e,onClick:()=>{const t=n.includes(e);s(t?n.filter((t=>t!==e)):[...n,e])},checked:n.includes(e)?"on":void 0,"data-test-subj":`solution${e}FilterOption`},t))))))};n(194);var x=n(25),y=n(4),h=n(152),f=n(10),O=n(64),v=n(73),I=n(165);const T=/^[1-9][0-9]*$/;function E(e,t){var n;return null===(n=t.find((t=>t.id===e)))||void 0===n?void 0:n.name}const F=({rule:e,config:t,canChangeTrigger:n=!0,dispatch:F,errors:A,setHasActionsDisabled:C,setHasActionsWithBrokenConnector:R,operation:S,ruleTypeRegistry:M,actionTypeRegistry:U,metadata:w,filteredRuleTypes:D,connectorFeatureId:z=d.AlertingConnectorFeatureId,onChangeMetaData:L})=>{var G,_,P;const{notifications:{toasts:q},docLinks:N,application:{capabilities:B},kibanaFeatures:W,charts:H,data:$,unifiedSearch:V,dataViews:Y}=Object(x.b)().services,K=Object(m.f)(B),[J,Q]=Object(r.useState)(null),X=Object(I.a)(null===(G=t.minimumScheduleInterval)||void 0===G?void 0:G.value),Z=Object(u.getDurationNumberInItsUnit)(X),ee=Object(u.getDurationUnitValue)(X),[te,ne]=Object(r.useState)(e.schedule.interval?Object(u.getDurationNumberInItsUnit)(e.schedule.interval):Z),[re,se]=Object(r.useState)(e.schedule.interval?Object(u.getDurationUnitValue)(e.schedule.interval):ee),[ae,le]=Object(r.useState)(void 0),[ie,oe]=Object(r.useState)([]),[ue,ce]=Object(r.useState)([]),[de,pe]=Object(r.useState)(),[je,me]=Object(r.useState)(),[be,ge]=Object(r.useState)(void 0),[xe,ye]=Object(r.useState)([]);let he=!1;const{ruleTypes:fe,error:Oe,ruleTypeIndex:ve,ruleTypesIsLoading:Ie}=Object(v.a)({filteredRuleTypes:D});Object(r.useEffect)((()=>{e.ruleTypeId&&null!=ve&&ve.has(e.ruleTypeId)&&le(ve.get(e.ruleTypeId).defaultActionGroupId);const t=(n=fe,M.list().reduce(((e,t)=>{const r=n.find((e=>t.id===e.id));return r&&e.push({ruleType:r,ruleTypeModel:t}),e}),[]).filter((t=>t.ruleType&&Object(m.a)(e.consumer,t.ruleType))).filter((t=>e.consumer===c.ALERTS_FEATURE_ID?!t.ruleTypeModel.requiresAppContext:t.ruleType.producer===e.consumer)));var n;oe(t);const r=t.reduce(((e,t)=>{var n;return e.has(t.ruleType.producer)||e.set(t.ruleType.producer,null!==(n=W?E(t.ruleType.producer,W):Object(o.capitalize)(t.ruleType.producer))&&void 0!==n?n:Object(o.capitalize)(t.ruleType.producer)),e}),new Map);ge(new Map([...r.entries()].sort((([,e],[,t])=>e.localeCompare(t)))))}),[fe,ve,e.ruleTypeId,W,e.consumer,M]),Object(r.useEffect)((()=>{Oe&&q.addDanger({title:a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.unableToLoadRuleTypesMessage",{defaultMessage:"Unable to load rule types"})})}),[Oe,q]),Object(r.useEffect)((()=>{Q(e.ruleTypeId?M.get(e.ruleTypeId):null),e.ruleTypeId&&ve&&ve.has(e.ruleTypeId)&&le(ve.get(e.ruleTypeId).defaultActionGroupId)}),[e,e.ruleTypeId,ve,M]),Object(r.useEffect)((()=>{if(e.schedule.interval){const t=Object(u.getDurationNumberInItsUnit)(e.schedule.interval),n=Object(u.getDurationUnitValue)(e.schedule.interval);ne(t),se(n)}}),[e.schedule.interval,Z,ee]);const Te=Object(r.useCallback)(((e,t)=>{F({command:{type:"setProperty"},payload:{key:e,value:t}})}),[F]),Ee=Object(r.useCallback)((e=>Te("actions",e)),[Te]),Fe=(e,t)=>{F({command:{type:"setScheduleProperty"},payload:{key:e,value:t}})},ke=(e,t,n)=>{F({command:{type:"setRuleActionProperty"},payload:{key:e,value:t,index:n}})},Ae=Object(r.useCallback)(((e,t,n)=>{F({command:{type:"setRuleActionParams"},payload:{key:e,value:t,index:n}})}),[F]),Ce=Object(r.useCallback)(((e,t,n)=>{F({command:{type:"setRuleActionFrequency"},payload:{key:e,value:t,index:n}})}),[F]);Object(r.useEffect)((()=>{const e=de?de.trim().toLocaleLowerCase():null;ce(ie.filter((e=>xe.length>0?xe.find((t=>e.ruleType.producer===t)):e)).filter((t=>e?t.ruleType.name.toString().toLocaleLowerCase().includes(e)||t.ruleType.producer.toLocaleLowerCase().includes(e)||t.ruleTypeModel.description.toLocaleLowerCase().includes(e):t)))}),[M,ie,de,JSON.stringify(xe)]);const Re=null!=e&&e.ruleTypeId?null==ve?void 0:ve.get(null==e?void 0:e.ruleTypeId):void 0,Se=null==Re||null===(_=Re.recoveryActionGroup)||void 0===_?void 0:_.id,Me=e.tags?e.tags.map((e=>({label:e}))):[],Ue=Object(r.useCallback)(((e,t,n)=>{var r;return Object(c.isActionGroupDisabledForActionTypeId)(t===(null==e||null===(r=e.recoveryActionGroup)||void 0===r?void 0:r.id)?c.RecoveredActionGroup.id:t,n)}),[]),we=J?J.ruleParamsExpression:null,De=ue.reduce(((e,t)=>{const n=t.ruleType.producer;if(n){const r=Object(h.a)(t.ruleType);r.isEnabled||(he=!0),(e[n]=e[n]||[]).push({name:t.ruleType.name,id:t.ruleTypeModel.id,checkEnabledResult:r,ruleTypeItem:t.ruleTypeModel})}return e}),{}),ze=Object.entries(De).sort(((e,t)=>function(e,t,n){const r=e[0],s=t[0],a=e[1],l=t[1],i=void 0!==a.find((e=>e.checkEnabledResult.isEnabled)),o=void 0!==l.find((e=>e.checkEnabledResult.isEnabled));return i&&!o?-1:!i&&o?1:n?n.get(r).localeCompare(n.get(s)):r.localeCompare(s)}(e,t,be))).map((([e,t],n)=>{var s;return Object(b.jsx)(r.Fragment,{key:`group${n}`},Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"none",alignItems:"center",className:"triggersActionsUI__ruleTypeNodeHeading"},Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiTitle,{"data-test-subj":`ruleType${n}Group`,size:"xxxs",textTransform:"uppercase"},Object(b.jsx)(i.EuiTextColor,{color:"subdued"},null!==(s=W?E(e,W):Object(o.capitalize)(e))&&void 0!==s?s:Object(o.capitalize)(e)))),Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiNotificationBadge,{color:"subdued"},t.length))),Object(b.jsx)(i.EuiHorizontalRule,{size:"full",margin:"xs"}),Object(b.jsx)(i.EuiListGroup,{flush:!0,gutterSize:"m",size:"m",maxWidth:!1},t.sort(((e,t)=>function(e,t){return!0===e.checkEnabledResult.isEnabled&&!1===t.checkEnabledResult.isEnabled?-1:!1===e.checkEnabledResult.isEnabled&&!0===t.checkEnabledResult.isEnabled?1:e.name.localeCompare(t.name)}(e,t))).map(((e,t)=>{const n=Object(b.jsx)("span",null,Object(b.jsx)("strong",null,e.name),Object(b.jsx)(i.EuiText,{color:"subdued",size:"s"},Object(b.jsx)("p",null,e.ruleTypeItem.description)));return Object(b.jsx)(i.EuiListGroupItem,{wrapText:!0,key:t,"data-test-subj":`${e.id}-SelectOption`,color:"primary",label:e.checkEnabledResult.isEnabled?n:Object(b.jsx)(i.EuiToolTip,{position:"top","data-test-subj":`${e.id}-disabledTooltip`,content:e.checkEnabledResult.message},n),isDisabled:!e.checkEnabledResult.isEnabled,onClick:()=>{Te("ruleTypeId",e.id),Q(e.ruleTypeItem),Ee([]),Te("params",{}),ve&&ve.has(e.id)&&le(ve.get(e.id).defaultActionGroupId)}})}))),Object(b.jsx)(i.EuiSpacer,null))})),Le=[a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkFieldLabel",{defaultMessage:"Check every"}),Object(b.jsx)(i.EuiIconTip,{position:"right",type:"questionInCircle",content:a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkWithTooltip",{defaultMessage:"Define how often to evaluate the condition. Checks are queued; they run as close to the defined value as capacity allows."})})],Ge=Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(i.EuiHorizontalRule,null),Object(b.jsx)(i.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiTitle,{size:"s","data-test-subj":"selectedRuleTypeTitle"},Object(b.jsx)("h5",{id:"selectedRuleTypeTitle"},e.ruleTypeId&&ve&&ve.has(e.ruleTypeId)?ve.get(e.ruleTypeId).name:""))),n?Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(i.EuiButtonIcon,{iconType:"cross",color:"danger","aria-label":a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.changeRuleTypeAriaLabel",{defaultMessage:"Delete"}),onClick:()=>{Te("ruleTypeId",null),Q(null),Te("params",{})}})):null),(null==J?void 0:J.description)&&Object(b.jsx)(i.EuiFlexGroup,null,Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiText,{color:"subdued",size:"s","data-test-subj":"ruleDescription"},J.description," ",(null==J?void 0:J.documentationUrl)&&Object(b.jsx)(i.EuiLink,{external:!0,target:"_blank","data-test-subj":"ruleDocumentationLink",href:"function"==typeof J.documentationUrl?J.documentationUrl(N):J.documentationUrl},Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.documentationLabel",defaultMessage:"Learn more"}))))),Object(b.jsx)(i.EuiHorizontalRule,null),we&&ae&&e.ruleTypeId&&Re?Object(b.jsx)(i.EuiErrorBoundary,null,Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(O.a,null,Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.loadingRuleTypeParamsDescription",defaultMessage:"Loading rule type params…"}))},Object(b.jsx)(we,{ruleParams:e.params,ruleInterval:`${null!=te?te:1}${re}`,ruleThrottle:"",alertNotifyWhen:null!==(P=e.notifyWhen)&&void 0!==P?P:"onActionGroupChange",errors:A,setRuleParams:(e,t)=>{F({command:{type:"setRuleParams"},payload:{key:e,value:t}})},setRuleProperty:Te,defaultActionGroupId:ae,actionGroups:Re.actionGroups,metadata:w,charts:H,data:$,dataViews:Y,unifiedSearch:V,onChangeMetaData:L}))):null,Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiFormRow,{fullWidth:!0,"data-test-subj":"intervalFormRow",display:"rowCompressed",helpText:t&&t.minimumScheduleInterval?A["schedule.interval"].length>0?"":t.minimumScheduleInterval.enforce?a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkEveryHelpText",{defaultMessage:"Interval must be at least {minimum}.",values:{minimum:Object(u.formatDuration)(t.minimumScheduleInterval.value,!0)}}):e.schedule.interval&&Object(u.parseDuration)(e.schedule.interval)<Object(u.parseDuration)(t.minimumScheduleInterval.value)?a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.checkEveryHelpSuggestionText",{defaultMessage:"Intervals less than {minimum} are not recommended due to performance considerations.",values:{minimum:Object(u.formatDuration)(t.minimumScheduleInterval.value,!0)}}):"":"",isInvalid:A["schedule.interval"].length>0,error:A["schedule.interval"]},Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(i.EuiFlexItem,{grow:2},Object(b.jsx)(i.EuiFieldNumber,{prepend:Le,fullWidth:!0,min:1,isInvalid:A["schedule.interval"].length>0,value:te||"",name:"interval","data-test-subj":"intervalInput",onChange:e=>{const t=e.target.value;if(""===t||T.test(t)){const e=""===t?"":parseInt(t,10);ne(e||void 0),Fe("interval",`${e}${re}`)}}})),Object(b.jsx)(i.EuiFlexItem,{grow:3},Object(b.jsx)(i.EuiSelect,{fullWidth:!0,value:re,options:Object(p.b)(null!=te?te:1),onChange:e=>{se(e.target.value),Fe("interval",`${te}${e.target.value}`)},"data-test-subj":"intervalInputUnit"}))))),Object(b.jsx)(i.EuiSpacer,{size:"l"}),K&&ae&&J&&e.ruleTypeId&&Re?Object(b.jsx)(s.a.Fragment,null,A.actionConnectors.length>=1?Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(i.EuiSpacer,null),Object(b.jsx)(i.EuiCallOut,{color:"danger",size:"s",title:A.actionConnectors}),Object(b.jsx)(i.EuiSpacer,null)):null,Object(b.jsx)(i.EuiSpacer,{size:"m"}),Object(b.jsx)(j.a,{actions:e.actions,setHasActionsDisabled:C,setHasActionsWithBrokenConnector:R,messageVariables:Re.actionVariables,defaultActionGroupId:ae,hasSummary:Re.hasGetSummarizedAlerts,featureId:z,isActionGroupDisabledForActionType:(e,t)=>Ue(Re,e,t),actionGroups:Re.actionGroups.map((e=>e.id===Re.recoveryActionGroup.id?{...e,omitMessageVariables:Re.doesSetRecoveryContext?"keepContext":"all",defaultActionMessage:(null==J?void 0:J.defaultRecoveryMessage)||y.q}:{...e,defaultActionMessage:null==J?void 0:J.defaultActionMessage})),recoveryActionGroup:Se,setActionIdByIndex:(e,t)=>ke("id",e,t),setActionGroupIdByIndex:(e,t)=>ke("group",e,t),setActions:Ee,setActionParamsProperty:Ae,actionTypeRegistry:U,setActionFrequencyProperty:Ce,defaultSummaryMessage:(null==J?void 0:J.defaultSummaryMessage)||y.w,minimumThrottleInterval:[te,re]})):null);return Object(b.jsx)(i.EuiForm,null,Object(b.jsx)(i.EuiFlexGrid,{columns:1},Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiFormRow,{fullWidth:!0,id:"ruleName",label:Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.ruleNameLabel",defaultMessage:"Name"}),isInvalid:A.name.length>0&&void 0!==e.name,error:A.name},Object(b.jsx)(i.EuiFieldText,{fullWidth:!0,autoFocus:!0,isInvalid:A.name.length>0&&void 0!==e.name,name:"name","data-test-subj":"ruleNameInput",value:e.name||"",onChange:e=>{Te("name",e.target.value)},onBlur:()=>{e.name||Te("name","")}}))),Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiFormRow,{fullWidth:!0,label:a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.tagsFieldLabel",{defaultMessage:"Tags (optional)"})},Object(b.jsx)(i.EuiComboBox,{noSuggestions:!0,fullWidth:!0,"data-test-subj":"tagsComboBox",selectedOptions:Me,onCreateOption:e=>{const t=[...Me,{label:e}];Te("tags",t.map((e=>e.label)))},onChange:e=>{Te("tags",e.map((e=>e.label)))},onBlur:()=>{e.tags||Te("tags",[])}})))),Object(b.jsx)(i.EuiSpacer,{size:"m"}),J?Object(b.jsx)(s.a.Fragment,null,Ge):ie.length?Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(i.EuiHorizontalRule,null),Object(b.jsx)(i.EuiFormRow,{fullWidth:!0,labelAppend:he&&Object(b.jsx)(i.EuiTitle,{size:"xxs"},Object(b.jsx)(i.EuiLink,{href:f.VIEW_LICENSE_OPTIONS_LINK,target:"_blank",external:!0,className:"actActionForm__getMoreActionsLink"},Object(b.jsx)(l.FormattedMessage,{defaultMessage:"Get more rule types",id:"xpack.triggersActionsUI.sections.actionForm.getMoreRuleTypesTitle"}))),label:Object(b.jsx)(i.EuiTitle,{size:"xxs"},Object(b.jsx)("h5",null,Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.ruleTypeSelectLabel",defaultMessage:"Select rule type"})))},Object(b.jsx)(i.EuiFlexGroup,{gutterSize:"s"},Object(b.jsx)(i.EuiFlexItem,null,Object(b.jsx)(i.EuiFieldSearch,{fullWidth:!0,"data-test-subj":"ruleSearchField",onChange:e=>{me(e.target.value),""===e.target.value&&pe("")},onKeyUp:e=>{13===e.keyCode&&pe(je)},placeholder:a.i18n.translate("xpack.triggersActionsUI.sections.ruleForm.searchPlaceholderTitle",{defaultMessage:"Search"})})),be?Object(b.jsx)(i.EuiFlexItem,{grow:!1},Object(b.jsx)(g,{key:"solution-filter",solutions:be,onChange:e=>ye(e)})):null)),Object(b.jsx)(i.EuiSpacer,null),A.ruleTypeId.length>=1&&void 0!==e.ruleTypeId?Object(b.jsx)(s.a.Fragment,null,Object(b.jsx)(i.EuiSpacer,null),Object(b.jsx)(i.EuiCallOut,{color:"danger",size:"s",title:A.ruleTypeId}),Object(b.jsx)(i.EuiSpacer,null)):null,ze):ve&&!Ie?Object(b.jsx)(k,{operation:S}):Object(b.jsx)(O.a,null,Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.loadingRuleTypesDescription",defaultMessage:"Loading rule types…"})))},k=({operation:e})=>Object(b.jsx)(i.EuiEmptyPrompt,{iconType:"lock","data-test-subj":"noAuthorizedRuleTypesPrompt",titleSize:"xs",title:Object(b.jsx)("h2",null,Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.error.noAuthorizedRuleTypesTitle",defaultMessage:"You have not been authorized to {operation} any rule types",values:{operation:e}})),body:Object(b.jsx)("div",null,Object(b.jsx)("p",{role:"banner"},Object(b.jsx)(l.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleForm.error.noAuthorizedRuleTypes",defaultMessage:"In order to {operation} a Rule you need to have been granted the appropriate privileges.",values:{operation:e}})))})},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(14),s=n(4);function a(e){return e&&Object(r.parseDuration)(e)>Object(r.parseDuration)(s.e)?e:s.e}},194:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(195);case"v8light":return n(197)}},195:function(e,t,n){var r=n(59),s=n(196);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},196:function(e,t,n){(t=n(60)(!1)).push([e.i,".triggersActionsUI__ruleTypeNodeHeading{margin-left:8px;margin-right:8px}",""]),e.exports=t},197:function(e,t,n){var r=n(59),s=n(198);"string"==typeof(s=s.__esModule?s.default:s)&&(s=[[e.i,s,""]]);r(s,{insert:"head",singleton:!1}),e.exports=s.locals||{}},198:function(e,t,n){(t=n(60)(!1)).push([e.i,".triggersActionsUI__ruleTypeNodeHeading{margin-left:8px;margin-right:8px}",""]),e.exports=t}}]);