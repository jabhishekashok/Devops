/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[9],{132:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(1);const a=Object(s.createContext)([{rowSelection:new Map,isAllSelected:!1,areAllVisibleRowsSelected:!1,rowCount:0},()=>{}])},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));const s=[{"@timestamp":{order:"asc"}}]},160:function(e,t,n){"use strict";n.d(t,"b",(function(){return M})),n.d(t,"a",(function(){return L}));var s=n(3),a=n(1),o=n.n(a),i=n(96),r=n(100),l=n(0);const c=i.euiStyled.div`
  width: 100%;
  display: flex;
  flex-grow: 1;

  > * {
    max-width: 100%;
  }

  ${({targetClassNames:e,theme:t})=>`\n      ${e.map((e=>`.${e}`)).join(", ")} {\n        pointer-events: none;\n        opacity: 0;\n        transition: opacity ${Object(r.getOr)(250,"eui.euiAnimSpeedNormal",t)} ease;\n      }\n\n      ${e.map((e=>`&:hover .${e}`)).join(", ")} {\n        pointer-events: auto;\n        opacity: 1;\n      }\n    `}
`,u=o.a.memo((({hide:e,targetClassNames:t,children:n})=>e?Object(l.jsx)(o.a.Fragment,null,n):Object(l.jsx)(c,{"data-test-subj":"hoverVisibilityContainer",targetClassNames:t},n)));u.displayName="HoverVisibilityContainer";var d=n(38),g=n.n(d),p=n(19),b=n(2);const j=b.i18n.translate("xpack.triggersActionsUI.inspectDescription",{defaultMessage:"Inspect"}),m=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.closeTitle",{defaultMessage:"Close"}),f=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.somethingWentWrongDescription",{defaultMessage:"Sorry about that, something went wrong."}),x=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.indexPatternLabel",{defaultMessage:"Index pattern"}),h=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.indexPatternDescription",{defaultMessage:"The index pattern that connected to the Elasticsearch indices. These indices can be configured in Kibana > Advanced Settings."}),C=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.queryTimeLabel",{defaultMessage:"Query time"}),O=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.queryTimeDescription",{defaultMessage:"The time it took to process the query. Does not include the time to send the request or parse it in the browser."}),A=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.reqTimestampLabel",{defaultMessage:"Request timestamp"}),I=b.i18n.translate("xpack.triggersActionsUI.inspect.modal.reqTimestampDescription",{defaultMessage:"Time when the start of the request has been logged"}),w=Object(i.euiStyled)(s.EuiDescriptionList)`
  @media only screen and (min-width: ${({theme:e})=>e.eui.euiBreakpoints.s}) {
    .euiDescriptionList__title {
      width: 30% !important;
    }

    .euiDescriptionList__description {
      width: 70% !important;
    }
  }
`;w.displayName="DescriptionListStyled";const S=Object(i.euiStyled)(s.EuiModal)`
  width: min(768px, calc(100vw - 16px));
  min-height: 41vh;
  .euiModal__flex {
    width: 60vw;
  }
  .euiCodeBlock {
    height: auto !important;
    max-width: 718px;
  }
`;S.displayName="MyEuiModal";const v=function(e){try{return JSON.parse(e)}catch{return{}}},y=e=>{try{return JSON.stringify(e,null,2)}catch{return f}},k=({closeModal:e,getInspectQuery:t})=>{var n,a;const{request:i,response:r}=t(),c=v(i[0]),u=v(r[0]),d=y(c),b=y(u),k=[{title:Object(l.jsx)("span",{"data-test-subj":"index-pattern-title"},x," ",Object(l.jsx)(s.EuiIconTip,{color:"subdued",content:h,type:"iInCircle"})),description:Object(l.jsx)("span",{"data-test-subj":"index-pattern-description"},Object(l.jsx)("p",null,null!==(n=null===(a=c.index)||void 0===a?void 0:a.join(", "))&&void 0!==n?n:[]))},{title:Object(l.jsx)("span",{"data-test-subj":"query-time-title"},C," ",Object(l.jsx)(s.EuiIconTip,{color:"subdued",content:O,type:"iInCircle"})),description:Object(l.jsx)("span",{"data-test-subj":"query-time-description"},0===u.took?"0ms":u.took?`${g()(u.took).format("0,0")}ms`:f)},{title:Object(l.jsx)("span",{"data-test-subj":"request-timestamp-title"},A," ",Object(l.jsx)(s.EuiIconTip,{color:"subdued",content:I,type:"iInCircle"})),description:Object(l.jsx)("span",{"data-test-subj":"request-timestamp-description"},(new Date).toISOString())}],T=[{id:"statistics",name:"Statistics",content:Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(s.EuiSpacer,null),Object(l.jsx)(w,{listItems:k,type:"column"}))},{id:"request",name:"Request",content:Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(s.EuiSpacer,null),Object(l.jsx)(s.EuiCodeBlock,{language:"js",fontSize:"m",paddingSize:"m",color:"dark",overflowHeight:300,isCopyable:!0},Object(p.isEmpty)(c)?f:d))},{id:"response",name:"Response",content:Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(s.EuiSpacer,null),Object(l.jsx)(s.EuiCodeBlock,{language:"js",fontSize:"m",paddingSize:"m",color:"dark",overflowHeight:300,isCopyable:!0},Object(p.isEmpty)(u)?f:b))}];return Object(l.jsx)(S,{onClose:e,"data-test-subj":"modal-inspect-euiModal"},Object(l.jsx)(s.EuiModalHeader,null,Object(l.jsx)(s.EuiModalHeaderTitle,null,j)),Object(l.jsx)(s.EuiModalBody,null,Object(l.jsx)(s.EuiTabbedContent,{tabs:T,initialSelectedTab:T[0],autoFocus:"selected"})),Object(l.jsx)(s.EuiModalFooter,null,Object(l.jsx)(s.EuiButton,{onClick:e,fill:!0,"data-test-subj":"modal-inspect-close"},m)))},T=o.a.memo(k),E="inspectButtonComponent",M=({children:e,hide:t})=>Object(l.jsx)(u,{hide:t,targetClassNames:[E]},e),z=({getInspectQuery:e})=>{const[t,n]=Object(a.useState)(!1);return Object(l.jsx)(o.a.Fragment,null,Object(l.jsx)(s.EuiButtonIcon,{className:E,"aria-label":j,"data-test-subj":"inspect-icon-button",iconSize:"m",iconType:"inspect",title:j,onClick:()=>{n(!0)}}),t&&Object(l.jsx)(T,{closeModal:()=>{n(!1)},"data-test-subj":"inspect-modal",getInspectQuery:e}))};z.displayName="InspectButtonComponent";const L=o.a.memo(z)},166:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var s=n(70),a=n.n(s),o=n(19),i=n(1),r=n(108),l=n(115),c=n(25),u=n(156),d=n(176);const g={loading:!1,request:{featureIds:[],fields:[],query:{bool:{}},pagination:{pageIndex:0,pageSize:50},sort:u.a},response:{alerts:[],totalAlerts:-1,isInitializing:!0,updatedAt:0}};function p(e,t){switch(t.type){case"loading":return{...e,loading:t.loading};case"response":return{...e,loading:!1,response:{isInitializing:!1,alerts:t.alerts,totalAlerts:t.totalAlerts,updatedAt:Date.now()}};case"resetPagination":return{...e,request:{...e.request,pagination:{...e.request.pagination,pageIndex:0}}};case"request":return{...e,request:t.request};default:throw new Error}}const b=({featureIds:e,fields:t,query:n,pagination:s,skip:u,sort:b})=>{const j=Object(i.useRef)(o.noop),m=Object(i.useRef)(new AbortController),f=Object(i.useRef)(new r.Subscription),[{loading:x,request:h,response:C},O]=Object(i.useReducer)(p,g),A=Object(i.useRef)(null),I=Object(i.useRef)({request:[],response:[]}),{data:w}=Object(c.b)().services,S=Object(i.useCallback)((()=>I.current),[]),v=Object(i.useCallback)((()=>{var e,t,n;0!==(null!==(e=null===(t=A.current)||void 0===t||null===(n=t.pagination)||void 0===n?void 0:n.pageIndex)&&void 0!==e?e:0)?O({type:"resetPagination"}):j.current()}),[]),y=Object(i.useCallback)((t=>{if(null==t||u)return;const s=async()=>{A.current=t,m.current=new AbortController,O({type:"loading",loading:!0}),w&&w.search&&(f.current=w.search.search({...t,featureIds:e,fields:void 0,query:n},{strategy:"privateRuleRegistryAlertsSearchStrategy",abortSignal:m.current.signal}).subscribe({next:e=>{if(Object(l.isCompleteResponse)(e)){var t,n,s;const{rawResponse:i}=e;I.current={request:null!==(t=null==e||null===(n=e.inspect)||void 0===n?void 0:n.dsl)&&void 0!==t?t:[],response:null!==(s=[JSON.stringify(i)])&&void 0!==s?s:[]};let r=0;if(i.hits.total&&"number"==typeof i.hits.total)r=i.hits.total;else if(i.hits.total&&"object"==typeof i.hits.total){var a,o;r=null!==(a=null===(o=i.hits.total)||void 0===o?void 0:o.value)&&void 0!==a?a:0}O({type:"response",alerts:i.hits.hits.reduce(((e,t)=>(t.fields&&e.push({...t.fields,_id:t._id,_index:t._index}),e)),[]),totalAlerts:r}),f.current.unsubscribe()}else Object(l.isErrorResponse)(e)&&(O({type:"loading",loading:!1}),w.search.showError(new Error(d.a)),f.current.unsubscribe())},error:e=>{O({type:"loading",loading:!1}),w.search.showError(e),f.current.unsubscribe()}}))};f.current.unsubscribe(),m.current.abort(),s(),j.current=s}),[u,w,e,n]);return Object(i.useEffect)((()=>{if(0===e.length)return;const o={featureIds:e,fields:t,pagination:s,query:n,sort:b};o.fields.length>0&&!a()(o,A.current)&&O({type:"request",request:o})}),[e,t,s,n,b]),Object(i.useEffect)((()=>{h.featureIds.length>0&&!a()(h,A.current)&&y(h)}),[h,y]),[x,Object(i.useMemo)((()=>({...C,getInspectQuery:S,refetch:v})),[C,S,v])]}},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var s=n(9),a=n.n(s),o=n(1),i=n(2),r=n(3),l=n(32),c=n(0);const u=i.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.activeLabel",{defaultMessage:"Active"}),d=i.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.recoveredLabel",{defaultMessage:"Recovered"}),g=i.i18n.translate("alertsUIShared.components.alertLifecycleStatusBadge.flappingLabel",{defaultMessage:"Flapping"}),p=Object(o.memo)((e=>{const{alertStatus:t,flapping:n}=e,s=(e=>"string"==typeof e?"true"===e:e)(n),{label:o,color:i,iconProps:p}=((e,t)=>e===l.N?{label:d,color:"success"}:t?{label:g,color:"danger",iconProps:{iconType:"visGauge"}}:{label:u,color:"danger"})(t,s);return Object(c.jsx)(r.EuiBadge,a()({"data-test-subj":"alertLifecycleStatusBadge",color:i},p),o)}))},176:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var s=n(2);const a=s.i18n.translate("xpack.triggersActionsUI.components.alertTable.useFetchAlerts.errorMessageText",{defaultMessage:"An error has occurred on alerts search"}),o=s.i18n.translate("xpack.triggersActionsUI.components.alertTable.useFetchBrowserFieldsCapabilities.errorMessageText",{defaultMessage:"An error has occurred loading browser fields"})},177:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var s=n(2);const a=(e,t)=>s.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.selectedAlertsTitle",{values:{selectedAlertsFormatted:e,selectedAlerts:t},defaultMessage:"Selected {selectedAlertsFormatted} {selectedAlerts, plural, =1 {alert} other {alerts}}"}),o=(e,t)=>s.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.selectAllAlertsTitle",{values:{totalAlertsFormatted:e,totalAlerts:t},defaultMessage:"Select all {totalAlertsFormatted} {totalAlerts, plural, =1 {alert} other {alerts}}"}),i=s.i18n.translate("xpack.triggersActionsUI.toolbar.bulkActions.clearSelectionTitle",{defaultMessage:"Clear selection"}),r=s.i18n.translate("xpack.triggersActionsUI.bulkActions.columnHeader.AriaLabel",{defaultMessage:"Select all rows"})},178:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return r}));var s=n(2);const a=s.i18n.translate("xpack.triggersActionsUI.alertsTable.configuration.errorTitle",{defaultMessage:"Unable to load alerts table"}),o=s.i18n.translate("xpack.triggersActionsUI.alertsTable.configuration.errorBody",{defaultMessage:"There was an error loading the alerts table. This table is missing the necessary configuration. Please contact your administrator for help"}),i=s.i18n.translate("xpack.triggersActionsUI.sections.alertsTable.column.actions",{defaultMessage:"Actions"}),r=s.i18n.translate("xpack.triggersActionsUI.sections.alertsTable.leadingControl.viewDetails",{defaultMessage:"View details"})},204:function(e,t,n){switch(window.__kbnThemeTag__){case"v8dark":return n(205);case"v8light":return n(207)}},205:function(e,t,n){var s=n(59),a=n(206);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);s(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},206:function(e,t,n){(t=n(60)(!1)).push([e.i,".alertsTableActiveRow{background-color:#343741}",""]),e.exports=t},207:function(e,t,n){var s=n(59),a=n(208);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);s(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},208:function(e,t,n){(t=n(60)(!1)).push([e.i,".alertsTableActiveRow{background-color:#e9edf3}",""]),e.exports=t},279:function(e,t,n){"use strict";n.r(t),n.d(t,"ACTIVE_ROW_CLASS",(function(){return z})),n.d(t,"AlertsTable",(function(){return F})),n.d(t,"default",(function(){return F}));var s=n(32),a=n(1),o=n.n(a),i=n(3),r=n(18),l=n(132),c=n(156);n(166);var u=n(177),d=n(0);const g=()=>{const[{isAllSelected:e,areAllVisibleRowsSelected:t},n]=Object(a.useContext)(l.a);return Object(d.jsx)(i.EuiCheckbox,{id:"selection-toggle","aria-label":u.b,checked:e||t,onChange:e=>{e.target.checked?n({action:r.g.selectCurrentPage}):n({action:r.g.clear})},"data-test-subj":"bulk-actions-header"})},p=o.a.memo(g),b=({rowIndex:e})=>{var t;const[{rowSelection:n},s]=Object(a.useContext)(l.a),o=n.has(e);return o&&(null===(t=n.get(e))||void 0===t?void 0:t.isLoading)?Object(d.jsx)(i.EuiLoadingSpinner,{size:"m","data-test-subj":"row-loader"}):Object(d.jsx)(i.EuiCheckbox,{id:e.toString(),checked:o,onChange:t=>{t.target.checked?s({action:r.g.add,rowIndex:e}):s({action:r.g.delete,rowIndex:e})},"data-test-subj":"bulk-actions-row-cell"})},j=o.a.memo(b),m=()=>({id:"bulkActions",width:30,headerCellRender:()=>Object(d.jsx)(p,null),rowCellRender:e=>{const{visibleRowIndex:t}=e;return Object(d.jsx)(j,{rowIndex:t})}}),f=75;var x=n(178),h=n(175),C=(n(204),n(2));const O=({count:e})=>{const{euiTheme:t}=Object(i.useEuiTheme)(),n=Object(a.useMemo)((()=>{return`${e.toLocaleString()} ${t=e,C.i18n.translate("xpack.triggersActionsUI.alertsTable.alertsCountUnit",{values:{totalCount:t},defaultMessage:"{totalCount, plural, =1 {alert} other {alerts}}"})}`;var t}),[e]);return Object(d.jsx)("span",{"data-test-subj":"toolbar-alerts-count",css:Object(d.css)("font-size:",t.size.m,";font-weight:",t.font.weight.semiBold,";border-right:",t.border.thin,";margin-right:",t.size.s,";padding-right:",t.size.m,";","")},n)};var A=n(23);const I=C.i18n.translate("xpack.triggersActionsUI.alertsTable.lastUpdated.updating",{defaultMessage:"Updating..."}),w=C.i18n.translate("xpack.triggersActionsUI.alertsTable.lastUpdated.updated",{defaultMessage:"Updated"}),S=o.a.memo((({date:e,prefix:t,updatedAt:n})=>Object(d.jsx)(o.a.Fragment,null,t,Object(d.jsx)(A.FormattedRelative,{"data-test-subj":"last-updated-at-date",key:`formatedRelative-${e}`,value:new Date(n)}))));S.displayName="Updated";const v=` ${w} `,y=o.a.memo((({compact:e=!1,updatedAt:t,showUpdating:n=!1})=>{const[s,o]=Object(a.useState)(Date.now());Object(a.useEffect)((()=>{const e=setInterval((()=>{o(Date.now())}),1e4);return()=>{clearInterval(e)}}),[]);const r=Object(a.useMemo)((()=>n?Object(d.jsx)("span",null," ",I):e?null:Object(d.jsx)(S,{date:s,prefix:v,updatedAt:t})),[e,s,n,t]);return Object(d.jsx)(i.EuiToolTip,{content:Object(d.jsx)(S,{date:s,prefix:v,updatedAt:t})},Object(d.jsx)(i.EuiText,{color:"subdued",size:"xs","data-test-subj":"toolbar-updated-at"},r))}));y.displayName="LastUpdatedAt";var k=n(278),T=n(160);const E=Object(a.lazy)((()=>n.e(49).then(n.bind(null,293)))),M=({controls:e,updatedAt:t,getInspectQuery:n,showInspectButton:s})=>Object(d.jsx)(o.a.Fragment,null,s&&Object(d.jsx)(T.a,{getInspectQuery:n}),Object(d.jsx)(y,{updatedAt:t}),null==e?void 0:e.right),z="alertsTableActiveRow",L=Object(a.lazy)((()=>n.e(45).then(n.bind(null,298)))),R={border:"none",header:"underline",fontSize:"s"},B=({data:e,columnId:t})=>{var n,s;const a=null!==(n=null===(s=e.find((e=>e.field===t)))||void 0===s?void 0:s.value)&&void 0!==n?n:[];return Array.isArray(a)?Object(d.jsx)(o.a.Fragment,null,a.length?a.join():"--"):Object(d.jsx)(o.a.Fragment,null,a)},F=e=>{const[t,n]=Object(a.useState)({}),u=e.useFetchAlertsData(),{activePage:g,alerts:p,alertsCount:b,isLoading:j,onPageChange:C,onSortChange:A,sort:I,getInspectQuery:w}=u,{sortingColumns:S,onSort:v}=function(e,t=c.a){const[n,s]=Object(a.useState)((e=>{const t=[];return e.forEach((e=>{Object.entries(e).forEach((([e,n])=>{t.push({id:e,direction:n.order})}))})),t})(t));return{sortingColumns:n,onSort:Object(a.useCallback)((t=>{e(t),s(t)}),[s,e])}}(A,I),{renderCustomActionsRow:y,actionsColumnWidth:F,getSetIsActionLoadingCallback:U}=(({options:e})=>{const[,t]=Object(a.useContext)(l.a),n=e||(()=>({renderCustomActionsRow:void 0,width:void 0})),{renderCustomActionsRow:s,width:o=f}=n();return{renderCustomActionsRow:s,actionsColumnWidth:o,getSetIsActionLoadingCallback:e=>(n=!0)=>{t({action:r.g.updateRowLoadingState,rowIndex:e,isLoading:n})}}})({options:e.alertsTableConfiguration.useActionsColumn}),{isBulkActionsColumnActive:q,getBulkActionsLeadingControlColumn:_,bulkActionsState:P,bulkActions:D,setIsBulkActionsLoading:N}=function({alerts:e,useBulkActionsConfig:t=(()=>[])}){const[n,s]=Object(a.useContext)(l.a),o=t(),i=0!==o.length;return Object(a.useEffect)((()=>{s({action:r.g.rowCountUpdate,rowCount:e.length})}),[e,s]),{isBulkActionsColumnActive:i,getBulkActionsLeadingControlColumn:m,bulkActionsState:n,bulkActions:o,setIsBulkActionsLoading:(e=!0)=>{s({action:r.g.updateAllLoadingState,isLoading:e})}}}({alerts:p,useBulkActionsConfig:e.alertsTableConfiguration.useBulkActions}),{pagination:V,onChangePageSize:Q,onChangePageIndex:$,onPaginateFlyout:H,flyoutAlertIndex:W,setFlyoutAlertIndex:G}=function({onPageChange:e,pageIndex:t,pageSize:n}){const[,s]=Object(a.useContext)(l.a),[o,i]=Object(a.useState)({pageIndex:t,pageSize:n}),[c,u]=Object(a.useState)(-1),d=Object(a.useCallback)((t=>{i((e=>({...e,pageSize:t,pageIndex:0}))),s({action:r.g.clear}),e({pageIndex:0,pageSize:t})}),[s,e]),g=Object(a.useCallback)((t=>{i((e=>({...e,pageIndex:t}))),s({action:r.g.clear}),e({pageIndex:t,pageSize:o.pageSize})}),[s,e,o.pageSize]),p=Object(a.useCallback)((e=>{u((t=>{if(e<0)return g(0),0;const n=o.pageSize*o.pageIndex+t;if(e===n)return t;const s=Math.floor(e/o.pageSize),a=e>=o.pageSize*s?e-o.pageSize*s:e;return g(s),a}))}),[g,o.pageIndex,o.pageSize]);return{pagination:o,onChangePageSize:d,onChangePageIndex:g,onPaginateFlyout:p,flyoutAlertIndex:c,setFlyoutAlertIndex:u}}({onPageChange:C,pageIndex:g,pageSize:e.pageSize}),{visibleColumns:J,onToggleColumn:K,onResetColumns:X,updatedAt:Y,browserFields:Z,onChangeVisibleColumns:ee,showAlertStatusWithFlapping:te=!1,showInspectButton:ne=!1}=e,se=Object(a.useCallback)((e=>{const t=p.findIndex((t=>t[s.V].includes(e.fields[s.V])));G(t)}),[p,G]),ae=Object(a.useCallback)((()=>{const{rowSelection:t}=P;return(({bulkActions:e,alertsCount:t,rowSelection:n,alerts:s,isLoading:i,updatedAt:r,columnIds:l,onToggleColumn:c,onResetColumns:u,browserFields:g,setIsBulkActionsLoading:p,controls:b,getInspectQuery:j,showInspectButton:m})=>{const f=n.size,x=(({alertsCount:e,updatedAt:t,columnIds:n,onToggleColumn:s,onResetColumns:a,browserFields:i,controls:r,getInspectQuery:l,showInspectButton:c})=>{const u=Object.keys(i).length>0;return{additionalControls:{right:M({controls:r,updatedAt:t,getInspectQuery:l,showInspectButton:c}),left:{append:Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(O,{count:e}),u&&Object(d.jsx)(k.FieldBrowser,{columnIds:n,browserFields:i,onResetColumns:a,onToggleColumn:s}))}},showColumnSelector:{allowHide:!1},showSortSelector:!0}})({alertsCount:t,updatedAt:r,columnIds:l,onToggleColumn:c,onResetColumns:u,browserFields:g,controls:b,getInspectQuery:j,showInspectButton:m});return 0===f||void 0===f||0===e.length?x:{showColumnSelector:!1,showSortSelector:!1,additionalControls:{right:M({controls:b,updatedAt:r,getInspectQuery:j,showInspectButton:m}),left:{append:Object(d.jsx)(o.a.Fragment,null,Object(d.jsx)(O,{count:t}),Object(d.jsx)(a.Suspense,{fallback:null},Object(d.jsx)(E,{totalItems:t,items:e,alerts:s,setIsBulkActionsLoading:p})))}}}})({bulkActions:D,alertsCount:b,rowSelection:t,alerts:u.alerts,updatedAt:Y,isLoading:j,columnIds:J,onToggleColumn:K,onResetColumns:X,browserFields:Z,controls:e.controls,setIsBulkActionsLoading:N,getInspectQuery:w,showInspectButton:ne})}),[P,D,b,u.alerts,Y,j,J,K,X,Z,e.controls,N,w,ne])(),oe=Object(a.useMemo)((()=>{const t=e.showExpandToDetails||Boolean(y);let n=[...e.leadingControlColumns];return t&&(n=[{id:"expandColumn",width:F,headerCellRender:()=>Object(d.jsx)("span",{"data-test-subj":"expandColumnHeaderLabel"},x.c),rowCellRender:t=>{const{visibleRowIndex:n}=t;return Object(d.jsx)(i.EuiFlexGroup,{gutterSize:"none",responsive:!1},e.showExpandToDetails&&Object(d.jsx)(i.EuiFlexItem,{grow:!1},Object(d.jsx)(i.EuiToolTip,{content:x.d},Object(d.jsx)(i.EuiButtonIcon,{size:"s",iconType:"expand",color:"primary",onClick:()=>{G(n)},"data-test-subj":`expandColumnCellOpenFlyoutButton-${n}`,"aria-label":x.d}))),y&&p[n]&&y({alert:p[n],setFlyoutAlert:se,id:e.id,setIsActionLoading:U(n)}))}},...n]),q&&(n=[_(),...n]),n}),[F,p,_,se,q,e.id,e.leadingControlColumns,e.showExpandToDetails,y,G,U]);Object(a.useEffect)((()=>{const e=W+V.pageIndex*V.pageSize;n({[e]:z})}),[W,V.pageIndex,V.pageSize]);const ie=Object(a.useCallback)((()=>G(-1)),[G]),re=Object(a.useCallback)((()=>{var t,n;return null!==(t=e.alertsTableConfiguration)&&void 0!==t&&t.getRenderCellValue?null===(n=e.alertsTableConfiguration)||void 0===n?void 0:n.getRenderCellValue({setFlyoutAlert:se}):B}),[se,e.alertsTableConfiguration])(),le=Object(a.useCallback)((e=>{const t=p[e.rowIndex-V.pageSize*V.pageIndex];if(t){const n=[];return Object.entries(null!=t?t:{}).forEach((([e,t])=>{n.push({field:e,value:t})})),te&&e.columnId===s.L?(({data:e,columnId:t})=>{var n,a;const o=null!==(n=null===(a=e.find((e=>e.field===s.L)))||void 0===a?void 0:a.value)&&void 0!==n?n:[];if(Array.isArray(o)&&o.length){var i,r;const t=null!==(i=null===(r=e.find((e=>e.field===s.e)))||void 0===r?void 0:r.value)&&void 0!==i?i:[];return Object(d.jsx)(h.a,{alertStatus:o.join(),flapping:t[0]})}return B({data:e,columnId:t})})({...e,data:n}):re({...e,data:n})}return j?Object(d.jsx)(i.EuiLoadingContent,{lines:1}):null}),[p,j,V.pageIndex,V.pageSize,re,te]);return Object(d.jsx)(T.b,null,Object(d.jsx)("section",{style:{width:"100%"},"data-test-subj":e["data-test-subj"]},Object(d.jsx)(a.Suspense,{fallback:null},W>-1&&Object(d.jsx)(L,{alert:p[W],alertsCount:b,onClose:ie,alertsTableConfiguration:e.alertsTableConfiguration,flyoutIndex:W+V.pageIndex*V.pageSize,onPaginate:H,isLoading:j,id:e.id})),b>0&&Object(d.jsx)(i.EuiDataGrid,{"aria-label":"Alerts table","data-test-subj":"alertsTable",columns:e.columns,columnVisibility:{visibleColumns:J,setVisibleColumns:ee},trailingControlColumns:e.trailingControlColumns,leadingControlColumns:oe,rowCount:b,renderCellValue:le,gridStyle:{...R,rowClasses:t},sorting:{columns:S,onSort:v},toolbarVisibility:ae,pagination:{...V,pageSizeOptions:e.pageSizeOptions,onChangeItemsPerPage:Q,onChangePage:$}})))}}}]);