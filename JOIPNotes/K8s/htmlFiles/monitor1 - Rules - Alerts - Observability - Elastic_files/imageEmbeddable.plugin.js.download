!function(e){function t(t){for(var r,i,a=t[0],o=t[1],s=0,c=[];s<a.length;s++)i=a[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&c.push(n[i][0]),n[i]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);for(l&&l(t);c.length;)c.shift()()}var r={},n={1:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=a);var o,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+"imageEmbeddable.chunk."+e+".js"}(e);var l=new Error;o=function(t){s.onerror=s.onload=null,clearTimeout(c);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,r[1](l)}n[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:s})}),12e4);s.onerror=s.onload=o,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var a=window.imageEmbeddable_bundle_jsonpfunction=window.imageEmbeddable_bundle_jsonpfunction||[],o=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var l=o;i(i.s=12)}([function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,r){e.exports=r(11)(2)},function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r(0),i=r.n(n),a=r(1),o=r(6);r.d(t,"b",(function(){return o.a}));const s=i.a.lazy((()=>r.e(0).then(r.bind(null,19)).then((e=>({default:e.ImageViewer}))))),l=e=>Object(a.jsx)(i.a.Suspense,{fallback:Object(a.jsx)(i.a.Fragment,null)},Object(a.jsx)(s,e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(14),i=r(0),a=n.__importDefault(r(15));t.default=function(e,t){var r=i.useState(t),n=r[0],o=r[1];return a.default((function(){var t=e.subscribe(o);return function(){return t.unsubscribe()}}),[e]),n}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));var n=r(0);const i=Object(n.createContext)(null),a=()=>{const e=Object(n.useContext)(i);if(!e)throw new Error("ImageViewerContext is not found!");return e}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n=r(10).defaultImageFileKind},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/files/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){r(13),__kbnBundles__.define("plugin/imageEmbeddable/public",r,16)},function(e,t,r){r.p=window.__kbnPublicPath__.imageEmbeddable},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i="undefined"!=typeof window?n.useLayoutEffect:n.useEffect;t.default=i},function(e,t,r){"use strict";r.r(t),r.d(t,"IMAGE_CLICK_TRIGGER",(function(){return b})),r.d(t,"plugin",(function(){return x}));var n=r(8),i=r(3),a=r.n(i),o=r(0),s=r.n(o),l=r(5),c=r.n(l),u=r(9),d=r(4),p=r(2);const b="IMAGE_CLICK_TRIGGER",g={id:b,title:p.i18n.translate("imageEmbeddable.triggers.imageClickTriggerTitle",{defaultMessage:"Image click"}),description:p.i18n.translate("imageEmbeddable.triggers.imageClickDescription",{defaultMessage:"Clicking the image will trigger the action"})};var f=r(1);const m="image";class image_embeddable_ImageEmbeddable extends u.Embeddable{supportedTriggers(){return[g.id]}constructor(e,t,n){super(t,{editable:!0,editableWithExplicitInput:!0},n),a()(this,"type",m),a()(this,"ImageEmbeddableViewer",(e=>{const t=c()(e.embeddable.getInput$(),e.embeddable.getInput());s.a.useLayoutEffect((()=>{r.e(3).then(r.bind(null,49))}),[]);const[n,i]=s.a.useState(!1);return s.a.useEffect((()=>{let e=!1;return setTimeout((()=>{e||this.deps.actions.hasTriggerActions(g.id,{embeddable:this}).catch((()=>!1)).then((t=>!e&&i(t)))}),0),()=>{e=!0}})),Object(f.jsx)(d.b.Provider,{value:{getImageDownloadHref:this.deps.getImageDownloadHref,validateUrl:this.deps.validateUrl}},Object(f.jsx)(d.a,{className:"imageEmbeddableImage",imageConfig:t.imageConfig,onLoad:()=>{this.renderComplete.dispatchComplete()},onError:()=>{this.renderComplete.dispatchError()},onClick:n?()=>{this.deps.actions.executeTriggerActions(g.id,{embeddable:this})}:void 0}))})),this.deps=e}render(e){super.render(e),e.setAttribute("data-shared-item","");const t=this.ImageEmbeddableViewer;return Object(f.jsx)(t,{embeddable:this})}reload(){}}var _=r(7);const h=/^(?:(?:https?):|[^&:/?#]*(?:[/?#]|$))/gi,v=p.i18n.translate("imageEmbeddable.imageEditor.urlFormatGeneralErrorMessage",{defaultMessage:"Invalid format. Example: {exampleUrl}",values:{exampleUrl:"https://elastic.co/my-image.png"}}),y=p.i18n.translate("imageEmbeddable.imageEditor.urlFormatExternalErrorMessage",{defaultMessage:'This URL is not allowed by your administrator. Refer to "externalUrl.policy" configuration.'});function E(e){return t=>{if(!t)return{isValid:!1,error:v};try{if(new URL(t),!t.match(h))throw new Error;return e.validateUrl(t)?{isValid:!0}:{isValid:!1,error:y}}catch(e){return{isValid:!1,error:v}}}}class image_embeddable_factory_ImageEmbeddableFactoryDefinition{constructor(e){a()(this,"type",m),a()(this,"getImageDownloadHref",(e=>this.deps.start().files.getDownloadHref({id:e,fileKind:_.a.id}))),this.deps=e}async isEditable(){var e;return Boolean(null===(e=this.deps.start().application.capabilities.dashboard)||void 0===e?void 0:e.showWriteControls)}async create(e,t){return new image_embeddable_ImageEmbeddable({getImageDownloadHref:this.getImageDownloadHref,validateUrl:E(this.deps.start().externalUrl),actions:{executeTriggerActions:(e,t)=>this.deps.start().uiActions.executeTriggerActions(e,t),hasTriggerActions:(e,t)=>this.deps.start().uiActions.getTriggerCompatibleActions(e,t).catch((()=>[])).then((e=>e.length>0))}},e,t)}getDisplayName(){return p.i18n.translate("imageEmbeddable.imageEmbeddableFactory.displayName",{defaultMessage:"Image"})}getIconType(){return"image"}async getExplicitInput(e){const{configureImage:t}=await Promise.all([r.e(0),r.e(4)]).then(r.bind(null,52)),n=this.deps.start(),{files:i,overlays:a,theme:o,application:s,externalUrl:l,getUser:c}=n,u=await c();return{imageConfig:await t({files:i,overlays:a,theme:o,user:u,currentAppId$:s.currentAppId$,validateUrl:E(l),getImageDownloadHref:this.getImageDownloadHref},e?e.imageConfig:void 0)}}}class plugin_ImageEmbeddablePlugin{constructor(e){this.context=e}setup(e,t){const r=Object(n.createStartServicesGetter)(e.getStartServices);return t.embeddable.registerEmbeddableFactory(m,new image_embeddable_factory_ImageEmbeddableFactoryDefinition({start:()=>({application:r().core.application,overlays:r().core.overlays,files:r().plugins.files.filesClientFactory.asUnscoped(),externalUrl:r().core.http.externalUrl,theme:r().core.theme,getUser:async()=>{const e=r().plugins.security;return e?await e.authc.getCurrentUser():void 0},uiActions:r().plugins.uiActions})})),t.uiActions.registerTrigger(g),{}}start(e,t){return{}}stop(){}}function x(e){return new plugin_ImageEmbeddablePlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},,function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t){e.exports=__kbnSharedDeps__.ElasticNumeral}]);