/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[1],{129:function(e,t,s){"use strict";s.d(t,"a",(function(){return E})),s.d(t,"b",(function(){return p}));var n=s(1),a=s.n(n),l=s(188),r=s(2),u=s(23),o=s(3),i=s(61),c=s.n(i),d=s(28);const b=[[1,"h"],[3,"h"],[8,"h"],[1,"d"]];var g=s(168);const j=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.minutesLabel",{defaultMessage:"minutes"}),x=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.hoursLabel",{defaultMessage:"hours"}),h=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.daysLabel",{defaultMessage:"days"}),m=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.weeksLabel",{defaultMessage:"weeks"}),O=r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.monthsLabel",{defaultMessage:"months"}),S={m:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMinute",{defaultMessage:"1 minute"}),h:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneHour",{defaultMessage:"1 hour"}),d:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneDay",{defaultMessage:"1 day"}),w:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneWeek",{defaultMessage:"1 week"}),M:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeOneMonth",{defaultMessage:"1 month"})},f="triggersActionsUi_previousSnoozeInterval",p=e=>{if(!e)return;const t=c()(e).locale("en").fromNow(!0),[s,n]=t.split(" ");let a,l="a"===s||"an"===s?1:parseInt(s,10);switch(n){case"year":case"years":a="M",l*=12;break;case"month":case"months":a="M";break;case"day":case"days":a="d";break;case"hour":case"hours":a="h";break;case"minute":case"minutes":a="m"}return a?`${l}${a}`:void 0},y=(e,t)=>1===e?S[t]:c.a.duration(e,t).humanize();var v=s(0);const k=({isLoading:e,interval:t="3d",snoozeRule:s,unsnoozeRule:l,showCancel:i,showAddSchedule:S=!0,scheduledSnoozes:p,activeSnoozes:k,navigateToScheduler:E,onRemoveAllSchedules:z,hasTitle:I,inPopover:M=!1})=>{const[C,A]=Object(n.useState)(Object(d.g)(t).value),[L,w]=Object(n.useState)(Object(d.g)(t).unit),[U,R]=Object(n.useState)(!1),[F,W]=Object(n.useState)(!1),[T,D]=(e=>{let t=localStorage.getItem(f);if(t)try{Object(d.g)(t)}catch(e){t=null,localStorage.removeItem(f)}const s=t,[a,l]=Object(n.useState)(s);return[a,e=>{localStorage.setItem(f,e),l(e)}]})(),{euiTheme:Y}=Object(o.useEuiTheme)(),N=Object(n.useCallback)((({target:e})=>A(e.value)),[A]),B=Object(n.useCallback)((({target:e})=>w(e.value)),[w]),P=Object(n.useCallback)(((e,t)=>{if(t){if(t.startsWith("-"))throw new Error("Cannot store a negative interval");D(t)}const n={id:null,duration:-1===e?-1:Date.parse(e)-Date.now(),rRule:{dtstart:(new Date).toISOString(),count:1,tzid:c.a.tz.guess()}};return s(n)}),[D,s]),_=Object(n.useCallback)((async(e,t)=>{if(-1===e)await P(-1,null);else if(0!==e){const s=c()().add(e,t).toISOString();await P(s,`${e}${t}`)}else await l()}),[P,l]),H=Object(n.useCallback)((()=>_(-1)),[_]),G=Object(n.useCallback)((()=>_(C,L)),[_,C,L]),q=Object(n.useCallback)((()=>{_(0,"m"),W(!1)}),[_,W]),$=Object(n.useCallback)((()=>{0===k.length?q():W(!0)}),[k,W,q]),K=Object(n.useCallback)((()=>E()),[E]),V=Object(n.useCallback)((e=>()=>E(e)),[E]),J=Object(n.useCallback)((()=>{R(!1),z(p.filter((e=>e.id)).map((e=>e.id)))}),[z,p]),Q=Object(n.useMemo)((()=>p?p.filter((e=>Boolean(e.id))).length:0),[p]),X=Object(n.useMemo)((()=>Q>0),[Q]),Z=T?Object(d.g)(T):null,ee=(null==Z?void 0:Z.value)===C&&(null==Z?void 0:Z.unit)===L,te=Z&&!ee&&Object(v.jsx)(a.a.Fragment,null,Object(v.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiButtonEmpty,{flush:"left",size:"s",iconType:"refresh","data-test-subj":"ruleSnoozePreviousButton",onClick:()=>_(Z.value,Z.unit)},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.previousSnooze",{defaultMessage:"Previous"}))),Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiText,{color:"subdued",size:"s","data-test-subj":"ruleSnoozePreviousText"},y(Z.value,Z.unit)))),Object(v.jsx)(o.EuiHorizontalRule,{margin:"s"}));return Object(v.jsx)(a.a.Fragment,null,I&&Object(v.jsx)(o.EuiPopoverTitle,{"data-test-subj":"snoozePanelTitle"},Object(v.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiIcon,{type:"bellSlash"})),Object(v.jsx)(o.EuiFlexItem,null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelTitle",{defaultMessage:"Snooze notifications"}))),Object(v.jsx)(o.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(v.jsx)(o.EuiFlexItem,null,Object(v.jsx)(o.EuiText,{textAlign:"left",size:"xs",color:"subdued"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addScheduleDescription",{defaultMessage:"Silence actions immediately or schedule downtimes."}))))),Object(v.jsx)(o.EuiFlexGroup,{"data-test-subj":"snoozePanel",gutterSize:"xs"},Object(v.jsx)(o.EuiFlexItem,null,Object(v.jsx)(o.EuiFieldNumber,{min:1,value:C,onChange:N,"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalValueLabel",{defaultMessage:"Snooze interval value"}),"data-test-subj":"ruleSnoozeIntervalValue"})),Object(v.jsx)(o.EuiFlexItem,{grow:2},Object(v.jsx)(o.EuiSelect,{id:Object(o.useGeneratedHtmlId)({prefix:"snoozeUnit"}),value:L,onChange:B,"aria-label":r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozePanelIntervalUnitLabel",{defaultMessage:"Snooze interval unit"}),options:[{value:"m",text:j},{value:"h",text:x},{value:"d",text:h},{value:"w",text:m},{value:"M",text:O}],"data-test-subj":"ruleSnoozeIntervalUnit"})),Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiButton,{disabled:!C||C<1,isLoading:e,onClick:G,"data-test-subj":"ruleSnoozeApply",minWidth:0},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.applySnooze",{defaultMessage:"Apply"})))),Object(v.jsx)(o.EuiHorizontalRule,{margin:"s"}),te,Object(v.jsx)(o.EuiFlexGrid,{columns:2,gutterSize:"s"},Object(v.jsx)(o.EuiFlexItem,null,Object(v.jsx)(o.EuiTitle,{size:"xxxs"},Object(v.jsx)("h5",null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeCommonlyUsed",{defaultMessage:"Commonly used"})))),Object(v.jsx)(o.EuiFlexItem,null),b.map((([e,t])=>Object(v.jsx)(o.EuiFlexItem,{key:`snooze-${e}${t}`},Object(v.jsx)(o.EuiLink,{"data-test-subj":`linkSnooze${e}${t}`,onClick:()=>_(e,t)},y(e,t)))))),Object(v.jsx)(o.EuiHorizontalRule,{margin:"s"}),Object(v.jsx)(o.EuiFlexGroup,null,Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiButtonEmpty,{flush:"left",size:"s",onClick:H,"data-test-subj":"ruleSnoozeIndefiniteApply"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeIndefinitely",{defaultMessage:"Snooze indefinitely"})))),S?Object(v.jsx)(a.a.Fragment,null,Object(v.jsx)(o.EuiHorizontalRule,{margin:"s"}),!X&&Object(v.jsx)(a.a.Fragment,null,Object(v.jsx)(o.EuiFlexGroup,null,Object(v.jsx)(o.EuiFlexItem,{grow:!0},Object(v.jsx)(o.EuiButton,{fill:!0,color:"primary",onClick:K,"data-test-subj":"ruleAddSchedule",iconType:"calendar"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addSchedule",{defaultMessage:"Add schedule"}))))),X&&Object(v.jsx)(a.a.Fragment,null,Object(v.jsx)(o.EuiFlexGroup,{alignItems:"center"},Object(v.jsx)(o.EuiFlexItem,null,Object(v.jsx)(o.EuiTitle,{size:"xxxs"},Object(v.jsx)("h5",null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.snoozeSchedulesTitle",{defaultMessage:"Schedules"})))),Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiButtonEmpty,{color:"danger",size:"xs",onClick:()=>R(!0),"data-test-subj":"ruleRemoveAllSchedules"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeAllButton",{defaultMessage:"Remove all"})))),Object(v.jsx)(o.EuiFlexGroup,{direction:"column",gutterSize:"xs","data-test-subj":"ruleSchedulesList"},p.filter((e=>e.id)).map((e=>{const t=e.id&&k.includes(e.id);return Object(v.jsx)(o.EuiFlexItem,{key:`snooze-${e.id}`},Object(v.jsx)("button",{style:{paddingLeft:"9px",paddingRight:"9px",color:t?"#a8376a":Y.colors.subduedText,backgroundColor:t?"rgba(240,78,152,0.2)":Y.colors.body},className:"euiButton euiPanel euiPanel--borderRadiusMedium euiPanel--noShadow euiPanel--noBorder",onClick:V(e)},Object(v.jsx)(o.EuiFlexGroup,{alignItems:"center"},Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiIcon,{type:t?"bellSlash":"calendar"})),Object(v.jsx)(o.EuiFlexItem,{style:{textAlign:"left"}},(e=>{if(null==e.rRule.freq)return c()(e.rRule.dtstart).format("LLLL");const t=Object(g.e)(e.rRule);return t[0].toLocaleUpperCase()+t.slice(1)})(e)),Object(v.jsx)(o.EuiFlexItem,{grow:!1},Object(v.jsx)(o.EuiIcon,{type:"arrowRight"})))))}))),Object(v.jsx)(o.EuiFlexGroup,null,Object(v.jsx)(o.EuiFlexItem,null,Object(v.jsx)(o.EuiButtonEmpty,{isDisabled:Q>=5,"data-test-subj":"ruleSchedulesListAddButton",iconType:"plusInCircleFilled",onClick:K},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.addButton",{defaultMessage:"Add"})))))):null,i&&Object(v.jsx)(a.a.Fragment,null,!M&&Object(v.jsx)(o.EuiSpacer,{size:"s"}),Object(v.jsx)(o.EuiPopoverFooter,null,!M&&Object(v.jsx)(o.EuiSpacer,{size:"s"}),Object(v.jsx)(o.EuiFlexGroup,null,Object(v.jsx)(o.EuiFlexItem,{grow:!0},Object(v.jsx)(o.EuiButton,{isLoading:e,color:"danger",onClick:$,"data-test-subj":"ruleSnoozeCancel"},r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnooze",{defaultMessage:"Cancel snooze"})))))),Object(v.jsx)(o.EuiSpacer,{size:"s"}),U&&Object(v.jsx)(o.EuiConfirmModal,{title:Object(v.jsx)(u.FormattedMessage,{id:"xpack.triggersActionsUI.sections.rulesList.removeAllSnoozeSchedules",defaultMessage:"Remove {count, plural, one {schedule} other {# schedules}}?",values:{count:p.length}}),onCancel:()=>R(!1),onConfirm:J,buttonColor:"danger",cancelButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeCancelButton",{defaultMessage:"Cancel"}),confirmButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.removeConfirmButton",{defaultMessage:"Remove"})}),F&&Object(v.jsx)(o.EuiConfirmModal,{title:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnooze",{defaultMessage:"Cancel snooze"}),style:{maxWidth:"420px"},onCancel:()=>W(!1),onConfirm:q,cancelButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.dontApplyCancelSnoozeButton",{defaultMessage:"Don't apply"}),confirmButtonText:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.applyCancelSnoozeButton",{defaultMessage:"Apply"})},Object(v.jsx)(o.EuiText,null,r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnoozeConfirmText",{defaultMessage:"Resume notifying when alerts are generated as defined in the rule actions."})),Object(v.jsx)(o.EuiSpacer,{size:"s"}),Object(v.jsx)(o.EuiCallOut,{iconType:"iInCircle",size:"s",title:r.i18n.translate("xpack.triggersActionsUI.sections.rulesList.cancelSnoozeConfirmCallout",{defaultMessage:"Only the current occurrence of a schedule will be cancelled."})})))},E=({interval:e,snoozeRule:t,unsnoozeRule:s,showCancel:a,scheduledSnoozes:r,activeSnoozes:u,hasTitle:o=!0,inPopover:i=!1,showAddSchedule:c})=>{const[d,b]=Object(n.useState)(!1),[g,j]=Object(n.useState)(null),[x,h]=Object(n.useState)(!1),m=Object(n.useCallback)((async e=>{h(!0);try{await t(e)}finally{h(!1)}}),[h,t]),O=Object(n.useCallback)((async e=>{h(!0);try{await s(e)}finally{h(!1)}}),[h,s]),S=Object(n.useCallback)((async e=>{h(!0);try{await t(e)}finally{h(!1)}}),[t,h]),f=Object(n.useCallback)((async e=>{h(!0);try{await s(e)}finally{h(!1)}}),[s,h]),p=Object(n.useCallback)((e=>{j(null!=e?e:null),b(!0)}),[j,b]),y=Object(n.useCallback)((()=>b(!1)),[b]);return d?Object(v.jsx)(l.a,{isLoading:x,initialSchedule:g,onClose:y,onSaveSchedule:S,onCancelSchedules:f,hasTitle:o,inPopover:i}):Object(v.jsx)(k,{isLoading:x,snoozeRule:m,unsnoozeRule:O,interval:e,showCancel:a,showAddSchedule:c,scheduledSnoozes:r,activeSnoozes:u,navigateToScheduler:p,onRemoveAllSchedules:f,hasTitle:o,inPopover:i})}},136:function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>l(e,"LL"),a=e=>l(e,"ll"),l=(e,t)=>e.format(t).replace(new RegExp(`(${e.format("YYYY")}|,)`,"g"),"").trim()},167:function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"f",(function(){return i})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"e",(function(){return g})),s.d(t,"g",(function(){return j}));var n=s(2),a=s(19),l=s(61),r=s.n(l),u=s(18);const o=[1,2,3,4,5,6,7],i=[{id:"never",label:"Never"},{id:"ondate",label:"On date"},{id:"afterx",label:"After {x}"}],c=[{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaily",{defaultMessage:"Daily"}),value:u.l.DAILY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeekly",{defaultMessage:"Weekly"}),value:u.l.WEEKLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonthly",{defaultMessage:"Monthly"}),value:u.l.MONTHLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearly",{defaultMessage:"Yearly"}),value:u.l.YEARLY},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurCustom",{defaultMessage:"Custom"}),value:"CUSTOM"}],d={[u.l.DAILY]:{interval:1},[u.l.WEEKLY]:{interval:1},[u.l.MONTHLY]:{interval:1},[u.l.YEARLY]:{interval:1}},b=o.map((e=>({id:String(e),label:r()().isoWeekday(e).format("dd")}))),g={1:"MO",2:"TU",3:"WE",4:"TH",5:"FR",6:"SA",7:"SU"},j=Object(a.mapValues)(Object(a.invert)(g),(e=>Number(e)))},168:function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return b})),s.d(t,"e",(function(){return g})),s.d(t,"a",(function(){return x}));var n=s(2),a=s(61),l=s.n(a),r=s(18),u=s(136),o=s(167),i=s(169);const c=(e,t="dddd")=>{const s=e.format(t),n=Math.ceil(e.date()/7);return{dayOfWeek:s,nthWeekdayOfMonth:n,isLastOfMonth:n>4||!e.isSame(l()(e).add(7,"d"),"month")}},d=(e,t)=>{const s=t?t.isoWeekday():1;return o.d.reduce(((t,n)=>({...t,[n]:(null==e?void 0:e.length)>0?e.map((e=>e.replace(/[0-9+\-]/g,""))).includes(o.e[n]):n===s})),{})},b=e=>{const{isLastOfMonth:t,nthWeekdayOfMonth:s}=c(e);return[`${t?"-1":"+"+s}${o.e[e.isoWeekday()]}`]},g=({freq:e,interval:t,until:s,count:a,byweekday:o,bymonthday:c,bymonth:d})=>{var b;const g=Object(i.b)(t)[e],x=o?o[0]:"",h=x?x.startsWith("+")?Number(x[1]):x.startsWith("-1")?0:null:null;let m=o&&o.length>0?null!==h?Object(i.d)(j(x))[h]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.byweekdaySummary",{defaultMessage:"on {weekdays}",values:{weekdays:o.map((e=>j(e))).join(", ")}}):null;m&&(m=m[0].toLocaleLowerCase()+m.slice(1));const O=c&&c.length>0?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.bymonthdaySummary",{defaultMessage:"on day {monthday}",values:{monthday:c.join(", ")}}):null,S=d&&d.length>0&&c&&c.length>0?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.bymonthSummary",{defaultMessage:"on {date}",values:{date:Object(u.b)(l()().month(d[0]).date(c[0]))}}):null,f=e===r.l.WEEKLY?m:e===r.l.MONTHLY?null!==(b=m)&&void 0!==b?b:O:e===r.l.YEARLY?S:null,p=s?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.untilDateSummary",{defaultMessage:"until {date}",values:{date:l()(s).format("LL")}}):a?n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.occurrencesSummary",{defaultMessage:"for {count, plural, one {# occurrence} other {# occurrences}}",values:{count:a}}):null;return n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurrenceSummary",{defaultMessage:"every {frequencySummary}{on}{until}",values:{frequencySummary:g,on:f?` ${f}`:"",until:p?` ${p}`:""}})},j=e=>l()().isoWeekday(o.g[e.slice(-2)]).format("dddd"),x=({frequency:e,interval:t,byweekday:s,monthlyRecurDay:n,startDate:a})=>{const l=e===r.l.MONTHLY&&"day"===n,u=e===r.l.MONTHLY&&"weekday"===n,i=a&&(l||e===r.l.YEARLY);return{freq:e,interval:t,byweekday:e===r.l.WEEKLY?Object.keys(s).filter((e=>!0===s[e])).map((e=>o.e[Number(e)])):a&&u?b(a):[],bymonthday:i?[a.date()]:[],bymonth:a&&e===r.l.YEARLY?[a.month()]:[]}}},169:function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return o}));var n=s(2),a=s(18);const l=e=>[n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurLast",{defaultMessage:"Monthly on the last {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFirst",{defaultMessage:"Monthly on the first {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurSecond",{defaultMessage:"Monthly on the second {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurThird",{defaultMessage:"Monthly on the third {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFourth",{defaultMessage:"Monthly on the fourth {dayOfWeek}",values:{dayOfWeek:e}})],r=e=>[n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurLastShort",{defaultMessage:"On the last {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFirstShort",{defaultMessage:"On the 1st {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurSecondShort",{defaultMessage:"On the 2nd {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurThirdShort",{defaultMessage:"On the 3rd {dayOfWeek}",values:{dayOfWeek:e}}),n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurFourthShort",{defaultMessage:"On the 4th {dayOfWeek}",values:{dayOfWeek:e}})],u=e=>({[a.l.DAILY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaySummary",{defaultMessage:"{interval, plural, one {day} other {# days}}",values:{interval:e}}),[a.l.WEEKLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeekSummary",{defaultMessage:"{interval, plural, one {week} other {# weeks}}",values:{interval:e}}),[a.l.MONTHLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonthSummary",{defaultMessage:"{interval, plural, one {month} other {# months}}",values:{interval:e}}),[a.l.YEARLY]:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearSummary",{defaultMessage:"{interval, plural, one {year} other {# years}}",values:{interval:e}})}),o=e=>[{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDay",{defaultMessage:"{interval, plural, one {day} other {days}}",values:{interval:e}}),value:a.l.DAILY,"data-test-subj":"ruleSnoozeSchedulerRecurDay"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeek",{defaultMessage:"{interval, plural, one {week} other {weeks}}",values:{interval:e}}),value:a.l.WEEKLY,"data-test-subj":"ruleSnoozeSchedulerRecurWeek"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurMonth",{defaultMessage:"{interval, plural, one {month} other {months}}",values:{interval:e}}),value:a.l.MONTHLY,"data-test-subj":"ruleSnoozeSchedulerRecurMonth"},{text:n.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYear",{defaultMessage:"{interval, plural, one {year} other {years}}",values:{interval:e}}),value:a.l.YEARLY,"data-test-subj":"ruleSnoozeSchedulerRecurYear"}]},188:function(e,t,s){"use strict";s.d(t,"a",(function(){return M}));var n=s(9),a=s.n(n),l=s(1),r=s.n(l),u=s(61),o=s.n(u),i=s(2),c=s(20),d=s(118),b=s(3),g=s(0);const j=e=>{const[t,s]=Object(l.useState)(e.value),n=void 0!==e.min?e.min:-1/0,r=void 0!==e.max?e.max:1/0,u=Object(l.useCallback)((t=>{const{value:a}=t.target,l=!isNaN(Number(a))&&a>=n&&a<=r;(l||""===a)&&s(a),l&&e.onChange&&e.onChange(a)}),[e,s,r,n]),o=Object(l.useCallback)((n=>{(isNaN(Number(t))||""===t)&&s(e.value),e.onBlur&&e.onBlur(n)}),[t,e,s]);return Object(g.jsx)(b.EuiFieldNumber,a()({},e,{value:t,onChange:u,onBlur:o}))};var x=s(18),h=s(136),m=s(167),O=s(70),S=s.n(O),f=s(168),p=s(169);const y=({startDate:e,onChange:t,initialState:s,minimumRecurrenceDays:n})=>{const[a]=Object(l.useState)(e),[u,o]=Object(l.useState)(s.freq),[c,d]=Object(l.useState)(s.freq===x.l.DAILY?Math.max(n,s.interval):s.interval),[h,O]=Object(l.useState)(Object(f.c)(s.byweekday,e)),[y,v]=Object(l.useState)(s.freq===x.l.MONTHLY&&s.byweekday.length>0?"weekday":"day"),k=Object(l.useMemo)((()=>{if(!e)return[];const{dayOfWeek:t,nthWeekdayOfMonth:s,isLastOfMonth:n}=Object(f.d)(e,"ddd");return[{id:"day",label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatOnMonthlyDayNumber",{defaultMessage:"On day {dayNumber}",values:{dayNumber:e.date()}})},{id:"weekday",label:Object(p.d)(t)[n?0:s]}]}),[e]);Object(l.useEffect)((()=>{u===x.l.DAILY&&c<n&&d(n)}),[n,u,c,d]),Object(l.useEffect)((()=>{a!==e&&O(Object(f.c)([],e))}),[e,a]);const E=Object(l.useRef)(null);Object(l.useEffect)((()=>{const s=Object(f.a)({frequency:u,interval:c,byweekday:h,monthlyRecurDay:y,startDate:e});S()(E.current,s)||(t(s),E.current=s)}),[u,c,h,y,e,t]);const z=Object(l.useCallback)((e=>{const t={...h,[e]:!h[e]};Object.values(t).every((e=>!1===e))||O(t)}),[h]),I=Object(l.useMemo)((()=>Object(p.a)(c)),[c]),M=Object(l.useMemo)((()=>u!==x.l.DAILY?1:Math.max(n,1)),[u,n]);return Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed","data-test-subj":"customRecurrenceScheduler",fullWidth:!0,label:" "},Object(g.jsx)(b.EuiFlexGroup,{gutterSize:"s"},Object(g.jsx)(b.EuiFlexItem,null,Object(g.jsx)(b.EuiFormControlLayout,{compressed:!0,prepend:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatIntervalLabel",{defaultMessage:"Every"})},Object(g.jsx)(j,{compressed:!0,"data-test-subj":"customRecurrenceSchedulerInterval",min:M,value:c,onChange:e=>d(Number(e))}))),Object(g.jsx)(b.EuiFlexItem,null,Object(g.jsx)(b.EuiSelect,{compressed:!0,className:"customRecurrenceSchedulerFrequency","data-test-subj":"customRecurrenceSchedulerFrequency",onChange:e=>o(Number(e.target.value)),value:u,options:I})))),u===x.l.WEEKLY&&Object(g.jsx)(b.EuiFormRow,{fullWidth:!0,display:"columnCompressed",label:" ","data-test-subj":"customRecurrenceSchedulerWeekly"},Object(g.jsx)(b.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"multi",legend:"Repeat on weekday",idToSelectedMap:h,onChange:z,options:m.c})),u===x.l.MONTHLY&&e&&Object(g.jsx)(b.EuiFormRow,{fullWidth:!0,display:"columnCompressed","data-test-subj":"customRecurrenceSchedulerMonthly",label:" "},Object(g.jsx)(b.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"single",legend:"Repeat on weekday or month day",idSelected:y,onChange:v,options:k})))};s(209);const v=({startDate:e,endDate:t,onChange:s,initialState:n})=>{const a=Object(l.useRef)(!1),[r,u]=Object(l.useState)(x.l.DAILY),[c,d]=Object(l.useState)("never"),[O,S]=Object(l.useState)({freq:x.l.WEEKLY,interval:1,byweekday:[],bymonthday:[],bymonth:[]}),[v,E]=Object(l.useState)(t),[z,I]=Object(l.useState)(1),M=Object(l.useMemo)((()=>e&&t?Math.abs(e.diff(t,"days")):0),[e,t]),C=Object(l.useMemo)((()=>M>0),[M]);Object(l.useEffect)((()=>{C&&r===x.l.DAILY&&u(x.l.WEEKLY)}),[C,r]),Object(l.useEffect)((()=>{if(n&&!a.current){var e;const t=n.interval>1||(null!==(e=n.byweekday)&&void 0!==e?e:[]).length>1;u(t?"CUSTOM":n.freq),t&&S(n),n.until&&(d("ondate"),E(n.until)),n.count&&(d("afterx"),I(n.count))}a.current=!0}),[n]);const{repeatOptions:A,rrulePresets:L}=Object(l.useMemo)((()=>{if(!e)return{repeatOptions:m.a,rrulePresets:m.b};const{dayOfWeek:t,nthWeekdayOfMonth:s,isLastOfMonth:n}=Object(f.d)(e);return{repeatOptions:[{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurDaily",{defaultMessage:"Daily"}),value:x.l.DAILY,disabled:C},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurWeeklyOnWeekday",{defaultMessage:"Weekly on {dayOfWeek}",values:{dayOfWeek:t}}),value:x.l.WEEKLY},{text:Object(p.c)(t)[n?0:s],value:x.l.MONTHLY},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurYearlyOnDay",{defaultMessage:"Yearly on {date}",values:{date:Object(h.b)(e)}}),value:x.l.YEARLY},{text:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.recurCustom",{defaultMessage:"Custom"}),value:"CUSTOM"}],rrulePresets:{[x.l.DAILY]:{interval:1},[x.l.WEEKLY]:{interval:1,byweekday:[m.e[e.isoWeekday()]]},[x.l.MONTHLY]:{interval:1,byweekday:Object(f.b)(e)},[x.l.YEARLY]:{interval:1,bymonth:[e.month()+1],bymonthday:[e.date()]}}}}),[e,C]),w=Object(l.useMemo)((()=>{const e="ondate"===c&&v?{until:v}:"afterx"===c?{count:z}:{};return"CUSTOM"===r?{...k(O),...e}:{freq:r,...L[r],...e}}),[r,L,c,O,v,z]);return Object(l.useEffect)((()=>{s(w)}),[w,s]),Object(g.jsx)(b.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0},Object(g.jsx)(b.EuiSplitPanel.Inner,{color:"subdued",className:"ramRecurrenceScheduler"},Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatLabel",{defaultMessage:"Repeat"})},Object(g.jsx)(b.EuiSelect,{options:A,value:r,onChange:e=>u("CUSTOM"===e.target.value?"CUSTOM":Number(e.target.value)),compressed:!0})),"CUSTOM"===r&&Object(g.jsx)(y,{startDate:e,onChange:S,initialState:O,minimumRecurrenceDays:M+1}),Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.endsLabel",{defaultMessage:"Ends"})},Object(g.jsx)(b.EuiButtonGroup,{buttonSize:"compressed",isFullWidth:!0,type:"single",legend:"Recurrence ends",idSelected:c,onChange:d,options:m.f})),"ondate"===c&&Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},label:" ",fullWidth:!0},Object(g.jsx)(b.EuiDatePicker,{selected:v,onChange:E,minDate:null!=e?e:o()()})),"afterx"===c&&Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},label:" ",fullWidth:!0},Object(g.jsx)(b.EuiFormControlLayout,{compressed:!0,prepend:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.afterOccurrencesLabel",{defaultMessage:"After"}),append:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.occurrencesLabel",{defaultMessage:"{occurrences, plural, one {occurrence} other {occurrences}}",values:{occurrences:z}})},Object(g.jsx)(j,{compressed:!0,min:1,value:z,onChange:e=>I(Number(e))})))),Object(g.jsx)(b.EuiHorizontalRule,{margin:"none"}),Object(g.jsx)(b.EuiSplitPanel.Inner,{style:{maxWidth:"400px"}},i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.repeatsSummary",{defaultMessage:"Repeats {summary}",values:{summary:Object(f.e)(w)}})))},k=e=>{var t,s,n;const a={...e};return 0===(null===(t=a.byweekday)||void 0===t?void 0:t.length)&&delete a.byweekday,0===(null===(s=a.bymonth)||void 0===s?void 0:s.length)&&delete a.bymonth,0===(null===(n=a.bymonthday)||void 0===n?void 0:n.length)&&delete a.bymonthday,a};var E,z;s(214);const I=null!==(E=null===(z=o.a.tz)||void 0===z?void 0:z.names().map((e=>({label:e}))))&&void 0!==E?E:[{label:"UTC"}],M=({onClose:e,initialSchedule:t,hasTitle:s=!0,...n})=>{const l=s&&(t?i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.editSchedule",{defaultMessage:"Edit schedule"}):i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.addSchedule",{defaultMessage:"Add schedule"}));return Object(g.jsx)(r.a.Fragment,null,l&&Object(g.jsx)(b.EuiPopoverTitle,null,Object(g.jsx)(b.EuiFlexGroup,{alignItems:"center",justifyContent:"flexStart",gutterSize:"s"},Object(g.jsx)(b.EuiFlexItem,{grow:!1},Object(g.jsx)(b.EuiIcon,{type:"arrowLeft"})),Object(g.jsx)(b.EuiFlexItem,null,Object(g.jsx)(b.EuiLink,{color:"text",style:{fontWeight:"bold"},onClick:e},l)))),Object(g.jsx)(C,a()({initialSchedule:t},n)))},C=({onSaveSchedule:e,initialSchedule:t,isLoading:s,onCancelSchedules:n,bulkSnoozeSchedule:a=!1,showDelete:u=!1,inPopover:j=!1})=>{const[x,h]=Object(l.useState)(!1),[m,O]=Object(l.useState)(!1),S=Object(l.useMemo)((()=>{var e;return o.a.min(o()(),o()(null!==(e=null==t?void 0:t.rRule.dtstart)&&void 0!==e?e:void 0))}),[t]),f=(()=>{var e,t;const s=Object(c.useUiSetting)("dateFormat:tz");return s&&"Browser"!==s?s:null!==(e=null===(t=o.a.tz)||void 0===t?void 0:t.guess())&&void 0!==e?e:"UTC"})(),p=Object(l.useMemo)((()=>{var e;if(!t)return{startDT:o()().add("24","h"),endDT:o()().add("48","h"),isRecurring:!1,recurrenceSchedule:null,selectedTimezone:[{label:f}]};const s=null!=(null==t||null===(e=t.rRule)||void 0===e?void 0:e.freq),n=s?{...t.rRule,...t.rRule.until?{until:o()(t.rRule.until)}:{}}:null;return{startDT:o()(t.rRule.dtstart),endDT:o()(t.rRule.dtstart).add(t.duration,"ms"),isRecurring:s,recurrenceSchedule:n,selectedTimezone:[{label:t.rRule.tzid}]}}),[t,f]),[y,k]=Object(l.useState)(p.startDT),[E,z]=Object(l.useState)(p.endDT),[M,C]=Object(l.useState)(p.isRecurring),[A,L]=Object(l.useState)(p.recurrenceSchedule),[w,U]=Object(l.useState)(p.selectedTimezone),R=Object(l.useCallback)((()=>{h(!1),O(!1)}),[h]),F=Object(l.useCallback)((()=>{h(!0),O(!0)}),[h]),W=Object(l.useCallback)(((e,t)=>{k(o.a.max(e,S)),t&&(z(null),h(!0),O(!1))}),[k,h,S]),T=Object(l.useCallback)((e=>{z(e),O(!0),h(!1)}),[z,h]),D=Object(l.useCallback)((e=>{const t=o()(e),s=!y||t.isAfter(y)||t.isSame(y),n=t.isSame(E,"day")&&!t.isSame(E,"minute"),a=t.isSame(y,"day")&&!t.isSame(y,"minute")&&(!n||!m);!a&&(x||n&&m)&&s?T(e):W(e,!a)}),[x,m,y,E,T,W]),Y=Object(l.useCallback)((()=>{var s,n;if(!y||!E)return;const a=M&&A?A:{count:1};e({id:null!==(s=null==t?void 0:t.id)&&void 0!==s?s:Object(d.v4)(),rRule:{dtstart:y.toISOString(),tzid:null!==(n=w[0].label)&&void 0!==n?n:f,...a},duration:E.valueOf()-y.valueOf()})}),[e,E,y,w,M,A,t,f]),N=Object(l.useCallback)((()=>{a?n([]):null!=t&&t.id&&n([t.id])}),[t,n,a]);return Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(b.EuiFlexGroup,{gutterSize:"xs",alignItems:"center",direction:"column","data-test-subj":"ruleSnoozeScheduler"},Object(g.jsx)(b.EuiFlexItem,null,Object(g.jsx)(b.EuiDatePickerRange,{startDateControl:Object(g.jsx)(b.EuiDatePicker,{calendarClassName:"hidden",preventOpenOnFocus:!0,showTimeSelect:!0,onFocus:R,selected:y,onChange:k,minDate:S,isInvalid:null==y?void 0:y.isBefore(S)}),endDateControl:Object(g.jsx)(b.EuiDatePicker,{calendarClassName:"hidden",preventOpenOnFocus:!0,showTimeSelect:!0,className:x&&!E?"RuleSnoozeScheduler__pseudofocus":"",onFocus:F,selected:E,onChange:z,minDate:null!=y?y:S,isInvalid:null==y?void 0:y.isAfter(E)})})),Object(g.jsx)(b.EuiFlexItem,null,Object(g.jsx)(b.EuiSplitPanel.Outer,{hasShadow:!1,hasBorder:!0,style:{width:"400px"}},Object(g.jsx)(b.EuiSplitPanel.Inner,{paddingSize:"s"},Object(g.jsx)(b.EuiDatePicker,{inline:!0,showTimeSelect:!0,shadow:!1,startDate:y,endDate:E,selected:m?E:y,onSelect:D,minDate:S,adjustDateOnChange:!1})),Object(g.jsx)(b.EuiHorizontalRule,{margin:"none"}),Object(g.jsx)(b.EuiSplitPanel.Inner,{paddingSize:"m"},Object(g.jsx)(b.EuiFormRow,{display:"columnCompressed",style:{alignItems:"center"},fullWidth:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.timezoneLabel",{defaultMessage:"Timezone"})},Object(g.jsx)(b.EuiComboBox,{compressed:!0,singleSelection:{asPlainText:!0},options:I,selectedOptions:w,onChange:U,isClearable:!1})))))),Object(g.jsx)(b.EuiSpacer,{size:"m"}),Object(g.jsx)(b.EuiSwitch,{compressed:!0,label:i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.reucrringSwitch",{defaultMessage:"Make recurring"}),onChange:()=>C(!M),checked:M}),M&&Object(g.jsx)(r.a.Fragment,null,Object(g.jsx)(b.EuiSpacer,{size:"m"}),Object(g.jsx)(v,{startDate:y,endDate:E,onChange:L,initialState:A})),Object(g.jsx)(b.EuiHorizontalRule,{margin:"m"}),Object(g.jsx)(b.EuiButton,{fill:!0,fullWidth:!0,disabled:!y||!E||y.isAfter(E)||y.isBefore(S),onClick:Y,isLoading:s,"data-test-subj":"scheduler-saveSchedule"},i.i18n.translate("xpack.triggersActionsUI.ruleSnoozeScheduler.saveSchedule",{defaultMessage:"Save schedule"})),(t||u)&&Object(g.jsx)(r.a.Fragment,null,!j&&Object(g.jsx)(b.EuiSpacer,{size:"s"}),Object(g.jsx)(b.EuiPopoverFooter,null,!j&&Object(g.jsx)(b.EuiSpacer,{size:"s"}),Object(g.jsx)(b.EuiFlexGroup,null,Object(g.jsx)(b.EuiFlexItem,{grow:!0},Object(g.jsx)(b.EuiButton,{isLoading:s,color:"danger",onClick:N},i.i18n.translate("xpack.triggersActionsUI.sections.rulesList.deleteSchedule",{defaultMessage:"Delete schedule"})))))))}},209:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(210);case"v8light":return s(212)}},210:function(e,t,s){var n=s(59),a=s(211);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},211:function(e,t,s){(t=s(60)(!1)).push([e.i,".ramRecurrenceScheduler .euiFormRow__labelWrapper{width:calc(20% - 8px)}.ramRecurrenceScheduler .euiFormRow__fieldWrapper{width:80%}",""]),e.exports=t},212:function(e,t,s){var n=s(59),a=s(213);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},213:function(e,t,s){(t=s(60)(!1)).push([e.i,".ramRecurrenceScheduler .euiFormRow__labelWrapper{width:calc(20% - 8px)}.ramRecurrenceScheduler .euiFormRow__fieldWrapper{width:80%}",""]),e.exports=t},214:function(e,t,s){switch(window.__kbnThemeTag__){case"v8dark":return s(215);case"v8light":return s(217)}},215:function(e,t,s){var n=s(59),a=s(216);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},216:function(e,t,s){(t=s(60)(!1)).push([e.i,".RuleSnoozeScheduler__pseudofocus:not(:focus){background-image:linear-gradient(0deg,#07c,#07c 2px,#0000 0,#0000);background-size:100% 100%;outline:none}",""]),e.exports=t},217:function(e,t,s){var n=s(59),a=s(218);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);n(a,{insert:"head",singleton:!1}),e.exports=a.locals||{}},218:function(e,t,s){(t=s(60)(!1)).push([e.i,".RuleSnoozeScheduler__pseudofocus:not(:focus){background-image:linear-gradient(0deg,#07c,#07c 2px,#0000 0,#0000);background-size:100% 100%;outline:none}",""]),e.exports=t}}]);