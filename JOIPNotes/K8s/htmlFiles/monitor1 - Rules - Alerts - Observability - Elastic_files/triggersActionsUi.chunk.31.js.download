/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[31],{158:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));const n="/internal/rac/alerts"},297:function(e,t,r){"use strict";r.r(t),r.d(t,"AlertSummaryWidget",(function(){return o})),r.d(t,"default",(function(){return o}));var n=r(1),i=r(158),a=r(25);var l=r(77),c=r(0);const o=({featureIds:e,filter:t,fullSize:r,onClick:o=(()=>{}),timeRange:u,chartThemes:s})=>{const{alertSummary:{activeAlertCount:d,activeAlerts:v,recoveredAlertCount:f},isLoading:A,error:m}=function({featureIds:e,timeRange:t,filter:r}){const{http:l}=Object(a.b)().services,[c,o]=Object(n.useState)({isLoading:!0,alertSummary:{activeAlertCount:0,activeAlerts:[],recoveredAlertCount:0}}),u=Object(n.useRef)(!1),s=Object(n.useRef)(new AbortController),d=Object(n.useCallback)((async()=>{if(e){u.current=!1,s.current.abort(),s.current=new AbortController;try{const{activeAlertCount:n,activeAlerts:a,recoveredAlertCount:c}=await async function({featureIds:e,filter:t,http:r,signal:n,timeRange:{utcFrom:a,utcTo:l,fixedInterval:c}}){var o,u,s;const d=await r.post(`${i.a}/_alert_summary`,{signal:n,body:JSON.stringify({fixed_interval:c,gte:a,lte:l,featureIds:e,filter:[t]})});return{activeAlertCount:null!==(o=null==d?void 0:d.activeAlertCount)&&void 0!==o?o:0,activeAlerts:null!==(u=null==d?void 0:d.activeAlerts)&&void 0!==u?u:[],recoveredAlertCount:null!==(s=null==d?void 0:d.recoveredAlertCount)&&void 0!==s?s:0}}({featureIds:e,filter:r,http:l,signal:s.current.signal,timeRange:t});u.current||o((()=>({alertSummary:{activeAlertCount:n,activeAlerts:a,recoveredAlertCount:c},isLoading:!1})))}catch(e){u.current||"AbortError"!==e.name&&o((t=>({...t,isLoading:!1,error:e.message})))}}}),[e,r,l,t]);return Object(n.useEffect)((()=>{d()}),[d]),c}({featureIds:e,filter:t,timeRange:u});return A?Object(c.jsx)(l.d,{fullSize:r}):m?Object(c.jsx)(l.b,null):r?d||f?Object(c.jsx)(l.c,{activeAlertCount:d,activeAlerts:v,recoveredAlertCount:f,dateFormat:u.dateFormat,chartThemes:s}):null:Object(c.jsx)(l.a,{activeAlertCount:d,activeAlerts:v,onClick:o,recoveredAlertCount:f,timeRangeTitle:u.title,chartThemes:s})}}}]);