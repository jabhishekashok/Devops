/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.synthetics_bundle_jsonpfunction=window.synthetics_bundle_jsonpfunction||[]).push([[12],{111:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(24),i=a(1),s=n.__importDefault(a(123));t.default=function(e){var t=i.useRef(0),a=i.useState(e),n=a[0],l=a[1],r=i.useCallback((function(e){cancelAnimationFrame(t.current),t.current=requestAnimationFrame((function(){l(e)}))}),[]);return s.default((function(){cancelAnimationFrame(t.current)})),[n,r]}},112:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e){n.useEffect(e,[])}},122:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(1);t.default=function(e,t){var a=n.useState(null),i=a[0],s=a[1];return n.useEffect((function(){if(e.current&&"function"==typeof IntersectionObserver){var a=new IntersectionObserver((function(e){s(e[0])}),t);return a.observe(e.current),function(){s(null),a.disconnect()}}return function(){}}),[e.current,t.threshold,t.root,t.rootMargin]),i}},123:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(24),i=a(1),s=n.__importDefault(a(112));t.default=function(e){var t=i.useRef(e);t.current=e,s.default((function(){return function(){return t.current()}}))}},203:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(24),i=a(1),s=n.__importDefault(a(111)),l=a(70);t.default=function(e,t){void 0===e&&(e=1/0),void 0===t&&(t=1/0);var a=s.default({width:l.isClient?window.innerWidth:e,height:l.isClient?window.innerHeight:t}),n=a[0],r=a[1];return i.useEffect((function(){if(l.isClient){var e=function(){r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}}),[]),n}},342:function(e,t,a){"use strict";var n=a(343),i=a(344);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=y(e)),e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var l=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,o=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),d=["%","/","?",";","#"].concat(u),m=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,h={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},f=a(11);function y(e,t,a){if(e&&i.isObject(e)&&e instanceof s)return e;var n=new s;return n.parse(e,t,a),n}s.prototype.parse=function(e,t,a){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),r=-1!==s&&s<e.indexOf("#")?"?":"#",c=e.split(r);c[0]=c[0].replace(/\\/g,"/");var y=e=c.join(r);if(y=y.trim(),!a&&1===e.split("#").length){var v=o.exec(y);if(v)return this.path=y,this.href=y,this.pathname=v[1],v[2]?(this.search=v[2],this.query=t?f.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=l.exec(y);if(x){var S=(x=x[0]).toLowerCase();this.protocol=S,y=y.substr(x.length)}if(a||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var M="//"===y.substr(0,2);!M||x&&E[x]||(y=y.substr(2),this.slashes=!0)}if(!E[x]&&(M||x&&!b[x])){for(var k,O,j=-1,w=0;w<m.length;w++)-1!==(I=y.indexOf(m[w]))&&(-1===j||I<j)&&(j=I);for(-1!==(O=-1===j?y.lastIndexOf("@"):y.lastIndexOf("@",j))&&(k=y.slice(0,O),y=y.slice(O+1),this.auth=decodeURIComponent(k)),j=-1,w=0;w<d.length;w++){var I;-1!==(I=y.indexOf(d[w]))&&(-1===j||I<j)&&(j=I)}-1===j&&(j=y.length),this.host=y.slice(0,j),y=y.slice(j),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var T=this.hostname.split(/\./),F=(w=0,T.length);w<F;w++){var L=T[w];if(L&&!L.match(p)){for(var A="",P=0,D=L.length;P<D;P++)L.charCodeAt(P)>127?A+="x":A+=L[P];if(!A.match(p)){var R=T.slice(0,w),N=T.slice(w+1),B=L.match(g);B&&(R.push(B[1]),N.unshift(B[2])),N.length&&(y="/"+N.join(".")+y),this.hostname=R.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=n.toASCII(this.hostname));var _=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+_,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!h[S])for(w=0,F=u.length;w<F;w++){var H=u[w];if(-1!==y.indexOf(H)){var U=encodeURIComponent(H);U===H&&(U=escape(H)),y=y.split(H).join(U)}}var $=y.indexOf("#");-1!==$&&(this.hash=y.substr($),y=y.slice(0,$));var G=y.indexOf("?");if(-1!==G?(this.search=y.substr(G),this.query=y.substr(G+1),t&&(this.query=f.parse(this.query)),y=y.slice(0,G)):t&&(this.search="",this.query={}),y&&(this.pathname=y),b[S]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){_=this.pathname||"";var W=this.search||"";this.path=_+W}return this.href=this.format(),this},s.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",n=this.hash||"",s=!1,l="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(l=f.stringify(this.query));var r=this.search||l&&"?"+l||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==s?(s="//"+(s||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),t+s+(a=a.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(r=r.replace("#","%23"))+n},s.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},s.prototype.resolveObject=function(e){if(i.isString(e)){var t=new s;t.parse(e,!1,!0),e=t}for(var a=new s,n=Object.keys(this),l=0;l<n.length;l++){var r=n[l];a[r]=this[r]}if(a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),c=0;c<o.length;c++){var u=o[c];"protocol"!==u&&(a[u]=e[u])}return b[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(e.protocol&&e.protocol!==a.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),m=0;m<d.length;m++){var p=d[m];a[p]=e[p]}return a.href=a.format(),a}if(a.protocol=e.protocol,e.host||E[e.protocol])a.pathname=e.pathname;else{for(var g=(e.pathname||"").split("/");g.length&&!(e.host=g.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==g[0]&&g.unshift(""),g.length<2&&g.unshift(""),a.pathname=g.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var h=a.pathname||"",f=a.search||"";a.path=h+f}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var y=a.pathname&&"/"===a.pathname.charAt(0),v=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=v||y||a.host&&e.pathname,S=x,M=a.pathname&&a.pathname.split("/")||[],k=(g=e.pathname&&e.pathname.split("/")||[],a.protocol&&!b[a.protocol]);if(k&&(a.hostname="",a.port=null,a.host&&(""===M[0]?M[0]=a.host:M.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===g[0]?g[0]=e.host:g.unshift(e.host)),e.host=null),x=x&&(""===g[0]||""===M[0])),v)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,M=g;else if(g.length)M||(M=[]),M.pop(),M=M.concat(g),a.search=e.search,a.query=e.query;else if(!i.isNullOrUndefined(e.search))return k&&(a.hostname=a.host=M.shift(),(C=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=C.shift(),a.host=a.hostname=C.shift())),a.search=e.search,a.query=e.query,i.isNull(a.pathname)&&i.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a;if(!M.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var O=M.slice(-1)[0],j=(a.host||e.host||M.length>1)&&("."===O||".."===O)||""===O,w=0,I=M.length;I>=0;I--)"."===(O=M[I])?M.splice(I,1):".."===O?(M.splice(I,1),w++):w&&(M.splice(I,1),w--);if(!x&&!S)for(;w--;w)M.unshift("..");!x||""===M[0]||M[0]&&"/"===M[0].charAt(0)||M.unshift(""),j&&"/"!==M.join("/").substr(-1)&&M.push("");var C,T=""===M[0]||M[0]&&"/"===M[0].charAt(0);return k&&(a.hostname=a.host=T?"":M.length?M.shift():"",(C=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=C.shift(),a.host=a.hostname=C.shift())),(x=x||a.host&&M.length)&&!T&&M.unshift(""),M.length?a.pathname=M.join("/"):(a.pathname=null,a.path=null),i.isNull(a.pathname)&&i.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},s.prototype.parseHost=function(){var e=this.host,t=r.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},343:function(e,t,a){e.exports=a(27)(2817)},344:function(e,t,a){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},458:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return Ig}));var n=a(1),i=a.n(n),s=a(30),l=a.n(s),r=a(0),o=a(52),c=a(51),u=a(23),d=a(19),m=a(8),p=a(21),g=a(25),h=a(9),E=a(61),b=a(58),f=a(60),y=a.n(f),v=a(20),x=a(79);const S=Object(x.c)(),M=Object(x.c)(),k=Object(x.c)(),O=()=>i.a.createElement("div",null,i.a.createElement(x.b,{node:k}));var j=a(103);const{FOCUS_CONNECTOR_FIELD:w,DATE_RANGE_START:I,DATE_RANGE_END:C,AUTOREFRESH_INTERVAL:T,AUTOREFRESH_IS_PAUSED:F}=o.e,L=(e,t=!1)=>(t&&(delete e.absoluteDateRangeStart,delete e.absoluteDateRangeEnd,Object.keys(e).forEach((t=>{const a=e[t];null!=a&&""!==a||delete e[t],"dateRangeStart"===t&&a===I&&delete e[t],"dateRangeEnd"===t&&a===C&&delete e[t],"autorefreshIsPaused"===t&&a===F&&delete e[t],"autorefreshInterval"===t&&a===T&&delete e[t],"focusConnectorField"===t&&a===w&&delete e[t]}))),`?${Object(j.stringify)(e,{sort:!1})}`);var A=a(57),P=a(4);const D=e=>{var t,a,i,s,l,o;const c=Object(A.i)()[0](),u=Object(p.useKibana)(),d=null===(t=u.services.chrome)||void 0===t?void 0:t.setBreadcrumbs,m=null!==(a=null===(i=u.services.application)||void 0===i?void 0:i.getUrlForApp(P.a.ID))&&void 0!==a?a:"",g=null!==(s=null===(l=u.services.application)||void 0===l?void 0:l.getUrlForApp("observability-overview"))&&void 0!==s?s:"",h=null===(o=u.services.application)||void 0===o?void 0:o.navigateToUrl;Object(n.useEffect)((()=>{var t,a;d&&d((t=((e,t,a)=>{if(a){const t={...a};delete t.statusFilter;const n=L(t,!0);e+="?"===n?"":n}return[{text:r.i18n.translate("xpack.synthetics.breadcrumbs.observabilityText",{defaultMessage:"Observability"}),href:t},{text:r.i18n.translate("xpack.synthetics.breadcrumbs.legacyOverviewBreadcrumbText",{defaultMessage:"Uptime"}),href:e}]})(m,g,c).concat(e),a=h,t.map((e=>({...e,...e.href?{onClick:t=>{a&&e.href&&(t.preventDefault(),a(e.href))}}:{}})))))}),[m,g,e,h,c,d])},R=()=>{Object(h.useTrackPageview)({app:"uptime",path:"mapping-error"}),Object(h.useTrackPageview)({app:"uptime",path:"mapping-error",delay:15e3});const e=Object(p.useKibana)().services.docLinks;return D([{text:r.i18n.translate("xpack.synthetics.mappingErrorRoute.breadcrumb",{defaultMessage:"Mapping error"})}]),i.a.createElement(d.EuiEmptyPrompt,{"data-test-subj":"xpack.synthetics.mappingsErrorPage",iconColor:"danger",iconType:"cross",title:i.a.createElement(d.EuiTitle,null,i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.title",defaultMessage:"Heartbeat mappings missing"}))),body:i.a.createElement("div",null,i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.bodyMessage",defaultMessage:"Incorrect mappings detected! Perhaps you forgot to run the heartbeat {setup} command?",values:{setup:i.a.createElement(d.EuiCode,null,"setup")}})),e&&i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.public.pages.mappingError.bodyDocsLink",defaultMessage:"You can learn how to troubleshoot this issue in the {docsLink}.",values:{docsLink:i.a.createElement(d.EuiLink,{href:`${e.ELASTIC_WEBSITE_URL}guide/en/observability/${e.DOC_LINK_VERSION}/troubleshoot-uptime-mapping-issues.html`,target:"_blank"},"docs")}})))})};var N=a(2),B=a(54);const _=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationTitle",{defaultMessage:"Job successfully created"}),z=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationText",{defaultMessage:"The analysis is now running for response duration chart. It might take a while before results are added to the response times graph."}),H=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedLazyNotificationText",{defaultMessage:"The analysis is waiting for an ML node to become available. It might take a while before results are added to the response times graph."}),U=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreationFailedNotificationTitle",{defaultMessage:"Job creation failed"}),$=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreationFailedNotificationText",{defaultMessage:"Your current license may not allow for creating machine learning jobs, or this job may already exist."}),G=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionNotificationTitle",{defaultMessage:"Job deleted"}),W=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionSuccessNotificationText",{defaultMessage:"Job is successfully deleted"}),q=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobDeletionConfirmLabel",{defaultMessage:"Delete anomaly detection job?"}),K=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.jobCreatedNotificationText.viewJobLinkText",{defaultMessage:"View job"}),V=r.i18n.translate("xpack.synthetics.ml.durationChart.exploreInMlApp",{defaultMessage:"Explore in ML App"}),J=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enableAnomalyDetectionTitle",{defaultMessage:"Enable anomaly detection"}),Y=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.anomalyDetectionTitle",{defaultMessage:"Anomaly detection"}),Z=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.disableAnomalyDetectionTitle",{defaultMessage:"Disable anomaly detection"}),X=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enableAnomalyAlert",{defaultMessage:"Enable anomaly alert"}),Q=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.noPermissionsTooltip",{defaultMessage:"You need read-write access to Uptime to create anomaly alerts."}),ee=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.disableAnomalyAlert",{defaultMessage:"Disable anomaly alert"}),te=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageAnomalyDetectionTitle",{defaultMessage:"Manage anomaly detection"}),ae=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription.mlJobsPageLinkText",{defaultMessage:"Machine Learning jobs management page"}),ne=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription.noteText",{defaultMessage:"Note: It might take a few minutes for the job to begin calculating results."}),ie=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.createNewJobButtonLabel",{defaultMessage:"Create new job"}),se=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.cancelLabel",{defaultMessage:"Cancel"}),le=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.createMLJobDescription",{defaultMessage:"Here you can create a machine learning job to calculate anomaly scores on\n    response durations for Uptime Monitor. Once enabled, the monitor duration chart on the details page\n    will show the expected bounds and annotate the graph with anomalies. You can also potentially\n     identify periods of increased latency across geographical regions."}),re=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.startTrial",{defaultMessage:"Start free 14-day trial"}),oe=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.startTrialDesc",{defaultMessage:"In order to access duration anomaly detection, you have to be subscribed to an Elastic Platinum license."}),ce=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.enable_or_manage_job",{defaultMessage:"You can enable anomaly detection job or if job is already there you can manage the job or alert."}),ue=r.i18n.translate("xpack.synthetics.ml.enableAnomalyDetectionPanel.add_job_permissions_needed",{defaultMessage:"Permissions needed"});var de=a(342),me=a.n(de),pe=a(37),ge=a.n(pe),he=a(176);const Ee=({basePath:e,monitorId:t,dateRange:a})=>{const n={ml:{jobIds:[Object(he.b)(t)]},refreshInterval:{pause:!0,value:0},time:a},i={mlExplorerFilter:{filterActive:!0,filteredFields:["monitor.id",t]},mlExplorerSwimlane:{viewByFieldName:"observer.geo.name"}};return me.a.format({pathname:e+"/app/ml",hash:`/explorer?_g=${ge.a.encode(n)}`+(t?`&_a=${ge.a.encode(i)}`:"")})},be=({basePath:e,monitorId:t,dateRange:a,children:n})=>{const s=Ee({basePath:e,monitorId:t,dateRange:a});return i.a.createElement(d.EuiButtonEmpty,{children:n,size:"s",href:s,target:"_blank"})};var fe=a(83);const ye=({onConfirm:e,onCancel:t})=>i.a.createElement(d.EuiConfirmModal,{title:ee,onCancel:t,onConfirm:e,cancelButtonText:"Cancel",confirmButtonText:"Delete",buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"uptimeMLAlertDeleteConfirmModel"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.confirmAlertDeleteMessage",defaultMessage:"Are you sure you want to delete the alert for anomalies?"}))),ve=({alertFlyoutVisible:e,initialAlert:t,setAlertFlyoutVisibility:a})=>{const{triggersActionsUi:s}=Object(p.useKibana)().services,l=Object(n.useMemo)((()=>s.getEditAlertFlyout({initialRule:t,onClose:()=>{a(!1)}})),[t,a,s]);return i.a.createElement(i.a.Fragment,null,e&&l)},xe=({hasMLJob:e,onEnableJob:t,onJobDelete:a})=>{var s,l,r;const o=Object(p.useKibana)(),[u,m]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),{basePath:f}=Object(n.useContext)(E.c),y=Object(c.useSelector)(B.c),v=Object(c.useSelector)(B.l),x=Object(c.useSelector)(fe.m),{loading:S}=Object(c.useSelector)(B.h),{loading:M}=Object(c.useSelector)(B.p),{dateRangeStart:k,dateRangeEnd:O}=Object(A.e)(),j=Object(A.f)(),w=Object(c.useDispatch)(),I=(()=>{const{lastRefresh:e}=Object(n.useContext)(E.a),t=Object(c.useDispatch)(),a=Object(A.f)(),{data:i}=Object(c.useSelector)(fe.c),s=Object(c.useSelector)(B.A);return Object(n.useEffect)((()=>{t(fe.i.get({monitorId:a}))}),[a,e,t,s]),i})(),[C,T]=Object(n.useState)(!1),F=v||S||x||M,L=e?Y:J,P=i.a.createElement(d.EuiButton,{"data-test-subj":e?"uptimeManageMLJobBtn":"uptimeEnableAnomalyBtn",onClick:e?()=>m(!u):t,disabled:e&&!y,isLoading:F,size:"s","aria-label":ce},F?"":L),D=null!==(s=null===(l=o.services.application)||void 0===l||null===(r=l.capabilities.uptime)||void 0===r?void 0:r.save)&&void 0!==s&&s,R=[{id:0,title:te,items:[{name:V,icon:i.a.createElement(d.EuiIcon,{type:"dataVisualizer",size:"m"}),href:Ee({basePath:f,monitorId:j,dateRange:{from:k,to:O}})},...I?[{name:"Anomaly alert",icon:"bell","data-test-subj":"uptimeManageAnomalyAlertBtn",panel:1}]:[{name:X,"data-test-subj":"uptimeEnableAnomalyAlertBtn",icon:"bell",disabled:!D,toolTipContent:D?null:Q,onClick:()=>{w(Object(b.O)(N.a.DURATION_ANOMALY)),w(Object(b.P)(!0)),m(!1)}}],{name:Z,"data-test-subj":"uptimeDeleteMLJobBtn",icon:i.a.createElement(d.EuiIcon,{type:"trash",size:"m"}),onClick:()=>{m(!1),a()}}]},{id:1,title:"Anomaly alert",items:[{name:"Edit","data-test-subj":"uptimeEditAnomalyAlertBtn",onClick:()=>{h(!0),m(!1)}},{name:"Disable","data-test-subj":"uptimeDisableAnomalyAlertBtn",onClick:()=>{T(!0)}}]}],_=Object(n.useCallback)((()=>{h(!1),w(fe.i.get({monitorId:j}))}),[w,j]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopover,{button:P,isOpen:u,closePopover:()=>m(!1),panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,panels:R,"data-test-subj":"uptimeManageMLContextMenu"})),C&&i.a.createElement(ye,{onConfirm:()=>{w(fe.g.get({alertId:null==I?void 0:I.id})),T(!1)},onCancel:()=>{T(!1)}}),g&&i.a.createElement(ve,{initialAlert:I,alertFlyoutVisible:g,setAlertFlyoutVisibility:_}))};var Se=a(22),Me=a.n(Se),ke=a(129),Oe=a(110),je=a(158);const we=({content:e,dataTestSubj:t,isDisabled:a,isActive:n,value:s,withNext:l})=>{const[r,o]=Object(A.i)(),{statusFilter:c}=r();return i.a.createElement(d.EuiFilterButton,{"data-test-subj":t,hasActiveFilters:n,isDisabled:a,onClick:()=>{o({statusFilter:c===s?"":s,pagination:""})},withNext:l},e)};var Ie=a(91);const Ce=()=>{const{statusFilter:e}=Object(A.e)();return i.a.createElement(d.EuiFilterGroup,null,i.a.createElement(we,{content:r.i18n.translate("xpack.synthetics.filterBar.filterAllLabel",{defaultMessage:"All"}),dataTestSubj:"xpack.synthetics.filterBar.filterStatusAll",value:"",withNext:!0,isActive:""===e}),i.a.createElement(we,{content:Ie.h,dataTestSubj:"xpack.synthetics.filterBar.filterStatusUp",value:"up",withNext:!0,isActive:"up"===e}),i.a.createElement(we,{content:Ie.f,dataTestSubj:"xpack.synthetics.filterBar.filterStatusDown",value:"down",withNext:!1,isActive:"down"===e}))};var Te=a(224);const Fe=()=>i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.pingList.checkHistoryTitle",defaultMessage:"History"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Ce,null)),i.a.createElement(d.EuiFlexItem,{grow:!1,style:{maxWidth:"135px"}},i.a.createElement(Te.a,null)));var Le=a(6),Ae=a.n(Le);const Pe=r.i18n.translate("xpack.synthetics.pingList.statusColumnLabel",{defaultMessage:"Status"}),De=r.i18n.translate("xpack.synthetics.pingList.responseCodeColumnLabel",{defaultMessage:"Response code"}),Re=(r.i18n.translate("xpack.synthetics.pingList.errorTypeColumnLabel",{defaultMessage:"Error type"}),r.i18n.translate("xpack.synthetics.pingList.errorColumnLabel",{defaultMessage:"Error"})),Ne=r.i18n.translate("xpack.synthetics.pingList.locationNameColumnLabel",{defaultMessage:"Location"}),Be=r.i18n.translate("xpack.synthetics.pingList.timestampColumnLabel",{defaultMessage:"Timestamp"}),_e=({pingStatus:e,item:t})=>{const{colors:{dangerBehindText:a}}=Object(n.useContext)(E.g),s=Ae()(t.timestamp);let l="";return l=Ae()().diff(s,"d")>1?s.format("ll LTS"):s.format("LTS"),i.a.createElement("div",{"data-test-subj":`xpack.synthetics.pingList.ping-${t.docId}`},i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:e===o.F.UP?"success":a},(c=e,t.monitor.type===o.y.BROWSER?"up"===c?Ie.e:Ie.g:"up"===c?Ie.h:Ie.f)),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,{size:"xs",color:"subdued"},r.i18n.translate("xpack.synthetics.pingList.recencyMessage",{values:{fromNow:l},defaultMessage:"Checked {fromNow}",description:"A string used to inform our users how long ago Heartbeat pinged the selected host."})));var c},ze=({location:e})=>e?i.a.createElement(d.EuiText,null,e):i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-observer-options.html",target:"_blank"},r.i18n.translate("xpack.synthetics.locationName.helpLinkAnnotation",{defaultMessage:"Add location",description:"Text that instructs the user to navigate to our docs to add a geographic location to their data"}));var He=a(122),Ue=a.n(He),$e=a(53);const Ge=r.i18n.translate("xpack.synthetics.synthetics.prevStepButton.airaLabel",{defaultMessage:"Previous step"}),We=r.i18n.translate("xpack.synthetics.synthetics.nextStepButton.ariaLabel",{defaultMessage:"Next step"}),qe=r.i18n.translate("xpack.synthetics.synthetics.imageLoadingSpinner.ariaLabel",{defaultMessage:"An animated spinner indicating the image is loading"}),Ke=r.i18n.translate("xpack.synthetics.synthetics.thumbnail.fullSize.alt",{defaultMessage:"A larger version of the screenshot for this journey step's thumbnail."}),Ve=Object(g.euiStyled)(d.EuiText)`
  display: flex;
  align-items: center;
  width: 120px;
  height: 67.5px;
  justify-content: center;
  text-align: center;
  border: 1px solid ${e=>e.theme.eui.euiColorLightShade};
`,Je=()=>i.a.createElement(Ve,{"data-test-subj":"pingTimestampNoImageAvailable"},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.noImageMessage",defaultMessage:"No image available"}))),Ye=Object(g.euiStyled)(d.EuiText)`
  display: flex;
  align-items: center;
  width: 120px;
  height: 65.5px;
  justify-content: center;
  text-align: center;
  border: 1px solid ${e=>e.theme.eui.euiColorLightShade};
`,Ze=()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiProgress,{size:"xs"}),i.a.createElement(Ye,{"data-test-subj":"pingTimestampSpinner","aria-label":qe},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.loadingImageMessage",defaultMessage:"Loading"})))),Xe=({imageCaption:e,isLoading:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,t?i.a.createElement(Ze,null):i.a.createElement(Je,null)),i.a.createElement(d.EuiFlexItem,null,e)),Qe=({captionContent:e,imgRef:t,imgSrc:a,maxSteps:s,setStepNumber:l,stepNumber:r,isLoading:o,label:c,onVisible:u})=>{const{euiTheme:m}=Object(d.useEuiTheme)(),p=Object(d.useIsWithinMaxBreakpoint)("m");return Object(n.useEffect)((()=>(u(!0),()=>{u(!1)})),[]),i.a.createElement(et,{onClick:e=>{e.stopPropagation()}},i.a.createElement("div",{className:"stepArrowsFullScreen"},(a||t)&&i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(nt,{disabled:1===r,onClick:e=>{l(r-1),e.preventDefault()},iconType:"arrowLeft","aria-label":Ge,isLoading:o,$_css:p?0:"auto"},Ge)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(tt,null,e)),i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(it,{disabled:r===s,onClick:e=>{l(r+1),e.stopPropagation()},iconType:"arrowRight",iconSide:"right","aria-label":We,isLoading:o,$_css2:p?0:"auto"},We))),i.a.createElement(at,{className:"eui-textNoWrap",size:"s",$_css3:m.size.xs},c)))},et=g.euiStyled.div`
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  display: inline-block;
  width: 100%;
  text-decoration: none;
`,tt=Object(g.euiStyled)(d.EuiText)((e=>({color:e.theme.eui.euiTextColor})));var at=Me()(tt).withConfig({displayName:"_StyledSecondaryText",componentId:"sc-1m82dva-0"})((e=>({padding:e.$_css3}))),nt=Me()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty",componentId:"sc-1m82dva-1"})((e=>({marginLeft:e.$_css}))),it=Me()(d.EuiButtonEmpty).withConfig({displayName:"_StyledEuiButtonEmpty2",componentId:"sc-1m82dva-2"})((e=>({marginRight:e.$_css2}))),st=a(223);const lt=Object(g.euiStyled)(d.EuiImage)`
  &&& .euiImageFullScreenWrapper {
    figcaption {
      display: flex;
    }
  }
`,rt=({captionContent:e,imageCaption:t,imageData:a})=>a?i.a.createElement(lt,{allowFullScreen:!0,alt:e,caption:t,"data-test-subj":"pingTimestampImage",hasShadow:!0,url:a,size:"s",className:"syntheticsStepImage"}):i.a.createElement(Ze,null),ot=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:s})=>(Object(st.a)(n,s,a),i.a.createElement(rt,{captionContent:e,imageCaption:t,imageData:a})),ct=({captionContent:e,imageCaption:t,imageData:a,imgRef:n,imgSrc:s,setImageData:l})=>s?i.a.createElement(rt,{captionContent:e,imageCaption:t,imageData:a}):n?i.a.createElement(ot,{captionContent:e,imageCaption:t,imageData:a,imgRef:n,setImageData:l}):null,ut=({captionContent:e,imageCaption:t,imgRef:a,imgSrc:n,isImagePopoverOpen:s})=>{const[l,r]=i.a.useState(n||void 0);i.a.useEffect((()=>{n&&n!==l&&r(n)}),[n,l]);const o=i.a.useCallback((e=>r(e)),[r]);return i.a.createElement(d.EuiPopover,{anchorPosition:"leftDown",button:i.a.createElement(ct,{captionContent:e,imageCaption:t,imgRef:a,imgSrc:n,setImageData:o,imageData:l}),isOpen:s,closePopover:()=>{}},l?i.a.createElement(d.EuiImage,{alt:Ke,url:l,style:{height:360,width:640,objectFit:"contain"}}):i.a.createElement(Ze,null))},dt=g.euiStyled.div`
  figcaption {
    display: none;
  }
`,mt=({label:e,checkGroup:t,stepStatus:a,allStepsLoaded:s=!0,initialStepNo:l=1})=>{var c,m,p,g;const[b,f]=Object(n.useState)(l),[y,v]=Object(n.useState)(!1),[x,S]=Object(n.useState)([]),M=i.a.useRef(null),{basePath:k}=Object(n.useContext)(E.c),O=`${k}/internal/uptime/journey/screenshot/${t}/${b}`,j=Ue()(M,{root:null,rootMargin:"0px",threshold:1}),[w,I]=Object(n.useState)(void 0),C=Boolean(w&&(null==w||null===(c=w.ref)||void 0===c||null===(m=c.screenshotRef)||void 0===m||null===(p=m.synthetics)||void 0===p||null===(g=p.step)||void 0===g?void 0:g.index)===b),{data:T,loading:F}=(({stepStatus:e,hasImage:t,hasIntersected:a,imgPath:i})=>{const s=Object(u.useRouteMatch)(o.r),l=Object(u.useRouteMatch)(o.s),[r,c]=Object(n.useState)(0),d="skipped"===e,{data:m,loading:p}=Object(h.useFetcher)((()=>d?new Promise((e=>e(null))):a&&!t?Object(Oe.e)(i):void 0),[a,i,d,r]);return Object(n.useEffect)((()=>{p||t||!(null!=s&&s.isExact||null!=l&&l.isExact)||d||setTimeout((()=>{c((e=>e<20?e+1:e))}),5e3)}),[t,p,null==s?void 0:s.isExact,null==l?void 0:l.isExact,d]),{data:m,loading:p}})({hasImage:Boolean(x[b-1])||C,hasIntersected:Boolean(j&&1===j.intersectionRatio),stepStatus:a,imgPath:O});let L;var A;Object(n.useEffect)((()=>{Object($e.O)(T)?I(T):Object($e.N)(T)&&S((e=>[...e,null==T?void 0:T.src]))}),[T]),Object($e.N)(T)&&(L=null!==(A=null==x?void 0:x[b-1])&&void 0!==A?A:T.src);const P=((e,t)=>r.i18n.translate("xpack.synthetics.synthetics.pingTimestamp.captionContent",{defaultMessage:"Step: {stepNumber} of {totalSteps}",values:{stepNumber:e,totalSteps:t}}))(b,null==T?void 0:T.maxSteps),[D,R]=Object(n.useState)(0),N=i.a.createElement(Qe,{captionContent:P,imgSrc:L,imgRef:w,maxSteps:null==T?void 0:T.maxSteps,setStepNumber:f,stepNumber:b,isLoading:Boolean(F),label:e,onVisible:e=>R((t=>e?t+1:t-1))});return Object(n.useEffect)((()=>{1===D&&b!==l&&f(l)}),[D,l,b]),i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(dt,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),ref:M},(L||w)&&i.a.createElement(ut,{captionContent:P,imageCaption:N,imgSrc:L,imgRef:w,isImagePopoverOpen:y}),!L&&!w&&i.a.createElement(Xe,{imageCaption:N,isLoading:F||!s}))),e&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{className:"eui-textNoWrap"},e)))};var pt=a(76);function gt({testRunId:e,serviceError:t,errors:a,locations:i}){const[s,l]=Object(n.useState)([]),[r,o]=Object(n.useState)(null),c=Object(n.useMemo)((()=>(null!=i?i:[]).filter((e=>e.isServiceManaged))),[i]);Object(n.useEffect)((()=>{l([]),o(null)}),[e]),Object(n.useEffect)((()=>{(s.length||a.length)&&l(a)}),[a]),Object(n.useEffect)((()=>{(null==r?void 0:r.message)!==(null==t?void 0:t.message)&&o(t)}),[t]);const u=Object(n.useMemo)((()=>c.reduce(((e,t)=>({...e,[t.id]:t})),{})),[c]),d=c.length-(null!=s?s:[]).filter((({locationId:e})=>!!e)).length,m=!!r||(null==s?void 0:s.length)&&(null==s?void 0:s.length)===c.length,p=Object(n.useMemo)((()=>m?[{name:"Error",message:ft,title:ht}]:(null==s?void 0:s.length)>0?s.map((({locationId:e})=>u[e])).filter((e=>!!e)).map((e=>({name:"Error",message:bt(e.label),title:Et}))):[]),[u,s,m]);return{expectPings:d,hasBlockingError:m,blockingErrorMessage:m?ft:null,errorMessages:p}}const ht=r.i18n.translate("xpack.synthetics.testRun.pushErrorLabel",{defaultMessage:"Push error"}),Et=r.i18n.translate("xpack.synthetics.testRun.runErrorLabel",{defaultMessage:"Error running test"}),bt=e=>r.i18n.translate("xpack.synthetics.testRun.runErrorLocation",{defaultMessage:"Failed to run monitor on location {locationName}.",values:{locationName:e}}),ft=r.i18n.translate("xpack.synthetics.testRun.pushError",{defaultMessage:"Failed to push the monitor to service."}),yt=e=>{let t=Date.parse(e);return isNaN(t)&&(t=parseInt(e,10)),Ae()(t)};var vt=a(202);function xt(e,t=!0){const{refreshApp:a}=Object(n.useContext)(E.a),[i,s]=Object(n.useState)(Date.now()),[l]=Object(n.useState)((()=>setInterval((()=>{t&&a(),s(Date.now())}),null!=e?e:5e3)));return Object(n.useEffect)((()=>()=>{clearInterval(l)}),[l]),{refreshTimer:l,lastRefresh:i}}const St=({configId:e,expectSummaryDocs:t,testRunId:a})=>{const{refreshTimer:i,lastRefresh:s}=xt(2e3,!1),{data:l,loading:r}=Object(h.useEsSearch)(Object(h.createEsParams)({index:o.I,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{term:{config_id:e}},{exists:{field:"summary"}},...a?[{term:{test_run_id:a}}]:[]]}}},size:1e3}),[e,s],{name:"TestRunData"}),c=Object(n.useRef)({checksum:"",time:Date.now()});return Object(n.useMemo)((()=>{var e;const a=null!==(e=null==l?void 0:l.hits.hits)&&void 0!==e?e:[],n=a.map((({_id:e})=>e)).reduce(((e,t)=>e+t),"");return n!==c.current.checksum&&(c.current.checksum=n,c.current.time=Date.now()),a.length>0?(a.length>=t&&clearInterval(i),{data:l,loading:r,summaryDocs:a.map((e=>{var t;return{...e._source,timestamp:null===(t=e._source)||void 0===t?void 0:t["@timestamp"],docId:e._id}})),lastUpdated:c.current.time}):{data:l,loading:r,summaryDocs:null,lastUpdated:c.current.time}}),[t,l,r,i])};var Mt=a(93);function kt({checkGroupId:e,title:t,summaryDocs:a,journeyStarted:i,isCompleted:s}){var l,o;const{basePath:c}=Object(Mt.c)();let u=0;a&&a.length>0&&a.forEach((e=>{var t,a;u+=null!==(t=null===(a=e.monitor.duration)||void 0===a?void 0:a.us)&&void 0!==t?t:0}));const m=null==a?void 0:a[0];return n.createElement(d.EuiFlexGroup,{gutterSize:"s",alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiTitle,{size:"xs"},n.createElement("h3",null,null!=t?t:jt))),n.createElement(d.EuiFlexItem,{grow:!0},s?n.createElement(d.EuiFlexGroup,{alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiBadge,{color:(null==m||null===(l=m.summary)||void 0===l?void 0:l.down)>0?"danger":"success"},(null==m||null===(o=m.summary)||void 0===o?void 0:o.down)>0?It:wt)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiText,{size:"xs",color:"subdued"},r.i18n.translate("xpack.synthetics.monitorManagement.timeTaken",{defaultMessage:"Took {timeTaken}",values:{timeTaken:an(u)}})))):n.createElement(d.EuiFlexGroup,{alignItems:"center"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiBadge,{style:{width:100},color:i?"primary":"warning"},i?Ct:Ot)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiLoadingSpinner,null)))),e&&n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiLink,{href:`${c}/app/uptime/journey/${e}/steps`,target:"_blank"},Tt)))}const Ot=r.i18n.translate("xpack.synthetics.monitorManagement.pending",{defaultMessage:"PENDING"}),jt=r.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),wt=r.i18n.translate("xpack.synthetics.monitorManagement.completed",{defaultMessage:"COMPLETED"}),It=r.i18n.translate("xpack.synthetics.monitorManagement.failed",{defaultMessage:"FAILED"}),Ct=r.i18n.translate("xpack.synthetics.monitorManagement.inProgress",{defaultMessage:"IN PROGRESS"}),Tt=r.i18n.translate("xpack.synthetics.monitorManagement.viewTestRunDetails",{defaultMessage:"View test result details"}),Ft=({monitorId:e,testRunId:t,duration:a,schedule:s,expectPings:l,isUpdating:r,updateMonitorStatus:o,stopProgressTrack:c})=>{const{summaryDocs:u,data:m,lastUpdated:p}=St({configId:e,testRunId:t,expectSummaryDocs:l}),g=Object(n.useRef)(Date.now()),[h,E]=Object(n.useState)(Date.now());Object(n.useEffect)((()=>{null!=u&&u.length&&o()}),[o,u]),Object(n.useEffect)((()=>{E(Date.now()-g.current);const e=Date.now()-p,t=a/1e3;e>=Object(vt.a)(s)-t&&c()}),[m,p,a,s,c]);const b=1e3*h;return r||b>a?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ct),i.a.createElement(d.EuiProgress,{size:"xs"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ct),i.a.createElement(d.EuiProgress,{value:b,max:a,size:"xs"}))},Lt=r.i18n.translate("xpack.synthetics.stepList.stepName",{defaultMessage:"Step name"}),At=r.i18n.translate("xpack.synthetics.stepList.collapseRow",{defaultMessage:"Collapse"}),Pt=r.i18n.translate("xpack.synthetics.stepList.expandRow",{defaultMessage:"Expand"});function Dt(e,t){switch(t){case"succeeded":return e.success;case"failed":return e.dangerBehindText;default:return"default"}}const Rt=({status:e,stepNo:t,isMobile:a})=>{const s=Object(n.useContext)(E.g);return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},!a&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{className:"eui-textNoWrap"},i.a.createElement("strong",null,t,"."))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiBadge,{color:Dt(s.colors,e)},function(e){switch(e){case"succeeded":return r.i18n.translate("xpack.synthetics.synthetics.statusBadge.succeededMessage",{defaultMessage:"Succeeded"});case"failed":return r.i18n.translate("xpack.synthetics.synthetics.statusBadge.failedMessage",{defaultMessage:"Failed"});case"skipped":return r.i18n.translate("xpack.synthetics.synthetics.statusBadge.skippedMessage",{defaultMessage:"Skipped"});default:return null}}(e))))},Nt=({to:e,children:t})=>{const a=Object(u.useHistory)(),n={href:a.createHref({pathname:e}),onClick:t=>{(e=>e.defaultPrevented||(e=>!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey))(e)||!(e=>0===e.button)(e)||(e=>{const t=e.target.getAttribute("target");return!!t&&"_self"!==t})(e))(t)||(t.preventDefault(),a.push(e))}};return i.a.cloneElement(t,n)},Bt=({to:e,...t})=>i.a.createElement(Nt,{to:e},i.a.createElement(d.EuiLink,t)),_t=({to:e,...t})=>i.a.createElement(Nt,{to:e},i.a.createElement(d.EuiButtonEmpty,t)),zt=({children:e,checkGroupId:t,stepIndex:a})=>{const n=`/journey/${t}/step/${a}`;return i.a.createElement(_t,{"data-test-subj":"step-detail-link",to:n},e)},Ht=r.i18n.translate("xpack.synthetics.pingList.synthetics.performanceBreakDown",{defaultMessage:"View performance breakdown"}),Ut=({step:e,compactView:t,allStepsLoaded:a})=>{var n,s,l,r,o;return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",wrap:!0},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(mt,{checkGroup:e.monitor.check_group,initialStepNo:null===(n=e.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.index,stepStatus:null===(l=e.synthetics.payload)||void 0===l?void 0:l.status,allStepsLoaded:a})),i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:80}},i.a.createElement(d.EuiText,{size:t?"s":"m"},null===(r=e.synthetics)||void 0===r||null===(o=r.step)||void 0===o?void 0:o.name)))},$t=({buttonContent:e,children:t,id:a,language:n,overflowHeight:s,initialIsOpen:l=!1})=>t&&a?i.a.createElement(d.EuiAccordion,{id:a,buttonContent:e,initialIsOpen:l},i.a.createElement(d.EuiCodeBlock,{isCopyable:!0,overflowHeight:s,language:n},t)):null,Gt=Me()(d.EuiImage).withConfig({displayName:"StepImage",componentId:"sc-1k8ildl-0"})(["&&&{figcaption{display:none;}objectFit:'cover',objectPosition:'center top',}"]),Wt=({stepIndex:e,stepName:t,url:a})=>a?i.a.createElement(Gt,{allowFullScreen:!0,alt:t?r.i18n.translate("xpack.synthetics.synthetics.screenshotDisplay.altText",{defaultMessage:'Screenshot for step with name "{stepName}"',values:{stepName:t}}):r.i18n.translate("xpack.synthetics.synthetics.screenshotDisplay.altTextWithoutName",{defaultMessage:"Screenshot"}),caption:`Step:${e} ${t}`,hasShadow:!0,url:a}):i.a.createElement(d.EuiLoadingSpinner,{size:"l"}),qt=({stepIndex:e,stepName:t,url:a,imgRef:n,setUrl:s})=>(Object(A.c)(n,s,a),a?i.a.createElement(Wt,{stepIndex:e,stepName:t,url:a}):i.a.createElement(d.EuiLoadingSpinner,{size:"l"})),Kt=({checkGroup:e,isFullScreenshot:t,isScreenshotRef:a,stepIndex:s,stepName:l,lazyLoad:r=!0})=>{var o,c;const u=Object(n.useRef)(null),{colors:{lightestShade:m}}=Object(n.useContext)(E.g),{basePath:p}=Object(n.useContext)(E.c),g=Ue()(u,{root:null,rootMargin:"0px",threshold:1}),{lastRefresh:b}=Object(n.useContext)(E.a),[f,y]=Object(n.useState)(!1),x=null==g?void 0:g.isIntersecting;Object(n.useEffect)((()=>{!1===f&&!0===x&&y(!0)}),[f,x,y]);const S=p+`/internal/uptime/journey/screenshot/${e}/${s}`,[M,k]=Object(n.useState)(t?S:void 0),{data:O}=Object(h.useFetcher)((()=>{if(a)return Object(Oe.e)(S)}),[p,e,S,s,a,b]),j=Object(n.useMemo)((()=>{if(Object($e.O)(O)){const{height:e,width:t}=O.ref.screenshotRef.screenshot_ref;return{height:e,width:t}}}),[O]),w=f||!r;return i.a.createElement("div",{ref:u,style:{backgroundColor:m,maxWidth:Math.min(640,null!==(o=null==j?void 0:j.width)&&void 0!==o?o:Number.MAX_VALUE),maxHeight:null!==(c=null==j?void 0:j.height)&&void 0!==c?c:void 0}},w&&t&&i.a.createElement(Wt,{stepName:l,stepIndex:s,url:M}),w&&a&&Object($e.O)(O)&&i.a.createElement(qt,{imgRef:O,stepName:l,stepIndex:s,setUrl:k,url:M}),!t&&!a&&i.a.createElement(d.EuiFlexGroup,{alignItems:"center",direction:"column",style:{paddingTop:"32px"},"data-test-subj":"stepScreenshotImageUnavailable"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiIcon,{color:"subdued",size:"xxl",type:"image"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.screenshot.noImageMessage",defaultMessage:"No image available"}))))))},Vt=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.euiSizeXS};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
`,Jt=({lastSuccessfulCheck:e})=>{var t;return i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.successfulLink",defaultMessage:"Screenshot from {link}",values:{link:i.a.createElement(Bt,{to:`/journey/${null==e||null===(t=e.monitor)||void 0===t?void 0:t.check_group}/steps`,className:"eui-displayInlineBlock"},i.a.createElement(Vt,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.success",defaultMessage:"last successful check"})))}}))},Yt=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.euiSizeXS};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
  color: ${({theme:e})=>e.eui.euiColorDarkShade};
`,Zt=({step:e})=>{var t,a,n,s,l,r,o,c,u,m,p,g,E,b,f,y,x,S;const M="succeeded"===(null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.status),{data:k}=Object(h.useFetcher)((()=>{var t,a,n,i;if(!M)return Object(Oe.c)({timestamp:e["@timestamp"],monitorId:e.monitor.id,stepIndex:null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,location:null===(n=e.observer)||void 0===n||null===(i=n.geo)||void 0===i?void 0:i.name})}),[e._id,e["@timestamp"]]),O=k;return i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Yt,null,"succeeded"!==(null===(n=e.synthetics)||void 0===n||null===(s=n.payload)||void 0===s?void 0:s.status)?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.notSucceeded",defaultMessage:"Screenshot for {status} check",values:{status:null===(l=e.synthetics)||void 0===l||null===(r=l.payload)||void 0===r?void 0:r.status}}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.executedStep.screenshot.not",defaultMessage:"Screenshot"})),i.a.createElement(Kt,{checkGroup:e.monitor.check_group,isScreenshotRef:Boolean(null===(o=e.synthetics)||void 0===o?void 0:o.isScreenshotRef),isFullScreenshot:Boolean(null===(c=e.synthetics)||void 0===c?void 0:c.isFullScreenshot),stepIndex:null===(u=e.synthetics)||void 0===u||null===(m=u.step)||void 0===m?void 0:m.index,stepName:null===(p=e.synthetics)||void 0===p||null===(g=p.step)||void 0===g?void 0:g.name,lazyLoad:!1}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(Yt,null,Pa(Ae()(e["@timestamp"])))),!M&&(null==O?void 0:O.monitor)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Jt,{lastSuccessfulCheck:O}),i.a.createElement(Kt,{checkGroup:O.monitor.check_group,isScreenshotRef:Boolean(null===(E=O.synthetics)||void 0===E?void 0:E.isScreenshotRef),isFullScreenshot:Boolean(null===(b=O.synthetics)||void 0===b?void 0:b.isFullScreenshot),stepIndex:null===(f=e.synthetics)||void 0===f||null===(y=f.step)||void 0===y?void 0:y.index,stepName:null===(x=e.synthetics)||void 0===x||null===(S=x.step)||void 0===S?void 0:S.name,lazyLoad:!1}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(Yt,null,Pa(Ae()(O.timestamp)))))},Xt=g.euiStyled.div`
  margin-bottom: ${e=>e.theme.eui.euiSizeXS};
  font-size: ${({theme:e})=>e.eui.euiFontSizeS};
  color: ${({theme:e})=>e.eui.euiColorDarkShade};
`,Qt=g.euiStyled.div`
  font-weight: bold;
  font-size:${({theme:e})=>e.eui.euiFontSizeM};
  margin-bottom: ${e=>e.theme.eui.euiSizeM};
`,ea=g.euiStyled.div`
  padding: '8px';
  max-width: 1000px;
  width: 100%;
`,ta=({loading:e,step:t,index:a,browserConsoles:n})=>{var s,l,o,c,u,m,p,g,h,E,b,f,y,v,x,S;const M="succeeded"===(null===(s=t.synthetics)||void 0===s||null===(l=s.payload)||void 0===l?void 0:l.status);return i.a.createElement(ea,null,e?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),(null===(o=t.synthetics)||void 0===o||null===(c=o.error)||void 0===c?void 0:c.message)&&i.a.createElement(d.EuiText,null,i.a.createElement(Xt,null,r.i18n.translate("xpack.synthetics.synthetics.executedStep.errorHeading",{defaultMessage:"Error message"})),i.a.createElement(Qt,null,null===(u=t.synthetics)||void 0===u||null===(m=u.error)||void 0===m?void 0:m.message)),i.a.createElement(d.EuiSpacer,null),i.a.createElement($t,{id:(null===(p=t.synthetics)||void 0===p||null===(g=p.step)||void 0===g?void 0:g.name)+String(a),buttonContent:r.i18n.translate("xpack.synthetics.synthetics.executedStep.scriptHeading.label",{defaultMessage:"Script executed at this step"}),overflowHeight:360,language:"javascript",initialIsOpen:!M},null===(h=t.synthetics)||void 0===h||null===(E=h.payload)||void 0===E?void 0:E.source),i.a.createElement(d.EuiSpacer,null),i.a.createElement($t,{id:(null===(b=t.synthetics)||void 0===b||null===(f=b.step)||void 0===f?void 0:f.name)+String(a),buttonContent:r.i18n.translate("xpack.synthetics.synthetics.executedStep.consoleOutput.label",{defaultMessage:"Console output"}),overflowHeight:360,language:"javascript",initialIsOpen:!M},null==n?void 0:n.join("\n")),i.a.createElement(d.EuiSpacer,null),i.a.createElement(Zt,{step:t}),i.a.createElement(d.EuiSpacer,null),i.a.createElement($t,{id:`${null===(y=t.synthetics)||void 0===y||null===(v=y.step)||void 0===v?void 0:v.name}_stack`,buttonContent:r.i18n.translate("xpack.synthetics.synthetics.executedStep.stackTrace",{defaultMessage:"Stack trace"}),language:"html",overflowHeight:360,initialIsOpen:!M},null===(x=t.synthetics)||void 0===x||null===(S=x.error)||void 0===S?void 0:S.stack)))};function aa(e){return t=>{var a,n;return(null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)===e}}var na=a(160);const ia=e=>{const t=e["@timestamp"],{lt:a,gte:n}=e.monitor.timespan,i=48*Ae()(a).diff(Ae()(n),"millisecond");return{to:t,from:Ae()(t).subtract(i,"millisecond").toISOString()}};function sa({title:e,field:t,step:a}){var n,s,l,r,o,u;const{observability:m}=Object(na.c)(),g=Object(c.useSelector)(B.C),E=m.ExploratoryViewEmbeddable,b=null===(n=Object(p.useKibana)().services.http)||void 0===n||null===(s=n.basePath)||void 0===s?void 0:s.get(),f=[{name:`${e}(${null===(l=a.synthetics.step)||void 0===l?void 0:l.name})`,selectedMetricField:t,time:ia(a),seriesType:"area",dataType:"synthetics",reportDefinitions:{"monitor.name":[a.monitor.name],"synthetics.step.name.keyword":[null===(r=a.synthetics.step)||void 0===r?void 0:r.name]},operationType:"last_value"}],y=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:f},b);return i.a.createElement(ra,null,i.a.createElement(E,{title:e,appendTitle:i.a.createElement(d.EuiButton,{iconType:"visArea",href:y,target:"_blank",size:"s"},la),reportType:"kpi-over-time",attributes:f,axisTitlesVisibility:{x:!1,yLeft:!1,yRight:!1},legendIsVisible:!1,dataTypesIndexPatterns:null!==(o=g.settings)&&void 0!==o&&o.heartbeatIndices?{synthetics:null===(u=g.settings)||void 0===u?void 0:u.heartbeatIndices}:void 0,withActions:!1}))}const la=r.i18n.translate("xpack.synthetics.synthetics.markers.explore",{defaultMessage:"Explore"}),ra=g.euiStyled.div`
  height: 200px;
  width: 400px;
  &&& {
    .expExpressionRenderer__expression {
      padding-bottom: 0 !important;
    }
  }
`;function oa(e,t){return(e/1e6).toFixed(t||0)}function ca(e){return(e/1e3).toFixed(0)}const ua=({step:e,durationPopoverOpenIndex:t,setDurationPopoverOpenIndex:a,showStepDurationTrend:i=!0,compactView:s=!1})=>{var l,o,c;const u=Object(n.useMemo)((()=>{var t;return r.i18n.translate("xpack.synthetics.synthetics.step.duration",{defaultMessage:"{value} seconds",values:{value:oa(null===(t=e.synthetics.step)||void 0===t?void 0:t.duration.us,1)}})}),[null===(l=e.synthetics.step)||void 0===l?void 0:l.duration.us]),m=Object(n.useMemo)((()=>n.createElement(sa,{step:e,field:"synthetics.step.duration.us",title:da})),[e]);if("skipped"===(null===(o=e.synthetics.step)||void 0===o?void 0:o.status))return n.createElement("span",null,"--");if(!i)return n.createElement(d.EuiText,null,u);const p=n.createElement(d.EuiButtonEmpty,{onMouseEnter:()=>{var t,n;return a(null!==(t=null===(n=e.synthetics.step)||void 0===n?void 0:n.index)&&void 0!==t?t:null)},iconType:s?void 0:"visArea"},u);return n.createElement(d.EuiPopover,{onClick:e=>e.stopPropagation(),isOpen:t===(null===(c=e.synthetics.step)||void 0===c?void 0:c.index),button:p,closePopover:()=>a(null),zIndex:100,ownFocus:!1},m)},da=r.i18n.translate("xpack.synthetics.synthetics.step.durationTrend",{defaultMessage:"Step duration trend"});function ma(e){var t;return"step/end"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)}function pa(e,t){var a,n,i,s;return"succeeded"===(null===(a=t.synthetics)||void 0===a||null===(n=a.payload)||void 0===n?void 0:n.status)?(e.succeeded+=1,e):"skipped"===(null===(i=t.synthetics)||void 0===i||null===(s=i.payload)||void 0===s?void 0:s.status)?(e.skipped+=1,e):(e.failed+=1,e)}const ga=({data:e,error:t,loading:a,allStepsLoaded:s,showStepDurationTrend:l=!0,compactView:o=!1})=>{const c=e.filter(ma),{expandedRows:m,toggleExpand:p}=(({loading:e,steps:t,allSteps:a})=>{const[s,l]=Object(n.useState)({}),{checkGroupId:r}=Object(u.useParams)(),o=Object(n.useCallback)((e=>a.filter((t=>{var a,n,i;return"journey/browserconsole"===(null===(a=t.synthetics)||void 0===a?void 0:a.type)&&(null===(n=t.synthetics)||void 0===n||null===(i=n.step)||void 0===i?void 0:i.index)===e})).map((e=>{var t,a;return null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.text}))),[a]);return Object(n.useEffect)((()=>{const a={};for(const l of Object.keys(s).map((e=>Number(e)))){const s=t.find(aa(l+1));var n,r;s&&(a[l]=i.a.createElement(ta,{step:s,browserConsoles:o(l),index:null===(n=s.synthetics)||void 0===n||null===(r=n.step)||void 0===r?void 0:r.index,loading:e}))}l(a)}),[r,e]),{expandedRows:s,toggleExpand:({journeyStep:t})=>{var a,n;const r=(null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index)-1;var c,u;s[r]?(delete s[r],l({...s})):l({...s,[r]:i.a.createElement(ta,{step:t,browserConsoles:o(r+1),index:null===(c=t.synthetics)||void 0===c||null===(u=c.step)||void 0===u?void 0:u.index,loading:e})})}}})({steps:c,allSteps:e,loading:a}),[g,h]=Object(n.useState)(null),{basePath:E}=Object(Mt.c)(),b=[{field:"synthetics.payload.status",name:Pe,render:(e,t)=>{var a,n;return i.a.createElement(Rt,{status:e,stepNo:null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index})},mobileOptions:{render:e=>{var t,a,n,s;return i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Rt,{isMobile:!0,status:null===(t=e.synthetics)||void 0===t||null===(a=t.payload)||void 0===a?void 0:a.status,stepNo:null===(n=e.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.index}))},width:"20%",header:Pe,enlarge:!1}},{align:"left",field:"timestamp",name:Lt,render:(e,t)=>i.a.createElement(Ut,{step:t,compactView:o,allStepsLoaded:s}),mobileOptions:{render:e=>{var t,a,n,s;return i.a.createElement(d.EuiText,null,i.a.createElement("strong",null,null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index,". ",null===(n=e.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.name))},header:"Step",enlarge:!0}},{name:"Step duration",render:e=>i.a.createElement(ua,{step:e,durationPopoverOpenIndex:g,setDurationPopoverOpenIndex:h,showStepDurationTrend:l,compactView:o}),mobileOptions:{header:r.i18n.translate("xpack.synthetics.pingList.stepDurationHeader",{defaultMessage:"Step duration"}),show:!0}},{align:"left",field:"timestamp",name:"",mobileOptions:{show:!1},render:(e,t)=>{var a,n,s,l;return o?i.a.createElement(d.EuiButtonIcon,{href:`${E}/app/uptime/journey/${t.monitor.check_group}/step/${null===(a=t.synthetics)||void 0===a||null===(n=a.step)||void 0===n?void 0:n.index}`,target:"_blank",iconType:"visArea"}):i.a.createElement(zt,{checkGroupId:t.monitor.check_group,stepIndex:null===(s=t.synthetics)||void 0===s||null===(l=s.step)||void 0===l?void 0:l.index},Ht)}},{width:"40px",align:d.RIGHT_ALIGNMENT,isExpander:!0,render:e=>i.a.createElement(d.EuiButtonIcon,{"data-test-subj":"uptimeStepListExpandBtn",onClick:()=>p({journeyStep:e}),"aria-label":m[e._id]?At:Pt,iconType:m[e._id]?"arrowUp":"arrowDown"})}];return i.a.createElement(i.a.Fragment,null,!o&&i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,function(e,t){if(t)return r.i18n.translate("xpack.synthetics.synthetics.journey.loadingSteps",{defaultMessage:"Loading steps ..."});const a=e.succeeded+e.failed+e.skipped;return e.failed+e.skipped===a?r.i18n.translate("xpack.synthetics.synthetics.journey.allFailedMessage",{defaultMessage:"{total} Steps - all failed or skipped",values:{total:a}}):e.succeeded===a?r.i18n.translate("xpack.synthetics.synthetics.journey.allSucceededMessage",{defaultMessage:"{total} Steps - all succeeded",values:{total:a}}):r.i18n.translate("xpack.synthetics.synthetics.journey.partialSuccessMessage",{defaultMessage:"{total} Steps - {succeeded} succeeded",values:{succeeded:e.succeeded,total:a}})}(c.reduce(pa,{failed:0,skipped:0,succeeded:0}),a))),i.a.createElement(d.EuiBasicTable,{compressed:o,loading:a,columns:b,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:c,itemIdToExpandedRowMap:m,noItemsMessage:a?r.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):r.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",rowProps:e=>{const{monitor:t}=e;return{"data-test-subj":`row-${t.check_group}`,onClick:t=>{const a=t.target;"IMG"===a.tagName||"BUTTON"===a.tagName||"CANVAS"===a.tagName||a.classList.contains("euiButtonEmpty__text")||a.classList.contains("euiIcon")||p({journeyStep:e})}}}}))},ha=({configId:e,testRunId:t,skipDetails:a=!1,refresh:i=!0,expectSummaryDocs:s})=>{const{refreshTimer:l,lastRefresh:r}=xt(5e3,i),[c,u]=Object(n.useState)((()=>new Array(s).fill({checkGroupId:"",journeyStarted:!1,steps:[],stepsLoading:!1,completedSteps:0}).map(((e,t)=>({...e,checkGroupId:`placeholder-check-group-${t}`}))))),d=Object(n.useRef)({checksum:"",time:Date.now()}),{data:m,loading:p}=(({configId:e,testRunId:t,lastRefresh:a})=>Object(h.useEsSearch)(Object(h.createEsParams)({index:o.I,body:{sort:[{"@timestamp":"desc"}],query:{bool:{filter:[{term:{config_id:e}},{terms:{"synthetics.type":["heartbeat/summary","journey/start"]}},...t?[{term:{test_run_id:t}}]:[]]}}},size:1e3}),[e,a],{name:"TestRunData"}))({configId:e,testRunId:t,lastRefresh:r});Object(n.useEffect)((()=>{const e=null==m?void 0:m.hits.hits;if(e&&e.length>0){const t=(null!=e?e:[]).map((({_source:e})=>e)),a=t.filter((e=>{var t,a;return"journey/start"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)||"heartbeat/summary"===(null===(a=e.synthetics)||void 0===a?void 0:a.type)})).reduce(((e,t)=>({...e,[t.monitor.check_group]:{checkGroupId:t.monitor.check_group,journeyStarted:!0,journeyDoc:t,summaryDoc:null,steps:[],stepsLoading:!1,completedSteps:0}})),{});t.forEach((e=>{var t;"heartbeat/summary"===(null===(t=e.synthetics)||void 0===t?void 0:t.type)&&(a[e.monitor.check_group].summaryDoc=e)}));const n=Object.values(a);n.filter((e=>!!e.summaryDoc)).length>=s&&clearInterval(l),y(n)}}),[s,m,l]);const g=c.map((({checkGroupId:e})=>e)),E=g.reduce(((e,t)=>e+t),""),{loading:b}=Object(h.useFetcher)((()=>g.length&&!a?(u((e=>e.map((e=>({...e,stepsLoading:!0}))))),Promise.all(g.map((e=>Object(Oe.a)({checkGroup:e}).then((e=>(f(e.checkGroup,{steps:e.steps,completedSteps:e.steps.filter(ma).length}),e))).finally((()=>{f(e,{stepsLoading:!1})})))))):Promise.resolve(null)),[E,u,r]);Object(n.useEffect)((()=>{const e=function(e){return e.reduce(((e,t)=>{var a,n,i,s,l;return null!==(a=null!==(n=e+(null==t||null===(i=t.journeyDoc)||void 0===i?void 0:i._id))&&void 0!==n?n:""+(null==t||null===(s=t.summaryDoc)||void 0===s?void 0:s._id))&&void 0!==a?a:""+(null!==(l=null==t?void 0:t.steps)&&void 0!==l?l:[]).reduce(((e,{_id:t})=>e+t),"")}),"")}(c);E!==d.current.checksum&&(d.current.checksum=e,d.current.time=Date.now())}),[c,E]);const f=(e,t)=>{u((a=>a.map((a=>e!==a.checkGroupId?a:Ea(a,t)))))},y=e=>{const t=c.filter((e=>e.checkGroupId.startsWith("placeholder-check-group"))),a=e.length<s?[...e,...t.slice(-1*(s-e.length))]:e;u((e=>{const t=a.map((({checkGroupId:e})=>e)),n=a.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{}),i=e.reduce(((e,t)=>({...e,[t.checkGroupId]:t})),{});return t.map((e=>Ea(i[e],n[e])))}))};return{data:m,summariesLoading:p,stepLoadingInProgress:b,expectedSummariesLoaded:c.filter((({summaryDoc:e})=>!!e)).length>=s,checkGroupResults:c,lastUpdated:d.current.time}};function Ea(e,t){var a,n,i,s,l;const r=t.completedSteps?Math.max(null!==(a=null==e?void 0:e.completedSteps)&&void 0!==a?a:0,null!==(n=t.completedSteps)&&void 0!==n?n:0):null!==(i=null==e?void 0:e.completedSteps)&&void 0!==i?i:0;let o=null!==(s=t.steps)&&void 0!==s?s:[];return 0===o.length&&(null!==(l=null==e?void 0:e.steps)&&void 0!==l?l:[]).length>0&&(o=e.steps),{...null!=e?e:{},...t,steps:o,completedSteps:r}}const ba=({configId:e,testRunId:t,duration:a,schedule:s,isUpdating:l,expectPings:r,updateMonitorStatus:o,stopProgressTrack:c})=>{const{data:u,checkGroupResults:m,lastUpdated:p,expectedSummariesLoaded:g}=ha({configId:e,testRunId:t,refresh:!1,skipDetails:!0,expectSummaryDocs:r}),h=m.some((e=>e.journeyStarted)),[E,b]=Object(n.useState)(0),f=Object(n.useRef)(Date.now());return Object(n.useEffect)((()=>{g&&o()}),[o,g]),Object(n.useEffect)((()=>{b(1e3*(Date.now()-f.current));const e=Date.now()-p,t=a/1e3;e>=Object(vt.a)(s)-t&&c()}),[u,m,p,a,s,c]),h&&(l||E>a)?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ct),i.a.createElement(d.EuiProgress,{size:"xs"})):i.a.createElement(i.a.Fragment,null,h?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ct),i.a.createElement(d.EuiProgress,{value:E,max:a,size:"xs"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiBadge,null,Ot),i.a.createElement(d.EuiProgress,{size:"xs"})))};var fa=a(140);const ya=({monitorId:e,configId:t,testRunId:a,duration:s,monitorType:l,schedule:r,expectPings:o,stopProgressTrack:u})=>{const{updateMonitorStatus:d,isUpdating:m}=(({testRunId:e,monitorId:t})=>{const a=Object(c.useDispatch)(),i=Object(c.useSelector)(fa.a);return{updateMonitorStatus:Object(n.useCallback)((()=>{e&&(a(b.L.get({dateRangeStart:"now-10m",dateRangeEnd:"now",filters:JSON.stringify({bool:{should:[{match_phrase:{test_run_id:e}}],minimum_should_match:1}}),pageSize:1})),a(Object(b.U)(t)))}),[a,t,e]),isUpdating:i.includes(t)}})({testRunId:a,monitorId:e}),p=Object(c.useSelector)(fa.c);return Object(n.useEffect)((()=>{p.includes(e)&&u()}),[m,e,p,u]),"browser"===l?i.a.createElement(ba,{configId:t,testRunId:a,duration:s,schedule:r,expectPings:o,isUpdating:m,updateMonitorStatus:d,stopProgressTrack:u}):i.a.createElement(Ft,{monitorId:e,testRunId:a,duration:s,schedule:r,expectPings:o,isUpdating:m,updateMonitorStatus:d,stopProgressTrack:u})};var va=a(199);const xa=({monitorId:e,checkGroup:t,timestamp:a,title:n,summaryMessage:s,hideTitle:l=!1})=>{const r=[{field:"@timestamp",name:Sa,sortable:!0,render:e=>Object(d.formatDate)(e,"dateTime")},{field:"synthetics.payload.message",name:"Message",render:e=>i.a.createElement(d.EuiHighlight,{search:e.includes("SyntaxError:")?"SyntaxError:":"ReferenceError:"},e)}],{items:o,loading:u}=(({monitorId:e,checkGroup:t})=>{var a;const{settings:n}=Object(c.useSelector)(B.C),{data:i,loading:s}=Object(h.useEsSearch)(Object(h.createEsParams)({index:e||t?null==n?void 0:n.heartbeatIndices:"",body:{size:1e3,query:{bool:{filter:[{term:{"synthetics.type":"stderr"}},...e?[{term:{"monitor.id":e}}]:[],...t?[{term:{"monitor.check_group":t}}]:[]]}}}}),[null==n?void 0:n.heartbeatIndices],{name:"getStdErrLogs"});return{items:null!==(a=null==i?void 0:i.hits.hits.map((e=>({...e._source,id:e._id}))))&&void 0!==a?a:[],loading:s}})({monitorId:e,checkGroup:t}),{discover:m,observability:g}=Object(p.useKibana)().services,{settings:E}=Object(c.useSelector)(B.C),{data:b}=Object(h.useFetcher)((async()=>{if(null!=E&&E.heartbeatIndices){var e;const n=await g.getAppDataView("synthetics",null==E?void 0:E.heartbeatIndices);return null===(e=m.locator)||void 0===e?void 0:e.getUrl({query:{language:"kuery",query:`monitor.check_group: ${t}`},indexPatternId:null==n?void 0:n.id,columns:["synthetics.payload.message","error.message"],timeRange:a?{from:Ae()(a).subtract(10,"minutes").toISOString(),to:Ae()(a).add(5,"minutes").toISOString()}:void 0})}return""}),[t,a]);return i.a.createElement(i.a.Fragment,null,!l&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,null!=n?n:Oa))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiLink,null,i.a.createElement(d.EuiButtonEmpty,{href:b,iconType:"discoverApp",isDisabled:!b},ka)))),i.a.createElement(d.EuiCallOut,{title:Ma,color:"danger",iconType:"alert"},i.a.createElement("p",null,s))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiInMemoryTable,{items:o,columns:r,tableLayout:"auto",loading:u,search:{box:{incremental:!0}},itemId:"id",executeQueryOptions:{defaultFields:["@timestamp","synthetics.payload.message"]}}))},Sa=r.i18n.translate("xpack.synthetics.monitorList.timestamp",{defaultMessage:"Timestamp"}),Ma=r.i18n.translate("xpack.synthetics.monitorList.errorSummary",{defaultMessage:"Error summary"}),ka=r.i18n.translate("xpack.synthetics.monitorList.viewInDiscover",{defaultMessage:"View in discover"}),Oa=r.i18n.translate("xpack.synthetics.monitorList.testRunLogs",{defaultMessage:"Test run logs"}),ja=({checkGroup:e,button:t,isOpen:a,setIsOpen:n,summaryMessage:s})=>i.a.createElement(d.EuiPopover,{isOpen:a,closePopover:()=>n(!1),button:t},i.a.createElement(wa,null,i.a.createElement(xa,{checkGroup:e,title:Ia,summaryMessage:s}))),wa=Me.a.div.withConfig({displayName:"Container",componentId:"sc-1truv2e-0"})(["width:650px;height:400px;overflow:scroll;"]),Ia=r.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.logs",{defaultMessage:"Error logs"}),Ca=({errorSummary:e})=>{var t,a,s,l;const[r,o]=Object(n.useState)(!1),c="browser"===e.monitor.type?Ta(null===(t=e.error)||void 0===t?void 0:t.message):null===(a=e.error)||void 0===a?void 0:a.message;return i.a.createElement(ja,{isOpen:r,setIsOpen:o,checkGroup:null===(s=e.monitor)||void 0===s?void 0:s.check_group,summaryMessage:null===(l=e.error)||void 0===l?void 0:l.message,button:i.a.createElement(d.EuiToolTip,{content:c},i.a.createElement(d.EuiButtonIcon,{"aria-label":c,iconType:"alert",onClick:()=>o(!0),color:"danger"}))})},Ta=e=>r.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.message",{defaultMessage:"{message}. Click for more details.",values:{message:e}}),Fa=(r.i18n.translate("xpack.synthetics.monitorList.statusColumn.error.logs",{defaultMessage:"Error logs"}),({status:e,checkGroup:t,summaryError:a,monitorType:s})=>{const{colors:{dangerBehindText:l}}=Object(n.useContext)(E.g),[r,c]=Object(n.useState)(!1);if(e===o.F.UP)return i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:"success"},Aa(e));const u="browser"!==s?null==a?void 0:a.message:Ta(null==a?void 0:a.message),m=i.a.createElement(d.EuiToolTip,{content:u},i.a.createElement(d.EuiBadge,{className:"eui-textCenter",color:l,onClick:()=>c(!0),onClickAriaLabel:u},Aa(e)));return"browser"!==s?m:i.a.createElement(ja,{isOpen:r,setIsOpen:c,checkGroup:t,button:m,summaryMessage:null==a?void 0:a.message})}),La=Me()(d.EuiFlexGroup).withConfig({displayName:"StatusColumnFlexG",componentId:"sc-1evxa0e-0"})(["@media (max-width:574px){min-width:230px;}"]),Aa=e=>{switch(e){case o.F.UP:return Ie.h;case o.F.DOWN:return Ie.f;default:return null}},Pa=(e,t=!1)=>{if(t){var a;const t=null!==(a=Ae.a.locale())&&void 0!==a?a:"en";let n;return Ae.a.locale(o.E)===o.E||Ae.a.defineLocale(o.E,o.D),n="string"==typeof e?yt(e).fromNow():e.fromNow(),Ae.a.locale(t),n}return Ae()().diff(e,"d")>=1?e.format("ll LTS"):e.format("LTS")},Da=({monitorType:e,configId:t,monitorId:a,status:s,duration:l,checkGroup:u,summaryError:m,summaryPings:p=[],timestamp:g})=>{var h,E,f,y;const v=yt(g),{statusMessage:x,locTooltip:S}=((e,t)=>{const a=new Set,n=new Set;e.forEach((e=>{var t,i,s;const l=null!==(t=null==e||null===(i=e.observer)||void 0===i||null===(s=i.geo)||void 0===s?void 0:s.name)&&void 0!==t?t:o.N;e.monitor.status===o.F.UP?a.add(l):e.monitor.status===o.F.DOWN&&n.add(l)}));const s=a.size>0?r.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.tooltip.up",{defaultMessage:"Up in {locs}",values:{locs:[...a].join(", ")}}):"",l=n.size>0?r.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.tooltip.down",{defaultMessage:"Down in {locs}",values:{locs:[...n].join(", ")}}):"",c=new Set([...a].filter((e=>!n.has(e)))),u=c.size+n.size;let m="";return m=t===o.F.DOWN?`${n.size}/${u}`:`${c.size}/${u}`,u>1?{statusMessage:r.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage.multiple",{defaultMessage:"in {noLoc} locations",values:{noLoc:m}}),locTooltip:i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,s),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement("span",null,l))}:{statusMessage:r.i18n.translate("xpack.synthetics.monitorList.statusColumn.locStatusMessage",{defaultMessage:"in {noLoc} location",values:{noLoc:m}}),locTooltip:s+l}})(p,s),M=Object(c.useDispatch)(),k=Object(n.useCallback)((()=>{t&&M(Object(b.c)(t))}),[t,M]),O=Object(c.useSelector)(fa.c),j=Object(c.useSelector)(Object(va.b)(t)),{expectPings:w,errorMessages:I,hasBlockingError:C}=gt({testRunId:null!==(h=null==j?void 0:j.monitorId)&&void 0!==h?h:"",serviceError:null!==(E=null==j?void 0:j.fetchError)&&void 0!==E?E:null,locations:null!==(f=null==j?void 0:j.locations)&&void 0!==f?f:[],errors:null!==(y=null==j?void 0:j.errors)&&void 0!==y?y:[]});return Object(n.useEffect)((()=>{I.forEach((({name:e,message:t,title:a})=>{pt.a.toasts.addError({name:e,message:t},{title:a})})),C&&k()}),[I,C,k]),i.a.createElement("div",null,i.a.createElement(La,{alignItems:"center",gutterSize:"xs",wrap:!1,responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{flexBasis:40}},j&&t&&null!=j&&j.testRunId?i.a.createElement(ya,{monitorId:a,configId:t,testRunId:null==j?void 0:j.testRunId,monitorType:e,duration:null!=l?l:0,schedule:j.schedule,expectPings:w,stopProgressTrack:k}):i.a.createElement(Fa,{status:s,checkGroup:u,summaryError:m,monitorType:e}))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement(d.EuiToolTip,{content:i.a.createElement(d.EuiText,{color:"ghost",size:"xs"},S)},i.a.createElement(Na,{size:"xs",color:"subdued",className:"eui-textNoWrap"},x,",")),i.a.createElement(d.EuiToolTip,{content:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,{color:"text",size:"xs"},i.a.createElement("strong",null," ",v.fromNow())),i.a.createElement(d.EuiHorizontalRule,{margin:"xs"}),i.a.createElement(d.EuiText,{color:"ghost",size:"xs"},v.toLocaleString()))},a&&null!=O&&O.includes(a)?i.a.createElement(d.EuiHighlight,{highlightAll:!0,search:Ra(v)},Ra(v)):i.a.createElement(d.EuiText,{size:"xs",color:"subdued",className:"eui-textNoWrap"},Ra(v)))))},Ra=e=>r.i18n.translate("xpack.synthetics.monitorList.statusColumn.checkedTimestamp",{defaultMessage:"Checked {timestamp}",values:{timestamp:Pa(e)}}),Na=Object(g.euiStyled)(d.EuiText)`
  padding-right: ${e=>e.theme.eui.euiSizeXS};
`,Ba=Me.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-8btbs3-0"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:3;overflow:hidden;"]),_a=({errorType:e,ping:t})=>{var a;return e?i.a.createElement(Ba,null,e,":",null===(a=t.error)||void 0===a?void 0:a.message):i.a.createElement(i.a.Fragment,null,"--")},za=({checkGroup:e,failedSteps:t})=>{var a,n,s,l,r;const o=null==t||null===(a=t.steps)||void 0===a?void 0:a.find((t=>!!e&&t.monitor.check_group===e));return o?i.a.createElement("div",null,null===(n=o.synthetics)||void 0===n||null===(s=n.step)||void 0===s?void 0:s.index,". ",null===(l=o.synthetics)||void 0===l||null===(r=l.step)||void 0===r?void 0:r.name):i.a.createElement(i.a.Fragment,null,"--")},Ha=Me.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-z4cbdq-0"})(["margin-right:16px;"]),Ua=({statusCode:e})=>i.a.createElement(Ha,null,e?i.a.createElement(d.EuiBadge,{"data-test-subj":"pingResponseCode"},e):"--");var $a=a(38);const Ga=()=>{const e=i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-heartbeat-options.html#monitor-http-response",target:"_blank"},r.i18n.translate("xpack.synthetics.pingList.drawer.body.docsLink",{defaultMessage:"docs",description:"Docs link to set response body"}));return i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.pingList.expandedRow.response_body.notRecorded",defaultMessage:"Body not recorded. Read our {docsLink} for more information on recording response bodies.",values:{docsLink:e}}))},Wa=Me()(d.EuiListGroup).withConfig({displayName:"ListGroup",componentId:"sc-1alw120-0"})(["&&&{a{padding-left:0;}}"]),qa=({monitorStatus:e,showTitle:t})=>{var a,n,s,l;const o=null==e||null===(a=e.url)||void 0===a?void 0:a.full,c=null==e||null===(n=e.http)||void 0===n||null===(s=n.response)||void 0===s?void 0:s.redirects,u=[{label:o,href:o,iconType:"globe",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s",alwaysShow:!0,"aria-label":r.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."})}}];(null!=c?c:[]).forEach((e=>{u.push({label:e,href:e,iconType:"sortDown",size:"s",target:"_blank",extraAction:{color:"text",iconType:"popout",iconSize:"s","aria-label":r.i18n.translate("xpack.synthetics.monitorList.redirects.openWindow",{defaultMessage:"Link will open in new window."}),alwaysShow:!0}})}));const m=t?d.EuiPanel:"div";return c?i.a.createElement(m,{"data-test-subj":"uptimeMonitorPingListRedirectInfo"},t&&i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.monitorList.redirects.title",{defaultMessage:"Redirects"}))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiText,null,r.i18n.translate("xpack.synthetics.monitorList.redirects.description",{defaultMessage:"Heartbeat followed {number} redirects while executing ping.",values:{number:null!==(l=null==c?void 0:c.length)&&void 0!==l?l:0}})),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Wa,{gutterSize:"none",listItems:u})):null},Ka=({headers:e})=>{const t=Object.keys(e).sort().map((t=>({title:t,description:e[t]})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiAccordion,{id:"responseHeaderAccord",buttonContent:i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.pingList.headers.title",{defaultMessage:"Response headers"})))},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiDescriptionList,{titleProps:{style:{width:"30%",paddingLeft:30}},compressed:!0,type:"responsiveColumn",listItems:t})))},Va=({body:e})=>{const t=e.content_bytes||0,a=e.bytes||0,n=[t>0&&t<a?r.i18n.translate("xpack.synthetics.pingList.expandedRow.truncated",{defaultMessage:"Showing first {contentBytes} bytes.",values:{contentBytes:t}}):null,a>0?r.i18n.translate("xpack.synthetics.pingList.expandedRow.bodySize",{defaultMessage:"Body size is {bodyBytes}.",values:{bodyBytes:Object($a.formatNumber)(a,"0b")}}):null].filter((e=>e)).join(" ");return i.a.createElement(d.EuiText,null,n)},Ja=({content:e})=>e?i.a.createElement(d.EuiCodeBlock,{overflowHeight:250},e):null,Ya=({ping:e})=>{var t,a,n,s,l,o,c,u;const m=[];if(e.error&&m.push({title:r.i18n.translate("xpack.synthetics.pingList.expandedRow.error",{defaultMessage:"Error"}),description:i.a.createElement(d.EuiText,null,e.error.message)}),null!==(t=e.http)&&void 0!==t&&null!==(a=t.response)&&void 0!==a&&a.body){const t=e.http.response.body;m.push({title:r.i18n.translate("xpack.synthetics.pingList.expandedRow.response_body",{defaultMessage:"Response Body"}),description:i.a.createElement(i.a.Fragment,null,i.a.createElement(Va,{body:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),t.content?i.a.createElement(Ja,{content:t.content||""}):i.a.createElement(Ga,null))})}return i.a.createElement(d.EuiFlexGroup,{direction:"column"},(null==e||null===(n=e.http)||void 0===n||null===(s=n.response)||void 0===s?void 0:s.redirects)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(qa,{monitorStatus:e,showTitle:!0})),(null==e||null===(l=e.http)||void 0===l||null===(o=l.response)||void 0===o?void 0:o.headers)&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ka,{headers:null==e||null===(c=e.http)||void 0===c||null===(u=c.response)||void 0===u?void 0:u.headers})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiCallOut,{color:null!=e&&e.error?"danger":"primary"},i.a.createElement(d.EuiDescriptionList,{listItems:m}))))};function Za(e){var t,a,n,i;const s=!!e.error,l=null!==(t=null===(a=e.http)||void 0===a||null===(n=a.response)||void 0===n||null===(i=n.body)||void 0===i?void 0:i.bytes)&&void 0!==t&&t,r="browser"===e.monitor.type;return s||l||r}const Xa=({item:e,expandedRows:t,setExpandedRows:a})=>i.a.createElement(d.EuiButtonIcon,{"data-test-subj":"uptimePingListExpandBtn",onClick:()=>((e,t,a)=>{if(t[e.docId])return delete t[e.docId],void a({...t});a({...t,[e.docId]:i.a.createElement(Ya,{ping:e})})})(e,t,a),isDisabled:!Za(e),"aria-label":t[e.docId]?r.i18n.translate("xpack.synthetics.pingList.collapseRow",{defaultMessage:"Collapse"}):r.i18n.translate("xpack.synthetics.pingList.expandRow",{defaultMessage:"Expand"}),iconType:t[e.docId]?"arrowUp":"arrowDown"});var Qa=a(121);function en({loading:e,error:t,pings:a,pagination:s,onChange:l,failedSteps:m}){var p;const g=Object(u.useHistory)(),[h,E]=Object(n.useState)({}),f=JSON.stringify(Object.keys(h).filter((e=>!a.some((({docId:t})=>t===e))))),y=Object(c.useDispatch)(),v=Object(n.useCallback)((e=>y(Object(Qa.d)(e))),[y]);Object(n.useEffect)((()=>()=>{y(Object(b.a)())}),[y]),Object(n.useEffect)((()=>{const e=JSON.parse(f);e.length&&(e.forEach((e=>{delete h[e]})),E(h))}),[f,h]);const x=a.filter((e=>Object.keys(h).some((t=>e.docId===t)))).map((({monitor:{check_group:e}})=>e)),S=JSON.stringify(x);Object(n.useEffect)((()=>{v(JSON.parse(S))}),[v,S]);const M=a.reduce(((e,t)=>{var a,n;return e||!(null===(a=t.http)||void 0===a||null===(n=a.response)||void 0===n||!n.status_code)}),!1),k=a.reduce(((e,t)=>{var a;return e||!(null===(a=t.error)||void 0===a||!a.type)}),!1),O=null==a||null===(p=a[0])||void 0===p?void 0:p.monitor.type,j=[{field:"monitor.status",name:Pe,render:(e,t)=>i.a.createElement(_e,{pingStatus:e,item:t})},{align:"left",field:"observer.geo.name",name:Ne,render:e=>i.a.createElement(ze,{location:e})},...O===o.y.BROWSER?[{align:"left",field:"timestamp",name:Be,render:(e,t)=>i.a.createElement(mt,{checkGroup:t.monitor.check_group,label:Pa(Ae()(e))})}]:[],...O!==o.y.BROWSER?[{align:"right",dataType:"number",field:"monitor.ip",name:r.i18n.translate("xpack.synthetics.pingList.ipAddressColumnLabel",{defaultMessage:"IP"})}]:[],{align:"center",field:"monitor.duration.us",name:r.i18n.translate("xpack.synthetics.pingList.durationMsColumnLabel",{defaultMessage:"Duration"}),render:e=>e?an(e):i.a.createElement("span",{"data-test-subj":"ping-list-duration-unavailable-tool-tip"},"--")},...k?[{field:"error.type",name:Re,width:"30%",render:(e,t)=>i.a.createElement(_a,{ping:t,errorType:e})}]:[],...O===o.y.BROWSER?[{field:"monitor.status",align:"left",name:r.i18n.translate("xpack.synthetics.pingList.columns.failedStep",{defaultMessage:"Failed step"}),render:(e,t)=>{var a;return i.a.createElement(za,{checkGroup:null===(a=t.monitor)||void 0===a?void 0:a.check_group,failedSteps:m})}}]:[],...M?[{field:"http.response.status_code",align:"right",name:i.a.createElement(tn,null,De),render:e=>i.a.createElement(Ua,{statusCode:e})}]:[],...O!==o.y.BROWSER?[{align:"right",width:"24px",isExpander:!0,render:e=>i.a.createElement(Xa,{item:e,expandedRows:h,setExpandedRows:E})}]:[]];return i.a.createElement(d.EuiBasicTable,{loading:e,columns:j,error:null==t?void 0:t.message,isExpandable:!0,hasActions:!0,items:a,itemId:"docId",itemIdToExpandedRowMap:h,pagination:s,noItemsMessage:e?r.i18n.translate("xpack.synthetics.pingList.pingsLoadingMesssage",{defaultMessage:"Loading history..."}):r.i18n.translate("xpack.synthetics.pingList.pingsUnavailableMessage",{defaultMessage:"No history found"}),tableLayout:"auto",rowProps:e=>{if(O!==o.y.BROWSER)return{};const{monitor:t}=e;return{height:"85px","data-test-subj":`row-${t.check_group}`,onClick:e=>{const a=e.target;"IMG"!==a.tagName&&"path"!==a.tagName&&g.push(`/journey/${t.check_group}/steps`)}}},onChange:l})}const tn=Me.a.span.withConfig({displayName:"SpanWithMargin",componentId:"sc-6125xd-0"})(["margin-right:16px;"]),an=e=>{if(e<1e6)return r.i18n.translate("xpack.synthetics.pingList.durationMsColumnFormatting",{values:{millis:Object(ke.a)(e)},defaultMessage:"{millis} ms"});const t=(e/1e6).toFixed(0);return"1"===t?r.i18n.translate("xpack.synthetics.pingist.durationSecondsColumnFormatting.singular",{values:{seconds:t},defaultMessage:"{seconds} second"}):r.i18n.translate("xpack.synthetics.pingist.durationSecondsColumnFormatting",{values:{seconds:t},defaultMessage:"{seconds} seconds"})},nn=()=>{const[e,t]=Object(n.useState)(10),[a,s]=Object(n.useState)(0),{error:l,loading:r,pings:u,total:m,failedSteps:p}=(({pageSize:e,pageIndex:t})=>{const{error:a,loading:i,pingList:{pings:s,total:l}}=Object(c.useSelector)(B.E),{lastRefresh:r}=Object(n.useContext)(E.a),{dateRangeStart:u,dateRangeEnd:d}=Object(n.useContext)(E.c),{statusFilter:m}=Object(A.e)(),p=Object(je.b)(),g=Object(c.useDispatch)(),f=Object(A.f)(),y=Object(n.useCallback)((e=>g(Object(b.B)(e))),[g]),v=JSON.stringify(p.selectedLocations),x=JSON.stringify(p.excludedLocations);Object(n.useEffect)((()=>{y({monitorId:f,dateRange:{from:u,to:d},excludedLocations:x,locations:v,index:t,size:e,status:"all"!==m?m:""})}),[u,d,y,f,r,t,e,m,v,x]);const{data:S}=Object(h.useFetcher)((()=>{if((null==s?void 0:s.length)>0&&s.find((e=>e.monitor.type===o.y.BROWSER)))return Object(Oe.b)({checkGroups:s.map((e=>e.monitor.check_group))})}),[s]);return{error:a,loading:i,pings:s,total:l,failedSteps:S}})({pageSize:e,pageIndex:a}),g={initialPageSize:10,pageIndex:a,pageSize:e,pageSizeOptions:[10,25,50,100],totalItemCount:m};return i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(Fe,null),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(en,{onChange:e=>{t(e.page.size),s(e.page.index)},error:l,pings:u,loading:r,pagination:g,failedSteps:p}))},sn=Me.a.div.withConfig({displayName:"BadgeItem",componentId:"sc-1wkv7wd-0"})(["white-space:nowrap;display:inline-block;@media (max-width:1042px){display:inline-block;margin-right:16px;}"]),ln=({color:e,label:t,status:a})=>i.a.createElement(sn,null,i.a.createElement(d.EuiBadge,{color:a===o.F.DOWN?"danger":"success"},t)),rn=(r.i18n.translate("xpack.synthetics.monitorStatusBar.healthStatusMessageAriaLabel",{defaultMessage:"Monitor status"}),r.i18n.translate("xpack.synthetics.monitorStatusBar.type.label",{defaultMessage:"Type"})),on=r.i18n.translate("xpack.synthetics.monitorStatusBar.type.ariaLabel",{defaultMessage:"Monitor type"}),cn=r.i18n.translate("xpack.synthetics.monitorStatusBar.monitorUrlLinkAriaLabel",{defaultMessage:"Monitor URL link"}),un=(r.i18n.translate("xpack.synthetics.monitorStatusBar.durationTextAriaLabel",{defaultMessage:"Monitor duration in milliseconds"}),r.i18n.translate("xpack.synthetics.monitorStatusBar.timestampFromNowTextAriaLabel",{defaultMessage:"Time since last check"}),r.i18n.translate("xpack.synthetics.monitorStatusBar.loadingMessage",{defaultMessage:"Loading…"}),r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.id",{defaultMessage:"Monitor ID"})),dn=r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availability",{defaultMessage:"Overall availability"}),mn=r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom",{defaultMessage:"Monitoring from"}),pn=(r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom.listToMap",{defaultMessage:"Change to map view to check availability by location."}),r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.monitoringFrom.MapToList",{defaultMessage:"Change to list view to check availability by location."}),r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.location",{defaultMessage:"Location"})),gn=r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.availability",{defaultMessage:"Availability"}),hn=r.i18n.translate("xpack.synthetics.monitorStatusBar.monitor.availabilityReport.lastCheck",{defaultMessage:"Last check"}),En=e=>(Math.round(100*e)/100).toFixed(2),bn=({allLocations:e})=>{const[t,a]=Object(n.useState)(0),s=[{field:"label",name:pn,truncateText:!0,render:(e,t)=>i.a.createElement(ln,t)},{field:"availability",name:gn,align:"right",render:e=>i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.availabilityLabelText",defaultMessage:"{value} %",values:{value:En(e)},description:"A percentage value, like 23.5%"}))},{name:hn,field:"timestamp",align:"right"}],l={pageIndex:t,pageSize:5,totalItemCount:e.length,showPerPageOptions:!1},r=e.length>5?{pagination:l}:{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiBasicTable,y()({responsive:!1,compressed:!0,columns:s,items:e.slice(5*t,5*t+5),onChange:({page:e})=>{var t;a(null!==(t=null==e?void 0:e.index)&&void 0!==t?t:0)}},r)))},fn=Me.a.div.withConfig({displayName:"TagContainer",componentId:"sc-st7itr-0"})(["max-height:246px;overflow:hidden;"]),yn=({locations:e})=>{var t;const{colors:{gray:a,danger:s}}=Object(n.useContext)(E.g),l=[],r=null!==(t=Ae.a.locale())&&void 0!==t?t:"en";return Ae.a.locale(o.E)===o.E||Ae.a.defineLocale(o.E,o.D),e.forEach((e=>{l.push({label:e.geo.name,timestamp:Pa(Ae()(new Date(e.timestamp).valueOf())),color:0===e.summary.down?a:s,availability:e.up_history/(e.up_history+e.down_history)*100,status:0===e.summary.down?"up":"down"})})),Ae.a.locale(r),l.sort(((e,t)=>e.label>t.label?1:t.label>e.label?-1:0)),0===l.length?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(fn,null,i.a.createElement(bn,{allLocations:l})))},vn=Me()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemTags",componentId:"sc-1co80xp-0"})(["width:350px;@media (max-width:1042px){width:100%;}"]),xn=({monitorLocations:e})=>i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"none",style:{flexGrow:0}},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,mn)))),i.a.createElement(d.EuiFlexGroup,{wrap:!0,gutterSize:"none",justifyContent:"flexEnd"},i.a.createElement(vn,{grow:!0},i.a.createElement(yn,{locations:(null==e?void 0:e.locations)||[]})))),Sn=({locations:e})=>{const t=[],a=[];e&&e.forEach((e=>{0===e.summary.down?t.push(e.geo.name):a.push(e.geo.name)}));let n="",s="";return 0===a.length?(n=`${e.length}`,s="Up"):a.length>0&&(s="Down",n=`${a.length}/${e.length}`,a.length===e.length&&(n=`${e.length}`)),i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,e.length<=1?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.locations.oneLocStatus",values:{status:s,loc:n},defaultMessage:"{status} in {loc} location"}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.locations.upStatus",values:{status:s,loc:n},defaultMessage:"{status} in {loc} locations"})))},Mn=Me.a.span.withConfig({displayName:"RedirectBtn",componentId:"sc-hhkn2c-0"})(["cursor:pointer;"]),kn=({monitorStatus:e})=>{var t,a,s;const l=null==e||null===(t=e.http)||void 0===t||null===(a=t.response)||void 0===a?void 0:a.redirects,[o,c]=Object(n.useState)(!1),u=i.a.createElement(Nn,null,i.a.createElement(Mn,{className:"euiLink euiLink--primary",onClick:()=>c(!o),"data-test-subj":"uptimeMonitorRedirectInfo"},r.i18n.translate("xpack.synthetics.monitorList.redirects.title.number",{defaultMessage:"{number}",values:{number:null!==(s=null==l?void 0:l.length)&&void 0!==s?s:0}})));return l?i.a.createElement(i.a.Fragment,null,i.a.createElement(Rn,null,"Redirects"),i.a.createElement(d.EuiPopover,{button:u,isOpen:o,anchorPosition:"downLeft",closePopover:()=>c(!1)},i.a.createElement(qa,{monitorStatus:e}))):null};var On=a(154);const jn=({children:e,monitorId:t,linkParameters:a})=>i.a.createElement(d.EuiLink,null,i.a.createElement(u.Link,{"data-test-subj":`monitor-page-link-${t}`,to:a?`/monitor/${btoa(t)}/${a}`:`/monitor/${btoa(t)}`},e)),wn=e=>{let t;try{t=new Map(JSON.parse(e))}catch{t=new Map}return t},In={browser:"Browser",http:"HTTP Ping",tcp:"TCP Ping",icmp:"ICMP Ping"},Cn=({summary:e})=>{var t;const a=Object(A.e)(),s=L(a,!0),l=wn(a.filters),[o,c]=Object(n.useState)(null!==(t=l.get("monitor.type"))&&void 0!==t?t:[]),u=Object(n.useMemo)((()=>{var e;return null!==(e=wn(a.excludedFilters).get("monitor.type"))&&void 0!==e?e:[]}),[a.excludedFilters]);Object(On.b)("monitor.type",o,u);const m=r.i18n.translate("xpack.synthetics.monitorList.monitorType.filter",{defaultMessage:"Filter all monitors with type {type}",values:{type:e.state.monitor.type}});return i.a.createElement("div",null,i.a.createElement(jn,{monitorId:e.monitor_id,linkParameters:s},e.state.monitor.name?e.state.monitor.name:`Unnamed - ${e.monitor_id}`),i.a.createElement("div",null,i.a.createElement(d.EuiButtonEmpty,{color:"text",title:m,onClick:()=>{c([e.state.monitor.type])},size:"xs",flush:"left",style:{border:"none"}},i.a.createElement(d.EuiText,{size:"xs"},In[e.state.monitor.type]))))},Tn=r.i18n.translate("xpack.synthetics.monitorList.enableDownAlert",{defaultMessage:"Enable status alerts"}),Fn=r.i18n.translate("xpack.synthetics.monitorList.disableDownAlert",{defaultMessage:"Disable status alerts"}),Ln=r.i18n.translate("xpack.synthetics.monitorList.tags.expand",{defaultMessage:"Click to view remaining tags"}),An=r.i18n.translate("xpack.synthetics.monitorList.locations.expand",{defaultMessage:"Click to view remaining locations"}),Pn=e=>r.i18n.translate("xpack.synthetics.monitorList.tags.filter",{defaultMessage:"Filter all monitors with tag {tag}",values:{tag:e}}),Dn=({ping:e,summary:t})=>{var a;const s=Object(u.useHistory)(),{services:{docLinks:l}}=Object(p.useKibana)(),[r,c]=Object(n.useState)(5);let m;m=t?(e=>{let t=new Set;return e.state.summaryPings.forEach((e=>{var a;t=new Set([...t,...null!==(a=null==e?void 0:e.tags)&&void 0!==a?a:[]])})),[...t]})(t):(e=>{var t;return null!==(t=null==e?void 0:e.tags)&&void 0!==t?t:[]})(e);const g=m.slice(0,r),{absoluteDateRangeStart:h,absoluteDateRangeEnd:E,...b}=Object(A.e)(),f=wn(b.filters),[y,v]=Object(n.useState)(null!==(a=f.get("tags"))&&void 0!==a?a:[]),x=Object(n.useMemo)((()=>{var e;return null!==(e=wn(b.excludedFilters).get("tags"))&&void 0!==e?e:[]}),[b.excludedFilters]);return Object(On.b)("tags",y,x),0===m.length?t?null:i.a.createElement(d.EuiLink,{href:(null==l?void 0:l.links.heartbeat.base)+"/monitor-options.html#monitor-tags",target:"_blank"},"Set tags"):i.a.createElement(d.EuiBadgeGroup,null,g.map((e=>t?i.a.createElement(d.EuiBadge,{key:e,title:Pn(e),onClick:()=>{v([e])},onClickAriaLabel:Pn(e),color:"hollow",className:"eui-textTruncate",style:{maxWidth:120}},e):i.a.createElement(d.EuiBadge,{key:e,color:"hollow",className:"eui-textTruncate",style:{maxWidth:120},href:s.createHref({pathname:o.z,search:`filters=[["tags",["${e}"]]]`})},e))),m.length>r&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{c(m.length)},onClickAriaLabel:Ln},"+",m.length-5))},Rn=Me()(d.EuiDescriptionListTitle).withConfig({displayName:"MonListTitle",componentId:"sc-7ova2m-0"})(["&&&{width:30%;max-width:250px;}"]),Nn=Me()(d.EuiDescriptionListDescription).withConfig({displayName:"MonListDescription",componentId:"sc-7ova2m-1"})(["&&&{width:70%;overflow-wrap:anywhere;}"]),Bn=()=>{var e,t,a,s,l,o,u;const{monitorId:m,monitorStatus:p,monitorLocations:g={}}=(()=>{const{lastRefresh:e}=Object(n.useContext)(E.a),{dateRangeStart:t,dateRangeEnd:a}=Object(A.e)(),i=Object(c.useDispatch)(),s=Object(A.f)(),l=Object(c.useSelector)(B.w),r=Object(c.useSelector)((e=>Object(B.u)(e,s)));return Object(n.useEffect)((()=>{i(Object(b.u)({dateStart:t,dateEnd:a,monitorId:s}))}),[s,t,a,e,i]),{monitorStatus:l,monitorLocations:r,monitorId:s}})(),{locations:h,up_history:f,down_history:y}=g,x=null!==(e=null==p||null===(t=p.url)||void 0===t?void 0:t.full)&&void 0!==e?e:"",S=0===f&&0===y||!f?0:f/(f+y)*100;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(Sn,{locations:null!=h?h:[]})),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiDescriptionList,{type:"column",compressed:!0,textStyle:"reverse"},i.a.createElement(Rn,null,dn),i.a.createElement(Nn,{"data-test-subj":"uptimeOverallAvailability"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.availabilityLabelText",defaultMessage:"{value} %",values:{value:En(S)},description:"A percentage value, like 23.5 %"})),i.a.createElement(Rn,null,Ie.j),i.a.createElement(Nn,{"data-test-subj":"monitor-page-url"},x?i.a.createElement(d.EuiLink,{"aria-label":cn,href:x,target:"_blank",external:!0},x):"--"),i.a.createElement(Rn,null,un),i.a.createElement(Nn,{"data-test-subj":"monitor-page-title"},m),(null==p||null===(a=p.monitor)||void 0===a?void 0:a.type)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Rn,{"aria-label":on},rn),i.a.createElement(Nn,{"data-test-subj":"monitor-page-type"},(e=>{switch(e){case"http":return r.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.http",{defaultMessage:"HTTP"});case"tcp":return r.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.tcp",{defaultMessage:"TCP"});case"icmp":return r.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.icmp",{defaultMessage:"ICMP"});case"browser":return r.i18n.translate("xpack.synthetics.monitorDetails.statusBar.pingType.browser",{defaultMessage:"Browser"});default:return""}})(null==p||null===(s=p.monitor)||void 0===s?void 0:s.type))),i.a.createElement(Rn,null,Ie.i),i.a.createElement(Nn,null,i.a.createElement(Dn,{ping:p})),(null==p||null===(l=p.monitor)||void 0===l||null===(o=l.project)||void 0===o?void 0:o.id)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Rn,null,Ie.b),i.a.createElement(Nn,null,null==p||null===(u=p.monitor)||void 0===u?void 0:u.project.id)),i.a.createElement(si,{tls:null==p?void 0:p.tls}),i.a.createElement(kn,{monitorStatus:p})))},_n=r.i18n.translate("xpack.synthetics.certs.ok",{defaultMessage:"OK"}),zn=r.i18n.translate("xpack.synthetics.certs.expired",{defaultMessage:"Expired"}),Hn=r.i18n.translate("xpack.synthetics.certs.expireSoon",{defaultMessage:"Expires soon"}),Un=r.i18n.translate("xpack.synthetics.certs.expires",{defaultMessage:"Expires"}),$n=r.i18n.translate("xpack.synthetics.certs.searchCerts",{defaultMessage:"Search certificates"}),Gn=r.i18n.translate("xpack.synthetics.certs.list.status",{defaultMessage:"Status"}),Wn=r.i18n.translate("xpack.synthetics.certs.list.status.old",{defaultMessage:"Too old"}),qn=r.i18n.translate("xpack.synthetics.certs.list.commonName",{defaultMessage:"Common name"}),Kn=r.i18n.translate("xpack.synthetics.certs.list.monitors",{defaultMessage:"Monitors"}),Vn=r.i18n.translate("xpack.synthetics.certs.list.issuedBy",{defaultMessage:"Issued by"}),Jn=r.i18n.translate("xpack.synthetics.certs.list.validUntil",{defaultMessage:"Valid until"}),Yn=r.i18n.translate("xpack.synthetics.certs.list.ageCol",{defaultMessage:"Age"}),Zn=r.i18n.translate("xpack.synthetics.certs.list.days",{defaultMessage:"days"}),Xn=r.i18n.translate("xpack.synthetics.certs.list.expirationDate",{defaultMessage:"Fingerprints"}),Qn=r.i18n.translate("xpack.synthetics.certs.list.copyFingerprint",{defaultMessage:"Click to copy fingerprint value"}),ei=r.i18n.translate("xpack.synthetics.certs.list.empty",{defaultMessage:"No Certificates found. Note: Certificates are only visible for Heartbeat 7.8+"}),ti=r.i18n.translate("xpack.synthetics.certificates.loading",{defaultMessage:"Loading certificates ..."}),ai=Me.a.span.withConfig({displayName:"Span",componentId:"sc-8mgabz-0"})(["margin-left:5px;vertical-align:middle;"]),ni=Me.a.h4.withConfig({displayName:"H4Text",componentId:"sc-8mgabz-1"})(["&&&{margin:0 0 0 4px;display:inline-block;color:inherit;}"]),ii=({expiry:e,boldStyle:t=!1})=>{const a=null==e?void 0:e.not_after,n=Object(A.b)(a),s=Ae()(a).fromNow(),l=({color:e,text:n})=>i.a.createElement(d.EuiToolTip,{content:Ae()(a).format("L LT")},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(d.EuiIcon,{color:e,type:"lock",size:"s"}),t?i.a.createElement(ni,null,n," ",s):i.a.createElement(ai,null,n," ",s)));return n===o.c.EXPIRING_SOON?i.a.createElement(l,{color:"warning",text:Hn}):n===o.c.EXPIRED?i.a.createElement(l,{color:"danger",text:zn}):n?i.a.createElement(l,{color:"success",text:Un}):i.a.createElement("span",null,"--")},si=({tls:e})=>{var t;let a=null;return null!=e&&null!==(t=e.server)&&void 0!==t&&t.x509?a=e.server.x509:null!=e&&e.certificate_not_valid_after&&null!=e&&e.certificate_not_valid_before&&(a={not_after:e.certificate_not_valid_after,not_before:e.certificate_not_valid_before}),a?i.a.createElement(i.a.Fragment,null,i.a.createElement(Rn,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorStatusBar.sslCertificate.title",defaultMessage:"TLS Certificate"})),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Nn,null,i.a.createElement(u.Link,{to:o.b,className:"eui-displayInline"},i.a.createElement(ii,{expiry:a,boldStyle:!0})))):null},li=Me()(d.EuiFlexItem).withConfig({displayName:"WrapFlexItem",componentId:"sc-1y7x8xy-0"})(["&&&{@media (max-width:800px){flex-basis:100%;}}"]),ri=({monitorLocations:e})=>{const{refreshApp:t}=Object(n.useContext)(E.a),[a]=Object(n.useState)(document.visibilityState),s=()=>{"visible"===document.visibilityState&&"hidden"===a&&t()};return Object(n.useEffect)((()=>(document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)})),[]),i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{gutterSize:"l",wrap:!0,responsive:!0},i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(Bn,null)),i.a.createElement(li,{grow:1},i.a.createElement(xn,{monitorLocations:e}))))};var oi=a(157);const ci=({monitorId:e})=>{const{lastRefresh:t}=Object(n.useContext)(E.a),{dateRangeStart:a,dateRangeEnd:s}=Object(A.e)(),l=Object(c.useDispatch)(),r=Object(c.useSelector)((t=>Object(B.u)(t,e)));return Object(n.useEffect)((()=>{l(Object(oi.b)({dateStart:a,dateEnd:s,monitorId:e}))}),[e,a,s,t,l]),i.a.createElement(ri,{monitorLocations:r})};var ui=a(26);const di=Me()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemReducedMargin",componentId:"sc-1ixaody-0"})(["&&{margin-left:0px;margin-right:0px;}"]),mi=Me()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemAlignRight",componentId:"sc-1ixaody-1"})(["text-align:right;"]),pi=({color:e,content:t,message:a,"data-test-subj":n})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"l",responsive:!1},i.a.createElement(di,{component:"span",grow:!1},i.a.createElement(d.EuiHealth,{color:e})),i.a.createElement(di,{component:"span",grow:!1,"data-test-subj":`${n}.label`},a),i.a.createElement(mi,{component:"span","data-test-subj":n},t)),gi=Me.a.div.withConfig({displayName:"LegendContainer",componentId:"sc-m43izv-0"})(["max-width:150px;min-width:100px;@media (max-width:767px){min-width:0px;max-width:100px;}"]),hi=({down:e,up:t})=>{const{colors:{gray:a,danger:s}}=Object(n.useContext)(E.g);return i.a.createElement(gi,null,i.a.createElement(pi,{color:s,content:e,message:Ie.f,"data-test-subj":"xpack.synthetics.snapshot.donutChart.down"}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(pi,{color:a,content:t,message:Ie.h,"data-test-subj":"xpack.synthetics.snapshot.donutChart.up"}))},Ei=Me()(d.EuiIcon).withConfig({displayName:"GreenCheckIcon",componentId:"sc-vlg6n7-0"})(["height:42px;width:42px;color:#017d73;top:51px;left:51px;position:absolute;"]),bi={chartMargins:{top:0,bottom:0,left:0,right:0},partition:{linkLabel:{maximumSection:1/0},idealFontSizeJump:1.1,outerSizeRatio:.9,emptySizeRatio:.4,circlePadding:4}},fi=({height:e,down:t,up:a})=>{var s;const{colors:{danger:l,gray:o},chartTheme:c}=Object(n.useContext)(E.g);return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{position:"relative"}},i.a.createElement(ui.Chart,{size:e,"aria-label":r.i18n.translate("xpack.synthetics.snapshot.donutChart.ariaLabel",{defaultMessage:"Pie chart showing the current status. {down} of {total} monitors are down.",values:{down:t,total:a+t}})},i.a.createElement(ui.Settings,{theme:[bi,null!==(s=c.theme)&&void 0!==s?s:{}],baseTheme:c.baseTheme}),i.a.createElement(ui.Partition,{id:"spec_1",data:[{value:t,label:"Down"},{value:a,label:"Up"}],layout:ui.PartitionLayout.sunburst,valueAccessor:e=>e.value,layers:[{groupByRollup:e=>e.label,nodeLabel:e=>e,shape:{fillColor:e=>"Down"===e.dataName?l:o}}]})),0===t&&i.a.createElement(Ei,{className:"greenCheckIcon",type:"checkInCircleFilled"})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(hi,{down:t,up:a})))},yi=({monitorType:e,lines:t})=>i.a.createElement(i.a.Fragment,null,t.map((({name:t,line:a})=>i.a.createElement(ui.LineSeries,{curve:ui.CurveType.CURVE_MONOTONE_X,data:a.map((({x:e,y:t})=>[e,t||null])),id:`loc-avg-${t}`,key:`loc-line-${t}`,name:t,xAccessor:0,xScaleType:ui.ScaleType.Time,yAccessors:[1],yScaleType:ui.ScaleType.Linear,fit:ui.Fit.Linear,timeZone:"local",tickFormat:t=>"browser"===e?`${oa(t)} ${Ie.d}`:`${ca(t)} ${Ie.a}`})))),vi=({loading:e=!1,height:t="100%",children:a,...n})=>{const s=!0===e?.3:1;return i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement("div",y()({style:{height:t,opacity:s,transition:"opacity 0.2s"}},n),a),!0===e&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceAround",alignItems:"center",style:{height:t,marginTop:`-${t}`,marginBottom:0}},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingChart,{size:"xl"}))))},xi=({title:e,body:t})=>i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement(d.EuiTitle,null,i.a.createElement("h5",null,e)),body:i.a.createElement("p",null,t)});var Si=a(33);const Mi=Me.a.div.withConfig({displayName:"Header",componentId:"sc-qqof22-0"})(["font-weight:bold;padding-left:4px;"]),ki=Me.a.div.withConfig({displayName:"RecordSeverity",componentId:"sc-qqof22-1"})(["font-weight:bold;border-left:4px solid ",";padding-left:2px;"],(e=>e.color)),Oi=Me.a.div.withConfig({displayName:"TimeDiv",componentId:"sc-qqof22-2"})(["font-weight:500;border-bottom:1px solid gray;padding-bottom:2px;"]),ji=({details:e})=>{const t=JSON.parse(e);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Oi,null,Ae()(t.time).format("lll")),i.a.createElement(Mi,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.charts.mlAnnotation.header",defaultMessage:"Score: {score}",values:{score:t.score.toFixed(2)}})),i.a.createElement(ki,{color:t.color},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.charts.mlAnnotation.severity",defaultMessage:"Severity: {severity}",values:{severity:(a=t.severity,a.charAt(0).toUpperCase()+a.slice(1))}})));var a},wi=({anomalies:e,hiddenLegends:t})=>{const a=new Map;Object.keys(Si.ANOMALY_SEVERITY).forEach((e=>{a.set(e.toLowerCase(),{rect:[],color:""})})),null!=e&&e.anomalies&&e.anomalies.forEach((e=>{var n,i;let s=null!==(n=null===(i=e.source["observer.geo.name"])||void 0===i?void 0:i[0])&&void 0!==n?n:"N/A";if(""===s&&(s="N/A"),t.length&&t.includes(`loc-avg-${s}`))return;const l=Object(Si.getSeverityType)(e.severity),r={time:e.source.timestamp,score:e.severity,severity:l,color:Object(Si.getSeverityColor)(e.severity)},o={coordinates:{x0:Ae()(e.source.timestamp).valueOf(),x1:Ae()(e.source.timestamp).add(e.source.bucket_span,"s").valueOf()},details:JSON.stringify(r)};a.get(l).rect.push(o),a.get(l).color=Object(Si.getSeverityColor)(e.severity)}));const n=({details:e})=>i.a.createElement(ji,{details:e||""});return i.a.createElement(i.a.Fragment,null,Array.from(a).map((([e,t])=>{return t.rect.length>0?i.a.createElement(ui.RectAnnotation,{dataValues:t.rect,key:e,id:e,style:(a=t.color,{fill:a,opacity:1,strokeWidth:2,stroke:a}),renderTooltip:n}):null;var a})))},Ii=({locationDurationLines:e,anomalies:t,loading:a})=>{var s;const l=e.length>0,[o,u]=Object(A.i)(),{absoluteDateRangeStart:d,absoluteDateRangeEnd:m}=o(),[p,g]=Object(n.useState)([]),{chartTheme:h}=Object(n.useContext)(E.g),b=Object(c.useSelector)(B.w);return i.a.createElement(vi,{"aria-label":r.i18n.translate("xpack.synthetics.monitorCharts.durationChart.wrapper.label",{defaultMessage:"A chart displaying the monitor's ping duration, grouped by location."}),height:Vi,loading:a},l&&"string"==typeof(null==b||null===(s=b.monitor)||void 0===s?void 0:s.type)?i.a.createElement(ui.Chart,null,i.a.createElement(ui.Settings,y()({xDomain:{min:d,max:m},showLegend:!0,showLegendExtra:!0,legendPosition:ui.Position.Right,onBrushEnd:({x:e})=>{if(!e)return;const[t,a]=e;u({dateRangeStart:Ae()(t).toISOString(),dateRangeEnd:Ae()(a).toISOString()})},onLegendItemClick:([e])=>{e&&g((t=>t.includes(e.specId)?[...t.filter((t=>t!==e.specId))]:[...t,e.specId]))}},h)),i.a.createElement(ui.Axis,{id:"bottom",position:ui.Position.Bottom,showOverlappingTicks:!0,tickFormat:Object(ui.timeFormatter)(Object(ke.b)(d,m))}),i.a.createElement(ui.Axis,{domain:{min:0,max:NaN,fit:!1},id:"left",position:ui.Position.Left,tickFormat:e=>(e=>{const t=Number(e);return isNaN(t)||null===e?"N/A":t.toFixed()})(e),title:r.i18n.translate("xpack.synthetics.monitorCharts.durationChart.leftAxis.title",{defaultMessage:"Duration in {unit}",values:{unit:"browser"===b.monitor.type?Ie.c:Ie.a}}),labelFormat:e=>"browser"===(null==b?void 0:b.monitor.type)?`${oa(e)}`:`${ca(e)}`}),i.a.createElement(yi,{lines:e,monitorType:b.monitor.type}),i.a.createElement(wi,{anomalies:t,hiddenLegends:p})):i.a.createElement(xi,{body:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.durationChart.emptyPrompt.description",defaultMessage:"This monitor has never been {emphasizedText} during the selected time range.",values:{emphasizedText:i.a.createElement("strong",null,"up")}}),title:r.i18n.translate("xpack.synthetics.durationChart.emptyPrompt.title",{defaultMessage:"No duration data available"})}))},Ci=(e,t)=>{const a=e[0].x;return{dateRangeStart:Ae()(a).toISOString(),dateRangeEnd:Ae()(a).add(t,"ms").toISOString()}},Ti=({histogramSeries:e,minInterval:t})=>{const{colors:{danger:a},chartTheme:s}=Object(n.useContext)(E.g),[l,o]=Object(A.i)(),{absoluteDateRangeStart:c,absoluteDateRangeEnd:u}=l();return Object(ke.k)(e)?i.a.createElement("div",{style:{height:50,width:"100%",maxWidth:"1200px",marginRight:15}},i.a.createElement(ui.Chart,null,i.a.createElement(ui.Settings,y()({xDomain:{minInterval:t,min:c,max:u},onBrushEnd:({x:e})=>{if(!e)return;const[t,a]=e;o({dateRangeStart:Ae()(t).toISOString(),dateRangeEnd:Ae()(a).toISOString()})},onElementClick:([e])=>{o(Ci(e,t))}},s)),i.a.createElement(ui.Axis,{hide:!0,id:"bottom",position:ui.Position.Bottom,tickFormat:Object(ui.timeFormatter)(Object(ke.b)(c,u))}),i.a.createElement(ui.BarSeries,{id:"downSeries",color:a,data:(e||[]).map((({timestamp:e,down:t})=>[e,t])),name:r.i18n.translate("xpack.synthetics.monitorList.downLineSeries.downLabel",{defaultMessage:"Down checks"}),timeZone:"local",xAccessor:0,xScaleType:ui.ScaleType.Time,yAccessors:[1],yScaleType:ui.ScaleType.Linear}))):i.a.createElement(d.EuiToolTip,{position:"top",content:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.noDownHistory",defaultMessage:"This monitor has never been {emphasizedText} during the selected time range.",values:{emphasizedText:i.a.createElement("strong",null,"down")}})},i.a.createElement(d.EuiText,{color:"success"},"--"))};var Fi=a(45),Li=a.n(Fi);const Ai=({absoluteStartDate:e,absoluteEndDate:t,data:a,loading:s=!1,height:l,timeZone:o})=>{var c;const{colors:{danger:u,gray:m},chartTheme:p}=Object(n.useContext)(E.g),[g,h]=Object(A.i)();let b;if(null!=a&&null!==(c=a.histogram)&&void 0!==c&&c.length||s){const{histogram:n,minInterval:c}=null!=a?a:{},d=({x:e})=>{if(!e)return;const[t,a]=e;h({dateRangeStart:Ae()(t).toISOString(),dateRangeEnd:Ae()(a).toISOString()})},g=([e])=>{h(Ci(e,c))},E=[];null==n||n.forEach((({x:e,upCount:t,downCount:a})=>{E.push({x:e,y:null!=a?a:0,type:Ie.f},{x:e,y:null!=t?t:0,type:Ie.h})})),b=i.a.createElement(vi,{height:l,loading:s,"aria-label":r.i18n.translate("xpack.synthetics.snapshotHistogram.description",{defaultMessage:"Bar Chart showing uptime status over time from {startTime} to {endTime}.",values:{startTime:Ae()(new Date(e).valueOf()).fromNow(),endTime:Ae()(new Date(t).valueOf()).fromNow()}})},i.a.createElement(ui.Chart,null,i.a.createElement(ui.Settings,y()({xDomain:{minInterval:c,min:e,max:t},showLegend:!1,onBrushEnd:d,onElementClick:g},p)),i.a.createElement(ui.Axis,{id:r.i18n.translate("xpack.synthetics.snapshotHistogram.xAxisId",{defaultMessage:"Ping X Axis"}),position:ui.Position.Bottom,showOverlappingTicks:!1,tickFormat:Object(ui.timeFormatter)(Object(ke.b)(e,t))}),i.a.createElement(ui.Axis,{id:r.i18n.translate("xpack.synthetics.snapshotHistogram.yAxisId",{defaultMessage:"Ping Y Axis"}),position:"left",tickFormat:e=>Li()(e).format("0"),labelFormat:e=>Li()(e).format("0a"),title:r.i18n.translate("xpack.synthetics.snapshotHistogram.yAxis.title",{defaultMessage:"Pings",description:"The label on the y-axis of a chart that displays the number of times Heartbeat has pinged a set of services/websites."})}),i.a.createElement(ui.BarSeries,{color:[u,m],data:E,id:Ie.f,name:r.i18n.translate("xpack.synthetics.snapshotHistogram.series.pings",{defaultMessage:"Monitor Pings"}),stackAccessors:["x"],splitSeriesAccessors:["type"],timeZone:o,xAccessor:"x",xScaleType:ui.ScaleType.Time,yAccessors:["y"],yScaleType:ui.ScaleType.Linear})))}else b=i.a.createElement(xi,{title:r.i18n.translate("xpack.synthetics.snapshot.noDataTitle",{defaultMessage:"No ping data available"}),body:r.i18n.translate("xpack.synthetics.snapshot.noDataDescription",{defaultMessage:"There are no pings in the selected time range."})});return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.snapshot.pingsOverTimeTitle",defaultMessage:"Pings over time"}))))),b)},Pi=Me.a.div.withConfig({displayName:"ResponsiveWrapper",componentId:"sc-1vhsat0-0"})(["margin-left:120px;@media (max-width:950px){margin-left:48px;}@media (max-width:767px){margin-left:12px;margin-top:40px;}"]);var Di=a(250);function Ri(){const e=Object(c.useSelector)(B.f),{search:t}=Object(u.useLocation)(),a=!!e||!function(e){const t=Object(Di.a)(e);return!!t.filters||!!t.search}(t);return{pending:!a,filterCheck:Object(n.useCallback)((e=>{a&&e()}),[a])}}const Ni=(Bi=({height:e})=>{const{query:t,absoluteDateRangeStart:a,absoluteDateRangeEnd:s,dateRangeStart:l,dateRangeEnd:r}=Object(A.e)(),{filterCheck:o,pending:u}=Ri(),d=Object(c.useDispatch)(),m=Object(A.f)(),{lastRefresh:p}=Object(n.useContext)(E.a),g=Object(c.useSelector)(B.f),{loading:f,pingHistogram:y}=Object(c.useSelector)(B.D),v=Object(h.useTimeZone)();return Object(n.useEffect)((()=>{m?d(b.A.get({monitorId:m,dateStart:l,dateEnd:r,query:t,filters:g,timeZone:v})):o((()=>d(b.A.get({monitorId:m,dateStart:l,dateEnd:r,query:t,filters:g,timeZone:v}))))}),[o,l,r,m,p,g,d,t,v]),i.a.createElement(Ai,{data:y,absoluteStartDate:a,absoluteEndDate:s,height:e,loading:f||u,timeZone:v})},({isResponsive:e,...t})=>e?i.a.createElement(Pi,{"data-test-subj":"uptimeWithResponsiveWrapper--wrapper"},i.a.createElement(Bi,t)):i.a.createElement(d.EuiPanel,{paddingSize:"m",hasBorder:!0,"data-test-subj":"uptimeWithResponsiveWrapper--panel"},i.a.createElement(Bi,t)));var Bi;const _i=()=>{const{basePath:e}=Object(n.useContext)(E.c),t=Object(c.useDispatch)();return Object(n.useEffect)((()=>{t(b.n.get())}),[t]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{"data-test-subj":"uptimeMLLicenseInfo",className:"license-info-trial",title:re,color:"primary",iconType:"help"},i.a.createElement("p",null,oe),i.a.createElement(d.EuiButton,{color:"primary",href:e+"/app/management/stack/license_management/home"},re)),i.a.createElement(d.EuiSpacer,null))};function zi({isCreatingJob:e,onClickCreate:t,onClose:a,canCreateMLJob:s}){const{basePath:l}=Object(n.useContext)(E.c),r=Object(c.useSelector)(B.g);return i.a.createElement(d.EuiFlyout,{onClose:a,size:"s","data-test-subj":"uptimeMLFlyout"},i.a.createElement(d.EuiFlyoutHeader,null,i.a.createElement(d.EuiTitle,null,i.a.createElement("h2",null,J)),i.a.createElement(d.EuiSpacer,{size:"s"})),i.a.createElement(d.EuiFlyoutBody,null,!r&&i.a.createElement(_i,null),i.a.createElement(d.EuiText,null,i.a.createElement("p",null,le),i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.ml.enableAnomalyDetectionPanel.manageMLJobDescription",defaultMessage:"Once a job is created, you can manage it and see more details in the {mlJobsPageLink}.",values:{mlJobsPageLink:i.a.createElement(d.EuiLink,{href:l+"/app/ml"},ae)}})),i.a.createElement("p",null,i.a.createElement("em",null,ne))),i.a.createElement(d.EuiSpacer,null),!s&&i.a.createElement(d.EuiCallOut,{title:ue,color:"primary",iconType:"iInCircle"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.ml.enableAnomalyDetectionPanel.insufficient_permissions_add_job",defaultMessage:"You must have the Kibana privileges for Machine Learning to use this feature."})))),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:()=>a(),disabled:e||!1},se)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{"data-test-subj":"uptimeMLCreateJobBtn",onClick:()=>t(),fill:!0,isLoading:e,disabled:e||!r||!s},ie)))))}var Hi=a(97);const Ui=(e,t,a,n,s,l,r)=>{n?pt.a.toasts.addSuccess({title:Object(p.toMountPoint)(i.a.createElement("p",{"data-test-subj":"uptimeMLJobSuccessfullyCreated"},_),{theme$:l}),text:Object(p.toMountPoint)(i.a.createElement("p",null,s?H:z,i.a.createElement(be,{monitorId:e,basePath:t,dateRange:a},K)),{theme$:l})},{toastLifeTimeMs:1e4}):pt.a.toasts.addError(r,{title:U,toastMessage:$,toastLifeTimeMs:1e4})},$i=({onClose:e})=>{const t=Object(p.useKibana)(),a=Object(c.useDispatch)(),{data:s,error:l}=Object(c.useSelector)(B.i),r=Object(c.useSelector)(B.l),{settings:o}=Object(c.useSelector)(B.C);Object(n.useEffect)((()=>{a(Object(Hi.a)({}))}),[a]);const u=(null==o?void 0:o.heartbeatIndices)||"",{basePath:d}=Object(n.useContext)(E.c),{refreshApp:m}=Object(n.useContext)(E.a),g=Object(A.f)(),h=Object(c.useSelector)(B.b)&&""!==u,f=u?()=>a(b.d.get({monitorId:g,heartbeatIndices:u})):()=>null,{data:y}=Object(c.useSelector)(B.h),v=!(null==y||!y.jobsExist),[x,S]=Object(n.useState)(!1),{dateRangeStart:M,dateRangeEnd:k}=Object(A.e)();return Object(n.useEffect)((()=>{if(x&&!r){var n,i,o,c,u;if(s)Ui(g,d,{to:k,from:M},!0,s.awaitingNodeAssignment,null===(n=t.services.theme)||void 0===n?void 0:n.theme$),a(b.m.get({monitorId:g})),m(),null!==(i=null===(o=t.services.application)||void 0===o||null===(c=o.capabilities.uptime)||void 0===c?void 0:c.save)&&void 0!==i&&i&&(a(Object(b.O)(N.a.DURATION_ANOMALY)),a(Object(b.P)(!0)));else Ui(g,d,{to:k,from:M},!1,!1,null===(u=t.services.theme)||void 0===u?void 0:u.theme$,l);S(!1),e()}}),[s,e,x,l,r,g,a,d]),Object(n.useEffect)((()=>{v&&!r&&!s&&u&&(S(!0),a(b.d.get({monitorId:g,heartbeatIndices:u})))}),[a,v,u,g,s]),v?null:i.a.createElement(zi,{canCreateMLJob:!!h,isCreatingJob:r,onClickCreate:()=>{S(!0),f()},onClose:e})},Gi=({loading:e,onConfirm:t,onCancel:a})=>i.a.createElement(d.EuiConfirmModal,{title:q,onCancel:a,onConfirm:t,cancelButtonText:"Cancel",confirmButtonText:"Delete",buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"uptimeMLJobDeleteConfirmModel"},e?i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.deleteMessage",defaultMessage:"Deleting jobs..."}),")"):i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.confirmDeleteMessage",defaultMessage:"Are you sure you want to delete this job?"})),e?i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}):i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.ml.deleteJobWarning",defaultMessage:"Deleting a job can be time consuming. It will be deleted in the background and data may not disappear instantly."}))),Wi=()=>{const[e,t]=Object(n.useState)(!1),[a,s]=Object(n.useState)(!1),{lastRefresh:l,refreshApp:r}=Object(n.useContext)(E.a),{notifications:o}=Object(p.useKibana)(),u=Object(A.f)(),d=Object(c.useDispatch)(),m=Object(c.useSelector)(B.g),g=Object(c.useSelector)(B.n),{data:h}=Object(c.useSelector)(B.m),{data:f}=Object(c.useSelector)(B.h),y=!(null==f||!f.jobsExist||!f.jobs.find((e=>e.id===Object(he.b)(u))));return Object(n.useEffect)((()=>{m&&d(b.m.get({monitorId:u}))}),[d,m,u,l]),Object(n.useEffect)((()=>{var e;return a&&null!=h&&null!==(e=h[Object(he.b)(u)])&&void 0!==e&&e.deleted&&(s(!1),o.toasts.success({title:i.a.createElement("p",{"data-test-subj":"uptimeMLJobSuccessfullyDeleted"},G),body:i.a.createElement("p",null,W),toastLifeTimeMs:3e3}),d(Object(b.N)()),r()),()=>{d(Object(b.N)())}}),[g,a,h,u,r,o.toasts,d]),i.a.createElement(i.a.Fragment,null,i.a.createElement(xe,{hasMLJob:y,onEnableJob:()=>{t(!0)},onJobDelete:()=>{s(!0)}}),e&&i.a.createElement($i,{onClose:()=>{t(!1)}}),a&&i.a.createElement(Gi,{onConfirm:()=>d(b.e.get({monitorId:u})),loading:g,onCancel:()=>{s(!1)}}))},qi=({locationDurationLines:e,anomalies:t,loading:a,hasMLJob:n})=>{var s,l;return i.a.createElement(d.EuiPanel,{paddingSize:"m",hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"s",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,n?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorCharts.monitorDuration.titleLabelWithAnomaly",defaultMessage:"Monitor duration (Anomalies: {noOfAnomalies})",values:{noOfAnomalies:null!==(s=null==t||null===(l=t.anomalies)||void 0===l?void 0:l.length)&&void 0!==s?s:0}}):i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorCharts.monitorDuration.titleLabel",defaultMessage:"Monitor duration"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Wi,null))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Ii,{locationDurationLines:e,loading:a,anomalies:t}))},Ki=({monitorId:e})=>{var t;const{dateRangeStart:a,dateRangeEnd:s,absoluteDateRangeStart:l,absoluteDateRangeEnd:r}=Object(A.e)(),{durationLines:o,loading:u}=Object(c.useSelector)(B.B),d=Object(c.useSelector)(B.g),{data:m,loading:p}=Object(c.useSelector)(B.h),g=!(null==m||!m.jobsExist||!m.jobs.find((t=>t.id===Object(he.b)(e)))),f=Object(c.useSelector)(B.a),y=Object(c.useDispatch)(),{lastRefresh:v}=Object(n.useContext)(E.a),{basePath:x}=Object(Mt.c)(),S=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{name:`${e}-response-duration`,time:{from:a,to:s},reportDefinitions:{"monitor.id":[e]},breakdown:"observer.geo.name",operationType:"average",dataType:"synthetics"}]},x);return Object(n.useEffect)((()=>{if(d&&g){const t={listOfMonitorIds:[e],dateStart:l,dateEnd:r};y(b.l.get(t))}}),[a,s,y,v,e,d,g]),Object(n.useEffect)((()=>{const t={monitorId:e,dateStart:a,dateEnd:s};y(Object(b.o)(t))}),[a,s,y,v,e]),Object(n.useEffect)((()=>{y(b.n.get())}),[y]),i.a.createElement(qi,{anomalies:f,hasMLJob:g,loading:u||p,exploratoryViewLink:S,locationDurationLines:null!==(t=null==o?void 0:o.locationDurationLines)&&void 0!==t?t:[]})},Vi="248px",Ji=({monitorId:e})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ki,{monitorId:e})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ni,{height:Vi,isResponsive:!1}))),Yi=()=>{const e=Object(c.useDispatch)();Object(n.useEffect)((()=>{e(fe.j.get())}),[e])},Zi=()=>{const e=Object(c.useDispatch)();Yi(),Object(n.useEffect)((()=>{e(Object(Hi.a)())}),[e]);const t=Object(A.f)();return Object(n.useEffect)((()=>{e(Object(b.T)(t)),e(fe.k.get())}),[t,e]),Object(h.useTrackPageview)({app:"uptime",path:"monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"monitor",delay:15e3}),i.a.createElement(i.a.Fragment,null,i.a.createElement(ci,{monitorId:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Ji,{monitorId:t}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(nn,null))},Xi=({details:e,activeStep:t,performanceBreakDownView:a=!1})=>{var n,i,s,l,o;const c=null!==(n=null===(i=Object(p.useKibana)().services.application)||void 0===i?void 0:i.getUrlForApp(P.a.ID))&&void 0!==n?n:"";D([...null!=t&&t.monitor?[{text:(null==t||null===(s=t.monitor)||void 0===s?void 0:s.name)||(null==t?void 0:t.monitor.id),href:`${c}/monitor/${btoa(null==t?void 0:t.monitor.id)}`}]:[],...null!=e&&null!==(l=e.journey)&&void 0!==l&&null!==(o=l.monitor)&&void 0!==o&&o.check_group?[{text:Pa(Ae()(null==e?void 0:e.timestamp)),href:`${c}/journey/${e.journey.monitor.check_group}/steps`}]:[],...a?[{text:r.i18n.translate("xpack.synthetics.synthetics.performanceBreakDown.label",{defaultMessage:"Performance breakdown"})}]:[]])};var Qi=a(198);let es,ts;!function(e){e.Blocked="blocked",e.Dns="dns",e.Connect="connect",e.Ssl="ssl",e.Send="send",e.Wait="wait",e.Receive="receive"}(es||(es={})),function(e){e.Status="status",e.ResourceSize="resourceSize",e.TransferSize="transferSize",e.CertificateIssuer="certificateIssuer",e.CertificateIssueDate="certificateIssueDate",e.CertificateExpiryDate="certificateExpiryDate",e.CertificateSubject="certificateSubject",e.IP="ip",e.MimeType="mimeType",e.RequestStart="requestStart"}(ts||(ts={}));const as={[es.Blocked]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.blocked",{defaultMessage:"Queued / Blocked"}),[es.Dns]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.dns",{defaultMessage:"DNS"}),[es.Connect]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.connect",{defaultMessage:"Connecting"}),[es.Ssl]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.ssl",{defaultMessage:"TLS"}),[es.Send]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.send",{defaultMessage:"Sending request"}),[es.Wait]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.wait",{defaultMessage:"Waiting (TTFB)"}),[es.Receive]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.timings.receive",{defaultMessage:"Content downloading"})},ns={[ts.Status]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.status",{defaultMessage:"Status"}),[ts.MimeType]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.contentType",{defaultMessage:"Content type"}),[ts.RequestStart]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.requestStart",{defaultMessage:"Request start"}),[ts.ResourceSize]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.resourceSize",{defaultMessage:"Resource size"}),[ts.TransferSize]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.transferSize",{defaultMessage:"Transfer size"}),[ts.CertificateIssuer]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssuer",{defaultMessage:"Issuer"}),[ts.CertificateIssueDate]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateIssueDate",{defaultMessage:"Valid from"}),[ts.CertificateExpiryDate]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateExpiryDate",{defaultMessage:"Valid until"}),[ts.CertificateSubject]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.certificateSubject",{defaultMessage:"Common name"}),[ts.IP]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.metadata.ip",{defaultMessage:"IP"})},is=[es.Blocked,es.Dns,es.Connect,es.Ssl,es.Send,es.Wait,es.Receive];let ss;ts.MimeType,es.Dns,es.Connect,es.Ssl,es.Wait,es.Receive,function(e){e.Html="html",e.Script="script",e.Stylesheet="stylesheet",e.Media="media",e.Font="font",e.XHR="xhr",e.Other="other"}(ss||(ss={}));const ls={[ss.Html]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.html",{defaultMessage:"HTML"}),[ss.Script]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.script",{defaultMessage:"JS"}),[ss.Stylesheet]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.stylesheet",{defaultMessage:"CSS"}),[ss.Media]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.media",{defaultMessage:"Media"}),[ss.Font]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.font",{defaultMessage:"Font"}),[ss.XHR]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.xhr",{defaultMessage:"XHR"}),[ss.Other]:r.i18n.translate("xpack.synthetics.synthetics.waterfallChart.labels.mimeTypes.other",{defaultMessage:"Other"})},rs={"text/html":ss.Html,"application/javascript":ss.Script,"text/javascript":ss.Script,"text/css":ss.Stylesheet,"image/apng":ss.Media,"image/bmp":ss.Media,"image/gif":ss.Media,"image/x-icon":ss.Media,"image/jpeg":ss.Media,"image/png":ss.Media,"image/svg+xml":ss.Media,"image/tiff":ss.Media,"image/webp":ss.Media,"audio/wave":ss.Media,"audio/wav":ss.Media,"audio/x-wav":ss.Media,"audio/x-pn-wav":ss.Media,"audio/webm":ss.Media,"video/webm":ss.Media,"video/mp4":ss.Media,"audio/ogg":ss.Media,"video/ogg":ss.Media,"application/ogg":ss.Media,"font/otf":ss.Font,"font/ttf":ss.Font,"font/woff":ss.Font,"font/woff2":ss.Font,"application/x-font-opentype":ss.Font,"application/font-woff":ss.Font,"application/font-woff2":ss.Font,"application/vnd.ms-fontobject":ss.Font,"application/font-sfnt":ss.Font,"application/json":ss.XHR},os=(e,t=3)=>Number(e).toFixed(t),cs=({value:e,timing:t,mimeType:a})=>{let n=as[t];return t===es.Receive&&a&&(n+=` (${ls[rs[a]]||a})`),`${n}: ${os(e)}ms`},us=(e,t,a=[])=>{var n;if(!t&&0===(null==a?void 0:a.length))return!0;const i=!t||(null===(n=e.url)||void 0===n?void 0:n.includes(t)),s=!(a.length>0)||a.includes(rs[e.mimeType]);return!(!i||!s)},ds=({value:e,postFix:t})=>{if(void 0===e||-1===e)return;let a=os(e);return t&&(a=`${a} ${t}`),a},ms=(e,t)=>t&&e&&t>0?e-t:e,ps=e=>{if(void 0!==e)return Object.keys(e).map((t=>({name:t,value:`${e[t]}`})))},gs=({item:e,index:t,requestStart:a})=>{const{certificates:n,ip:i,mimeType:s,requestHeaders:l,responseHeaders:r,url:o,resourceSize:c,transferSize:u,status:d}=e,{dns:m,connect:p,ssl:g,wait:h,receive:E,total:b}=e.timings||{},f=E&&E>0?E:b;return{x:t,url:o,requestHeaders:ps(l),responseHeaders:ps(r),certificates:n?[{name:ns[ts.CertificateIssuer],value:n.issuer},{name:ns[ts.CertificateIssueDate],value:n.validFrom?Ae()(n.validFrom).format("L LT"):void 0},{name:ns[ts.CertificateExpiryDate],value:n.validTo?Ae()(n.validTo).format("L LT"):void 0},{name:ns[ts.CertificateSubject],value:n.subjectName}]:void 0,details:[{name:ns[ts.Status],value:d?`${d}`:void 0},{name:ns[ts.MimeType],value:s},{name:ns[ts.RequestStart],value:ds({value:a,postFix:"ms"})},{name:as[es.Dns],value:ds({value:m,postFix:"ms"})},{name:as[es.Connect],value:ds({value:ms(p,g),postFix:"ms"})},{name:as[es.Ssl],value:ds({value:g,postFix:"ms"})},{name:as[es.Wait],value:ds({value:h,postFix:"ms"})},{name:as[es.Receive],value:ds({value:f,postFix:"ms"})},{name:ns[ts.ResourceSize],value:ds({value:c?c/1e3:void 0,postFix:"KB"})},{name:ns[ts.TransferSize],value:ds({value:u?u/1e3:void 0,postFix:"KB"})},{name:ns[ts.IP],value:i}]}},hs=Object(d.euiPaletteColorBlind)({rotations:2}),Es=Object.values(es).reduce(((e,t)=>{switch(t){case es.Blocked:e[t]=hs[16];break;case es.Dns:e[t]=hs[0];break;case es.Connect:e[t]=hs[7];break;case es.Ssl:e[t]=hs[17];break;case es.Send:e[t]=hs[2];break;case es.Wait:e[t]=hs[11];break;case es.Receive:e[t]=hs[0]}return e}),{}),bs=Object.values(ss).reduce(((e,t)=>{switch(t){case ss.Html:e[t]=hs[19];break;case ss.Script:e[t]=hs[3];break;case ss.Stylesheet:e[t]=hs[4];break;case ss.Media:e[t]=hs[5];break;case ss.Font:e[t]=hs[8];break;case ss.XHR:case ss.Other:e[t]=hs[9]}return e}),{}),fs={...Es,...bs},ys=(e,t)=>isNaN(e)?t:`${e}. ${t}`;var vs=a(203),xs=a.n(vs);const Ss=Object(n.createContext)({}),Ms=({children:e,data:t,markerItems:a,onElementClick:n,onProjectionClick:s,onSidebarClick:l,showOnlyHighlightedNetworkRequests:r,sidebarItems:o,legendItems:c,metadata:u,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:g,activeStep:h})=>i.a.createElement(Ss.Provider,{value:{data:t,activeStep:h,markerItems:a,showOnlyHighlightedNetworkRequests:r,sidebarItems:o,legendItems:c,metadata:u,onElementClick:n,onProjectionClick:s,onSidebarClick:l,renderTooltipItem:d,totalNetworkRequests:m,highlightedNetworkRequests:p,fetchedNetworkRequests:g}},e),ks=()=>Object(n.useContext)(Ss);var Os=a(251);const js=24,ws=g.euiStyled.div`
  &::-webkit-scrollbar {
    height: ${({theme:e})=>e.eui.euiScrollBar};
    width: ${({theme:e})=>e.eui.euiScrollBar};
  }
  &::-webkit-scrollbar-thumb {
    background-clip: content-box;
    background-color: ${({theme:e})=>Object(Os.rgba)(e.eui.euiColorDarkShade,.5)};
    border: ${({theme:e})=>e.eui.euiScrollBarCorner} solid transparent;
  }
  &::-webkit-scrollbar-corner,
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }
`,Is=Object(g.euiStyled)(ws)`
  height: ${e=>e.height?`${e.height}`:"auto"};
  overflow-y: ${e=>e.height?"scroll":"visible"};
  overflow-x: hidden;
`,Cs=Object(g.euiStyled)(ws)`
  position: sticky;
  top: 0;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  overflow-y: scroll;
  overflow-x: hidden;
`,Ts=Object(g.euiStyled)(d.EuiFlexItem)`
  margin-left: -16px;
`,Fs=Object(g.euiStyled)(d.EuiFlexGroup)`
`,Ls=Object(g.euiStyled)(d.EuiPanel)`
  height: 100%;
  border-radius: 0 !important;
  border: none;
`,As=g.euiStyled.div`
  && {
    padding: 16px;
    z-index: ${e=>e.theme.eui.euiZLevel5};
    border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  }
`,Ps=g.euiStyled.div`
  height: ${js}px;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  height: 100%;
  &&& {
    .echAnnotation__icon {
      top: 8px;
    }
  }
`,Ds=Object(g.euiStyled)(d.EuiFlexItem)`
  z-index: ${e=>e.theme.eui.euiZLevel5};
  min-width: 0;
`,Rs=g.euiStyled.div`
  height: ${e=>`${e.height}px`};
  overflow-y: hidden;
  overflow-x: hidden;
`,Ns=Object(g.euiStyled)(d.EuiPanel)`
  border: 0;
  height: 100%;
`,Bs=Object(g.euiStyled)(d.EuiFlexGroup)`
  height: 100%;
`,_s=Object(g.euiStyled)(d.EuiFlexItem)`
  min-width: 0;
  padding-right: ${e=>e.theme.eui.euiSizeS};
  justify-content: space-around;
`,zs=Object(g.euiStyled)(d.EuiFlexItem)`
  opacity: ${e=>e.isHighlighted?1:.4};
  height: 100%;
  .euiButtonEmpty {
    height: ${js}px;
    font-size:${({theme:e})=>e.eui.euiFontSizeM};
  }
`,Hs=g.euiStyled.div`
  width: 100%;
  height: ${e=>`${e.height+js+4}px`};
  margin-top: -${28}px;
  z-index: ${e=>Math.round(e.theme.eui.euiZLevel3/(e.chartIndex+1))};
`,Us=g.euiStyled.div`
  position: sticky;
  bottom: 0;
  z-index: ${e=>e.theme.eui.euiZLevel4};
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.euiSizeXS};
  font-size: ${e=>e.theme.eui.euiFontSizeXS};
  box-shadow: 0px -1px 4px 0px ${e=>e.theme.eui.euiColorLightShade};
`,$s=g.euiStyled.div`
  margin-top: 16px;
  max-width: 90vw;
`,Gs=Object(g.euiStyled)($s)`
  background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  border-radius: ${e=>e.theme.eui.euiBorderRadius};
  color: ${e=>e.theme.eui.euiColorLightestShade};
  padding: ${e=>e.theme.eui.euiSizeS};
  .euiToolTip__arrow {
    background-color: ${e=>e.theme.eui.euiColorDarkestShade};
  }
`,Ws=Object(g.euiStyled)(d.EuiText)`
  line-height: 28px;
  padding: 0 ${e=>e.theme.eui.euiSizeM};
  border-bottom: 0.3px solid ${e=>e.theme.eui.euiColorLightShade};
  z-index: ${e=>e.theme.eui.euiZLevel5};
`,qs=g.euiStyled.div`
    position: relative;
`,Ks=({items:e,render:t})=>{const{onSidebarClick:a}=ks(),s=Object(n.useMemo)((()=>a),[a]);return i.a.createElement(Ds,{grow:2},i.a.createElement(Rs,{height:e.length*js,"data-test-subj":"wfSidebarContainer"},i.a.createElement(Ns,{paddingSize:"none",hasBorder:!1,hasShadow:!1},i.a.createElement(Bs,{direction:"column",gutterSize:"none",responsive:!1},e.map(((e,a)=>i.a.createElement(_s,{key:a},t(e,a,s))))))))},Vs=Object(g.euiStyled)(d.EuiFlexItem)`
  margin-right: ${e=>e.theme.eui.euiSizeM};
  max-width: 7%;
  min-width: 160px;
`,Js=({items:e,render:t})=>i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",wrap:!0},e.map(((e,a)=>i.a.createElement(Vs,{key:a},t(e,a)))));var Ys=a(31);const Zs=()=>{const[e]=Object(p.useUiSetting$)("theme:darkMode");return Object(n.useMemo)((()=>e?Ys.EUI_CHARTS_THEME_DARK.theme:Ys.EUI_CHARTS_THEME_LIGHT.theme),[e])},Xs=Object(g.euiStyled)(d.EuiText)`
  font-weight: bold;
`,Qs=Object(g.euiStyled)(d.EuiHorizontalRule)`
  background-color: ${e=>e.theme.eui.euiColorDarkShade};
`,el=({text:e,url:t})=>{const{data:a,renderTooltipItem:n,sidebarItems:s}=ks(),l=a.filter((e=>{var a;return e.x===(null==s||null===(a=s.find((e=>e.url===t)))||void 0===a?void 0:a.index)&&e.config.tooltipProps&&e.config.showTooltip}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Xs,null,e),i.a.createElement(Qs,{margin:"none"}),i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"none"},l.map(((e,t)=>i.a.createElement(d.EuiFlexItem,{key:t},n(e.config.tooltipProps))))))};function tl({title:e,field:t}){const{activeStep:a}=ks();return a?i.a.createElement(sa,{field:t,title:e,step:a}):null}function al({field:e,label:t}){const[a,s]=Object(n.useState)(!1);return e?i.a.createElement(d.EuiPopover,{isOpen:a,closePopover:()=>s(!1),anchorPosition:"downLeft",panelStyle:{paddingBottom:0,paddingLeft:4},zIndex:100,button:i.a.createElement(d.EuiButtonIcon,{"aria-label":r.i18n.translate("xpack.synthetics.synthetics.markers.openEmbeddableButton.label",{defaultMessage:"Use this icon button to show metrics for this annotation marker."}),iconType:"dot",iconSize:"l",color:"text",onClick:()=>s((e=>!e))})},i.a.createElement(tl,{title:t,field:e})):i.a.createElement(d.EuiIcon,{"aria-label":r.i18n.translate("xpack.synthetics.synthetics.markers.noFieldIcon.label",{defaultMessage:"An icon indicating that this marker has no field associated with it"}),type:"dot",size:"l"})}function nl(){const{markerItems:e}=ks(),t=Object(h.useTheme)(),a=Object(n.useMemo)((()=>(null!=e?e:[]).reduce(((e,t)=>{var a;return e.set(t.offset,[...null!==(a=e.get(t.offset))&&void 0!==a?a:[],t]),e}),new Map)),[e]),s=Object(n.useMemo)((()=>Array.from(a.entries()).map((([e,a])=>{var n,i,s;let l=(null!=a?a:[]).map((({id:e})=>e)).filter(((e,t,a)=>a.indexOf(e)===t));l.length>1&&(l=l.filter((e=>"layoutShift"!==e)));const r=l.map((e=>{var a,n;return null!==(a=null===(n=il(e,t))||void 0===n?void 0:n.label)&&void 0!==a?a:e})).join(" / "),o=l[0],c=il(o,t);return{id:o,offset:e,label:r,field:null!==(n=null==c?void 0:c.field)&&void 0!==n?n:"",color:null!==(i=null==c?void 0:c.color)&&void 0!==i?i:t.eui.euiColorMediumShade,strokeWidth:null!==(s=null==c?void 0:c.strokeWidth)&&void 0!==s?s:1}}))),[a,t]);return e?i.a.createElement(sl,null,s.map((({id:e,offset:t,label:a,field:n,color:s,strokeWidth:l})=>{const o=`${e}-${t}`;return i.a.createElement(ui.LineAnnotation,{key:o,id:o,domainType:ui.AnnotationDomainType.YDomain,dataValues:[{dataValue:t,details:a,header:r.i18n.translate("xpack.synthetics.synthetics.waterfall.offsetUnit",{defaultMessage:"{offset} ms",values:{offset:t}})}],marker:i.a.createElement(al,{field:n,label:a}),style:{line:{strokeWidth:l,stroke:s,opacity:1}}})}))):null}function il(e,t){switch(e){case"domContentLoaded":return{label:ul,color:t.eui.euiColorVis0,field:"browser.experience.dcl.us",strokeWidth:2};case"firstContentfulPaint":return{label:ll,color:t.eui.euiColorVis1,field:"browser.experience.fcp.us",strokeWidth:2};case"largestContentfulPaint":return{label:rl,color:t.eui.euiColorVis2,field:"browser.experience.lcp.us",strokeWidth:2};case"layoutShift":return{label:ol,color:t.eui.euiColorVis6,field:"",strokeWidth:1};case"loadEvent":return{label:cl,color:t.eui.euiColorVis9,field:"browser.experience.load.us",strokeWidth:2}}}const sl=g.euiStyled.span`
  &&& {
    > .echAnnotation__icon {
      top: 8px;
    }
  }
`,ll=r.i18n.translate("xpack.synthetics.synthetics.waterfall.fcpLabel",{defaultMessage:"First contentful paint"}),rl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.lcpLabel",{defaultMessage:"Largest contentful paint"}),ol=r.i18n.translate("xpack.synthetics.synthetics.waterfall.layoutShiftLabel",{defaultMessage:"Layout shift"}),cl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.loadEventLabel",{defaultMessage:"Load event"}),ul=r.i18n.translate("xpack.synthetics.synthetics.waterfall.domContentLabel",{defaultMessage:"DOM Content Loaded"}),dl=e=>{var t;const{data:a,sidebarItems:s}=ks();return Object(n.useMemo)((()=>{const t=null==s?void 0:s.find((t=>{var a;return t.index===(null===(a=e.header)||void 0===a?void 0:a.value)}));return a.filter((t=>{var a;return t.x===(null===(a=e.header)||void 0===a?void 0:a.value)&&t.config.showTooltip&&t.config.tooltipProps})).length?i.a.createElement(Gs,null,t&&i.a.createElement(el,{text:ys(t.index+1,t.url),url:t.url})):null}),[a,s,null===(t=e.header)||void 0===t?void 0:t.value])},ml=({chartData:e,tickFormat:t,domain:a,barStyleAccessor:s,index:l})=>{var r;const o=Zs(),{onElementClick:c,onProjectionClick:u}=ks(),d=Object(n.useMemo)((()=>c),[c]),m=Object(n.useMemo)((()=>u),[u]),p=Object(n.useCallback)(t,[t]);return i.a.createElement(Hs,{height:(g=e,24*new Set(g.map((e=>e.x))).size),chartIndex:l,"data-test-subj":"wfDataOnlyBarChart"},i.a.createElement(ui.Chart,{className:"data-chart"},i.a.createElement(ui.Settings,{showLegend:!1,rotation:90,tooltip:{boundary:null!==(r=document.getElementById("app-fixed-viewport"))&&void 0!==r?r:void 0,customTooltip:dl},theme:o,onProjectionClick:m,onElementClick:d}),i.a.createElement(ui.Axis,{"aria-hidden":!0,id:"time",position:ui.Position.Top,tickFormat:p,domain:a,showGridLines:!0,style:{axisLine:{visible:!1}}}),i.a.createElement(ui.BarSeries,{id:"waterfallItems",xScaleType:ui.ScaleType.Ordinal,yScaleType:ui.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:s,data:e}),i.a.createElement(nl,null)));var g},pl=({tickFormat:e,domain:t,barStyleAccessor:a})=>{const n=Zs();return i.a.createElement(Ps,null,i.a.createElement(ui.Chart,{className:"axis-only-chart","data-test-subj":"axisOnlyChart"},i.a.createElement(ui.Settings,{showLegend:!1,rotation:90,tooltip:{type:ui.TooltipType.None},theme:n}),i.a.createElement(ui.Axis,{id:"time",position:ui.Position.Top,tickFormat:e,domain:t,showGridLines:!0}),i.a.createElement(ui.BarSeries,{"aria-hidden":!0,id:"waterfallItems",xScaleType:ui.ScaleType.Ordinal,yScaleType:ui.ScaleType.Linear,xAccessor:"x",yAccessors:["y"],y0Accessors:["y0"],styleAccessor:a,data:[{x:0,y0:0,y1:1}]}),i.a.createElement(nl,null)))},gl=({totalNetworkRequests:e,fetchedNetworkRequests:t,highlightedNetworkRequests:a,showHighlightedNetworkRequests:n})=>i.a.createElement(Ws,{size:"xs",color:"subdued"},i.a.createElement("strong",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage",defaultMessage:"{numNetworkRequests} network requests",values:{numNetworkRequests:e>t?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsTotalMessage.first",defaultMessage:"First {count}",values:{count:`${t}/${e}`}}):e}})," ",n&&a>=0&&i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.requestsHighlightedMessage",defaultMessage:"({numHighlightedRequests} match the filter)",values:{numHighlightedRequests:a}})),e>t&&i.a.createElement(d.EuiIconTip,{type:"iInCircle",content:r.i18n.translate("xpack.synthetics.synthetics.waterfall.requestsTotalMessage.info",{defaultMessage:"Waterfall view only shows up to 1000 requests"})})),hl=({tickFormat:e,domain:t,barStyleAccessor:a,renderSidebarItem:s,renderLegendItem:l,renderFilter:r,renderFlyout:o,maxHeight:c="800px",fullHeight:u=!1})=>{const{data:m,showOnlyHighlightedNetworkRequests:p,sidebarItems:g,legendItems:h,totalNetworkRequests:E,highlightedNetworkRequests:b,fetchedNetworkRequests:f}=ks(),{width:y}=xs()(),v=Object(n.useRef)(null),x=Object(n.useRef)(null),[S,M]=Object(n.useState)(c),k=!(!g||!s),O=!!(h&&h.length>0&&l);Object(n.useEffect)((()=>{if(u&&v.current&&x.current){const e=v.current.getBoundingClientRect().top,t=x.current.getBoundingClientRect().height;M(`calc(100vh - ${e+33+t}px)`)}}),[v,u,x,y]);const j=(({data:e})=>{const[t,a]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t=[];if((null==e?void 0:e.length)>0){let a=0;const n=new Set;let i;e.forEach((e=>{150===n.size&&e.x>i&&(a++,n.clear()),n.add(e.x),i=e.x,t[a]?t[a].push(e):t.push([e])}))}a(t)}),[e]),t})({data:m});return i.a.createElement(qs,null,i.a.createElement(Cs,null,i.a.createElement(Fs,{gutterSize:"none",responsive:!1},k&&i.a.createElement(Ds,{grow:2},i.a.createElement(Ls,{paddingSize:"none",hasShadow:!1}),i.a.createElement(gl,{totalNetworkRequests:E,highlightedNetworkRequests:b,fetchedNetworkRequests:f,showHighlightedNetworkRequests:p}),r&&i.a.createElement(As,null,r())),i.a.createElement(Ts,{grow:!k||8,"data-test-subj":"axisOnlyWrapper"},i.a.createElement(pl,{domain:t,barStyleAccessor:a,tickFormat:e})))),i.a.createElement(Is,{height:S,"data-test-subj":"waterfallOuterContainer",ref:v},i.a.createElement(d.EuiFlexGroup,{gutterSize:"none",responsive:!1},k&&i.a.createElement(Ks,{items:g,render:s}),i.a.createElement(Ts,{grow:!k||8,"data-test-subj":"dataOnlyWrapper"},j.map(((n,s)=>i.a.createElement(ml,{index:s,key:s,chartData:n,domain:t,barStyleAccessor:a,tickFormat:e})))))),O&&i.a.createElement(Us,{ref:x},i.a.createElement(Js,{items:h,render:l})),o&&o())},El=g.euiStyled.span`
  position: relative;
  display: inline-flex;
  align-items: center;
  .euiToolTipAnchor {
    min-width: 0;
  }
`,bl=g.euiStyled.span`
  overflow: hidden;
  display: flex;
  align-items: center;
`,fl=Object(g.euiStyled)(d.EuiText)`
  font-family: ${e=>e.theme.eui.euiCodeFontFamily};
  margin-right: ${e=>e.theme.eui.euiSizeXS};
  line-height: ${js}px;
  text-align: right;
  background-color: ${e=>e.theme.eui.euiColorLightestShade};
`,yl=g.euiStyled.span`
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
  line-height: ${js}px;
  text-align: left;
`,vl=g.euiStyled.span`
  flex-shrink: 0;
  line-height: ${js}px;
  text-align: left;
`,xl=Object(g.euiStyled)(d.EuiButtonEmpty)`
  &&& {
    border: none;

    .euiButtonContent {
      display: inline-block;
      padding: 0;
    }
  }
`,Sl=Object(g.euiStyled)(d.EuiIcon)`
  margin-right: ${e=>e.theme.eui.euiSizeXS};
`,Ml=({index:e,ariaLabel:t,text:a,onClick:s,setButtonRef:l,url:o,highestIndex:c})=>{const u=a.startsWith("https://"),m=a.replace(/https:\/\/www.|http:\/\/www.|http:\/\/|https:\/\//,""),p=Object(n.useMemo)((()=>((e="")=>{const t=e.split(""),a=t.length-12>0?t.length-12:null,n=a?t.splice(a):[];return{first:t.join(""),last:n.join("")}})(m)),[m]);return i.a.createElement(El,{"aria-label":t,"data-test-subj":"middleTruncatedTextContainer"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",{"data-test-subj":"middleTruncatedTextSROnly"},a)),i.a.createElement(Gs,{as:d.EuiToolTip,content:i.a.createElement(el,{text:ys(e,a),url:o}),"data-test-subj":"middleTruncatedTextToolTip",delay:"long",position:"top"},i.a.createElement(i.a.Fragment,null,s?i.a.createElement(xl,{onClick:s,"data-test-subj":`middleTruncatedTextButton${e}`,buttonRef:l,flush:"left"},i.a.createElement(bl,null,i.a.createElement(fl,{color:"subdued",size:"s",style:{minWidth:String(c).length+1+"ch"}},e+"."),u&&i.a.createElement(Sl,{type:"lock",size:"s",color:"success","aria-label":r.i18n.translate("xpack.synthetics.waterfallChart.sidebar.url.https",{defaultMessage:"https"})}),i.a.createElement(yl,null,p.first),i.a.createElement(vl,null,p.last))):i.a.createElement(bl,{"aria-hidden":!0},i.a.createElement(yl,null,e,". ",p.first),i.a.createElement(vl,null,p.last)))),i.a.createElement("span",null,i.a.createElement(d.EuiLink,{href:o,external:!0,target:"_blank"},i.a.createElement(d.EuiScreenReaderOnly,null,i.a.createElement("span",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.waterfall.resource.externalLink",defaultMessage:"Open resource in new tab"}))))))};var kl=a(104),Ol=a.n(kl);const jl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.searchBox.placeholder",{defaultMessage:"Filter network requests"}),wl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.filterScreenreaderLabel",{defaultMessage:"Filter by"}),Il=r.i18n.translate("xpack.synthetics.synthetics.waterfall.filterGroup.removeFilterScreenReaderLabel",{defaultMessage:"Remove filter by"}),Cl=r.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.popover",{defaultMessage:"Click to open waterfall filters"}),Tl=r.i18n.translate("xpack.synthetics.pingList.synthetics.waterfall.filters.collapseRequestsLabel",{defaultMessage:"Collapse to only show matching requests"}),Fl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.sidebar.filterMatchesScreenReaderLabel",{defaultMessage:"Resource matches filter"}),Ll=[{label:ls[ss.XHR],mimeType:ss.XHR},{label:ls[ss.Html],mimeType:ss.Html},{label:ls[ss.Script],mimeType:ss.Script},{label:ls[ss.Stylesheet],mimeType:ss.Stylesheet},{label:ls[ss.Font],mimeType:ss.Font},{label:ls[ss.Media],mimeType:ss.Media}],Al=({query:e,setQuery:t,activeFilters:a,setActiveFilters:s,onlyHighlighted:l,setOnlyHighlighted:r})=>{const[o,c]=Object(n.useState)(e),[u,m]=Object(n.useState)(!1),p=Object(h.useUiTracker)({app:"uptime"});return Ol()((()=>{t(o)}),250,[o]),Object(n.useEffect)((()=>{e||a.length>0||r(!1)}),[a.length,r,e]),Object(n.useEffect)((()=>{e&&p({metric:"waterfall_filter_input_changed",metricType:h.METRIC_TYPE.CLICK})}),[e,p]),Object(n.useEffect)((()=>{l&&p({metric:"waterfall_filter_collapse_checked",metricType:h.METRIC_TYPE.CLICK})}),[l,p]),Object(n.useEffect)((()=>{a.length>0&&p({metric:"waterfall_filters_applied_changed",metricType:h.METRIC_TYPE.CLICK})}),[a,p]),i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFieldSearch,{fullWidth:!0,"aria-label":jl,placeholder:jl,onChange:e=>{c(e.target.value)},value:o})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonIcon,{"aria-label":Cl,iconType:"filter",onClick:()=>m((e=>!e)),color:a.length>0?"primary":"text",isSelected:a.length>0}),isOpen:u,closePopover:()=>m(!1),anchorPosition:"rightCenter"},i.a.createElement(d.EuiFilterGroup,null,Ll.map((({label:e,mimeType:t})=>i.a.createElement(d.EuiFilterButton,{hasActiveFilters:a.includes(t),onClick:()=>{return e=t,void s((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]));var e},key:e,withNext:!0,"aria-label":`${a.includes(t)?Il:wl} ${e}`},e)))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(d.EuiCheckbox,{compressed:!0,disabled:!(e||a.length>0),id:"onlyHighlighted",label:Tl,checked:l,onChange:e=>{r(e.target.checked)}}))))},Pl=Me()(d.EuiText).withConfig({displayName:"StyledText",componentId:"sc-xlte7y-0"})(["width:100%;"]);class waterfall_flyout_table_TableWithoutHeader extends d.EuiBasicTable{renderTableHead(){return i.a.createElement(i.a.Fragment,null)}}const Dl=e=>{const{rows:t,title:a}=e,s=Object(n.useMemo)((()=>[{field:"name",name:"",sortable:!1,render:(e,t)=>i.a.createElement(d.EuiText,{size:"xs"},i.a.createElement("strong",null,t.name))},{field:"value",name:"",sortable:!1,render:(e,t)=>{var a;return i.a.createElement(Pl,{size:"xs",textAlign:"right"},null!==(a=t.value)&&void 0!==a?a:"--")}}]),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiText,null,i.a.createElement("h4",null,a)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(waterfall_flyout_table_TableWithoutHeader,{tableLayout:"fixed",compressed:!0,responsive:!1,columns:s,items:t}))},Rl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.details",{defaultMessage:"Details"}),Nl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.certificates",{defaultMessage:"Certificate headers"}),Bl=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.requestHeaders",{defaultMessage:"Request headers"}),_l=r.i18n.translate("xpack.synthetics.synthetics.waterfall.flyout.responseHeaders",{defaultMessage:"Response headers"}),zl=Me()(d.EuiFlyout).withConfig({displayName:"FlyoutContainer",componentId:"sc-15jwikd-0"})(["z-index:",";"],(e=>e.theme.eui.euiZLevel5)),Hl=({flyoutData:e,isFlyoutVisible:t,onFlyoutClose:a})=>{const s=Object(n.useRef)(null),l=Object(h.useUiTracker)({app:"uptime"});if(Object(n.useEffect)((()=>{var a;t&&e&&s.current&&(null===(a=s.current)||void 0===a||a.focus())}),[e,t,s]),!e||!t)return null;const{x:r,url:o,details:c,certificates:u,requestHeaders:m,responseHeaders:p}=e;return l({metric:"waterfall_flyout",metricType:h.METRIC_TYPE.CLICK}),i.a.createElement("div",{"tab-index":-1,ref:s,"data-test-subj":"waterfallFlyout","aria-labelledby":"flyoutTitle"},i.a.createElement(zl,{size:"s",onClose:a},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",{id:"flyoutTitle"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ml,{index:r+1,text:o,url:o,ariaLabel:o,highestIndex:r+1}))))),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(Dl,{rows:c,title:Rl}),!!m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Dl,{rows:m,title:Bl})),!!p&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Dl,{rows:p,title:_l})),!!u&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Dl,{rows:u,title:Nl})))))},Ul=({item:e,highestIndex:t,renderFilterScreenReaderText:a,onClick:s})=>{const[l,r]=Object(n.useState)(),{status:o,offsetIndex:c,index:u,isHighlighted:m,url:p}=e,g=Object(n.useMemo)((()=>{if(s)return()=>s({buttonRef:l,networkItemIndex:u})}),[l,u,s]),h=Object(n.useCallback)((e=>r(e)),[r]),E=e.url,b=`${m&&a?`${Fl} `:""}${E}`;return i.a.createElement(zs,{isHighlighted:m,"data-test-subj":m?"sideBarHighlightedItem":"sideBarDimmedItem"},o&&((f=o)>=400&&f<=499||f>=500&&f<=599||301===f||307===f||308===f)?i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Ml,{index:c,text:E,url:p,ariaLabel:b,onClick:g,setButtonRef:h,highestIndex:t})),i.a.createElement(d.EuiFlexItem,{component:"span",grow:!1},i.a.createElement(d.EuiBadge,{color:"danger"},o))):i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1,style:{minWidth:0}},i.a.createElement(Ml,{index:c,text:E,url:p,ariaLabel:b,onClick:g,setButtonRef:h,highestIndex:t}))));var f},$l=e=>i.a.createElement(d.EuiHealth,{color:e.colour,className:"eui-textNoWrap"},e.name),Gl=({data:e,total:t,markerItems:a,activeStep:s})=>{const[l,r]=Object(n.useState)(""),[o,c]=Object(n.useState)([]),[u,m]=Object(n.useState)(!1),[p]=Object(n.useState)(e),g=o.length>0,{series:E,domain:b,metadata:f,totalHighlightedRequests:y}=Object(n.useMemo)((()=>((e,t=!1,a,n)=>{const i=e=>e.requestSentTime;let s=1/0;e.forEach((e=>s=Math.min(s,i(e))));const l=[],r=[];let o=0;e.forEach(((e,t)=>{const c=(e=>{const t=e&&rs[e]?rs[e]:ss.Other;return fs[t]})(e.mimeType);let u=i(e)-s;r.push(gs({item:e,index:t,requestStart:u}));const d=us(e,a,n);if(d&&o++,!e.timings)return void l.push({x:t,y0:0,y:0,config:{isHighlighted:d,showTooltip:!1}});let m=!1;if(is.forEach((a=>{const n=((e,t)=>{if(e)return t===es.Connect?ms(e.connect,e.ssl):e[t]})(e.timings,a);if(n&&n>=0){m=!0;const i=a===es.Receive?c:fs[a],s=u+n;l.push({x:t,y0:u,y:s,config:{id:t,colour:i,isHighlighted:d,showTooltip:!0,tooltipProps:{value:cs({value:s-u,timing:a,mimeType:e.mimeType}),colour:i}}}),u=s}})),!m){const a=e.timings.total,n=-1!==a;l.push({x:t,y0:n?u:0,y:n?u+e.timings.total:0,config:{isHighlighted:d,colour:n?c:"",showTooltip:n,tooltipProps:n?{value:cs({value:a,timing:es.Receive,mimeType:e.mimeType}),colour:c}:void 0}})}}));const c=l.map((e=>e.y)),u={min:0,max:Math.max(...c)};let d=l;return t&&(d=l.filter((e=>e.config.isHighlighted))),{series:d,domain:u,metadata:r,totalHighlightedRequests:o}})(p,u,l,o)),[p,l,o,u]),v=Object(n.useMemo)((()=>((e,t,a,n)=>{const i=e.map(((e,t)=>{const i=us(e,a,n),s=t+1,{url:l,status:r,method:o}=e;return{url:l,status:r,method:o,isHighlighted:i,offsetIndex:s,index:t}}));return t?i.filter((e=>e.isHighlighted)):i})(p,u,l,o)),[p,l,o,u]),x=Object(n.useMemo)((()=>(()=>{let e=[];Object.values(es).forEach((t=>{t!==es.Receive&&(e=[...e,{name:as[t],colour:Es[t]}])}));let t=[];return Object.values(ss).forEach((e=>{t=[...t,{name:ls[e],colour:bs[e]}]})),[...e,...t]})()),[]),{flyoutData:S,onBarClick:M,onProjectionClick:k,onSidebarClick:O,isFlyoutVisible:j,onFlyoutClose:w}=(e=>{const[t,a]=Object(n.useState)(!1),[i,s]=Object(n.useState)(void 0),[l,r]=Object(n.useState)(),o=Object(n.useCallback)((e=>{s(e),a(!0)}),[a,s]),c=Object(n.useCallback)((()=>{var e;a(!1),null==l||null===(e=l.current)||void 0===e||e.focus()}),[l,a]);return{flyoutData:i,onBarClick:Object(n.useCallback)((([t])=>{a(!1);const{datum:n}=t[0],i=e[n.config.id];o(i)}),[e,o]),onProjectionClick:Object(n.useCallback)((t=>{a(!1);const{x:n}=t;if("number"==typeof n&&n>=0){const t=e[n];o(t)}}),[e,o]),onSidebarClick:Object(n.useCallback)((({buttonRef:n,networkItemIndex:i})=>{if(t&&n===l)a(!1);else{const t=e[i];r(n),o(t)}}),[l,o,t,e,a]),isFlyoutVisible:t,onFlyoutClose:c}})(f),I=Object(n.useCallback)((()=>i.a.createElement(Al,{query:l,setQuery:r,activeFilters:o,setActiveFilters:c,onlyHighlighted:u,setOnlyHighlighted:m})),[o,c,u,m,l,r]),C=Object(n.useCallback)((()=>i.a.createElement(Hl,{flyoutData:S,onFlyoutClose:w,isFlyoutVisible:j})),[S,j,w]),T=Math.max(...E.map((e=>e.x))),F=Object(n.useCallback)((e=>i.a.createElement(Ul,{item:e,renderFilterScreenReaderText:g&&!u,onClick:O,highestIndex:T})),[g,u,O,T]);return Object(h.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:h.METRIC_TYPE.COUNT}),Object(h.useTrackMetric)({app:"uptime",metric:"waterfall_chart_view",metricType:h.METRIC_TYPE.COUNT,delay:15e3}),i.a.createElement(Ms,{activeStep:s,markerItems:a,totalNetworkRequests:t,fetchedNetworkRequests:p.length,highlightedNetworkRequests:y,data:E,onElementClick:Object(n.useCallback)(M,[M]),onProjectionClick:Object(n.useCallback)(k,[k]),onSidebarClick:O,showOnlyHighlightedNetworkRequests:u,sidebarItems:v,legendItems:x,metadata:f,renderTooltipItem:Object(n.useCallback)((e=>i.a.createElement(d.EuiHealth,{color:String(null==e?void 0:e.colour)},null==e?void 0:e.value)),[])},i.a.createElement(hl,{tickFormat:Object(n.useCallback)((e=>`${Number(e).toFixed(0)} ms`),[]),domain:b,barStyleAccessor:Object(n.useCallback)((({datum:e})=>{var t,a;return null!==(t=e.config)&&void 0!==t&&t.isHighlighted?e.config.colour:{rect:{fill:null===(a=e.config)||void 0===a?void 0:a.colour,opacity:"0.1"}}}),[]),renderSidebarItem:F,renderLegendItem:$l,renderFlyout:C,renderFilter:I,fullHeight:!0}))},Wl="browser.relative_trace.type",ql="browser.relative_trace.name",Kl="browser.relative_trace.start.us",Vl="navigationStart",Jl=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfallNoData",{defaultMessage:"No waterfall data could be found for this step"}),Yl=({checkGroup:e,stepIndex:t,activeStep:a})=>{var s,l;const o=Object(c.useDispatch)();Object(n.useEffect)((()=>{e&&t&&o(Object(Qi.a)({checkGroup:e,stepIndex:t}))}),[o,t,e]);const u=null===(s=Object(c.useSelector)(B.x)[null!=e?e:""])||void 0===s?void 0:s[t],m=u&&!u.loading,p=null==u?void 0:u.isWaterfallSupported,g=(null==u||null===(l=u.events)||void 0===l?void 0:l.length)>0,{metrics:E}=(({checkGroup:e,hasNavigationRequest:t,stepIndex:a})=>{const{settings:n}=Object(c.useSelector)(B.C),i=(null==n?void 0:n.heartbeatIndices)||"",{data:s,loading:l}=Object(h.useEsSearch)(t?Object(h.createEsParams)({index:i,body:{query:{bool:{filter:[{term:{"synthetics.step.index":a}},{term:{"monitor.check_group":e}},{term:{"synthetics.type":"step/metrics"}}]}},fields:["browser.*"],size:1e3,_source:!1}}):{},[i,e,t],{name:"getWaterfallStepMetrics"});if(!t)return{metrics:[],loading:!1};const r=[];if(s&&t){const e=s.hits.hits;let t=0,a=!1;e.forEach((({fields:e})=>{var n;if("mark"===(null===(n=e[Wl])||void 0===n?void 0:n[0])){const{[ql]:n,[Kl]:i}=e;(null==n?void 0:n[0])===Vl&&(t=null==i?void 0:i[0],a=!0)}})),a&&e.forEach((({fields:e})=>{var a;if("mark"===(null===(a=e[Wl])||void 0===a?void 0:a[0])){const{[ql]:a,[Kl]:n}=e;(null==a?void 0:a[0])!==Vl&&r.push({id:null==a?void 0:a[0],offset:((null==n?void 0:n[0])-t)/1e3})}}))}return{metrics:r,loading:l}})({checkGroup:e,stepIndex:t,hasNavigationRequest:null==u?void 0:u.hasNavigationRequest});return i.a.createElement(i.a.Fragment,null,!m&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingChart,{size:"xl","aria-label":r.i18n.translate("xpack.synthetics.synthetics.stepDetail.waterfall.loading",{defaultMessage:"Waterfall chart loading"})}))),m&&!g&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{textAlign:"center"},i.a.createElement("p",null,Jl)))),m&&g&&p&&i.a.createElement(Gl,{data:(b=u.events,b.sort(((e,t)=>e.requestSentTime-t.requestSentTime))),markerItems:E,total:u.total,activeStep:a}),m&&g&&!p&&i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.title",defaultMessage:"Waterfall chart unavailable"}),color:"warning",iconType:"help"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.waterfallUnsupported.description",defaultMessage:"The waterfall chart cannot be shown. You may be using an older version of the Synthetic Agent. Please check the version and consider upgrading."})));var b},Zl=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.noData",{defaultMessage:"No data could be found for this step"}),Xl=({checkGroup:e,stepIndex:t})=>{const{activeStep:a,journey:n}=nr();return Xi({details:null==n?void 0:n.details,activeStep:a,performanceBreakDownView:!0}),i.a.createElement(i.a.Fragment,null,(!n||n.loading)&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}))),n&&!a&&!n.loading&&i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{textAlign:"center"},i.a.createElement("p",null,Zl)))),n&&a&&!n.loading&&i.a.createElement(Yl,{checkGroup:e,stepIndex:t,activeStep:a}))},Ql=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.previousCheckButtonText",{defaultMessage:"Previous check"}),er=r.i18n.translate("xpack.synthetics.synthetics.stepDetail.nextCheckButtonText",{defaultMessage:"Next check"}),tr=({previousCheckGroup:e,dateFormat:t,handleNextRun:a,handlePreviousRun:n,checkTimestamp:s,nextCheckGroup:l})=>i.a.createElement(d.EuiFlexGroup,{alignItems:"center",justifyContent:"flexEnd",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:n,disabled:!e,iconType:"arrowLeft","aria-label":Ql},Ql)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},Ae()(s).format(t))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:a,disabled:!l,iconType:"arrowRight",iconSide:"right","aria-label":er},er))),ar=({stepIndex:e,totalSteps:t,handleNextStep:a,handlePreviousStep:n,hasNextStep:s,hasPreviousStep:l})=>i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:n,disabled:!l,iconType:"arrowLeft"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepDetail.totalSteps",defaultMessage:"Step {stepIndex} of {totalSteps}",values:{stepIndex:e,totalSteps:t}}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{onClick:a,disabled:!s,iconType:"arrowRight"}))))),nr=()=>{var e,t,a,i,s;const l=Object(u.useHistory)(),r=Object(c.useDispatch)(),{checkGroupId:o,stepIndex:d}=Object(u.useParams)();Object(n.useEffect)((()=>{o&&r(Object(Qa.a)({checkGroup:o,syntheticEventTypes:["step/end"]}))}),[r,o]);const m=Number(d),p=null!==(e=Object(c.useSelector)(B.o)[o])&&void 0!==e?e:null,g=Object(n.useMemo)((()=>{var e;return{hasPreviousStep:m>1,activeStep:null==p||null===(e=p.steps)||void 0===e?void 0:e.find((e=>{var t,a;return(null===(t=e.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.index)===m})),hasNextStep:!!(p&&p.steps&&m<p.steps.length)}}),[p,m]),h=Object(n.useCallback)((()=>{l.push(`/journey/${o}/step/${m+1}`)}),[l,o,m]),E=Object(n.useCallback)((()=>{l.push(`/journey/${o}/step/${m-1}`)}),[l,o,m]),b=Object(n.useCallback)((()=>{var e,t;l.push(`/journey/${null==p||null===(e=p.details)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.checkGroup}/step/1`)}),[l,null==p||null===(t=p.details)||void 0===t||null===(a=t.next)||void 0===a?void 0:a.checkGroup]),f=Object(n.useCallback)((()=>{var e,t;l.push(`/journey/${null==p||null===(e=p.details)||void 0===e||null===(t=e.previous)||void 0===t?void 0:t.checkGroup}/step/1`)}),[l,null==p||null===(i=p.details)||void 0===i||null===(s=i.previous)||void 0===s?void 0:s.checkGroup]);return{checkGroup:o,journey:p,stepIndex:m,...g,handleNextStep:h,handlePreviousStep:E,handleNextRun:b,handlePreviousRun:f}},ir=()=>{var e,t;const{activeStep:a,journey:n}=nr();return i.a.createElement(i.a.Fragment,null,n&&a&&(null===(e=a.synthetics)||void 0===e||null===(t=e.step)||void 0===t?void 0:t.name))},sr=()=>{var e,t,a,n,s;const[l]=Object(p.useUiSetting$)("dateFormat"),{journey:r,handleNextRun:o,handlePreviousRun:c}=nr();return r?i.a.createElement(tr,{dateFormat:l,handleNextRun:o,handlePreviousRun:c,nextCheckGroup:null===(e=r.details)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.checkGroup,previousCheckGroup:null===(a=r.details)||void 0===a||null===(n=a.previous)||void 0===n?void 0:n.checkGroup,checkTimestamp:null===(s=r.details)||void 0===s?void 0:s.timestamp}):null},lr=()=>{var e,t,a;const{activeStep:n,hasPreviousStep:s,hasNextStep:l,handleNextStep:r,handlePreviousStep:o,journey:c,stepIndex:u}=nr();return c&&n?i.a.createElement(ar,{stepName:null!==(e=null===(t=n.synthetics)||void 0===t||null===(a=t.step)||void 0===a?void 0:a.name)&&void 0!==e?e:"",stepIndex:u,totalSteps:c.steps.length,hasPreviousStep:s,hasNextStep:l,handlePreviousStep:o,handleNextStep:r}):null},rr=()=>{Yi();const{checkGroupId:e,stepIndex:t}=Object(u.useParams)();Object(h.useTrackPageview)({app:"uptime",path:"stepDetail"}),Object(h.useTrackPageview)({app:"uptime",path:"stepDetail",delay:15e3});const a=Object(c.useDispatch)();return Object(n.useEffect)((()=>{a(Object(Hi.a)())}),[a]),i.a.createElement(Xl,{checkGroup:e,stepIndex:Number(t)})},or=({onChange:e,loading:t,formFields:a,fieldErrors:n,isDisabled:s})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.indicesSectionTitle",defaultMessage:"Indices"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesTitle",defaultMessage:"Uptime indices"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesDescription",defaultMessage:"Index pattern for matching indices that contain Heartbeat data"})},i.a.createElement(d.EuiFormRow,{describedByIds:["heartbeatIndices"],error:null==n?void 0:n.heartbeatIndices,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,o.i.heartbeatIndices)}}),isInvalid:!(null==n||!n.heartbeatIndices),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.heartbeatIndicesLabel",defaultMessage:"Heartbeat indices"})},i.a.createElement(d.EuiFieldText,{"data-test-subj":"heartbeat-indices-input-"+(t?"loading":"loaded"),fullWidth:!0,disabled:s,isLoading:t,value:(null==a?void 0:a.heartbeatIndices)||"",onChange:t=>e({heartbeatIndices:t.currentTarget.value})})))),cr={ageInputAriaLabel:r.i18n.translate("xpack.synthetics.sourceConfiguration.ageLimitThresholdInput.ariaLabel",{defaultMessage:"An input that controls the maximum number of days for which a TLS certificate may be valid before Kibana will show a warning."}),expirationInputAriaLabel:r.i18n.translate("xpack.synthetics.sourceConfiguration.certificateExpirationThresholdInput.ariaLabel",{defaultMessage:"An input that controls the minimum number of days remaining for TLS certificate expiration before Kibana will show a warning."})},ur={inputPlaceHolder:r.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.selectConnector",{defaultMessage:"Please select one or more connectors"}),emailPlaceHolder:r.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.emailConnectorPlaceHolder",{defaultMessage:"To: Email for email connector"})},dr=({loading:e,onChange:t,formFields:a,fieldErrors:n,isDisabled:s})=>{var l,r;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.certificationSectionTitle",defaultMessage:"Certificate Expiration"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.expirationThreshold",defaultMessage:"Expiration/Age Thresholds"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.certificateThresholdDescription",defaultMessage:"Change the threshold for displaying and alerting on certificate errors. Note: this will affect any configured alerts."})},i.a.createElement(d.EuiFormRow,{describedByIds:["errorState"],error:null==n?void 0:n.expirationThresholdError,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.expirationThresholdDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,o.i.certExpirationThreshold)}}),isInvalid:!(null==n||!n.expirationThresholdError),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.errorStateLabel",defaultMessage:"Expiration threshold"})},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiFieldText,{"aria-label":cr.expirationInputAriaLabel,"data-test-subj":"expiration-threshold-input-"+(e?"loading":"loaded"),fullWidth:!0,disabled:s,isInvalid:!(null==n||!n.expirationThresholdError),isLoading:e,value:null!==(l=null==a?void 0:a.certExpirationThreshold)&&void 0!==l?l:"",onChange:e=>t({certExpirationThreshold:Number(e.target.value)||void 0})})),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageLimit.units.days",defaultMessage:"Days"}))))),i.a.createElement(d.EuiFormRow,{describedByIds:["warningState"],error:null==n?void 0:n.ageThresholdError,fullWidth:!0,helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageThresholdDefaultValue",defaultMessage:"The default value is {defaultValue}",values:{defaultValue:i.a.createElement(d.EuiCode,null,o.i.certAgeThreshold)}}),isInvalid:!(null==n||!n.ageThresholdError),label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.warningStateLabel",defaultMessage:"Age limit"})},i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(d.EuiFieldText,{"aria-label":cr.ageInputAriaLabel,"data-test-subj":"age-threshold-input-"+(e?"loading":"loaded"),fullWidth:!0,disabled:s,isInvalid:!(null==n||!n.ageThresholdError),isLoading:e,value:null!==(r=null==a?void 0:a.certAgeThreshold)&&void 0!==r?r:"",onChange:({target:{value:e}})=>t({certAgeThreshold:Number(e)||void 0})})),i.a.createElement(d.EuiFlexItem,{grow:1},i.a.createElement(d.EuiText,null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.ageLimit.units.days",defaultMessage:"Days"})))))))},mr=r.i18n.translate("xpack.synthetics.certificates.refresh",{defaultMessage:"Refresh"}),pr={breadcrumbText:r.i18n.translate("xpack.synthetics.settingsBreadcrumbText",{defaultMessage:"Settings"}),editNoticeTitle:r.i18n.translate("xpack.synthetics.settings.cannotEditTitle",{defaultMessage:"You do not have permission to edit settings."}),editNoticeText:r.i18n.translate("xpack.synthetics.settings.cannotEditText",{defaultMessage:"Your user currently has 'Read' permissions for the Uptime app. Enable a permissions-level of 'All' to edit these settings."}),mustBeNumber:r.i18n.translate("xpack.synthetics.settings.blankNumberField.error",{defaultMessage:"Must be a number."})},gr=r.i18n.translate("xpack.synthetics.settings.blank.error",{defaultMessage:"May not be blank."}),hr=r.i18n.translate("xpack.synthetics.settings.noSpace.error",{defaultMessage:"Index names must not contain space"}),Er=r.i18n.translate("xpack.synthetics.settings.invalid.error",{defaultMessage:"Value must be greater than 0."}),br=r.i18n.translate("xpack.synthetics.settings.invalid.nanError",{defaultMessage:"Value must be an integer."}),fr=({focusInput:e,isDisabled:t})=>{const[a,s]=Object(n.useState)(!1),{services:{application:l,triggersActionsUi:{getAddConnectorFlyout:r}}}=Object(p.useKibana)(),o=!(null==l||!l.capabilities.actions.save),u=Object(c.useDispatch)(),m=Object(n.useMemo)((()=>r({onClose:()=>{u(fe.j.get()),s(!1),e()},featureId:"uptime"})),[]);return i.a.createElement(i.a.Fragment,null,a?m:null,i.a.createElement(d.EuiButtonEmpty,{"data-test-subj":"createConnectorButton",onClick:()=>s(!0),size:"s",isDisabled:t||!o},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.alerts.settings.addConnector",defaultMessage:"Add connector"})))};function yr({errors:e,value:t,isLoading:a,isDisabled:n,onChange:s,connectors:l}){var r,o,u;const{actionTypeRegistry:m}=Object(p.useKibana)().services.triggersActionsUi,{data:g=[]}=Object(c.useSelector)(fe.d);if(null==g||!g.find((e=>(null==l?void 0:l.includes(e.id))&&".email"===e.actionTypeId)))return null;const h=m.get(".email").actionParamsFields;return i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors.defaultEmail",defaultMessage:"Default email"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description.defaultEmail",defaultMessage:"Email settings required for selected email alert connectors."})},i.a.createElement(h,{actionParams:{to:null!==(r=null==t?void 0:t.to)&&void 0!==r?r:[],cc:null!==(o=null==t?void 0:t.cc)&&void 0!==o?o:[],bcc:null!==(u=null==t?void 0:t.bcc)&&void 0!==u?u:[]},errors:null!=e?e:{},editAction:(e,a,n)=>((e,a)=>{s({defaultEmail:{...t,[e]:a}})})(e,a),showEmailSubjectAndMessage:!1,index:1,isLoading:a,isDisabled:n}))}var vr=a(289);const xr=Me.a.span.withConfig({displayName:"ConnectorSpan",componentId:"sc-b5k0g4-0"})([".euiIcon{margin-right:5px;}> img{width:16px;height:20px;}"]),Sr=({onChange:e,loading:t,formFields:a,fieldErrors:s,isDisabled:l})=>{const{services:{triggersActionsUi:{actionTypeRegistry:r}}}=Object(p.useKibana)(),{focusConnectorField:o}=Object(A.e)(),u=Object(A.i)()[1],m=Object(n.useRef)(null),{data:g}=Object(h.useFetcher)((()=>Object(vr.c)()),[]);Yi(),Object(n.useEffect)((()=>{o&&m.current&&!t&&m.current.focus()}),[o,m,t]);const{data:E=[]}=Object(c.useSelector)(fe.d),[b,f]=Object(n.useState)(void 0),y=(null!=E?E:[]).filter((e=>(null!=g?g:[]).find((t=>t.id===e.actionTypeId)))).map((e=>({value:e.id,label:e.name,"data-test-subj":e.name})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertDefaults",defaultMessage:"Alert defaults"}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiDescribedFormGroup,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.alertConnectors",defaultMessage:"Alert Connectors"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors.description",defaultMessage:"Default connectors to be used to send an alert."})},i.a.createElement(Mr,{describedByIds:["defaultConnectors"],error:b,fullWidth:!0,isInvalid:!!b,label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.defaultConnectors",defaultMessage:"Default connectors"}),labelAppend:i.a.createElement(fr,{isDisabled:l,focusInput:Object(n.useCallback)((()=>{m.current&&m.current.focus()}),[])})},i.a.createElement(d.EuiComboBox,{placeholder:ur.inputPlaceHolder,options:y,selectedOptions:y.filter((e=>{var t;return null==a||null===(t=a.defaultConnectors)||void 0===t?void 0:t.includes(e.value)})),inputRef:e=>{m.current=e},onSearchChange:(e,t)=>{f(0===e.length||t?void 0:`"${e}" is not a valid option`)},onBlur:()=>{if(m.current){const{value:e}=m.current;f(0===e.length?void 0:`"${e}" is not a valid option`)}m.current&&!t&&o&&u({focusConnectorField:void 0})},isLoading:t,isDisabled:l,onChange:t=>{e({defaultConnectors:t.map((e=>(null==E?void 0:E.find((t=>t.id===e.value))).id))})},"data-test-subj":"default-connectors-input-"+(t?"loading":"loaded"),renderOption:e=>{var t;const{label:a,value:n}=e,{actionTypeId:s}=null!==(t=null==E?void 0:E.find((e=>e.id===n)))&&void 0!==t?t:{};return i.a.createElement(xr,null,i.a.createElement(d.EuiIcon,{type:r.get(s).iconClass}),i.a.createElement("span",null,a))}}))),i.a.createElement(yr,{value:null==a?void 0:a.defaultEmail,connectors:null==a?void 0:a.defaultConnectors,onChange:e,isLoading:t,isDisabled:l,errors:null==s?void 0:s.invalidEmail}),i.a.createElement(d.EuiSpacer,null))},Mr=Me()(d.EuiFormRow).withConfig({displayName:"RowWrapper",componentId:"sc-b5k0g4-1"})(["&&& > .euiFormRow__labelWrapper{align-items:baseline;}"]),kr=({isFormDisabled:e,isFormDirty:t,isFormValid:a,onApply:n,onCancel:s,errors:l})=>{const{heartbeatIndices:r,invalidEmail:o,expirationThresholdError:c,ageThresholdError:u}=null!=l?l:{},{to:m,cc:p,bcc:g}=null!=o?o:{};return i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Or,null,r||m||p||g||c||u)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{color:"ghost",size:"s",iconType:"cross","data-test-subj":"discardSettingsButton",isDisabled:!t||e,onClick:()=>{s()}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.discardSettingsButtonLabel",defaultMessage:"Cancel"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{size:"s","data-test-subj":"apply-settings-button",onClick:n,color:"primary",isDisabled:!t||!a||e,fill:!0},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.sourceConfiguration.applySettingsButtonLabel",defaultMessage:"Apply changes"}))))},Or=Object(g.euiStyled)(d.EuiText)`
    box-shadow: -4px 0 ${e=>e.theme.eui.euiColorWarning};
    padding-left: 8px;
`,jr=()=>i.a.createElement("div",null,i.a.createElement(x.b,{node:Ir})),wr=e=>i.a.createElement(x.a,{node:Ir},i.a.createElement(kr,e)),Ir=Object(x.c)();var Cr=a(28);const Tr=(e,t)=>{if(!e||0===e.length)return;if(!t||!t.to)return{to:Fr};const a=0===t.to.length?Fr:Lr(t.to),n=Lr(t.cc),i=Lr(t.bcc);return a||n||i?{to:a,cc:n,bcc:i}:void 0},Fr=r.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.requiredEmail",{defaultMessage:"To email is required for email connector"}),Lr=e=>{if(!e)return;const t=e.find((e=>!String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)));return t?r.i18n.translate("xpack.synthetics.sourceConfiguration.alertDefaultForm.invalidEmail",{defaultMessage:"{val} is not a valid email.",values:{val:t}}):void 0},Ar=e=>void 0===e||isNaN(e)?pr.mustBeNumber:e<=0?Er:e%1?br:void 0,Pr=()=>{var e,t;const a=Object(c.useSelector)(B.C);D([{text:pr.breadcrumbText}]);const s=Object(c.useDispatch)();Object(n.useEffect)((()=>{s(Object(Hi.a)())}),[s]);const[l,r]=Object(n.useState)(a.settings?{...a.settings}:null);!a.loadError&&null===l&&a.settings&&r(Object.assign({},{...a.settings}));const{errors:o,isFormDirty:u}=(e=>{const t=Object(c.useSelector)(B.C),a=((e,t)=>{return(null==t?void 0:t.certAgeThreshold)!==(null==e?void 0:e.certAgeThreshold)||(null==t?void 0:t.certExpirationThreshold)!==(null==e?void 0:e.certExpirationThreshold)||(null==t?void 0:t.heartbeatIndices)!==(null==e?void 0:e.heartbeatIndices)||(a=null==t?void 0:t.defaultEmail,n=null==e?void 0:e.defaultEmail,!Object(Cr.isEqual)((null!==(i=null==a?void 0:a.to)&&void 0!==i?i:[]).sort(),(null!==(s=null==n?void 0:n.to)&&void 0!==s?s:[]).sort())||!Object(Cr.isEqual)((null!==(l=null==a?void 0:a.cc)&&void 0!==l?l:[]).sort(),(null!==(r=null==n?void 0:n.cc)&&void 0!==r?r:[]).sort())||!Object(Cr.isEqual)((null!==(o=null==a?void 0:a.bcc)&&void 0!==o?o:[]).sort(),(null!==(c=null==n?void 0:n.bcc)&&void 0!==c?c:[]).sort())||void 0)||JSON.stringify(null==t?void 0:t.defaultConnectors)!==JSON.stringify(null==e?void 0:e.defaultConnectors);var a,n,i,s,l,r,o,c})(e,t.settings),{data:n=[]}=Object(c.useSelector)(fe.d),i=null==n?void 0:n.find((t=>{var a;return(null==e||null===(a=e.defaultConnectors)||void 0===a?void 0:a.includes(t.id))&&".email"===t.actionTypeId}));if(e){const{certAgeThreshold:t,certExpirationThreshold:n,heartbeatIndices:s}=e,l=(null!=s&&s.includes(" ")?hr:"")||(null!=s&&s.match(/^\S+$/)?"":gr),r=Ar(t);return{isFormDirty:a,errors:{heartbeatIndices:l,expirationThresholdError:Ar(n),ageThresholdError:r,invalidEmail:i?Tr(e.defaultConnectors,e.defaultEmail):void 0}}}return{isFormDirty:a,errors:null}})(l),m=!(o&&Object.values(o).find((e=>!!e))),g=Object(n.useCallback)((e=>{l&&r({...l,...e})}),[l]),h=!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.configureSettings)||!1,E=a.loading||!h,b=h?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:pr.editNoticeTitle},pr.editNoticeText),i.a.createElement(d.EuiSpacer,{size:"s"}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},b)),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement("div",{id:"settings-form"},i.a.createElement(d.EuiForm,null,i.a.createElement(or,{loading:a.loading,onChange:g,formFields:l,fieldErrors:o,isDisabled:E}),i.a.createElement(Sr,{loading:a.loading,formFields:l,onChange:g,fieldErrors:o,isDisabled:E}),i.a.createElement(dr,{loading:a.loading,onChange:g,formFields:l,fieldErrors:o,isDisabled:E}))))),i.a.createElement(wr,{onApply:e=>{e.preventDefault(),l&&s(Object(Hi.d)(l))},isFormDirty:u,isFormDisabled:E,isFormValid:m,onCancel:()=>r(a.settings?{...a.settings}:null),errors:o}))},Dr=()=>{const e=Object(u.useHistory)();return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,null,i.a.createElement(d.EuiEmptyPrompt,{iconType:"faceNeutral",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("h3",null,i.a.createElement(v.FormattedMessage,{defaultMessage:"Page not found",id:"xpack.synthetics.emptyStateError.notFoundPage"}))),body:i.a.createElement(d.EuiButton,{href:e.createHref({pathname:"/"})},i.a.createElement(v.FormattedMessage,{defaultMessage:"Back to home",id:"xpack.synthetics.notFountPage.homeLinkText"}))}))))};var Rr=a(62);const Nr=({loading:e,loadingTitle:t,error:a,errorTitle:n,errorBody:s,children:l})=>i.a.createElement(i.a.Fragment,null,e||a?null:l,a&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"xxl"}),i.a.createElement(d.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:i.a.createElement("h2",null,n),body:i.a.createElement("p",null,s)})):null,e?i.a.createElement(d.EuiEmptyPrompt,{color:"subdued",icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,t),"data-test-subj":"uptimeLoader"}):null);var Br=a(32),_r=a(252),zr=a(34),Hr=a(253);const Ur=/^[0-9]*$/g,$r=/[^\:]+:[0-9]{1,5}$/g;function Gr(e){return Object.keys(e).some((e=>!!e&&/[\s]/g.test(e)))}const Wr={[$e.c.NAME]:({[$e.c.NAME]:e})=>!e||"string"!=typeof e,[$e.c.SCHEDULE]:({[$e.c.SCHEDULE]:e})=>{const{number:t,unit:a}=e,n=parseFloat(t);return!n||!a||n<1},[$e.c.TIMEOUT]:({[$e.c.MONITOR_TYPE]:e,[$e.c.TIMEOUT]:t,[$e.c.SCHEDULE]:a})=>{const{number:n,unit:i}=a;return e!==$e.g.BROWSER&&(!t||parseFloat(t)<0||(({scheduleNumber:e,scheduleUnit:t,timeout:a})=>{let n;switch(t){case $e.B.SECONDS:n=parseFloat(e);break;case $e.B.MINUTES:n=60*parseFloat(e);break;default:n=parseFloat(e)}return parseFloat(a)>n})({timeout:t,scheduleNumber:n,scheduleUnit:i}))},[$e.c.LOCATIONS]:({[$e.c.LOCATIONS]:e})=>!Array.isArray(e)||e.length<1||e.some($e.P),[$e.c.NAMESPACE]:({[$e.c.NAMESPACE]:e})=>{const{error:t="",valid:a}=Object(zr.isValidNamespace)(null!=e?e:"");return!a&&t}},qr={[$e.c.RESPONSE_STATUS_CHECK]:({[$e.c.RESPONSE_STATUS_CHECK]:e})=>{const t=e;return!!t.length&&t.some((e=>!`${e}`.match(Ur)))},[$e.c.RESPONSE_HEADERS_CHECK]:({[$e.c.RESPONSE_HEADERS_CHECK]:e})=>Gr(e),[$e.c.REQUEST_HEADERS_CHECK]:({[$e.c.REQUEST_HEADERS_CHECK]:e})=>Gr(e),[$e.c.MAX_REDIRECTS]:({[$e.c.MAX_REDIRECTS]:e})=>!!e&&!`${e}`.match(Ur)||parseFloat(e)<0,[$e.c.URLS]:({[$e.c.URLS]:e})=>!e,...Wr},Kr={[$e.c.HOSTS]:({[$e.c.HOSTS]:e})=>!e||!`${e}`.match($r),...Wr},Vr={[$e.c.HOSTS]:({[$e.c.HOSTS]:e})=>!e,[$e.c.WAIT]:({[$e.c.WAIT]:e})=>!!e&&!Ur.test(`${e}`)&&parseFloat(e)<0,...Wr},Jr=(e,t)=>{if(void 0===e||""===e)return!1;const a=parseFloat(e);return isNaN(a)||(t?a<0:a<=0)},Yr={...Wr,[$e.c.SOURCE_ZIP_URL]:({[$e.c.SOURCE_ZIP_URL]:e,[$e.c.SOURCE_INLINE]:t})=>!e&&!t,[$e.c.SOURCE_INLINE]:({[$e.c.SOURCE_ZIP_URL]:e,[$e.c.SOURCE_INLINE]:t})=>!e&&!t,[$e.c.DOWNLOAD_SPEED]:({[$e.c.DOWNLOAD_SPEED]:e})=>Jr(e),[$e.c.UPLOAD_SPEED]:({[$e.c.UPLOAD_SPEED]:e})=>Jr(e),[$e.c.LATENCY]:({[$e.c.LATENCY]:e})=>Jr(e,!0),[$e.c.PARAMS]:({[$e.c.PARAMS]:e})=>Object(Hr.b)(e)},Zr={[$e.g.HTTP]:qr,[$e.g.TCP]:Kr,[$e.g.ICMP]:Vr,[$e.g.BROWSER]:Yr};var Xr=a(254),Qr=a(73);const eo=r.i18n.translate("xpack.synthetics.monitorList.statusColumnLabel",{defaultMessage:"Status"}),to=r.i18n.translate("xpack.synthetics.monitorList.nameColumnLabel",{defaultMessage:"Name"}),ao=r.i18n.translate("xpack.synthetics.monitorList.monitorHistoryColumnLabel",{defaultMessage:"Downtime history"}),no=r.i18n.translate("xpack.synthetics.monitorList.tlsColumnLabel",{defaultMessage:"TLS Certificate"}),io=e=>r.i18n.translate("xpack.synthetics.monitorList.expandDrawerButton.ariaLabel",{defaultMessage:"Expand row for monitor with ID {id}",description:"The user can click a button on this table and expand further details.",values:{id:e}}),so=r.i18n.translate("xpack.synthetics.monitorList.noItemForSelectedFiltersMessage",{defaultMessage:"No monitors found for selected filter criteria",description:"This message is show if there are no monitors in the table and some filter or search criteria exists"}),lo=r.i18n.translate("xpack.synthetics.monitorList.loading",{defaultMessage:"Loading...",description:"Shown when the monitor list is waiting for a server response"}),ro=r.i18n.translate("xpack.synthetics.monitorList.noItemMessage",{defaultMessage:"No uptime monitors found",description:"This message is shown if the monitors table is rendered but has no items."}),oo=(r.i18n.translate("xpack.synthetics.monitorList.anomalyColumn.label",{defaultMessage:"Response Anomaly Score"}),r.i18n.translate("xpack.synthetics.monitorList.statusAlert.label",{defaultMessage:"Status alert"})),co=r.i18n.translate("xpack.synthetics.monitorList.testNow.label",{defaultMessage:"Test now"}),uo=r.i18n.translate("xpack.synthetics.monitorList.testNow.available",{defaultMessage:"Test now is only available for monitors added via Monitor Management."}),mo=r.i18n.translate("xpack.synthetics.monitorList.testNow.scheduled",{defaultMessage:"Test is already scheduled"}),po=r.i18n.translate("xpack.synthetics.monitorList.testNow.available.private",{defaultMessage:"You can't currently test monitors running on private locations on demand."}),go=r.i18n.translate("xpack.synthetics.monitorList.testNow.AriaLabel",{defaultMessage:"Click to run test now"}),ho=r.i18n.translate("xpack.synthetics.monitorList.testNow.label",{defaultMessage:"Test now"}),Eo=({monitor:e,isValid:t,onSave:a,onTestNow:s,testRun:l,isTestRunInProgress:r})=>{var m,p,g,b;const{monitorId:f}=Object(u.useParams)(),{basePath:y}=Object(n.useContext)(E.c),{locations:v}=Object(c.useSelector)(B.v),[x,S]=Object(n.useState)(!1),[M,k]=Object(n.useState)(!1),[O,j]=Object(n.useState)(!1),[w,I]=Object(n.useState)(void 0),C=Object(n.useRef)([0,0]),T=e[$e.c.MONITOR_SOURCE_TYPE]===$e.F.PROJECT,F=null===(m=e.locations)||void 0===m?void 0:m.some((e=>e.isServiceManaged)),L=!v.some((e=>e.isServiceManaged))||(null!==(p=null===(g=e.locations)||void 0===g?void 0:g.length)&&void 0!==p?p:0)>0&&!F,{data:A,status:P}=Object(h.useFetcher)((()=>{if(M&&t)return Object(Qr.v)({monitor:e,id:f})}),[e,f,t,M]),D=A&&"attributes"in A&&(null===(b=A.attributes.errors)||void 0===b?void 0:b.length)>0,R=P===h.FETCH_STATUS.LOADING,N=Object(n.useCallback)((()=>{a&&a(),k(!0),S(!0)}),[a]);return Object(n.useEffect)((()=>{if(M)if(t)if(P!==h.FETCH_STATUS.FAILURE&&P!==h.FETCH_STATUS.SUCCESS||k(!1),P===h.FETCH_STATUS.FAILURE)pt.a.toasts.addDanger({title:jo,toastLifeTimeMs:3e3});else if(P!==h.FETCH_STATUS.SUCCESS||D||R){if(D&&!R){var e;Object(Xr.a)(null!==(e=null==A?void 0:A.attributes.errors)&&void 0!==e?e:[],v,pt.a.toasts),j(!0)}}else pt.a.toasts.addSuccess({title:f?Oo:ko,toastLifeTimeMs:3e3}),j(!0);else k(!1)}),[A,P,M,t,f,D,v,R]),O?i.a.createElement(u.Redirect,{to:o.v+"/all"}):i.a.createElement(d.EuiFlexGroup,{gutterSize:"s",justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{color:"ghost",size:"s",href:`${y}/app/uptime/${o.v}/all`},fo)),T?null:i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"flexEnd",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(bo,null,!t&&x&&Mo)),s&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiOutsideClickDetector,{onOutsideClick:()=>{I(!1)}},i.a.createElement(d.EuiPopover,{repositionOnScroll:!0,ownFocus:!1,initialFocus:"",button:i.a.createElement(Io,{fill:!0,size:"s",color:"success",iconType:"play",disabled:!t||r||!F,"data-test-subj":"monitorTestNowRunBtn",onClick:()=>s(),onMouseOver:()=>{clearTimeout(C.current[1]),0===C.current[0]&&(C.current[0]=setTimeout((()=>{clearTimeout(C.current[1]),I(!0)}),250))},onMouseOut:()=>{clearTimeout(C.current[1]),C.current[1]=setTimeout((()=>{clearTimeout(C.current[0]),I(!1),C.current=[0,0]}),100)}},l?So:xo),isOpen:w},i.a.createElement(d.EuiText,{style:{width:260,outline:"none"}},i.a.createElement("p",null,r?mo:L||t&&!F?po:wo))))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{color:"primary",fill:!0,size:"s",iconType:"check",onClick:N,isLoading:M,disabled:x&&!t},f?vo:yo)))))},bo=Object(g.euiStyled)(d.EuiText)`
    box-shadow: -4px 0 ${e=>e.theme.eui.euiColorWarning};
    padding-left: 8px;
`,fo=r.i18n.translate("xpack.synthetics.monitorManagement.discardLabel",{defaultMessage:"Cancel"}),yo=r.i18n.translate("xpack.synthetics.monitorManagement.saveMonitorLabel",{defaultMessage:"Save monitor"}),vo=r.i18n.translate("xpack.synthetics.monitorManagement.updateMonitorLabel",{defaultMessage:"Update monitor"}),xo=r.i18n.translate("xpack.synthetics.monitorManagement.runTest",{defaultMessage:"Run test"}),So=r.i18n.translate("xpack.synthetics.monitorManagement.reRunTest",{defaultMessage:"Re-run test"}),Mo=r.i18n.translate("xpack.synthetics.monitorManagement.validationError",{defaultMessage:"Your monitor has errors. Please fix them before saving."}),ko=r.i18n.translate("xpack.synthetics.monitorManagement.monitorAddedSuccessMessage",{defaultMessage:"Monitor added successfully."}),Oo=r.i18n.translate("xpack.synthetics.monitorManagement.monitorEditedSuccessMessage",{defaultMessage:"Monitor updated successfully."}),jo=r.i18n.translate("xpack.synthetics.monitorManagement.monitorFailureMessage",{defaultMessage:"Monitor was unable to be saved. Please try again later."}),wo=r.i18n.translate("xpack.synthetics.testRun.description",{defaultMessage:"Test your monitor and verify the results before saving"});var Io=Me()(d.EuiButton).withConfig({displayName:"_StyledEuiButton",componentId:"sc-1tejvei-0"})({width:"100%"});const Co=e=>i.a.createElement(x.a,{node:S},i.a.createElement(Eo,e));var To=a(285),Fo=a(257);const Lo=({selectedLocations:e,setLocations:t,isInvalid:a,onBlur:s,readOnly:l=!1})=>{var r;const[m,g]=Object(n.useState)(null),[h,E]=Object(n.useState)({}),{locations:b}=Object(c.useSelector)(B.v),f=Object(u.useRouteMatch)(o.s),y=null!=m?m:a?Ao:null,v=Object(p.useKibana)().services,x=!(null==v||null===(r=v.fleet)||void 0===r||!r.authz.integrations.writeIntegrationPolicies);return Object(n.useEffect)((()=>{const t=e.reduce(((e,t)=>(e[t.id]=!0,e)),{});E(t)}),[e]),i.a.createElement(d.EuiFormRow,{label:Po,error:y,isInvalid:null!==y},i.a.createElement(d.EuiCheckboxGroup,{options:b.map((e=>{let t=e.status!==$e.m.GA?i.a.createElement(d.EuiBadge,{color:"warning"},Do):null;e.isServiceManaged||(t=i.a.createElement(d.EuiBadge,{color:"primary"},Ro));const a=e.isInvalid?i.a.createElement(d.EuiBadge,{color:"danger"},No):null,n=!e.isServiceManaged&&(Boolean(e.isInvalid)||!x),s=n&&!x?i.a.createElement(d.EuiIconTip,{content:Bo,position:"right"}):null,l=i.a.createElement(d.EuiText,{size:"s","data-test-subj":`syntheticsServiceLocationText--${e.id}`},e.label," ",t," ",a,s);return{...e,label:l,disabled:n&&!(null!=f&&f.isExact),"data-test-subj":`syntheticsServiceLocation--${e.id}`}})),idToSelectedMap:h,onChange:e=>(e=>{const a=!h[e],n=b.find((t=>t.id===e));t(a?e=>n?[...e,Object(Fo.a)(n)]:e:t=>[...t].filter((t=>t.id!==e))),g(null)})(e),onBlur:()=>null==s?void 0:s(),disabled:l}))},Ao=r.i18n.translate("xpack.synthetics.monitorManagement.serviceLocationsValidationError",{defaultMessage:"At least one service location must be specified"}),Po=r.i18n.translate("xpack.synthetics.monitorManagement.monitorLocationsLabel",{defaultMessage:"Monitor locations"}),Do=r.i18n.translate("xpack.synthetics.monitorManagement.techPreviewLabel",{defaultMessage:"Tech Preview"}),Ro=r.i18n.translate("xpack.synthetics.monitorManagement.privateLabel",{defaultMessage:"Private"}),No=r.i18n.translate("xpack.synthetics.monitorManagement.invalidLabel",{defaultMessage:"Invalid"}),Bo=r.i18n.translate("xpack.synthetics.monitorManagement.cannotSaveIntegrationUptime",{defaultMessage:"You are not authorized to update integrations. Integrations write permissions are required."});var _o=a(106);const zo=({validate:e,onFieldBlur:t,readOnly:a})=>{var s,l;const{name:r,setName:o,locations:c=[],setLocations:m}=Object(Rr.A)(),g=!!e&&!(null===(s=e[$e.c.NAME])||void 0===s||!s.call(e,{[$e.c.NAME]:r})),E=!!e&&!(null===(l=e[$e.c.LOCATIONS])||void 0===l||!l.call(e,{[$e.c.LOCATIONS]:c})),[b,f]=Object(n.useState)(r),{validName:y,nameAlreadyExists:x}=(({search:e=""})=>{const[t,a]=Object(n.useState)([]),{monitorId:i}=Object(u.useParams)(),{savedObjects:s}=Object(p.useKibana)().services,{data:l}=Object(h.useFetcher)((()=>{const e={monitorNames:{terms:{field:`${_o.b}.attributes.name.keyword`,size:1e4}}};return null==s?void 0:s.client.find({type:_o.b,perPage:0,aggs:e})}),[]);Object(n.useEffect)((()=>{if(null!=l&&l.aggregations){var t;const n=null===(t=l.aggregations)||void 0===t?void 0:t.monitorNames.buckets.map((({key:e})=>e.toLowerCase()));i&&n.includes(e.toLowerCase())?a(n.filter((t=>t!==e.toLowerCase()))):a(n)}}),[l,i]);const r=Boolean(e&&t&&t.length>0&&(null==t?void 0:t.includes(e.trim().toLowerCase())));return{nameAlreadyExists:r,validName:r?"":e}})({search:b});return Object(n.useEffect)((()=>{o(y)}),[o,y]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorNameFieldLabel",defaultMessage:"Monitor name"}),fullWidth:!1,isInvalid:g||x,error:x?Ho:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorNameFieldError",defaultMessage:"Monitor name is required"})},i.a.createElement(d.EuiFieldText,{autoFocus:!0,defaultValue:r,required:!0,isInvalid:g||x,fullWidth:!0,name:"name",onChange:e=>f(e.target.value),onBlur:()=>null==t?void 0:t($e.c.NAME),"data-test-subj":"monitorManagementMonitorName",readOnly:a})),i.a.createElement(Lo,{setLocations:m,selectedLocations:c,isInvalid:E,onBlur:()=>null==t?void 0:t($e.c.LOCATIONS),readOnly:a}))},Ho=r.i18n.translate("xpack.synthetics.monitorManagement.duplicateNameError",{defaultMessage:"Monitor name already exists."});var Uo=a(105);const $o=Object(n.memo)((({validate:e,minColumnWidth:t,onFieldBlur:a})=>{var n,s,l,r;const{namespace:o,setNamespace:c}=Object(Rr.A)(),u=null===(n=e[$e.c.NAMESPACE])||void 0===n?void 0:n.call(e,{[$e.c.NAMESPACE]:o}),m=!!u,{services:g}=Object(p.useKibana)();return i.a.createElement(Uo.a,{minColumnWidth:t,title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.dataStreamConfiguration.title",defaultMessage:"Data stream settings"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.dataStreamConfiguration.description",defaultMessage:"Configure additional Data Stream options."}),"data-test-subj":"monitorAdvancedFieldsSection"},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFormRow,{isInvalid:m,error:u,label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.monitorNamespaceFieldLabel",defaultMessage:"Namespace"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.namespaceHelpLabel",defaultMessage:"Change the default namespace. This setting changes the name of the monitor's data stream. {learnMore}.",values:{learnMore:i.a.createElement(d.EuiLink,{target:"_blank",href:null===(s=g.docLinks)||void 0===s||null===(l=s.links)||void 0===l||null===(r=l.fleet)||void 0===r?void 0:r.datastreamsNamingScheme,external:!0},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorAdvancedOptions.namespaceHelpLearnMoreLabel",defaultMessage:"Learn More"}))}})},i.a.createElement(d.EuiFieldText,{defaultValue:o,onChange:e=>c(e.target.value),required:!0,isInvalid:m,fullWidth:!0,name:"namespace",onBlur:()=>null==a?void 0:a($e.c.NAMESPACE)})))}));var Go=a(78),Wo=a(255),qo=a(142),Ko=a(92),Vo=a(161);const Jo=()=>{},Yo=({minColumnWidth:e,extraFields:t,fields:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.readOnly.callout.title",defaultMessage:"This configuration is read-only"}),iconType:"document"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.readOnly.callout.content",defaultMessage:"This monitor was added from an external project. Configuration is read only."}))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(Uo.a,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSectionTitle",defaultMessage:"Monitor settings"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSectionDescription",defaultMessage:"Configure your monitor with the following options."}),"data-test-subj":"monitorSettingsSection",minColumnWidth:e},i.a.createElement(zo,{readOnly:!0}),i.a.createElement(Wo.a,{fields:a,onChange:Jo,onBlur:Jo,readOnly:!0}),i.a.createElement(d.EuiFormRow,{id:"syntheticsFleetScheduleField--number syntheticsFleetScheduleField--unit",label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.monitorInterval",defaultMessage:"Frequency"}),error:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.monitorInterval.error",defaultMessage:"Monitor frequency is required"})},i.a.createElement(qo.a,{onBlur:Jo,onChange:Jo,number:a[Go.b.SCHEDULE].number,unit:a[Go.b.SCHEDULE].unit,readOnly:!0})),i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.tags.label",defaultMessage:"Tags"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.monitorIntegrationSettingsSection.tags.helpText",defaultMessage:"A list of tags that will be sent with the monitor event. Press enter to add a new tag. Displayed in Uptime and enables searching by tag."}),labelAppend:i.a.createElement(Ko.a,null)},i.a.createElement(Vo.a,{selectedOptions:a[Go.b.TAGS],onChange:Jo,onBlur:Jo,"data-test-subj":"syntheticsTags",readOnly:!0})),t),i.a.createElement(d.EuiSpacer,null)),Zo=()=>{},Xo=({minColumnWidth:e})=>{const{fields:t}=Object(Rr.C)(),a=i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.hostFieldLabel",defaultMessage:"Host"}),fullWidth:!1},i.a.createElement(d.EuiFieldText,{defaultValue:t[Go.b.HOSTS],fullWidth:!0,name:"host",onChange:Zo,onBlur:Zo,"data-test-subj":"monitorManagementMonitorUrl",readOnly:!0}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yo,{minColumnWidth:e,extraFields:a,fields:t}))},Qo=()=>{},ec=({minColumnWidth:e})=>{const{fields:t}=Object(Rr.z)(),a=i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.hostFieldLabel",defaultMessage:"Host"}),fullWidth:!1},i.a.createElement(d.EuiFieldText,{defaultValue:t[Go.b.HOSTS],fullWidth:!0,name:"host",onChange:Qo,onBlur:Qo,"data-test-subj":"monitorManagementMonitorHost",readOnly:!0}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yo,{minColumnWidth:e,extraFields:a,fields:t}))},tc=()=>{},ac=({minColumnWidth:e})=>{const{fields:t}=Object(Rr.y)(),a=i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.urlFieldLabel",defaultMessage:"Url"}),fullWidth:!1},i.a.createElement(d.EuiFieldText,{defaultValue:t[Go.b.URLS],fullWidth:!0,name:"url",onChange:tc,onBlur:tc,"data-test-subj":"monitorManagementMonitorUrl",readOnly:!0}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(Yo,{minColumnWidth:e,extraFields:a,fields:t}))};var nc=a(256),ic=a(204);const sc=()=>{},lc=({minColumnWidth:e})=>{const{fields:t}=Object(Rr.v)(),{fields:a}=Object(Rr.w)(),n=i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.params.label",defaultMessage:"Parameters"}),labelAppend:i.a.createElement(Ko.a,null),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.createPackagePolicy.stepConfigure.monitorIntegrationSettingsSection.params.helpText",defaultMessage:"Use JSON to define parameters that can be referenced in your script with {code}",values:{code:i.a.createElement(d.EuiCode,null,"params.value")}})},i.a.createElement(ic.a,{ariaLabel:r.i18n.translate("xpack.synthetics.createPackagePolicy.stepConfigure.requestBody.codeEditor.json.ariaLabel",{defaultMessage:"JSON code editor"}),id:"jsonParamsEditor",languageId:$e.o.JSON,value:a[$e.c.PARAMS],readOnly:!0,"data-test-subj":"syntheticsBrowserParams"}));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,null),i.a.createElement(Yo,{extraFields:n,minColumnWidth:e,fields:a}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiAccordion,{id:"syntheticsIntegrationBrowserAdvancedOptions",buttonContent:"Advanced Browser options","data-test-subj":"syntheticsBrowserAdvancedFieldsAccordion"},i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Uo.a,{title:i.a.createElement("h4",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.title",defaultMessage:"Synthetics agent options"})),description:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.description",defaultMessage:"Provide fine-tuned configuration for the synthetics agent."}),minColumnWidth:e},i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFormRow,{label:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.screenshots.label",defaultMessage:"Screenshot options"}),helpText:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.browser.project.browserAdvancedSettings.screenshots.helpText",defaultMessage:"Set this option to manage the screenshots captured by the synthetics agent."})},i.a.createElement(d.EuiFieldText,{value:t[$e.c.SCREENSHOTS],onChange:sc,"data-test-subj":"syntheticsBrowserScreenshots",readOnly:!0}))),i.a.createElement(nc.a,{minColumnWidth:e,readOnly:!0})))},rc="360px",oc=()=>{const{monitorType:e}=Object(Rr.A)();switch(e){case"browser":return i.a.createElement(lc,{minColumnWidth:rc});case"http":return i.a.createElement(ac,{minColumnWidth:rc});case"tcp":return i.a.createElement(Xo,{minColumnWidth:rc});case"icmp":return i.a.createElement(ec,{minColumnWidth:rc})}return i.a.createElement(lc,{minColumnWidth:rc})},cc="360px",uc=({isFormSubmitted:e=!1})=>{const{monitorType:t,sourceType:a}=Object(Rr.A)(),[s,l]=Object(n.useState)({}),r=Object(n.useMemo)((()=>{const a={...Zr[t]};return e||Object.keys(a).map((e=>{s[e]||(a[e]=void 0)})),a}),[e,t,s]),o=e=>{l((t=>({...t,[e]:!0})))};return i.a.createElement(d.EuiForm,{id:"syntheticsServiceCreateMonitorForm",component:"form"},a===$e.F.PROJECT?i.a.createElement(oc,null):i.a.createElement(To.a,{minColumnWidth:cc,validate:r,dataStreams:[$e.g.HTTP,$e.g.TCP,$e.g.ICMP,$e.g.BROWSER],appendAdvancedFields:i.a.createElement($o,{validate:r,minColumnWidth:cc,onFieldBlur:o}),onFieldBlur:o},i.a.createElement(zo,{validate:r,onFieldBlur:o})))},dc=({monitorId:e,isMonitorSaved:t,expectPings:a,onDone:i})=>{const{summariesLoading:s,expectedSummariesLoaded:l,stepLoadingInProgress:r,checkGroupResults:o}=ha({configId:e,expectSummaryDocs:a});return Object(n.useEffect)((()=>{l&&i()}),[i,l]),n.createElement(n.Fragment,null,o.map((e=>{var a,i,c,u;const{checkGroupId:m,journeyStarted:p,summaryDoc:g,stepsLoading:h,steps:E,completedSteps:b}=e,f=!s&&p&&g&&h,y=g&&!s&&!r&&0===E.length;return n.createElement(mc,{key:"accordion-"+m,id:"accordion-"+m,element:"fieldset",className:"euiAccordionForm",buttonClassName:"euiAccordionForm__button",buttonContent:pc(e),paddingSize:"s","data-test-subj":"expandResults",initialIsOpen:1===o.length},f&&n.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},n.createElement(d.EuiFlexItem,{grow:!1},n.createElement(d.EuiText,null,hc)),n.createElement(d.EuiFlexItem,null,n.createElement(d.EuiLoadingSpinner,{size:"s"}))),y&&n.createElement(d.EuiText,{color:"danger"},null!==(a=null==g||null===(i=g.error)||void 0===i?void 0:i.message)&&void 0!==a?a:gc),y&&(null==g||null===(c=g.error)||void 0===c||null===(u=c.message)||void 0===u?void 0:u.includes("journey did not finish executing"))&&n.createElement(xa,{checkGroup:g.monitor.check_group,hideTitle:!0}),b>0&&n.createElement(ga,{data:E,compactView:!0,showStepDurationTrend:t,loading:Boolean(r),allStepsLoaded:l,error:void 0}))})))},mc=Me()(d.EuiAccordion).withConfig({displayName:"AccordionWrapper",componentId:"sc-16kfbkc-0"})([".euiAccordion__buttonContent{width:100%;}"]);function pc({journeyDoc:e,summaryDoc:t,checkGroupId:a,journeyStarted:i,completedSteps:s}){var l,o;return n.createElement("div",null,n.createElement(kt,{title:null==e||null===(l=e.observer)||void 0===l||null===(o=l.geo)||void 0===o?void 0:o.name,summaryDocs:t?[t]:[],checkGroupId:a,journeyStarted:i,isCompleted:Boolean(t)}),n.createElement(d.EuiText,{size:"s"},n.createElement("p",null,n.createElement(d.EuiText,{color:"subdued"},r.i18n.translate("xpack.synthetics.monitorManagement.stepCompleted",{defaultMessage:"{stepCount, number} {stepCount, plural, one {step} other {steps}}  completed",values:{stepCount:null!=s?s:0}})))))}const gc=r.i18n.translate("xpack.synthetics.monitorManagement.failedRun",{defaultMessage:"Failed to run steps"}),hc=r.i18n.translate("xpack.synthetics.monitorManagement.loadingSteps",{defaultMessage:"Loading steps..."});function Ec({monitorId:e,expectPings:t,onDone:a}){const[s,l]=Object(n.useState)([]),{summaryDocs:r,loading:o}=St({configId:e,expectSummaryDocs:t});return Object(n.useEffect)((()=>{r&&(l((e=>{const t=e.reduce(((e,t)=>({...e,[t.docId]:t})),{});return r.map((e=>{var a;return{...e,...null!==(a=t[e.docId])&&void 0!==a?a:{}}}))})),r.length>=t&&a())}),[t,r,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement(kt,{summaryDocs:s,isCompleted:Boolean(r&&r.length>=t)}),r&&i.a.createElement(en,{pings:s,loading:o}))}const bc=({monitorId:e,monitor:t,isMonitorSaved:a,expectPings:i,onDone:s})=>"browser"===t.type?n.createElement(dc,{monitorId:e,expectPings:i,isMonitorSaved:a,onDone:s}):n.createElement(Ec,{monitorId:e,expectPings:i,onDone:s});function fc({testRun:e,isMonitorSaved:t,onDone:a}){var s,l;const[r,o]=Object(n.useState)(null),{data:c,loading:u}=Object(h.useFetcher)((()=>e?Object(Qr.t)({monitor:e.monitor,id:e.id}).then((e=>(o(null),e))).catch((e=>o(e))):new Promise((e=>e(null)))),[e]),m=null==c?void 0:c.errors,{hasBlockingError:p,blockingErrorMessage:g,expectPings:E,errorMessages:b}=gt({testRunId:null!==(s=null==e?void 0:e.id)&&void 0!==s?s:"",serviceError:r,errors:null!=m?m:[],locations:null!==(l=null==e?void 0:e.monitor.locations)&&void 0!==l?l:[]});return Object(n.useEffect)((()=>{b.forEach((({name:e,message:t,title:a})=>{pt.a.toasts.addError({name:e,message:t},{title:a})}))}),[b]),Object(n.useEffect)((()=>{u||e&&!p||a()}),[e,p,u,a]),e?i.a.createElement(d.EuiPanel,{color:"subdued",hasBorder:!0},u&&i.a.createElement(d.EuiCallOut,{color:"primary"},yc," ",i.a.createElement(d.EuiLoadingSpinner,null)),p&&!u&&i.a.createElement(d.EuiCallOut,{title:g,color:"danger",iconType:"alert"})||null,e&&!p&&!u&&i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{key:e.id},i.a.createElement(bc,{monitorId:e.id,monitor:e.monitor,isMonitorSaved:t,expectPings:E,onDone:a}))),i.a.createElement(d.EuiSpacer,{size:"xs"})):null}const yc=r.i18n.translate("xpack.synthetics.testRun.pushing.description",{defaultMessage:"Pushing the monitor to service..."});var vc=a(68);const xc=({isEdit:e=!1})=>{const{monitorType:t}=Object(Rr.A)(),a=Object(_r.a)(),{isValid:s,config:l}=(({monitorType:e,defaultConfig:t,config:a,validate:i})=>{const[s,l]=Object(n.useState)(!1),r=Object(n.useRef)(t);return Object(n.useEffect)((()=>{const t=Object.keys(a),n=Object.keys(i[e]),s=t.some((e=>a[e]!==r.current[e])),o=!!a.name&&!n.find((t=>{var n,s;return null===(n=i[e])||void 0===n||null===(s=n[t])||void 0===s?void 0:s.call(n,a)}));s&&(r.current=a,l(o))}),[a,r,i,e]),{config:a,isValid:s}})({monitorType:t,validate:Zr,config:a[t],defaultConfig:vc.d[t]}),[r,o]=Object(n.useState)(!1),[c,u]=Object(n.useState)(),[m,p]=Object(n.useState)(!1),[g,h]=Object(n.useState)(!1),E=Object(n.useCallback)((()=>{p(!1)}),[p]),b=Object(n.useCallback)((()=>{E(),h(!1)}),[E,h]),f=g&&l&&i.a.createElement(d.EuiFlyout,{type:"push",size:"m",paddingSize:"m",maxWidth:"44%","aria-labelledby":Sc,onClose:b},i.a.createElement(d.EuiFlyoutHeader,null,i.a.createElement(d.EuiSpacer,{size:"xl"})),i.a.createElement(d.EuiFlyoutBody,null,i.a.createElement(fc,{testRun:c,isMonitorSaved:e,onDone:E})),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiButtonEmpty,{iconType:"cross",onClick:b,flush:"left"},Mc)));return i.a.createElement(i.a.Fragment,null,i.a.createElement(uc,{isFormSubmitted:r}),f,i.a.createElement(Co,{monitor:a[t],isValid:s,onTestNow:()=>{l&&(u({id:Object(Br.v4)(),monitor:l}),p(!0),h(!0))},testRun:c,isTestRunInProgress:m,onSave:()=>{o(!0)}}))},Sc=r.i18n.translate("xpack.synthetics.monitorManagement.testResult",{defaultMessage:"Test result"}),Mc=r.i18n.translate("xpack.synthetics.monitorManagement.closeButtonLabel",{defaultMessage:"Close"});function kc(){const e=Object(c.useDispatch)(),{error:{serviceLocations:t},loading:{serviceLocations:a},locations:i,throttling:s,locationsLoaded:l}=Object(c.useSelector)(B.v);return Object(n.useEffect)((()=>{l||e(Object(b.E)())}),[e,i,l]),{throttling:s,locations:i,error:t,loading:a}}const Oc=({isAddMonitor:e,isEditMonitor:t,monitorId:a}={})=>{var n,i;const s=null!==(n=null===(i=Object(p.useKibana)().services.application)||void 0===i?void 0:i.getUrlForApp(P.a.ID))&&void 0!==n?n:"";D([{text:jc,href:e||t?`${s}/${o.v}/all`:void 0},...e?[{text:wc}]:[],...t?[{text:Ic}]:[]])},jc=r.i18n.translate("xpack.synthetics.monitorManagement.monitorManagementCrumb",{defaultMessage:"Monitor Management"}),wc=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorCrumb",{defaultMessage:"Add monitor"}),Ic=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorCrumb",{defaultMessage:"Edit monitor"});var Cc=a(99);const Tc=()=>{Object(h.useTrackPageview)({app:"uptime",path:"add-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"add-monitor",delay:15e3});const{error:e,loading:t,locations:a,throttling:s}=kc(),l=Object(c.useDispatch)();return Oc({isAddMonitor:!0}),Object(n.useEffect)((()=>{l(Cc.c.get())}),[l]),i.a.createElement(Nr,{error:Boolean(e)||a&&0===a.length,loading:t,loadingTitle:Fc,errorTitle:Lc,errorBody:Ac},i.a.createElement(Rr.i,{policyDefaultValues:{throttling:s,runsOnService:!0,isZipUrlSourceEnabled:!1,allowedScheduleUnits:[$e.B.MINUTES]}},i.a.createElement(xc,{isEdit:!1})))},Fc=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLoadingLabel",{defaultMessage:"Loading Monitor Management"}),Lc=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLoadingError",{defaultMessage:"Error loading Monitor Management"}),Ac=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorServiceLocationsLoadingError",{defaultMessage:"Service locations were not able to be loaded. Please try again later."}),Pc=({monitor:e,throttling:t})=>{Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor",delay:15e3});const{enableTLS:a,enableZipUrlTLS:s,fullConfig:l,monitorTypeConfig:r,monitorType:o,tlsConfig:c}=Object(n.useMemo)((()=>{let t=!1,a=!1;return(()=>{var n,i;const s=e[$e.c.MONITOR_TYPE],l={[$e.c.TLS_CERTIFICATE_AUTHORITIES]:e[$e.c.TLS_CERTIFICATE_AUTHORITIES],[$e.c.TLS_CERTIFICATE]:e[$e.c.TLS_CERTIFICATE],[$e.c.TLS_KEY]:e[$e.c.TLS_KEY],[$e.c.TLS_KEY_PASSPHRASE]:e[$e.c.TLS_KEY_PASSPHRASE],[$e.c.TLS_VERIFICATION_MODE]:e[$e.c.TLS_VERIFICATION_MODE],[$e.c.TLS_VERSION]:e[$e.c.TLS_VERSION]};return t=Boolean(null===(n=e[$e.c.METADATA])||void 0===n?void 0:n.is_tls_enabled),a=Boolean(null===(i=e[$e.c.METADATA])||void 0===i?void 0:i.is_zip_url_tls_enabled),{fullConfig:{[s]:e},monitorTypeConfig:e,tlsConfig:l,monitorType:s,enableTLS:t,enableZipUrlTLS:a}})()}),[e]);return i.a.createElement(Rr.i,{policyDefaultValues:{throttling:t,defaultIsTLSEnabled:a,defaultIsZipUrlTLSEnabled:s,defaultMonitorType:o,defaultName:(null==r?void 0:r[$e.c.NAME])||"",defaultNamespace:(null==r?void 0:r[$e.c.NAMESPACE])||vc.h,defaultLocations:r[$e.c.LOCATIONS],isEditable:!0,isZipUrlSourceEnabled:!1,allowedScheduleUnits:[$e.B.MINUTES],runsOnService:!0,sourceType:e[$e.c.MONITOR_SOURCE_TYPE]||$e.F.UI},httpDefaultValues:l[$e.g.HTTP],tcpDefaultValues:l[$e.g.TCP],icmpDefaultValues:l[$e.g.ICMP],browserDefaultValues:l[$e.g.BROWSER],tlsDefaultValues:c},i.a.createElement(xc,{isEdit:!0}))},Dc=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorLoadingLabel",{defaultMessage:"Loading monitor"}),Rc=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError",{defaultMessage:"Error loading Monitor Management"}),Nc=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorError",{defaultMessage:"Service locations were not able to be loaded. Please try again later."}),Bc=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorErrorBody",{defaultMessage:"Monitor configuration was not able to be loaded. Please try again later."}),_c=()=>{Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor"}),Object(h.useTrackPageview)({app:"uptime",path:"edit-monitor",delay:15e3}),Oc({isEditMonitor:!0});const{monitorId:e}=Object(u.useParams)(),{data:t,status:a}=Object(h.useFetcher)((()=>Object(Qr.s)({id:e})),[e]),n=null==t?void 0:t.attributes,{error:s,loading:l,throttling:r}=kc();return i.a.createElement(Nr,{loading:a===h.FETCH_STATUS.LOADING||l,loadingTitle:Dc,error:a===h.FETCH_STATUS.FAILURE||Boolean(s),errorTitle:Rc,errorBody:s?Nc:Bc},n&&i.a.createElement(Pc,{monitor:n,throttling:r}))};function zc(){const e=Object(c.useDispatch)(),{loading:{enablement:t},error:{enablement:a},enablement:i,list:{total:s}}=Object(c.useSelector)(B.v);return Object(n.useEffect)((()=>{i||e(Object(b.H)())}),[e,i]),{enablement:{areApiKeysEnabled:null==i?void 0:i.areApiKeysEnabled,canManageApiKeys:null==i?void 0:i.canManageApiKeys,canEnable:null==i?void 0:i.canEnable,isEnabled:null==i?void 0:i.isEnabled},invalidApiKeyError:!!i&&!Boolean(null==i?void 0:i.isValidApiKey),error:a,loading:t,totalMonitors:s,enableSynthetics:Object(n.useCallback)((()=>e(Object(b.i)())),[e]),disableSynthetics:Object(n.useCallback)((()=>e(Object(b.f)())),[e])}}const Hc=()=>{const{enablement:e,enableSynthetics:t,invalidApiKeyError:a}=zc();return a&&e.isEnabled?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:$c,color:"warning",iconType:"help"},i.a.createElement("p",null,Wc),e.canEnable?i.a.createElement(d.EuiButton,{fill:!0,color:"primary",onClick:()=>{t()}},qc):i.a.createElement("p",null,Gc," ",i.a.createElement(d.EuiLink,{"data-test-subj":"syntheticsInvalidApiKeyCalloutCalloutLink",href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},Uc))),i.a.createElement(d.EuiSpacer,{size:"s"})):null},Uc=r.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.callout.invalidKey",{defaultMessage:"Learn more"}),$c=r.i18n.translate("xpack.synthetics.monitorManagement.callout.apiKeyMissing",{defaultMessage:"Monitor Management is currently disabled because of missing API key"}),Gc=r.i18n.translate("xpack.synthetics.monitorManagement.callout.disabledCallout.invalidKey",{defaultMessage:"Contact your administrator to enable Monitor Management."}),Wc=r.i18n.translate("xpack.synthetics.monitorManagement.callout.description.invalidKey",{defaultMessage:"Monitor Management is currently disabled. To run your monitors in one of Elastic's global managed testing locations,you need to re-enable monitor management."}),qc=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.invalidKey",{defaultMessage:"Enable monitor management"}),Kc=()=>{const{enablement:e,enableSynthetics:t}=zc(),{list:a}=Object(c.useSelector)(B.v);return!e.isEnabled&&a.total&&a.total>0?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:Jc,color:"warning",iconType:"help"},i.a.createElement("p",null,Zc),e.canEnable?i.a.createElement(d.EuiButton,{fill:!0,color:"primary",onClick:()=>{t()}},Xc):i.a.createElement("p",null,Yc," ",i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/observability/current/synthetics-get-started-ui.html#uptime-set-up-prereq",target:"_blank"},Vc))),i.a.createElement(d.EuiSpacer,{size:"s"})):null},Vc=r.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel.disabledCallout.learnMore",{defaultMessage:"Learn more"}),Jc=r.i18n.translate("xpack.synthetics.monitorManagement.callout.disabled",{defaultMessage:"Monitor Management is disabled"}),Yc=r.i18n.translate("xpack.synthetics.monitorManagement.disabledCallout.adminContact",{defaultMessage:"Contact your administrator to enable Monitor Management."}),Zc=r.i18n.translate("xpack.synthetics.monitorManagement.disabledCallout.description.disabled",{defaultMessage:"Monitor Management is currently disabled and your existing monitors are paused. You can enable Monitor Management to run your monitors."}),Xc=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel.management",{defaultMessage:"Enable Monitor Management"}),Qc=({inFlyout:e=!0,setIsAddingNew:t,disabled:a})=>{const n=Object(c.useDispatch)();return i.a.createElement(d.EuiEmptyPrompt,{hasBorder:!0,title:i.a.createElement("h2",null,au),titleSize:"s",body:i.a.createElement(d.EuiText,{size:"s"},e?"":tu," ",nu),actions:i.a.createElement(d.EuiButton,{disabled:a,color:"primary",fill:!0,onClick:()=>{null==t||t(!0),n(Object(Cc.h)(!0)),n(Object(Cc.g)(!0))}},iu),footer:i.a.createElement(d.EuiText,{size:"s"},lu," ",i.a.createElement(eu,null))})},eu=({label:e})=>i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations",target:"_blank"},null!=e?e:su),tu=r.i18n.translate("xpack.synthetics.monitorManagement.firstLocationMonitor",{defaultMessage:"In order to create a monitor, you will need to add a location first."}),au=r.i18n.translate("xpack.synthetics.monitorManagement.firstLocation",{defaultMessage:"Add your first private location"}),nu=r.i18n.translate("xpack.synthetics.monitorManagement.startAddingLocationsDescription",{defaultMessage:"Private locations allow you to run monitors from your own premises. They require an Elastic agent and Agent policy which you can control and maintain via Fleet."}),iu=r.i18n.translate("xpack.synthetics.monitorManagement.addLocation",{defaultMessage:"Add location"}),su=r.i18n.translate("xpack.synthetics.monitorManagement.readDocs",{defaultMessage:"read the docs"}),lu=r.i18n.translate("xpack.synthetics.monitorManagement.learnMore",{defaultMessage:"For more information,"}),ru=()=>{const{basePath:e}=Object(Mt.c)();return i.a.createElement(d.EuiEmptyPrompt,{hasBorder:!0,title:i.a.createElement("h2",null,cu),body:i.a.createElement("p",null,uu),actions:i.a.createElement(d.EuiButton,{fill:!0,href:`${e}/app/fleet/policies?create`,color:"primary"},ou),footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,lu)),i.a.createElement(d.EuiLink,{target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations"},su))})},ou=r.i18n.translate("xpack.synthetics.monitorManagement.createAgentPolicy",{defaultMessage:"Create agent policy"}),cu=r.i18n.translate("xpack.synthetics.monitorManagement.agentPolicyNeeded",{defaultMessage:"No agent policies found"}),uu=r.i18n.translate("xpack.synthetics.monitorManagement.addAgentPolicyDesc",{defaultMessage:"Private locations require an Agent policy. In order to add a private location, first you must create an Agent policy in Fleet."}),du=({children:e,privateLocations:t,setIsAddingNew:a,hasFleetPermissions:n})=>{const{data:s}=Object(c.useSelector)(Cc.e);return 0===(null==s?void 0:s.total)?i.a.createElement(ru,null):0===t.length?i.a.createElement(Qc,{setIsAddingNew:a,disabled:!n}):i.a.createElement(i.a.Fragment,null,e)};var mu=a(71);function pu(e){const{fleet:t}=Object(p.useKibana)().services,a=Boolean(null==t?void 0:t.authz.integrations.writeIntegrationPolicies),n=Boolean(null==t?void 0:t.authz.fleet.readAgentPolicies),i=null==e?void 0:e[$e.c.LOCATIONS];return{canUpdatePrivateMonitor:!((null==i?void 0:i.some((e=>!e.isServiceManaged)))&&!a),canReadAgentPolicies:n}}const gu=({errors:e,control:t,privateLocations:a})=>{const{data:n}=Object(c.useSelector)(Cc.e),s=null==n?void 0:n.items.map((e=>{const t=a.find((t=>t.agentPolicyId===e.id));return{disabled:Boolean(t),value:e.id,inputDisplay:i.a.createElement(d.EuiHealth,{color:"active"===e.status?"success":"warning",style:{lineHeight:"inherit"}},e.name),"data-test-subj":e.name,dropdownDisplay:i.a.createElement(d.EuiToolTip,{content:null!=t&&t.label?r.i18n.translate("xpack.synthetics.monitorManagement.anotherPrivateLocation",{defaultMessage:"This agent policy is already attached to location: {locationName}.",values:{locationName:null==t?void 0:t.label}}):void 0},i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiHealth,{color:"active"===e.status?"success":"warning",style:{lineHeight:"inherit"}},i.a.createElement("strong",null,e.name)),i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{size:"s",color:"subdued",className:"eui-textNoWrap"},i.a.createElement("p",null,hu," ",e.agents))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{size:"s",color:"subdued"},i.a.createElement("p",null,e.description))))))}}));return i.a.createElement(d.EuiFormRow,{fullWidth:!0,label:fu,helpText:null!=e&&e.agentPolicyId?void 0:bu,isInvalid:!(null==e||!e.agentPolicyId),error:Eu},i.a.createElement(mu.Controller,{name:"agentPolicyId",control:t,rules:{required:!0},render:({field:t})=>i.a.createElement(d.EuiSuperSelect,y()({fullWidth:!0,"aria-label":Eu,placeholder:Eu,valueOfSelected:t.value,itemLayoutAlign:"top",popoverProps:{repositionOnScroll:!0},hasDividers:!0,isInvalid:!(null==e||!e.agentPolicyId),options:null!=s?s:[]},t))}))},hu=r.i18n.translate("xpack.synthetics.monitorManagement.agentsLabel",{defaultMessage:"Agents: "}),Eu=r.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost",{defaultMessage:"Select agent policy"}),bu=r.i18n.translate("xpack.synthetics.monitorManagement.selectPolicyHost.helpText",{defaultMessage:"We recommend using a single Elastic agent per agent policy."}),fu=r.i18n.translate("xpack.synthetics.monitorManagement.policyHost",{defaultMessage:"Agent policy"}),yu=({privateLocations:e})=>{var t;const{data:a}=Object(c.useSelector)(Cc.e),{control:n,register:s}=Object(mu.useFormContext)(),{errors:l}=Object(mu.useFormState)();return i.a.createElement(i.a.Fragment,null,0===(null==a?void 0:a.items.length)&&i.a.createElement(ru,null),i.a.createElement(d.EuiForm,{component:"form",noValidate:!0},i.a.createElement(d.EuiFormRow,{fullWidth:!0,label:xu,isInvalid:Boolean(null==l?void 0:l.label),error:null==l||null===(t=l.label)||void 0===t?void 0:t.message},i.a.createElement(d.EuiFieldText,y()({fullWidth:!0,"aria-label":xu},s("label",{required:{value:!0,message:Mu},validate:t=>e.some((e=>e.label===t))?Su:void 0})))),i.a.createElement(d.EuiSpacer,null),i.a.createElement(gu,{errors:l,control:n,privateLocations:e}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiCallOut,{title:vu,size:"s",style:{textAlign:"left"}},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.content",defaultMessage:'To run "Browser" monitors on this private location, make sure that you\'re using the {code} Docker container, which contains the dependencies necessary to run these monitors. For more information, {link}.',values:{code:i.a.createElement(d.EuiCode,null,"elastic-agent-complete"),link:i.a.createElement(d.EuiLink,{target:"_blank",href:"https://www.elastic.co/guide/en/observability/current/uptime-set-up-choose-agent.html#private-locations",external:!0},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.agentCallout.link",defaultMessage:"read the docs"}))}})))))},vu=r.i18n.translate("xpack.synthetics.monitorManagement.agentCallout.title",{defaultMessage:"Requirement"}),xu=r.i18n.translate("xpack.synthetics.monitorManagement.locationName",{defaultMessage:"Location name"}),Su=r.i18n.translate("xpack.synthetics.monitorManagement.alreadyExists",{defaultMessage:"Location name already exists."}),Mu=r.i18n.translate("xpack.synthetics.monitorManagement.nameRequired",{defaultMessage:"Location name is required"});var ku=a(162);const Ou=({onSubmit:e,setIsOpen:t,privateLocations:a})=>{const n=Object(ku.a)({mode:"onSubmit",reValidateMode:"onChange",shouldFocusError:!0,defaultValues:{label:"",agentPolicyId:"",id:"",geo:{lat:0,lon:0},concurrentMonitors:1}}),{handleSubmit:s}=n,{canReadAgentPolicies:l}=pu(),r=()=>{t(!1)};return i.a.createElement(mu.FormProvider,n,i.a.createElement(d.EuiFlyout,{onClose:r,style:{width:540}},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("h2",null,ju))),i.a.createElement(d.EuiFlyoutBody,null,!l&&i.a.createElement(d.EuiCallOut,{title:Ku,color:"warning",iconType:"help"},i.a.createElement("p",null,Vu)),i.a.createElement(yu,{privateLocations:a})),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{iconType:"cross",onClick:r,flush:"left"},wu)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{fill:!0,onClick:s(e)},Iu))))))},ju=r.i18n.translate("xpack.synthetics.monitorManagement.addPrivateLocations",{defaultMessage:"Add private location"}),wu=r.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),Iu=r.i18n.translate("xpack.synthetics.monitorManagement.saveLabel",{defaultMessage:"Save"}),Cu=({loading:e,id:t,locationMonitors:a,onDelete:s})=>{var l,o,c,u;const m=null!==(l=null==a||null===(o=a.find((e=>e.id===t)))||void 0===o?void 0:o.count)&&void 0!==l?l:0,g=0===m,h=!(null===(c=Object(p.useKibana)().services)||void 0===c||null===(u=c.application)||void 0===u||!u.capabilities.uptime.save),[E,b]=Object(n.useState)(!1),f=i.a.createElement(d.EuiConfirmModal,{title:Tu,onCancel:()=>b(!1),onConfirm:()=>s(t),cancelButtonText:Lu,confirmButtonText:Fu,buttonColor:"danger",defaultFocusedButton:"confirm"},i.a.createElement("p",null,Au));return i.a.createElement(i.a.Fragment,null,E&&f,i.a.createElement(d.EuiToolTip,{content:g?Tu:r.i18n.translate("xpack.synthetics.monitorManagement.cannotDelete",{defaultMessage:"This location cannot be deleted, because it has {monCount} monitors running. Please remove this location from your monitors before deleting this location.",values:{monCount:m}})},i.a.createElement(d.EuiButtonIcon,{isLoading:e,iconType:"trash",color:"danger","aria-label":Tu,onClick:()=>{b(!0)},isDisabled:!g||!h})))},Tu=r.i18n.translate("xpack.synthetics.monitorManagement.delete",{defaultMessage:"Delete location"}),Fu=r.i18n.translate("xpack.synthetics.monitorManagement.deleteLocationLabel",{defaultMessage:"Delete location"}),Lu=r.i18n.translate("xpack.synthetics.monitorManagement.cancelLabel",{defaultMessage:"Cancel"}),Au=r.i18n.translate("xpack.synthetics.monitorManagement.areYouSure",{defaultMessage:"Are you sure you want to delete this location?"}),Pu=({agentPolicyId:e})=>{const{canReadAgentPolicies:t}=pu(),{basePath:a}=Object(Mt.c)(),{data:n}=Object(c.useSelector)(Cc.e),s=null==n?void 0:n.items.find((t=>t.id===e));return i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("p",null,t&&i.a.createElement(d.EuiTextColor,{color:"subdued"},s?i.a.createElement(d.EuiLink,{href:`${a}/app/fleet/policies/${e}`},null==s?void 0:s.name):i.a.createElement(d.EuiText,{color:"danger",size:"s",className:"eui-displayInline"},Du))))},Du=r.i18n.translate("xpack.synthetics.monitorManagement.deletedPolicy",{defaultMessage:"Policy is deleted"}),Ru=({onDelete:e,privateLocations:t})=>{const{locationMonitors:a,loading:s}=(()=>{const{savedObjects:e}=Object(p.useKibana)().services,{data:t,loading:a}=Object(h.useFetcher)((()=>{const t={locations:{terms:{field:`${_o.a}.locations.id`,size:1e4}}};return null==e?void 0:e.client.find({type:_o.b,perPage:0,aggs:t})}),[]);return Object(n.useMemo)((()=>{var e;return null!=t&&t.aggregations?{locationMonitors:null===(e=t.aggregations)||void 0===e?void 0:e.locations.buckets.map((({key:e,doc_count:t})=>({id:e,count:t}))),loading:a}:{locationMonitors:[],loading:a}}),[t,a])})(),[l,r]=Object(n.useState)(0),[o,c]=Object(n.useState)(10),u=[{field:"label",name:xu},{field:"monitors",name:zu,align:"right"},{field:"agentPolicyId",name:Hu,render:e=>i.a.createElement(Pu,{agentPolicyId:e})},{field:"id",name:Bu,align:"right",render:t=>i.a.createElement(Cu,{id:t,locationMonitors:a,onDelete:e,loading:s})}],m={pageIndex:l,pageSize:o,totalItemCount:t.length,pageSizeOptions:[5,10,0],showPerPageOptions:!0},g=t.map((e=>{var t,n;return{...e,monitors:null!==(t=null==a||null===(n=a.find((t=>t.id===e.id)))||void 0===n?void 0:n.count)&&void 0!==t?t:0}}));return i.a.createElement("div",null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiHorizontalRule,{margin:"none",style:{height:2}}),i.a.createElement(d.EuiBasicTable,{tableLayout:"auto",tableCaption:Nu,items:g,columns:u,pagination:m,onChange:({page:e={}})=>{const{index:t,size:a}=e;r(null!=t?t:0),c(null!=a?a:5)}}))},Nu=r.i18n.translate("xpack.synthetics.monitorManagement.privateLocations",{defaultMessage:"Private locations"}),Bu=r.i18n.translate("xpack.synthetics.monitorManagement.actions",{defaultMessage:"Actions"}),_u=({privateLocations:e,onDelete:t})=>i.a.createElement(Ru,{privateLocations:e,onDelete:t}),zu=r.i18n.translate("xpack.synthetics.monitorManagement.monitors",{defaultMessage:"Monitors"}),Hu=r.i18n.translate("xpack.synthetics.monitorManagement.agentPolicy",{defaultMessage:"Agent Policy"});var Uu=a(290);const $u=()=>{var e,t;const a=Object(c.useDispatch)(),{isEnabled:s}=zc().enablement,l=e=>a(Object(Cc.h)(e)),r=Object(c.useSelector)(Cc.f),o=Object(c.useSelector)(Cc.d),u=e=>a(Object(Cc.g)(e)),{onSubmit:m,loading:g,privateLocations:E,onDelete:f}=(({isOpen:e})=>{const[t,a]=Object(n.useState)(),[i,s]=Object(n.useState)(),[l,r]=Object(n.useState)([]),{savedObjects:o}=Object(p.useKibana)().services,{loading:c}=Object(h.useFetcher)((async()=>{const e=await Object(Uu.b)(null==o?void 0:o.client);return r(e),e}),[e]),{loading:u}=Object(h.useFetcher)((async()=>{if(l&&t){const e=l.filter((e=>e.id!==t.agentPolicyId)),n=await Object(Uu.c)(null==o?void 0:o.client,{locations:[...null!=e?e:[],{...t,id:t.agentPolicyId}]});return r(n.locations),a(void 0),n}}),[t,l]),{loading:d}=Object(h.useFetcher)((async()=>{if(i){const e=await Object(Uu.c)(null==o?void 0:o.client,{locations:(null!=l?l:[]).filter((e=>e.id!==i))});return r(e.locations),s(void 0),e}}),[i,l]);return{onSubmit:e=>{a(e)},onDelete:e=>{s(e)},loading:c||u||d,privateLocations:l}})({isOpen:r}),{fleet:y}=Object(p.useKibana)().services,v=Boolean(null==y?void 0:y.authz.fleet.readAgentPolicies),x=!(null===(e=Object(p.useKibana)().services)||void 0===e||null===(t=e.application)||void 0===t||!t.capabilities.uptime.save);Object(n.useEffect)((()=>{r&&a(Cc.c.get())}),[a,r]);const S=()=>{l(!1),a(Object(b.E)())},M=i.a.createElement(d.EuiFlyout,{onClose:S,size:"m",style:{width:540}},i.a.createElement(d.EuiFlyoutHeader,{hasBorder:!0},i.a.createElement(d.EuiTitle,{size:"m"},i.a.createElement("h2",null,Gu))),i.a.createElement(d.EuiFlyoutBody,null,g?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(du,{privateLocations:E,setIsAddingNew:u,hasFleetPermissions:v},i.a.createElement(_u,{privateLocations:E,onDelete:f})),!v&&i.a.createElement(d.EuiCallOut,{title:Ku,color:"warning",iconType:"help"},i.a.createElement("p",null,Vu))),i.a.createElement(d.EuiFlyoutFooter,null,i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{iconType:"cross",onClick:S,flush:"left"},Wu)),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{fill:!0,"data-test-subj":"addPrivateLocationButton",isLoading:g,disabled:!v||!x,onClick:()=>u(!0)},qu)))));return i.a.createElement("div",null,s&&i.a.createElement(d.EuiButtonEmpty,{onClick:()=>l(!0)},Gu),r&&!o?M:null,o?i.a.createElement(Ou,{setIsOpen:u,onSubmit:e=>{m(e),u(!1)},privateLocations:E}):null)},Gu=r.i18n.translate("xpack.synthetics.monitorManagement.managePrivateLocations",{defaultMessage:"Private locations"}),Wu=r.i18n.translate("xpack.synthetics.monitorManagement.closeLabel",{defaultMessage:"Close"}),qu=r.i18n.translate("xpack.synthetics.monitorManagement.addLocation",{defaultMessage:"Add location"}),Ku=r.i18n.translate("xpack.synthetics.monitorManagement.needPermissions",{defaultMessage:"Need permissions"}),Vu=r.i18n.translate("xpack.synthetics.monitorManagement.needFleetReadAgentPoliciesPermissionUptime",{defaultMessage:"You are not authorized to access Fleet. Fleet permissions are required to create new private locations."}),Ju=()=>i.a.createElement(x.a,{node:k},i.a.createElement($u,null)),Yu=()=>{const[e,t]=Object(n.useState)(!1),{list:a,locations:s}=Object(c.useSelector)(B.v),l=a.syncErrors;return l&&l.length>0&&!e?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.title",defaultMessage:"Monitors failed to sync with the Synthetics service"}),color:"warning",iconType:"alert"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.monitorSync.failure.content",defaultMessage:"There was a problem syncing your monitors for one or more locations:"})),i.a.createElement("ul",null,Object.values(null!=l?l:{}).map((e=>{var t,a,n,l,r;return i.a.createElement("li",{key:e.locationId},`${null===(t=s.find((t=>t.id===e.locationId)))||void 0===t?void 0:t.label} - ${Xu}: ${null!==(a=null===(n=e.error)||void 0===n?void 0:n.status)&&void 0!==a?a:Qu}; ${Zu}: ${null!==(l=null===(r=e.error)||void 0===r?void 0:r.reason)&&void 0!==l?l:Qu}`)}))),i.a.createElement(d.EuiButton,{onClick:()=>t(!0),color:"warning"},ed)),i.a.createElement(d.EuiSpacer,{size:"m"})):null},Zu=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.reasonLabel",{defaultMessage:"Reason"}),Xu=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.statusLabel",{defaultMessage:"Status"}),Qu=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.notAvailable",{defaultMessage:"Not available"}),ed=r.i18n.translate("xpack.synthetics.monitorManagement.monitorSync.failure.dismissLabel",{defaultMessage:"Dismiss"});var td=a(88),ad=a(101);const nd={"name.keyword":"monitor.name","urls.keyword":"url.full","type.keyword":"monitor.type","@timestamp":"@timestamp"},id=()=>[{exists:{field:"summary"}},{exists:{field:"error"}},{bool:{minimum_should_match:1,should:[{match_phrase:{"error.message":"journey did not finish executing"}},{match_phrase:{"error.message":"ReferenceError:"}}]}},Object(td.e)(),td.b];const sd=({invalidTotal:e,onUpdate:t,onPageStateChange:a})=>{const[s,l]=Object(n.useState)("all"),{refreshApp:r}=Object(ad.c)(),o=Object(u.useHistory)(),{type:c="all"}=Object(u.useParams)();Object(n.useEffect)((()=>{l(c),a({pageIndex:1,pageSize:10,sortOrder:"asc",sortField:`${$e.c.NAME}.keyword`})}),[c,a]);const m=[{id:"all",name:od,content:i.a.createElement(n.Fragment,null),href:o.createHref({pathname:"/manage-monitors"}),disabled:!1},{id:"invalid",name:rd,append:i.a.createElement(d.EuiNotificationBadge,{className:"eui-alignCenter",size:"m",color:0===e?"subdued":"accent"},e),href:o.createHref({pathname:"/manage-monitors/invalid"}),content:i.a.createElement(n.Fragment,null),disabled:0===e}];return i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiTabs,null,m.map(((e,t)=>i.a.createElement(d.EuiTab,{key:t,href:e.href,onClick:()=>{return t=e.id,void l(t);var t},isSelected:e.id===s,disabled:e.disabled,append:e.append},e.name))))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButton,{size:"s",iconType:"refresh","aria-label":ld,onClick:()=>{t(),r()}},ld)))},ld=r.i18n.translate("xpack.synthetics.monitorList.refresh",{defaultMessage:"Refresh"}),rd=r.i18n.translate("xpack.synthetics.monitorList.invalidMonitors",{defaultMessage:"Invalid monitors"}),od=r.i18n.translate("xpack.synthetics.monitorList.allMonitors",{defaultMessage:"All monitors"});var cd=a(195),ud=a(205);const dd=({configId:e,name:t,onUpdate:a,isDisabled:s,isProjectMonitor:l})=>{const[o,u]=Object(n.useState)(!1),m=Object(c.useSelector)((t=>Object(B.d)(t,e))),p=Object(c.useSelector)((t=>Object(B.e)(t,e))),g=Object(c.useDispatch)();Object(n.useEffect)((()=>{p&&a()}),[a,p]);const h=i.a.createElement(d.EuiConfirmModal,{title:r.i18n.translate("xpack.synthetics.monitorManagement.deleteMonitorNameLabel",{defaultMessage:'Delete "{name}" monitor?',values:{name:t}}),onCancel:()=>u(!1),onConfirm:()=>{g(cd.a.get({id:e,name:t})),u(!1)},cancelButtonText:pd,confirmButtonText:md,buttonColor:"danger",defaultFocusedButton:"confirm"},l&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{color:"warning",iconType:"help",title:ud.b},i.a.createElement("p",null,i.a.createElement(ud.c,null))),i.a.createElement(d.EuiSpacer,{size:"m"})));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiButtonIcon,{isDisabled:s,iconType:"trash",onClick:()=>{u(!0)},"aria-label":gd,"data-test-subj":"monitorManagementDeleteMonitor",isLoading:m}),o&&h)},md=r.i18n.translate("xpack.synthetics.monitorManagement.yesLabel",{defaultMessage:"Delete"}),pd=r.i18n.translate("xpack.synthetics.monitorManagement.noLabel",{defaultMessage:"Cancel"}),gd=r.i18n.translate("xpack.synthetics.monitorManagement.deleteMonitorLabel",{defaultMessage:"Delete monitor"}),hd=({configId:e,name:t,onUpdate:a,isDisabled:s,errorSummaries:l,monitors:r})=>{const{basePath:o}=Object(n.useContext)(E.c);let c=null==l?void 0:l.find((t=>t.config_id===e));const u=r.find((t=>t.id===e)),m=(null==u?void 0:u.attributes)[$e.c.MONITOR_SOURCE_TYPE]===$e.F.PROJECT;c&&u&&(Ae()(u.updated_at).isBefore(Ae()(c.timestamp))||(c=void 0));const{canUpdatePrivateMonitor:p}=pu(null==u?void 0:u.attributes);return i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:p?"":Bo},i.a.createElement(d.EuiButtonIcon,{isDisabled:s||!p,iconType:"pencil",href:`${o}/app/uptime/edit-monitor/${e}`,"aria-label":Ed,"data-test-subj":"monitorManagementEditMonitor"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(dd,{key:e,onUpdate:a,name:t,configId:e,isProjectMonitor:m,isDisabled:s||!p})),c&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ca,{errorSummary:c})))},Ed=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorLabel",{defaultMessage:"Edit monitor"}),bd=({id:e,monitor:t,onUpdate:a,isDisabled:s})=>{const[l,r]=Object(n.useState)(null),{notifications:o}=Object(p.useKibana)(),{canUpdatePrivateMonitor:c}=pu(t),{status:u}=Object(h.useFetcher)((()=>{if(null!==l)return Object(Qr.v)({id:e,monitor:{...t,[$e.c.ENABLED]:l}})}),[l]);Object(n.useEffect)((()=>{u===h.FETCH_STATUS.FAILURE?(o.toasts.danger({title:i.a.createElement("p",{"data-test-subj":"uptimeMonitorEnabledUpdateFailure"},Sd(t[$e.c.NAME])),toastLifeTimeMs:3e3}),r(null)):u===h.FETCH_STATUS.SUCCESS&&(o.toasts.success({title:i.a.createElement("p",{"data-test-subj":"uptimeMonitorEnabledUpdateSuccess"},l?vd(t[$e.c.NAME]):xd(t[$e.c.NAME])),toastLifeTimeMs:3e3}),a())}),[u]);const m=null!=l?l:t[$e.c.ENABLED],g=u===h.FETCH_STATUS.LOADING;return i.a.createElement(Md,{"aria-busy":g},i.a.createElement(d.EuiSwitch,{checked:m,disabled:g||s||!c,showLabel:!1,label:m?yd:fd,title:m?yd:fd,"data-test-subj":"syntheticsIsMonitorEnabled",onChange:e=>{const t=e.target.checked;r(t)}}),g?i.a.createElement(kd,{size:"xs",color:"primary",$_css:-4}):null)},fd=r.i18n.translate("xpack.synthetics.monitorManagement.enableMonitorLabel",{defaultMessage:"Enable monitor"}),yd=r.i18n.translate("xpack.synthetics.monitorManagement.disableMonitorLabel",{defaultMessage:"Disable monitor"}),vd=e=>r.i18n.translate("xpack.synthetics.monitorManagement.monitorEnabledSuccessMessage",{defaultMessage:"Monitor {name} enabled successfully.",values:{name:e}}),xd=e=>r.i18n.translate("xpack.synthetics.monitorManagement.monitorDisabledSuccessMessage",{defaultMessage:"Monitor {name} disabled successfully.",values:{name:e}}),Sd=e=>r.i18n.translate("xpack.synthetics.monitorManagement.monitorEnabledUpdateFailureMessage",{defaultMessage:"Unable to update monitor {name}.",values:{name:e}});var Md=Me()("div").withConfig({displayName:"_StyledDiv",componentId:"sc-p8iq6w-0"})({position:"relative"}),kd=Me()(d.EuiProgress).withConfig({displayName:"_StyledEuiProgress",componentId:"sc-p8iq6w-1"})((e=>({position:"absolute",left:0,bottom:e.$_css,width:"100%",height:2})));const Od=({locations:e})=>{const{locations:t}=kc(),[a,s]=Object(n.useState)(3),l=e.slice(0,a);return i.a.createElement(jd,null,l.map((e=>{var a;return i.a.createElement(wd,{key:e.id,color:"hollow",className:"eui-textTruncate"},`${null===(a=t.find((t=>t.id===e.id)))||void 0===a?void 0:a.label}`)})),e.length>a&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{s(e.length)},onClickAriaLabel:An},"+",e.length-3))};var jd=Me()(d.EuiBadgeGroup).withConfig({displayName:"_StyledEuiBadgeGroup",componentId:"sc-ofu3fe-0"})({width:"100%"}),wd=Me()(d.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-ofu3fe-1"})({display:"flex",maxWidth:120});const Id=({apiKey:e,loading:t,setLoadAPIKey:a})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),!e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiButton,{fill:!0,fullWidth:!0,isLoading:t,color:"primary",onClick:()=>{a(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyGenerate"},t?Ld:Td),i.a.createElement(d.EuiSpacer,{size:"s"})),e&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiCallOut,{title:Fd,iconType:"iInCircle",size:"s"}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("strong",null,Cd)),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiCodeBlock,{language:"javascript",isCopyable:!0,fontSize:"s",paddingSize:"m",whiteSpace:"pre"},e))),Cd=r.i18n.translate("xpack.synthetics.monitorManagement.apiKey.label",{defaultMessage:"API key"}),Td=r.i18n.translate("xpack.synthetics.monitorManagement.getApiKey.label",{defaultMessage:"Generate API key"}),Fd=r.i18n.translate("xpack.synthetics.monitorManagement.apiKeyWarning.label",{defaultMessage:"This API key will only be shown once. Please keep a copy for your own records."}),Ld=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.loading",{defaultMessage:"Generating API key"}),Ad="https://www.elastic.co/guide/en/observability/current/synthetic-run-tests.html",Pd=()=>{var e,t,a;const{enablement:{canManageApiKeys:s}}=zc(),[l,r]=Object(n.useState)(void 0),[o,c]=Object(n.useState)(!1),[u,m]=Object(n.useState)(!1),g=Object(p.useKibana)().services,E=!(null==g||null===(e=g.fleet)||void 0===e||!e.authz.integrations.writeIntegrationPolicies),{data:b,loading:f}=Object(h.useFetcher)((async()=>u?Object(Qr.n)():null),[u]);Object(n.useEffect)((()=>{r(null==b?void 0:b.apiKey.encoded)}),[b]);const y=!(null===(t=Object(p.useKibana)().services)||void 0===t||null===(a=t.application)||void 0===a||!a.capabilities.uptime.save);return i.a.createElement(d.EuiPopover,{isOpen:o,id:"managementSettingsPopover",button:i.a.createElement(d.EuiButtonEmpty,{onClick:()=>{o||c(!0)},"data-test-subj":"uptimeMonitorManagementApiKeyPopoverTrigger"},Dd),closePopover:()=>{r(void 0),m(!1),c(!1)},style:{margin:"auto"}},i.a.createElement("div",{style:{maxWidth:350}},y&&s?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopoverTitle,null,Nd),i.a.createElement(d.EuiText,{size:"s"},Bd," ",E?"":`${_d} `,i.a.createElement(d.EuiLink,{href:Ad,external:!0,target:"_blank"},Rd)),i.a.createElement(Id,{loading:f,setLoadAPIKey:m,apiKey:l})):i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiPopoverTitle,null,Nd),i.a.createElement(d.EuiText,{size:"s"},zd," ",i.a.createElement(d.EuiLink,{href:Ad,external:!0,target:"_blank"},Rd)))))},Dd=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.label",{defaultMessage:"API Keys"}),Rd=r.i18n.translate("xpack.synthetics.monitorManagement.learnMore.label",{defaultMessage:"Learn more"}),Nd=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.generate",{defaultMessage:"Generate API Key"}),Bd=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline."}),_d=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyLabel.disclaimer",{defaultMessage:"Please note: In order to use push monitors using private testing locations, you must generate this API key with a user who has Fleet and Integrations write permissions."}),zd=r.i18n.translate("xpack.synthetics.monitorManagement.getAPIKeyReducedPermissions.description",{defaultMessage:"Use an API key to push monitors remotely from a CLI or CD pipeline. To generate an API key, you must have permissions to manage API keys and Uptime write access. Please contact your administrator."}),Hd=()=>i.a.createElement(x.a,{node:M},i.a.createElement(Pd,null)),Ud=({tags:e})=>{const[t,a]=Object(n.useState)(5),s=e.slice(0,t);return i.a.createElement($d,null,s.map((e=>i.a.createElement(Gd,{key:e,color:"hollow",className:"eui-textTruncate"},e))),e.length>t&&i.a.createElement(d.EuiBadge,{color:"hollow",onClick:()=>{a(e.length)},onClickAriaLabel:Ln},"+",e.length-5))};var $d=Me()(d.EuiBadgeGroup).withConfig({displayName:"_StyledEuiBadgeGroup",componentId:"sc-3ul5o2-0"})({width:"100%"}),Gd=Me()(d.EuiBadge).withConfig({displayName:"_StyledEuiBadge",componentId:"sc-3ul5o2-1"})({display:"flex",maxWidth:120});const Wd=({pageState:{pageIndex:e,pageSize:t,sortField:a,sortOrder:s},monitorList:{list:l,error:{monitorList:o},loading:{monitorList:c}},onPageStateChange:u,onUpdate:m,errorSummaries:g})=>{var h,b;const{basePath:f}=Object(n.useContext)(E.c),y=Object(d.useIsWithinMinBreakpoint)("xxl"),{total:v}=l,x=Object(n.useMemo)((()=>l.monitors.map((e=>({...e.attributes})))),[l.monitors]),S=Object(n.useCallback)((({page:e={index:0,size:10},sort:t={field:$e.c.NAME,direction:"asc"}})=>{const{index:a,size:n}=e,{field:i,direction:s}=t;u({pageIndex:a+1,pageSize:n,sortField:`${i}.keyword`,sortOrder:s})}),[u]),M={pageIndex:e-1,pageSize:t,totalItemCount:v||0,pageSizeOptions:[5,10,25,50,100]},k={sort:{field:a.replace(".keyword",""),direction:s}},O=!(null===(h=Object(p.useKibana)().services)||void 0===h||null===(b=h.application)||void 0===b||!b.capabilities.uptime.save),j=[{align:"left",field:$e.c.NAME,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.monitorName",{defaultMessage:"Monitor name"}),sortable:!0,render:(e,t)=>i.a.createElement(d.EuiLink,{href:`${f}/app/uptime/monitor/${btoa(t[$e.c.MONITOR_QUERY_ID])}`},e)},{align:"left",field:$e.c.MONITOR_TYPE,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.monitorType",{defaultMessage:"Monitor type"}),sortable:!0},{align:"left",field:$e.c.TAGS,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.tags",{defaultMessage:"Tags"}),render:e=>e?i.a.createElement(Ud,{tags:e}):null},{align:"left",field:$e.c.LOCATIONS,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.locations",{defaultMessage:"Locations"}),render:e=>e?i.a.createElement(Od,{locations:e}):null},{align:"left",field:$e.c.PROJECT_ID,name:Ie.b,render:e=>e?i.a.createElement(d.EuiText,{size:"s"},e):null},{align:"left",field:$e.c.SCHEDULE,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.schedule",{defaultMessage:"Frequency (min)"}),render:e=>null==e?void 0:e.number},{align:"left",field:$e.c.URLS,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.URL",{defaultMessage:"URL"}),sortable:!0,render:(e,{hosts:t})=>e||t,textOnly:!0},{align:"left",field:$e.c.ENABLED,name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.enabled",{defaultMessage:"Enabled"}),render:(e,t)=>i.a.createElement(bd,{id:t[$e.c.CONFIG_ID],monitor:t,isDisabled:!O,onUpdate:m})},{align:"left",name:r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.actions",{defaultMessage:"Actions"}),render:e=>i.a.createElement(hd,{key:e[$e.c.CONFIG_ID],configId:e[$e.c.CONFIG_ID],name:e[$e.c.NAME],isDisabled:!O,onUpdate:m,errorSummaries:g,monitors:l.monitors})}];return i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(Hd,null),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiBasicTable,{"aria-label":r.i18n.translate("xpack.synthetics.monitorManagement.monitorList.title",{defaultMessage:"Monitor Management list"}),error:null==o?void 0:o.message,loading:c,isExpandable:!0,hasActions:!0,itemId:"monitor_id",items:x,columns:j,tableLayout:y?"auto":"fixed",pagination:M,sorting:k,onChange:S,noItemsMessage:c?lo:ro}))},qd=({pageState:e,onPageStateChange:t,onUpdate:a,errorSummaries:n})=>{const s=Object(c.useSelector)(B.v);return i.a.createElement(Wd,{pageState:e,monitorList:s,onPageStateChange:t,onUpdate:a,errorSummaries:n})},Kd=({loading:e,pageState:t,onPageStateChange:a,onUpdate:n,errorSummaries:s,invalidTotal:l,monitorSavedObjects:r})=>{var o;const{pageSize:u,pageIndex:d}=t,m=(d-1)*u,p=Object(c.useSelector)(B.v);return i.a.createElement(Wd,{pageState:t,monitorList:{list:{monitors:null!==(o=null==r?void 0:r.slice(m,m+u))&&void 0!==o?o:[],page:t.pageIndex,perPage:t.pageSize,total:null!=l?l:0,syncErrors:null,absoluteTotal:0},enablement:null,error:{monitorList:null,serviceLocations:null,enablement:null},loading:{monitorList:e,serviceLocations:!1,enablement:!1},locations:p.locations,syntheticsService:p.syntheticsService,throttling:$e.f},onPageStateChange:a,onUpdate:n,errorSummaries:s})},Vd=({isEnabled:e,pageState:t,dispatchPageAction:a})=>{var s;const l=Object(n.useCallback)((e=>{a({type:"update",payload:e})}),[a]),r=Object(n.useCallback)((()=>{a({type:"refresh"})}),[a]);Object(h.useTrackPageview)({app:"uptime",path:"monitors"}),Object(h.useTrackPageview)({app:"uptime",path:"monitors",delay:15e3});const d=Object(c.useSelector)(B.v),{type:m="all"}=Object(u.useParams)(),{errorSummaries:g,loading:E,count:b}=function({onlyInvalidMonitors:e,sortField:t="@timestamp",sortOrder:a="desc"}){const i=Object(c.useSelector)(B.v),{lastRefresh:s}=Object(ad.c)(),l=i.list.monitors.map((e=>e.id)).length>0||e,{data:r,loading:u}=Object(h.useEsSearch)({index:l?o.I:"",body:{size:1e3,query:{bool:{filter:id()}},collapse:{field:"monitor.id"},sort:[{[nd[t]]:a}]}},[i,s,l,t,a],{name:"getInvalidMonitors"}),{count:d,loading:m}=function(){const e=Object(c.useSelector)(B.v),{lastRefresh:t}=Object(ad.c)(),{data:a,loading:i}=Object(h.useEsSearch)({index:o.I,body:{size:0,query:{bool:{filter:id()}},aggs:{total:{cardinality:{field:"monitor.id"}}}}},[e,t],{name:"getInvalidMonitorsCount"});return Object(n.useMemo)((()=>{var e;const t=null==a||null===(e=a.aggregations)||void 0===e?void 0:e.total.value;return{loading:i,count:t}}),[a,i])}();return Object(n.useMemo)((()=>{const e=null==r?void 0:r.hits.hits.map((({_source:e})=>({...e,timestamp:e["@timestamp"]})));return{loading:u||m,errorSummaries:e,count:d}}),[d,m,r,u])}({onlyInvalidMonitors:"invalid"===m,sortField:t.sortField,sortOrder:t.sortOrder}),{data:f,loading:y}=(e=>{const{savedObjects:t}=Object(p.useKibana)().services,a=(null!=e?e:[]).map((e=>({id:e.config_id,type:_o.b})));return Object(h.useFetcher)((async()=>{if(a.length>0){const n=await(null==t?void 0:t.client.bulkResolve(a));if(n){const{resolved_objects:t}=n;return t.filter((t=>{if(t.saved_object.updatedAt){const a=null==e?void 0:e.find((e=>e.config_id===t.saved_object.id));if(a)return Ae()(t.saved_object.updatedAt).isBefore(Ae()(a.timestamp))}return!Boolean(t.saved_object.error)})).map((({saved_object:e})=>({...e,updated_at:e.updatedAt,created_at:e.createdAt})))}}}),[e])})(g),{locations:v}=kc();return e||0!==d.list.total?e&&0===d.list.total&&0===v.length?i.a.createElement(Qc,{inFlyout:!1}):i.a.createElement(i.a.Fragment,null,i.a.createElement(Yu,null),i.a.createElement(sd,{invalidTotal:null!==(s=null==f?void 0:f.length)&&void 0!==s?s:0,onUpdate:r,onPageStateChange:l}),"all"===m?i.a.createElement(qd,{pageState:t,monitorList:d,onPageStateChange:l,onUpdate:r,errorSummaries:g}):i.a.createElement(Kd,{pageState:t,monitorSavedObjects:f,onPageStateChange:l,onUpdate:r,errorSummaries:g,invalidTotal:null!=b?b:0,loading:Boolean(E)||Boolean(y)})):null},Jd=(r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnabledFailure",{defaultMessage:"Monitor Management was not able to be enabled. Please contact support."}),r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledFailure",{defaultMessage:"Monitor Management was not able to be disabled. Please contact support."}),r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableSuccess",{defaultMessage:"Monitor Management enabled successfully."})),Yd=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledSuccess",{defaultMessage:"Monitor Management disabled successfully."}),Zd=({focusButton:e})=>{const{error:t,enablement:a,enableSynthetics:s,loading:l}=zc(),[r,o]=Object(n.useState)(!1),{isEnabled:c,canEnable:u}=a,m=Object(n.useRef)(null);return Object(n.useEffect)((()=>{r&&c?(o(!1),pt.a.toasts.addSuccess({title:Jd,toastLifeTimeMs:3e3})):r&&t&&(o(!1),pt.a.toasts.addSuccess({title:Yd,toastLifeTimeMs:3e3}))}),[c,r,t]),Object(n.useEffect)((()=>{var t;e&&(null===(t=m.current)||void 0===t||t.focus())}),[e]),c||l?null:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,u?Xd:Qd),body:i.a.createElement("p",null,u?em:tm),actions:u?i.a.createElement(d.EuiButton,{color:"primary",fill:!0,onClick:()=>{s(),o(!0)},"data-test-subj":"syntheticsEnableButton",buttonRef:m},am):null,footer:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiTitle,{size:"xxs"},i.a.createElement("h3",null,im)),i.a.createElement(d.EuiLink,{href:"https://docs.google.com/document/d/1hkzFibu9LggPWXQqfbAd0mMlV75wCME7_BebXlEH-oI",target:"_blank"},nm))}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiEmptyPrompt,{paddingSize:"none",body:i.a.createElement(d.EuiCallOut,{title:"Please note",className:"eui-textLeft"},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.disclaimer",defaultMessage:"By using this feature, Customer acknowledges that it has read and agrees to {link}. ",values:{link:i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/agreements/beta-release-terms",target:"_blank"},"Elastic's Beta Release Terms")}})),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiText,{size:"s"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.disclaimerLinkLabel",defaultMessage:"There is no cost for the use of the service to execute your tests during the beta period. A fair usage policy will apply. Normal data storage costs apply for test results stored in your Elastic cluster."})))}))},Xd=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.enabled.title",{defaultMessage:"Enable Monitor Management"}),Qd=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabled.title",{defaultMessage:"Monitor Management is disabled"}),em=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement",{defaultMessage:"Enable Monitor Management to run lightweight and real-browser monitors from hosted testing locations around the world. Enabling Monitor Management will generate an API key to allow the Synthetics Service to write back to your Elasticsearch cluster."}),tm=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.disabledDescription",{defaultMessage:"Monitor Management is currently disabled. Monitor Management allows you to run lightweight and real-browser monitors from hosted testing locations around the world. To enable Monitor Management, please contact an administrator."}),am=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.title",{defaultMessage:"Enable"}),nm=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.doc",{defaultMessage:"Read the docs"}),im=r.i18n.translate("xpack.synthetics.monitorManagement.emptyState.enablement.learnMore",{defaultMessage:"Want to learn more?"}),sm=(e,t)=>{switch(t.type){case"update":return{...e,...t.payload};case"refresh":return{...e};default:throw new Error(`Action "${null==t?void 0:t.type}" not recognizable`)}},lm=()=>{Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors"}),Object(h.useTrackPageview)({app:"uptime",path:"manage-monitors",delay:15e3}),Oc();const[e,t]=Object(n.useState)(!1),{error:a,enablement:s,loading:l}=zc(),{loading:r}=kc(),{list:o}=Object(c.useSelector)(B.v),{isEnabled:d}=s,m=Object(n.useRef)(d);Object(n.useEffect)((()=>{d||!0!==m.current||t(!0),m.current=Boolean(d)}),[d]);const{pageState:p,dispatchPageAction:g}=function(){const e=Object(c.useDispatch)(),[t,a]=Object(n.useReducer)(sm,{pageIndex:1,pageSize:10,sortOrder:"asc",sortField:`${Go.b.NAME}.keyword`}),{pageIndex:i,pageSize:s,sortField:l,sortOrder:r}=t,{type:o="all"}=Object(u.useParams)();return Object(n.useEffect)((()=>{"all"===o&&e(Object(b.x)({page:i,perPage:s,sortOrder:r,sortField:l}))}),[e,i,s,l,r,o,t]),{pageState:t,dispatchPageAction:a,viewType:o}}(),E=void 0!==d&&0===o.total;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Nr,{loading:l||r,error:Boolean(a),loadingTitle:rm,errorTitle:Rc,errorBody:om},i.a.createElement(Hc,null),i.a.createElement(Kc,null),i.a.createElement(Vd,{isEnabled:d,pageState:p,dispatchPageAction:g}),i.a.createElement(Ju,null)),E&&i.a.createElement(Zd,{focusButton:e}))},rm=r.i18n.translate("xpack.synthetics.monitorManagement.manageMonitorLoadingLabel",{defaultMessage:"Loading Monitor Management"}),om=r.i18n.translate("xpack.synthetics.monitorManagement.editMonitorError.description",{defaultMessage:"Monitor Management settings could not be loaded. Please contact Support."}),cm=()=>i.a.createElement("div",null,i.a.createElement(x.b,{node:S})),um=()=>i.a.createElement("div",null,i.a.createElement(x.b,{node:M})),dm=({monitors:e})=>i.a.createElement("span",null,e.map(((e,t)=>i.a.createElement("span",{key:e.id},t>0&&", ",i.a.createElement(d.EuiToolTip,{content:e.url},i.a.createElement(jn,{monitorId:e.id,linkParameters:""},e.name||e.id)))))),mm=Me()("div").withConfig({displayName:"WrapFieldSearch",componentId:"sc-mus48d-0"})(["max-width:700px;"]),pm=({setSearch:e})=>{const[t,a]=Object(n.useState)("");return Ol()((()=>{e(t)}),350,[t]),i.a.createElement(mm,null,i.a.createElement(d.EuiFieldSearch,{"data-test-subj":"uptimeCertSearch",placeholder:$n,onChange:e=>{a(e.target.value)},isClearable:!0,"aria-label":$n,fullWidth:!0}))},gm=Me()(d.EuiText).withConfig({displayName:"DateText",componentId:"sc-e5uaji-0"})(["display:inline-block;margin-left:5px;"]),hm=({cert:e})=>{const t=Object(A.b)(null==e?void 0:e.not_after,null==e?void 0:e.not_before),a=Object(c.useSelector)(B.C),n=Ae()(null==e?void 0:e.not_after).fromNow();if(t===o.c.EXPIRING_SOON)return i.a.createElement(d.EuiHealth,{color:"warning"},i.a.createElement("span",null,Hn,"  ",i.a.createElement(gm,{color:"subdued",size:"xs"},n)));if(t===o.c.EXPIRED)return i.a.createElement(d.EuiHealth,{color:"danger"},i.a.createElement("span",null,zn,"  ",i.a.createElement(gm,{color:"subdued",size:"xs"},n)));if(t===o.c.TOO_OLD){var s;const t=null===(s=a.settings)||void 0===s?void 0:s.certAgeThreshold,n=Ae()(null==e?void 0:e.not_before).add(t,"days").fromNow();return i.a.createElement(d.EuiHealth,{color:"danger"},i.a.createElement("span",null,Wn,i.a.createElement(gm,{color:"subdued",size:"xs"},n)))}const l=Ae()(null==e?void 0:e.not_after).fromNow(!0);return i.a.createElement(d.EuiHealth,{color:"success"},i.a.createElement("span",null,_n,"  ",i.a.createElement(gm,{color:"subdued",size:"xs"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.certs.status.ok.label",defaultMessage:" for {okRelativeDate}",description:'Denotes an amount of time for which a cert is valid. Example: "OK for 2 days"',values:{okRelativeDate:l}}))))},Em=Me()(d.EuiButtonEmpty).withConfig({displayName:"EmptyButton",componentId:"sc-10h8575-0"})([".euiButtonEmpty__content{padding-right:0px;}"]),bm=Me.a.span.withConfig({displayName:"StyledSpan",componentId:"sc-10h8575-1"})(["margin-right:8px;"]),fm=({cert:e})=>{var t,a,n,s;const l=({text:e,val:t})=>i.a.createElement(bm,{"data-test-subj":t,className:"eui-textNoWrap"},i.a.createElement(d.EuiToolTip,{content:t},i.a.createElement(Em,null,e," ")),i.a.createElement(d.EuiCopy,{textToCopy:null!=t?t:""},(e=>i.a.createElement(d.EuiButtonIcon,{"aria-label":Qn,onClick:e,iconType:"copy",title:Qn}))));return i.a.createElement("span",null,i.a.createElement(l,{text:"SHA 1",val:null!==(t=null==e||null===(a=e.sha1)||void 0===a?void 0:a.toUpperCase())&&void 0!==t?t:""}),i.a.createElement(l,{text:"SHA 256",val:null!==(n=null==e||null===(s=e.sha256)||void 0===s?void 0:s.toUpperCase())&&void 0!==n?n:""}))},ym=({page:e,certificates:t,sort:a,onChange:n})=>{var s,l;const r={pageIndex:e.index,pageSize:e.size,totalItemCount:null!==(s=null==t?void 0:t.total)&&void 0!==s?s:0,pageSizeOptions:[10,25,50,100],showPerPageOptions:!0},o=[{field:"not_after",name:Gn,sortable:!0,render:(e,t)=>i.a.createElement(hm,{cert:t})},{name:qn,field:"common_name",sortable:!0},{name:Kn,field:"monitors",render:e=>i.a.createElement(dm,{monitors:e})},{name:Vn,field:"issuer",sortable:!0},{name:Jn,field:"not_after",sortable:!0,render:e=>Ae()(e).format("L LT")},{name:Yn,field:"not_before",sortable:!0,render:e=>Ae()().diff(Ae()(e),"days")+" "+Zn},{name:Xn,field:"sha256",render:(e,t)=>i.a.createElement(fm,{cert:t})}];return i.a.createElement(d.EuiBasicTable,{loading:t.loading,columns:o,items:null!==(l=null==t?void 0:t.certs)&&void 0!==l?l:[],pagination:r,onChange:e=>{n(e.page,e.sort)},sorting:{sort:{field:a.field,direction:a.direction}},noItemsMessage:t.loading?ti:i.a.createElement("span",{"data-test-subj":"uptimeCertsEmptyMessage"},ei)})};var vm,xm=a(29),Sm=a.n(xm),Mm=a(262),km=a(263);!function(e){e.issuer="tls.server.x509.issuer.common_name",e.not_after="tls.server.x509.not_after",e.not_before="tls.server.x509.not_before",e.common_name="tls.server.x509.subject.common_name"}(vm||(vm={}));const Om="not_after",jm="now-20m";function wm(e){var t,a;return null!==(t=null===(a=Sm.a.parse(e))||void 0===a?void 0:a.valueOf())&&void 0!==t?t:e}const Im=e=>{var t,a,n,i,s;return{certs:null===(t=e.hits)||void 0===t||null===(a=t.hits)||void 0===a?void 0:a.map((e=>{var t,a,n,i,s,l,r,o,c;const u=null===(t=e._source.tls)||void 0===t?void 0:t.server,d=null==u||null===(a=u.x509)||void 0===a?void 0:a.not_after,m=null==u||null===(n=u.x509)||void 0===n?void 0:n.not_before,p=null==u||null===(i=u.x509)||void 0===i||null===(s=i.issuer)||void 0===s?void 0:s.common_name,g=null==u||null===(l=u.x509)||void 0===l||null===(r=l.subject)||void 0===r?void 0:r.common_name,h=null==u||null===(o=u.hash)||void 0===o?void 0:o.sha1,E=null==u||null===(c=u.hash)||void 0===c?void 0:c.sha256;return{monitors:e.inner_hits.monitors.hits.hits.map((e=>{var t;const a=e._source;return{name:null==a?void 0:a.monitor.name,id:null==a?void 0:a.monitor.id,url:null==a||null===(t=a.url)||void 0===t?void 0:t.full}})),issuer:p,sha1:h,sha256:E,not_after:d,not_before:m,common_name:g}})),total:null!==(n=null===(i=e.aggregations)||void 0===i||null===(s=i.total)||void 0===s?void 0:s.value)&&void 0!==n?n:0}};var Cm=a(197);const Tm="xpack.uptime.certList.pageSize",Fm=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem(Tm))&&void 0!==e?e:"",10);return isNaN(t)?10:t},Lm=()=>{Object(h.useTrackPageview)({app:"uptime",path:"certificates"}),Object(h.useTrackPageview)({app:"uptime",path:"certificates",delay:15e3}),D([{text:"Certificates"}]);const[e,t]=Object(n.useState)({index:0,size:Fm()}),[a,s]=Object(n.useState)({field:"not_after",direction:"asc"}),[l,r]=Object(n.useState)(""),o=Object(c.useDispatch)();Object(n.useEffect)((()=>{o(Object(Hi.a)())}),[o]);const u=(({pageIndex:e,size:t=20,search:a,sortBy:i=Om,direction:s="asc"})=>{var l,r;const o=Object(c.useSelector)(B.C),{lastRefresh:u}=Object(n.useContext)(E.a),d=(({pageIndex:e,search:t,notValidBefore:a,notValidAfter:n,size:i=20,to:s="now",from:l=jm,sortBy:r=Om,direction:o="asc",filters:c})=>{const u=vm[r];return Object(Mm.a)({body:{from:e*i,size:i,sort:Object(km.a)([{[u]:{order:o}}]),query:{bool:{...t?{minimum_should_match:1,should:[{multi_match:{query:escape(t),type:"phrase_prefix",fields:["monitor.id.text","monitor.name.text","url.full.text","tls.server.x509.subject.common_name.text","tls.server.x509.issuer.common_name.text"]}}]}:{},filter:[...c?[c]:[],{exists:{field:"tls.server.hash.sha256"}},{range:{"monitor.timespan":{gte:wm(l),lte:wm(s)}}},{bool:{minimum_should_match:1,should:[...a?[{range:{"tls.certificate_not_valid_before":{lte:wm(a)}}}]:[],...n?[{range:{"tls.certificate_not_valid_after":{lte:wm(n)}}}]:[]]}}]}},_source:["monitor.id","monitor.name","tls.server.x509.issuer.common_name","tls.server.x509.subject.common_name","tls.server.hash.sha1","tls.server.hash.sha256","tls.server.x509.not_after","tls.server.x509.not_before"],collapse:{field:"tls.server.hash.sha256",inner_hits:{_source:{includes:["monitor.id","monitor.name","url.full"]},collapse:{field:"monitor.id"},name:"monitors",sort:[{"monitor.id":"asc"}]}},aggs:{total:{cardinality:{field:"tls.server.hash.sha256"}}}}}).body})({pageIndex:e,size:t,search:a,sortBy:i,direction:s,to:"now",from:jm}),m=Object(h.createEsParams)({index:null===(l=o.settings)||void 0===l?void 0:l.heartbeatIndices,body:d}),{data:p,loading:g}=Object(h.useEsSearch)(m,[null===(r=o.settings)||void 0===r?void 0:r.heartbeatIndices,t,e,u,a,i,s],{name:"getTLSCertificates"});return p?{...Im(p),loading:g}:{certs:[],total:0,loading:g}})({search:l,size:e.size,pageIndex:e.index,sortBy:a.field,direction:a.direction});return Object(n.useEffect)((()=>{o(Object(Cm.c)({total:u.total}))}),[u.total,o]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(pm,{setSearch:r}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(ym,{page:e,onChange:(e,a)=>{t(e),s(a),localStorage.setItem(Tm,e.size.toString())},sort:a,certificates:u}))},Am=Me()(d.EuiButtonIcon).withConfig({displayName:"OverviewPageLinkButtonIcon",componentId:"sc-1g1o1qg-0"})(["margin-top:12px;"]),Pm=({dataTestSubj:e,direction:t,pagination:a})=>{const[,n]=Object(A.i)(),s="prev"===t?"arrowLeft":"arrowRight",l="next"===t?r.i18n.translate("xpack.synthetics.overviewPageLink.next.ariaLabel",{defaultMessage:"Next page of results"}):r.i18n.translate("xpack.synthetics.overviewPageLink.prev.ariaLabel",{defaultMessage:"Prev page of results"}),o=r.i18n.translate("xpack.synthetics.overviewPageLink.disabled.ariaLabel",{defaultMessage:"A disabled pagination button indicating that there cannot be any further navigation in the monitors list."});return i.a.createElement(Am,{color:"text",onClick:()=>{n({pagination:a})},"data-test-subj":e,iconType:s,"aria-label":a?l:o,isDisabled:!a})},Dm=({setIsOpen:e,size:t})=>i.a.createElement(d.EuiButtonEmpty,{color:"text","data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.popoverOpen",iconType:"arrowDown",iconSide:"right",onClick:()=>e(!0)},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.pageSizePopoverButtonText",defaultMessage:"Rows per page: {size}",values:{size:t}})),Rm=[{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem10",key:"10 rows",numRows:10},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem25",key:"25 rows",numRows:25},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem50",key:"50 rows",numRows:50},{"data-test-subj":"xpack.synthetics.monitorList.pageSizeSelect.sizeSelectItem100",key:"100 rows",numRows:100}],Nm=({size:e,setSize:t})=>{const[,a]=Object(A.i)();return Object(n.useEffect)((()=>{localStorage.setItem("xpack.uptime.monitorList.pageSize",e.toString())}),[e]),i.a.createElement(Bm,{size:e,setSize:t,setUrlParams:a})},Bm=({size:e,setSize:t,setUrlParams:a})=>{const[s,l]=Object(n.useState)(!1);return i.a.createElement(d.EuiPopover,{button:i.a.createElement(Dm,{setIsOpen:e=>l(e),size:e}),isOpen:s,closePopover:()=>l(!1),anchorPosition:"upLeft"},i.a.createElement(d.EuiContextMenuPanel,{items:Rm.map((({"data-test-subj":n,key:s,numRows:r})=>i.a.createElement(d.EuiContextMenuItem,{"data-test-subj":n,key:s,icon:e===r?"check":"empty",onClick:()=>{t(r),a({pagination:void 0}),l(!1)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.pageSizeSelect.numRowsItemMessage",defaultMessage:"{numRows} rows",values:{numRows:r}}))))}))},_m=({error:e,monitorId:t,timestamp:a})=>{const n=Object(A.e)();n.statusFilter="down";const s=L(n,!0),l=a?Ae()(new Date(a).valueOf()).fromNow():"";return i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,r.i18n.translate("xpack.synthetics.monitorList.mostRecentError.title",{defaultMessage:"Most recent error ({timestamp})",values:{timestamp:l},description:"Most Recent Error title in Monitor List Expanded row"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(jn,{monitorId:t,linkParameters:s},null==e?void 0:e.message)))},zm=({location:e,textSize:t})=>e?i.a.createElement(d.EuiText,{size:t||"s",grow:!1},e):i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-observer-options.html",target:"_blank"},r.i18n.translate("xpack.synthetics.monitorList.geoName.helpLinkAnnotation",{defaultMessage:"Add location",description:"Text that instructs the user to navigate to our docs to add a geographic location to their data"})),Hm=({locationNames:e,status:t})=>{const a=t===o.F.UP?"success":"danger";let n=[...e];e.has(o.N)&&(n=n.filter((e=>e!==o.N)),n.push(o.N));const s=n.join(", ");return i.a.createElement("span",null,i.a.createElement(d.EuiBadge,{color:a},Aa(t)),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement("span",{"aria-label":r.i18n.translate("xpack.synthetics.monitorList.drawer.statusRowLocationList",{defaultMessage:'A list of locations with "{status}" status when last checked.',values:{status:t}})},s||"--"),i.a.createElement(d.EuiSpacer,{size:"xs"}))},Um=({summaryPings:e})=>{const t=new Set,a=new Set;e.forEach((e=>{var n,i,s;const l=null!==(n=null===(i=e.observer)||void 0===i||null===(s=i.geo)||void 0===s?void 0:s.name)&&void 0!==n?n:o.N;e.monitor.status===o.F.UP?t.add(l):e.monitor.status===o.F.DOWN&&a.add(l)}));const n=new Set([...t].filter((e=>!a.has(e))));return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{style:{maxWidth:1e3}},a.size>0&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Hm,{locationNames:a,status:o.F.DOWN})),n.size>0&&i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Hm,{locationNames:n,status:o.F.UP}))),(a.has(o.N)||t.has(o.N))&&i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiCallOut,{color:"warning"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.drawer.missingLocation",defaultMessage:"Some heartbeat instances do not have a location defined. {link} to your heartbeat configuration.",values:{link:i.a.createElement(zm,null)}})),i.a.createElement(d.EuiSpacer,{size:"s"})))},$m=({ariaLabel:e,href:t,iconType:a,message:n,tooltipContent:s})=>void 0===t?i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:r.i18n.translate("xpack.synthetics.integrationLink.missingDataMessage",{defaultMessage:"Required data for this integration was not found."})},i.a.createElement(d.EuiIcon,{type:a}))),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiText,{color:"subdued"},n))):i.a.createElement(d.EuiLink,{"aria-label":e,href:t},i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiToolTip,{content:s,position:"top"},i.a.createElement(d.EuiIcon,{type:a}))),i.a.createElement(d.EuiFlexItem,null,n))),Gm=({summary:e})=>{const{basePath:t,dateRangeStart:a,dateRangeEnd:s,isApmAvailable:l,isInfraAvailable:o,isLogsAvailable:c}=Object(n.useContext)(E.c),{domain:u,podUid:m,containerId:p,ip:g}=(e=>{var t,a,n,i,s,l,r,o,c;const u=null!==(t=null===(a=e.state.url)||void 0===a?void 0:a.domain)&&void 0!==t?t:"",d=null===(n=e.state.summaryPings)||void 0===n?void 0:n[0];return{domain:u,podUid:null!==(i=null==d||null===(s=d.kubernetes)||void 0===s||null===(l=s.pod)||void 0===l?void 0:l.uid)&&void 0!==i?i:void 0,containerId:null!==(r=null==d||null===(o=d.container)||void 0===o?void 0:o.id)&&void 0!==r?r:void 0,ip:null!==(c=null==d?void 0:d.monitor.ip)&&void 0!==c?c:void 0}})(e);return l||o||c?i.a.createElement(d.EuiFlexGroup,{direction:"column"},l?i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.apmIntegrationAction.description",{defaultMessage:"Search APM for this monitor",description:"This value is shown to users when they hover over an icon that will take them to the APM app."}),href:Object(ke.f)(e,t,a,s),iconType:"apmApp",message:r.i18n.translate("xpack.synthetics.apmIntegrationAction.text",{defaultMessage:"Show APM Data",description:"A message explaining that when the user clicks the associated link, it will navigate to the APM app"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.observabilityIntegrationsColumn.apmIntegrationLink.tooltip",{defaultMessage:'Click here to check APM for the domain "{domain}" or explicitly defined "service name".',description:"A messsage shown in a tooltip explaining that the nested anchor tag will navigate to the APM app and search for the given URL domain or explicitly defined service name.",values:{domain:u}})})):null,o?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.ariaLabel",{defaultMessage:"Check Infrastructure UI for this montor's ip address",description:"This value is shown as the aria label value for screen readers."}),href:Object(ke.d)(e,t),iconType:"metricsApp",message:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.message",{defaultMessage:"Show host metrics",description:"A message explaining that this link will take the user to the Infrastructure UI, filtered for this monitor's IP Address"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.ip.tooltip",{defaultMessage:'Check Infrastructure UI for the IP "{ip}"',values:{ip:Array.isArray(g)?g[0]:g}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.description",{defaultMessage:"Check Infrastructure UI for this monitor's pod UID",description:"This value is shown as the aria label value for screen readers."}),href:Object(ke.e)(e,t),iconType:"metricsApp",message:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.message",{defaultMessage:"Show pod metrics",description:"A message explaining that this link will take the user to the Infrastructure UI filtered for the monitor Pod UID."}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.kubernetes.tooltip",{defaultMessage:'Check Infrastructure UI for pod UID "{podUid}".',values:{podUid:m}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.docker.description",{defaultMessage:"Check Infrastructure UI for this monitor's container ID"}),href:Object(ke.c)(e,t),iconType:"metricsApp",message:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.container.message",{defaultMessage:"Show container metrics"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.infraIntegrationAction.docker.tooltip",{defaultMessage:'Check Infrastructure UI for container ID "{containerId}"',values:{containerId:p}})}))):null,c?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.description",{defaultMessage:"Check Logging UI for this monitor's ip address",description:"This value is shown as the aria label for screen readers."}),href:Object(ke.h)(e,t),iconType:"logsApp",message:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.message",{defaultMessage:"Show host logs",description:"A message explaining that this link will take the user to the Infrastructure UI filtered for the monitor's IP Address"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.ip.tooltip",{defaultMessage:'Check Logging UI for the IP "{ip}"',values:{ip:Array.isArray(g)?g[0]:g}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.ariaLabel",{defaultMessage:"Show pod logs"}),href:Object(ke.i)(e,t),iconType:"logsApp",message:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.message",{defaultMessage:"Show pod logs"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.kubernetes.tooltip",{defaultMessage:'Check for logs for pod UID "{podUid}"',values:{podUid:m}})})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement($m,{ariaLabel:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.id",{defaultMessage:"Show container logs"}),href:Object(ke.g)(e,t),iconType:"logsApp",message:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.message",{defaultMessage:"Show container logs"}),tooltipContent:r.i18n.translate("xpack.synthetics.monitorList.loggingIntegrationAction.container.tooltip",{defaultMessage:'Check Logging UI for container ID "{containerId}"',values:{containerId:p}})}))):null):i.a.createElement(v.FormattedMessage,{defaultMessage:"No integrated applications available",description:"This message is shown when no applications that Uptime links to are enabled in the current space",id:"xpack.synthetics.monitorList.integrationGroup.emptyMessage"})},Wm=Object(c.connect)((e=>({popoverState:Object(B.k)(e)})),(e=>({togglePopoverIsVisible:t=>e(Object(b.W)(t))})))((({summary:e,popoverState:t,togglePopoverIsVisible:a})=>{var n,s;const l=`${e.monitor_id}_popover`,o=null==e||null===(n=e.state)||void 0===n||null===(s=n.url)||void 0===s?void 0:s.full,c=!!t&&t.open&&t.id===l;return i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButton,{"aria-label":r.i18n.translate("xpack.synthetics.monitorList.observabilityIntegrationsColumn.popoverIconButton.ariaLabel",{defaultMessage:"Opens integrations popover for monitor with url {monitorUrl}",description:"A message explaining that this button opens a popover with links to other apps for a given monitor",values:{monitorUrl:o}}),"data-test-subj":`xpack.synthetics.monitorList.actionsPopover.${e.monitor_id}`,onClick:()=>a({id:l,open:!0}),iconType:"arrowDown",iconSide:"right"},r.i18n.translate("xpack.synthetics.monitorList.observabilityInvestigateColumn.popoverIconButton.label",{defaultMessage:"Investigate"})),closePopover:()=>a({id:l,open:!1}),id:l,isOpen:c},i.a.createElement(Gm,{summary:e}))}));var qm=a(248);const Km=Me()(d.EuiListGroup).withConfig({displayName:"LinkGroupList",componentId:"sc-19op1rf-0"})(["&&&{a{padding-left:0;padding-top:0;}}"]),Vm=({monitorAlerts:e,loading:t})=>{const{basePath:a}=Object(n.useContext)(E.c),s=[];return(null!=e?e:[]).forEach(((e,t)=>{s.push({size:"s",label:e.name,href:Object(qm.a)(e.id,a),"data-test-subj":"uptimeMonitorListDrawerAlert"+t})})),i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,r.i18n.translate("xpack.synthetics.monitorList.enabledAlerts.title",{defaultMessage:"Enabled rules",description:"Rules enabled for this monitor"})),i.a.createElement(d.EuiDescriptionListDescription,null,0===s.length&&!t&&i.a.createElement(d.EuiCallOut,{size:"s",title:r.i18n.translate("xpack.synthetics.monitorList.enabledAlerts.noAlert",{defaultMessage:"No rules are enabled for this monitor."})}),t?i.a.createElement(d.EuiLoadingSpinner,null):i.a.createElement(Km,{listItems:s,flush:!0})))},Jm=({monitorUrl:e})=>i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,r.i18n.translate("xpack.synthetics.monitorList.drawer.url",{defaultMessage:"Url"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiLink,{href:e,target:"_blank",external:!0},e))),Ym=({summary:e})=>i.a.createElement(d.EuiDescriptionList,null,i.a.createElement(d.EuiDescriptionListTitle,null,r.i18n.translate("xpack.synthetics.monitorList.drawer.mostRecentRun",{defaultMessage:"Most recent test run"})),i.a.createElement(d.EuiDescriptionListDescription,null,i.a.createElement(d.EuiText,{size:"s"},Ae()(e.state.timestamp).format("LLL").toString()))),Zm=Me.a.div.withConfig({displayName:"ContainerDiv",componentId:"sc-gtt4so-0"})(["padding:10px;width:100%;"]);function Xm({summary:e,monitorDetails:t,loading:a}){var n,s;const l=(null==e||null===(n=e.state)||void 0===n||null===(s=n.url)||void 0===s?void 0:s.full)||"";return e&&e.state.summaryPings?i.a.createElement(Zm,null,i.a.createElement(d.EuiFlexGroup,null,i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(d.EuiFlexGroup,{style:{maxWidth:1e3}},i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Jm,{monitorUrl:l})),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(Ym,{summary:e})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Wm,{summary:e}))),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(Um,{summaryPings:e.state.summaryPings}),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(Vm,{loading:a,monitorAlerts:null==t?void 0:t.alerts}),i.a.createElement(d.EuiSpacer,{size:"s"}),t&&t.error&&i.a.createElement(_m,{error:t.error,monitorId:e.monitor_id,timestamp:t.timestamp})):null}const Qm=({summary:e})=>{var t;const{lastRefresh:a}=Object(n.useContext)(E.a),s=null==e?void 0:e.monitor_id,{dateRangeStart:l,dateRangeEnd:r}=Object(A.e)(),o=Object(c.useSelector)((t=>Object(B.r)(t,e))),u=Object(c.useSelector)(B.q),d=Object(c.useDispatch)(),{data:m,loading:p}=Object(c.useSelector)(fe.b),g=(null!==(t=null==m?void 0:m.data)&&void 0!==t?t:[]).find((e=>e.params.search.includes(s)));return Object(n.useEffect)((()=>{d(oi.a.get({dateStart:l,dateEnd:r,monitorId:s}))}),[l,r,s,d,g,a]),i.a.createElement(Xm,{monitorDetails:o,summary:e,loading:u||p})},ep=Me()(d.EuiFlexGroup).withConfig({displayName:"FlexGroupContainer",componentId:"sc-b7nvcs-0"})(["position:relative;"]),tp=()=>i.a.createElement(ep,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiTitle,{size:"xs"},i.a.createElement("h2",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.monitoringStatusTitle",defaultMessage:"Monitors"})))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Ce,null))),ap=({showPopover:e=!1,showHelpText:t=!1,showLabel:a=!1})=>{const[s,l]=Object(n.useState)(!1);return i.a.createElement(d.EuiPopover,{button:i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFormRow,{helpText:t?i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.defineConnector.description",defaultMessage:"Define a default connector in {link} to enable monitor status alerts.",values:{link:i.a.createElement(Bt,{to:o.C+"?focusConnectorField=true","data-test-subj":"uptimeSettingsLink",target:"_blank"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.defineConnector.settingsLink",defaultMessage:"Settings"}))}}):void 0},i.a.createElement(d.EuiSwitch,{id:"defineAlertSettingsSwitch",label:Tn,showLabel:a,"aria-label":Tn,onChange:e?()=>l((e=>!e)):()=>{},checked:!1,compressed:!0,disabled:!e,"data-test-subj":"uptimeDisplayDefineConnector"}))),isOpen:!!e&&s,closePopover:()=>l(!1)},i.a.createElement(d.EuiText,{style:{width:"350px"},"data-test-subj":"uptimeSettingsDefineConnector"},i.a.createElement(Bt,{to:o.C+"?focusConnectorField=true","data-test-subj":"uptimeSettingsLink"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.defineConnector.popover.defaultLink",defaultMessage:"Define a default connector"}))," ",i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.defineConnector.popover.description",defaultMessage:"to receive status alerts."})))},np=({monitorId:e,selectedMonitor:t})=>{var a,s,l;const[r,m]=Object(n.useState)(!1),{settings:p}=Object(c.useSelector)(B.C),g=Object(u.useRouteMatch)(o.x),h=Object(c.useDispatch)(),{data:E}=Object(c.useSelector)(fe.d),{data:b,loading:f}=Object(c.useSelector)(fe.b),{data:y}=Object(c.useSelector)(fe.l),{data:v,error:x}=Object(c.useSelector)(fe.n),S=null==v?void 0:v.params.search.includes(e);let M=(null!==(a=null==b?void 0:b.data)&&void 0!==a?a:[]).find((t=>t.params.search.includes(e)));S&&(M=v),y===(null===(s=M)||void 0===s?void 0:s.id)&&(M=void 0);const k=(null!=E?E:[]).filter((e=>{var t;return null==p||null===(t=p.defaultConnectors)||void 0===t?void 0:t.includes(e.id)}));Object(n.useEffect)((()=>{m(!1)}),[M,y,x]);const O=(null!==(l=null==p?void 0:p.defaultConnectors)&&void 0!==l?l:[]).length>0,j=r||f&&!b,w=M?Fn:Tn;return O||M?i.a.createElement("div",{className:"eui-displayInlineBlock",style:{marginRight:10}},i.a.createElement(d.EuiToolTip,{content:w},i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiSwitch,{id:"enableDisableAlertSwitch",compressed:!g,disabled:j,label:w,showLabel:!!g,"aria-label":w,onChange:()=>{M?M&&(h(fe.f.get({alertId:M.id})),m(!0)):(h(fe.e.get({defaultActions:k,monitorId:e,selectedMonitor:t,defaultEmail:null==p?void 0:p.defaultEmail})),m(!0))},checked:!!M,"data-test-subj":M?"uptimeDisableSimpleDownAlert"+e:"uptimeEnableSimpleDownAlert"+e})," ",j&&i.a.createElement(d.EuiLoadingSpinner,{className:"eui-alignMiddle"})))):i.a.createElement(ap,{showPopover:!g,showHelpText:!!g,showLabel:!!g})},ip=(e,t={})=>{var a;const n=Sm.a.parse(e,t);return(null!==(a=null==n?void 0:n.valueOf())&&void 0!==a?a:0)>Date.now()?Sm.a.parse("now"):n},sp=({monitorId:e,configId:t,summaryPings:a})=>{const s=Object(c.useDispatch)(),l=Object(c.useSelector)(Object(va.b)(t));if(Object(n.useMemo)((()=>a.every((e=>!!e.monitor.fleet_managed))),[a]))return i.a.createElement(d.EuiToolTip,{content:po},i.a.createElement(i.a.Fragment,null,"--"));if(!t)return i.a.createElement(d.EuiToolTip,{content:uo},i.a.createElement(i.a.Fragment,null,"--"));const r=l&&l.status===va.a.LOADING,o=!l||l.status===va.a.COMPLETED;return r?i.a.createElement(d.EuiLoadingSpinner,{size:"s"}):i.a.createElement(d.EuiToolTip,{content:l?mo:ho},i.a.createElement(d.EuiButtonIcon,{iconType:"play",onClick:()=>{s(b.V.get(t))},isDisabled:!o,"aria-label":go}))},lp=()=>{var e;const[t,a]=Object(n.useState)(!1),{pingHistogram:s}=Object(c.useSelector)(B.D),l=Object(A.i)()[1],r=null!==(e=null==s?void 0:s.histogram)&&void 0!==e?e:[],o=null==r?void 0:r[Math.floor(r.length/2)].x,u=null==r?void 0:r[0].x;return i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiButtonEmpty,{onClick:()=>a((e=>!e))},op),isOpen:t,closePopover:()=>a(!1),anchorPosition:"upCenter"},i.a.createElement(d.EuiPopoverTitle,null,cp),i.a.createElement("div",{style:{width:"300px"}},i.a.createElement(d.EuiText,{size:"s"},i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorList.noMessage.troubleshoot",defaultMessage:"Try using an absolute date range. If monitors appears afterwards, there may be an issue with the system clock where Heartbeat or Kibana is installed."})))),i.a.createElement(d.EuiPopoverFooter,null,i.a.createElement(d.EuiButton,{fullWidth:!0,iconType:"calendar",size:"s",onClick:()=>{o&&u&&l({dateRangeStart:new Date(u).toISOString(),dateRangeEnd:new Date(o).toISOString()})}},rp)))},rp=r.i18n.translate("xpack.synthetics.monitorList.troubleshoot.tryDateRange",{defaultMessage:"Apply absolute date range"}),op=r.i18n.translate("xpack.synthetics.monitorList.troubleshoot.whereAreMyMonitors",{defaultMessage:"Where are my monitors?"}),cp=r.i18n.translate("xpack.synthetics.monitorList.troubleshoot.systemClockOutOfSync",{defaultMessage:"System clock may be out of sync"}),up=({loading:e,filters:t})=>{const{statusFilter:a}=Object(A.e)(),{pingHistogram:n}=Object(c.useSelector)(B.D),s=(null==n?void 0:n.histogram)&&n.histogram.length>0&&!a?i.a.createElement(lp,null):null;return e?i.a.createElement(i.a.Fragment,null," ",lo):t?i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},so),i.a.createElement(d.EuiFlexItem,{grow:!1},s))):i.a.createElement(i.a.Fragment,null,ro,s)},dp=({filters:e,refreshedMonitorIds:t=[],monitorList:{list:a,error:s,loading:l},pageSize:o,setPageSize:u,isPending:m})=>{var p,g,b,f;const[y,v]=Object(n.useState)([]),x=Object(d.useCurrentEuiBreakpoint)(),[S,M]=Object(n.useState)(!1);Ol()((()=>{x&&M(["m","l"].includes(x))}),50,[x]);const k=null!==(p=a.summaries)&&void 0!==p?p:[],{histogramsById:O,minInterval:j}=(({items:e})=>{var t,a;const{dateRangeStart:i,dateRangeEnd:s}=Object(A.e)(),{lastRefresh:l}=Object(n.useContext)(E.a),{settings:r}=Object(c.useSelector)(B.C),o=(null!=e?e:[]).map((({monitor_id:e})=>e)),{queryParams:u,minInterval:d}=((e,t,a,n)=>{const i=((e,t,a)=>{const n=ip(e),i=ip(t,{roundUp:!0});if(void 0===n)throw Error("Invalid dateRangeStart value");if(void 0===i)throw Error("Invalid dateRangeEnd value");const s=Math.round((i.valueOf()-n.valueOf())/12);return s>0?s:1})(e,t);return{queryParams:{index:n,body:{size:0,query:{bool:{filter:[{range:{"summary.down":{gt:0}}},{terms:{"monitor.id":a}},{range:{"@timestamp":{gte:e,lte:t}}}]}},aggs:{histogram:{date_histogram:{field:"@timestamp",fixed_interval:i+"ms"},aggs:{by_id:{terms:{field:"monitor.id",size:Math.max(a.length,1)},aggs:{totalDown:{sum:{field:"summary.down"}}}}}}}}},minInterval:i}})(i,s,o,(null==r?void 0:r.heartbeatIndices)||""),{data:m,loading:p}=Object(h.useEsSearch)(u,[JSON.stringify(o),l],{name:"getMonitorDownHistory"}),g=(null!==(t=null==m||null===(a=m.aggregations)||void 0===a?void 0:a.histogram.buckets)&&void 0!==t?t:[]).map((e=>{const t={};return e.by_id.buckets.forEach((e=>{t[e.key]=e.totalDown.value})),{byId:t,timestamp:e.key}})),b={};return o.forEach((e=>{const t=[];g.forEach((({byId:a,timestamp:n})=>{t.push({timestamp:n,up:void 0,down:a[e]})})),b[e]={points:t}})),{histogramsById:b,loading:p,minInterval:d}})({items:k}),w=null!==(g=a.nextPagePagination)&&void 0!==g?g:"",I=null!==(b=a.prevPagePagination)&&void 0!==b?b:"",C=e=>{y.includes(e)?v(y.filter((t=>t!==e))):v([...y,e])},T=[{align:"left",field:"state.summary.status",name:eo,mobileOptions:{fullWidth:!0},render:(e,{monitor_id:t,state:{timestamp:a,summaryPings:n,monitor:{type:s,duration:l,checkGroup:r},error:o},configId:c})=>i.a.createElement(Da,{configId:c,status:e,timestamp:a,summaryPings:null!=n?n:[],monitorType:s,duration:null==l?void 0:l.us,monitorId:t,checkGroup:r,summaryError:o})},{align:"left",field:"state.monitor.name",name:to,mobileOptions:{fullWidth:!0},render:(e,t)=>i.a.createElement(Cn,{summary:t}),sortable:!0},{align:"left",field:"state.url.full",name:Ie.j,width:"30%",render:e=>i.a.createElement(d.EuiLink,{href:e,target:"_blank",color:"text",external:!0},e)},{align:"left",field:"state.monitor.name",name:Ie.i,width:"12%",render:(e,t)=>i.a.createElement(Dn,{summary:t})},{align:"left",field:"state.tls.server.x509",name:no,render:e=>i.a.createElement(ii,{expiry:e})},...S?[]:[{align:"left",field:"monitor_id",name:ao,mobileOptions:{show:!1},render:e=>{var t;return i.a.createElement(Ti,{histogramSeries:null==O||null===(t=O[e])||void 0===t?void 0:t.points,minInterval:j})}}],{align:"center",field:"",name:oo,width:"100px",render:e=>i.a.createElement(np,{monitorId:e.monitor_id,selectedMonitor:e.state.summaryPings[0]})},{align:"center",field:"",name:co,width:"100px",render:e=>i.a.createElement(sp,{monitorId:e.monitor_id,configId:e.configId,summaryPings:e.state.summaryPings})},...S?[]:[{align:"right",field:"monitor_id",name:"",sortable:!0,isExpander:!0,width:"40px",render:e=>i.a.createElement(d.EuiButtonIcon,{"aria-label":io(e),"data-test-subj":`xpack.synthetics.monitorList.${e}.expandMonitorDetail`,iconType:y.includes(e)?"arrowUp":"arrowDown",onClick:()=>C(e)})}]];return i.a.createElement(mp,{hasBorder:!0},i.a.createElement(tp,null),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiBasicTable,{"aria-label":(F=k.length,r.i18n.translate("xpack.synthetics.monitorList.table.description",{defaultMessage:"Monitor Status table with columns for Status, Name, URL, IP, Downtime History and Integrations. The table is currently displaying {length} items.",values:{length:F}})),error:(null==s||null===(f=s.body)||void 0===f?void 0:f.message)||(null==s?void 0:s.message),loading:l||m,isExpandable:!0,hasActions:!0,itemId:"monitor_id",itemIdToExpandedRowMap:y.reduce(((e,t)=>({...e,[t]:i.a.createElement(Qm,{summary:k.find((({monitor_id:e})=>e===t))})})),{}),items:k,noItemsMessage:i.a.createElement(up,{loading:Boolean(l||m),filters:e}),columns:T,tableLayout:"auto",rowProps:S?({monitor_id:e})=>({onClick:()=>C(e),"aria-label":io(e)}):({monitor_id:e})=>({className:t.includes(e)?"refresh-row":void 0})}),i.a.createElement(d.EuiSpacer,{size:"m"}),i.a.createElement(d.EuiFlexGroup,{justifyContent:"spaceBetween",responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Nm,{size:o,setSize:u})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiFlexGroup,{responsive:!1},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Pm,{dataTestSubj:"xpack.synthetics.monitorList.prevButton",direction:"prev",pagination:I})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(Pm,{dataTestSubj:"xpack.synthetics.monitorList.nextButton",direction:"next",pagination:w}))))));var F},mp=Object(g.euiStyled)(d.EuiPanel)`
  &&&  {
  .refresh-row{
    background-color: #f0f4fb;
    -webkit-transition: background-color 3000ms linear;
    -ms-transition: background-color 3000ms linear;
    transition: background-color 3000ms linear;
    }
  }
`;function pp(e,t){return-1!==e.indexOf(t)}const gp=()=>{var e;const t=parseInt(null!==(e=localStorage.getItem("xpack.uptime.monitorList.pageSize"))&&void 0!==e?e:"",10);return isNaN(t)?10:t},hp=e=>{const t=Object(c.useSelector)(B.f),{filterCheck:a,pending:s}=Ri(),[l,r]=Object(n.useState)(gp),d=Object(c.useDispatch)(),[m]=Object(A.i)(),{dateRangeStart:p,dateRangeEnd:g,pagination:h,statusFilter:f,query:v}=m(),{lastRefresh:x}=Object(n.useContext)(E.a),S=Object(c.useSelector)(fa.c),M=Object(c.useSelector)(B.t);return function(e){const t=Object(u.useHistory)();Object(n.useEffect)((()=>{(function(e){if(!e||!e.body||"Bad Request"!==e.body.error||!e.body.message)return!1;const{message:t}=e.body;return pp(t,"search_phase_execution_exception")||pp(t,"Please use a keyword field instead.")||pp(t,"set fielddata=true")})(e)&&t.push(o.n)}),[e,t])}(M.error),Object(n.useEffect)((()=>{a((()=>d(Object(b.r)({dateRangeStart:p,dateRangeEnd:g,filters:t,pageSize:l,pagination:h,statusFilter:f,query:v}))))}),[d,p,g,t,a,x,l,h,f,v]),Object(n.useEffect)((()=>{d(fe.k.get())}),[d]),Object(n.useEffect)((()=>{d(fe.j.get())}),[d]),Object(n.useEffect)((()=>{S&&S.forEach((e=>{setTimeout((()=>{d(Object(b.b)(e))}),5e3)}))}),[d,S]),i.a.createElement(dp,y()({},e,{monitorList:M,pageSize:l,setPageSize:r,refreshedMonitorIds:S,isPending:s}))};var Ep=a(67),bp=a(264);const fp="SYNTHETICS_INTEGRATION_DEPRECATION_HAS_BEEN_DISMISSED",yp=()=>{const e=Object(c.useSelector)(B.t),t="true"===window.sessionStorage.getItem(fp),{data:a,loading:s}=Object(h.useFetcher)((()=>{if(!t&&e.isLoaded)return(async()=>await Ep.a.get(o.a.SYNTHETICS_HAS_INTEGRATION_MONITORS))()}),[e.isLoaded]),l=!s&&a&&a.hasIntegrationMonitors,[r,u]=Object(n.useState)(Boolean(l&&!t));return Object(n.useEffect)((()=>{u(Boolean(l&&!t))}),[l,t]),r?i.a.createElement(i.a.Fragment,null,i.a.createElement(bp.a,{handleDismissDeprecationNotice:()=>{window.sessionStorage.setItem(fp,"true"),u(!1)}}),i.a.createElement(d.EuiSpacer,{size:"s"})):null},vp=({total:e})=>{const t=1===e?r.i18n.translate("xpack.synthetics.snapshot.monitor",{defaultMessage:"Monitor"}):r.i18n.translate("xpack.synthetics.snapshot.monitors",{defaultMessage:"Monitors"});return i.a.createElement(d.EuiTitle,{size:"s"},i.a.createElement("h2",null,e," ",t))},xp=({height:e})=>{const{count:t,loading:a}=(()=>{const{dateRangeStart:e,dateRangeEnd:t,query:a}=Object(A.e)(),{lastRefresh:i}=Object(n.useContext)(E.a),s=Object(c.useSelector)(B.f),{data:l,loading:r}=Object(h.useFetcher)((()=>Object(Qr.q)({query:a,dateRangeStart:e,dateRangeEnd:t,filters:s})),[e,t,s,i,a]);return{count:l||{total:0,up:0,down:0},loading:r}})();return i.a.createElement(vi,{loading:a,height:e},i.a.createElement(vp,{total:t.total}),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(fi,{up:t.up,down:t.down,height:144}))},Sp="160px",Mp=({})=>i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiFlexGroup,{gutterSize:"l"},i.a.createElement(d.EuiFlexItem,{grow:2},i.a.createElement(xp,{height:Sp})),i.a.createElement(d.EuiFlexItem,{grow:10},i.a.createElement(Ni,{height:Sp,isResponsive:!0}))));var kp=a(288);const Op=Me()(d.EuiFlexItem).withConfig({displayName:"EuiFlexItemStyled",componentId:"sc-1qo5ouv-0"})(["&&{min-width:700px;@media only screen and (max-width:1128px){min-width:500px;}@media only screen and (max-width:630px){min-width:initial;}}"]),jp=()=>(Object(h.useTrackPageview)({app:"uptime",path:"overview"}),Object(h.useTrackPageview)({app:"uptime",path:"overview",delay:15e3}),D([{text:rg}]),i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{direction:"column",gutterSize:"none"},i.a.createElement(d.EuiFlexItem,{grow:!0},i.a.createElement(yp,null)),i.a.createElement(d.EuiFlexItem,null,i.a.createElement(d.EuiFlexGroup,{gutterSize:"xs",wrap:!0,responsive:!1},i.a.createElement(kp.a,null),i.a.createElement(Op,{grow:!0},i.a.createElement(Te.a,null))))),i.a.createElement(d.EuiSpacer,{size:"xs"}),i.a.createElement(Mp,null),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(hp,null))),wp=()=>{var e,t;const{checkGroupId:a}=Object(u.useParams)(),i=Object(c.useDispatch)();Object(n.useEffect)((()=>{i(Object(Qa.a)({checkGroup:a}))}),[a,i]);const s=Object(c.useSelector)((e=>e.journeys[a]));return{checkGroup:a,steps:null!==(e=null==s?void 0:s.steps)&&void 0!==e?e:[],details:null==s?void 0:s.details,loading:null!==(t=null==s?void 0:s.loading)&&void 0!==t&&t,error:null==s?void 0:s.error}},Ip=({timestamp:e,details:t})=>{const a=Object(u.useHistory)(),n=Object(d.useIsWithinMaxBreakpoint)("s");return i.a.createElement(d.EuiFlexGroup,{alignItems:"center",responsive:!1,gutterSize:"none"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{size:n?"xs":"m",iconType:"arrowLeft",isDisabled:!(null!=t&&t.previous),onClick:()=>{var e;a.push(`/journey/${null==t||null===(e=t.previous)||void 0===e?void 0:e.checkGroup}/steps`)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepList.previousCheck",defaultMessage:"Previous check"}))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,{size:n?"xs":"m",className:"eui-textNoWrap"},Pa(Ae()(e)))),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiButtonEmpty,{size:n?"xs":"m",iconType:"arrowRight",iconSide:"right",isDisabled:!(null!=t&&t.next),onClick:()=>{var e;a.push(`/journey/${null==t||null===(e=t.next)||void 0===e?void 0:e.checkGroup}/steps`)}},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.stepList.nextCheck",defaultMessage:"Next check"}))))},Cp=({checkGroup:e})=>i.a.createElement(d.EuiEmptyPrompt,{iconType:"cross",title:i.a.createElement("h2",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.title",defaultMessage:"There are no steps for this journey"})),body:i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.heading",defaultMessage:"This journey did not contain any steps."})),!!e&&i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.checkGroupField",defaultMessage:"The journey's check group is {codeBlock}.",values:{codeBlock:i.a.createElement("code",null,e)}})),i.a.createElement("p",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.synthetics.emptyJourney.message.footer",defaultMessage:"There is no further information to display."})))}),Tp=()=>{var e,t;const{details:a}=wp();return i.a.createElement(i.a.Fragment,null,(null==a||null===(e=a.journey)||void 0===e?void 0:e.monitor.name)||(null==a||null===(t=a.journey)||void 0===t?void 0:t.monitor.id))},Fp=()=>{const{details:e}=wp();return e?i.a.createElement(Ip,{timestamp:e.timestamp,details:e}):null},Lp=()=>{Yi(),Object(h.useTrackPageview)({app:"uptime",path:"syntheticCheckSteps"}),Object(h.useTrackPageview)({app:"uptime",path:"syntheticCheckSteps",delay:15e3});const{error:e,loading:t,steps:a,details:n,checkGroup:s}=wp();return Xi({details:n,activeStep:null==n?void 0:n.journey}),i.a.createElement(i.a.Fragment,null,i.a.createElement(ga,{data:a,loading:t,allStepsLoaded:!t,error:e}),(!a||0===a.length)&&!t&&i.a.createElement(Cp,{checkGroup:s}))},Ap=()=>{var e;const t=Object(A.f)(),a=Object(c.useSelector)(B.w),n=null==a||null===(e=a.monitor)||void 0===e?void 0:e.type,s="browser"===n;return i.a.createElement(i.a.Fragment,null,i.a.createElement(d.EuiFlexGroup,{wrap:!1,"data-test-subj":"monitorTitle"},i.a.createElement(d.EuiFlexItem,{grow:!1,style:{justifyContent:"center"}},i.a.createElement(np,{monitorId:t,selectedMonitor:a}))),i.a.createElement(d.EuiSpacer,{size:"s"}),i.a.createElement(d.EuiFlexGroup,{wrap:!1,gutterSize:"s",alignItems:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},s&&n&&i.a.createElement(d.EuiBadge,{color:"hollow"},(e=>{switch(e){case"http":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.http",defaultMessage:"HTTP ping"});case"tcp":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.tcp",defaultMessage:"TCP ping"});case"icmp":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.icmp",defaultMessage:"ICMP ping"});case"browser":return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.pingType.browser",defaultMessage:"Browser"});default:return""}})(n)," ",i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.disclaimer.description",defaultMessage:"(BETA)"}))),s&&i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiText,null,i.a.createElement(d.EuiLink,{href:"https://www.elastic.co/what-is/synthetic-monitoring",target:"_blank"},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorDetails.title.disclaimer.link",defaultMessage:"See more"}))))))},Pp=()=>{var e;const t=Object(A.f)(),a=Object(c.useSelector)(B.w),n=(null==a||null===(e=a.monitor)||void 0===e?void 0:e.name)||((e,t)=>{var a;return/^auto-(icmp|http|tcp|browser)-0X[A-F0-9]{16}.*/.test(e)&&(null==t||null===(a=t.url)||void 0===a?void 0:a.full)||e})(t,a);return D([{text:n}]),i.a.createElement("span",{className:"eui-textNoWrap"},n)},Dp=()=>{const[e,t]=Object(A.i)(),{commonlyUsedRanges:a}=Object(n.useContext)(E.c),{refreshApp:s}=Object(n.useContext)(E.a),{data:l}=Object(n.useContext)(E.e),r=null==l?void 0:l.query.timefilter.timefilter.getTime(),{autorefreshInterval:c,autorefreshIsPaused:u,dateRangeStart:m,dateRangeEnd:p}=e();Object(n.useEffect)((()=>{const{from:e,to:a}=null!=r?r:{};!((e,t)=>{const{DATE_RANGE_START:a,DATE_RANGE_END:n}=o.e;return e===a&&t===n})(m,p)||e===m&&a===p?e===m&&a===p||null==l||l.query.timefilter.timefilter.setTime({from:m,to:p}):t({dateRangeStart:e,dateRangeEnd:a})}),[]);const g=a?a.map((({from:e,to:t,display:a})=>({start:e,end:t,label:a}))):o.e.COMMONLY_USED_DATE_RANGES;return i.a.createElement(d.EuiSuperDatePicker,{start:m,end:p,commonlyUsedRanges:g,isPaused:u,refreshInterval:c,onTimeChange:({start:e,end:a})=>{var n,i;null!=l&&null!==(n=l.query)&&void 0!==n&&null!==(i=n.timefilter)&&void 0!==i&&i.timefilter&&(null==l||l.query.timefilter.timefilter.setTime({from:e,to:a})),t({dateRangeStart:e,dateRangeEnd:a}),s()},onRefresh:s,onRefreshChange:({isPaused:e,refreshInterval:a})=>{t({autorefreshInterval:void 0===a?c:a,autorefreshIsPaused:e})}})},Rp=()=>{const{refreshApp:e}=Object(n.useContext)(E.a);return i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1,"data-test-subj":"certificatesRefreshButton"},i.a.createElement(d.EuiFlexGroup,{responsive:!1,gutterSize:"s"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiHideFor,{sizes:["xs"]},i.a.createElement(d.EuiButton,{fill:!0,iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"},mr)),i.a.createElement(d.EuiShowFor,{sizes:["xs"]},i.a.createElement(d.EuiButtonEmpty,{iconType:"refresh",onClick:()=>{e()},"data-test-subj":"superDatePickerApplyTimeButton"})))))},Np=()=>{const e=Object(c.useSelector)(Cm.b);return i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.certificates.heading",defaultMessage:"TLS Certificates ({total})",values:{total:i.a.createElement("span",{"data-test-subj":"uptimeCertTotal"},null!=e?e:0)}})},Bp=()=>i.a.createElement(d.EuiEmptyPrompt,{body:i.a.createElement(n.Fragment,null,i.a.createElement(d.EuiLoadingSpinner,{size:"xl"}),i.a.createElement(d.EuiSpacer,null),i.a.createElement(d.EuiTitle,{size:"l"},i.a.createElement("h2",null,r.i18n.translate("xpack.synthetics.emptyState.loadingMessage",{defaultMessage:"Loading…"}))))}),_p=({errors:e})=>{const t=e.find((e=>e.message&&e.message.includes("unauthorized")));return i.a.createElement(d.EuiFlexGroup,{justifyContent:"center"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiPanel,{hasBorder:!0},i.a.createElement(d.EuiEmptyPrompt,{iconType:"securityApp",iconColor:"subdued",title:i.a.createElement(d.EuiTitle,{size:"m"},t?i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.emptyStateError.notAuthorized",{defaultMessage:"You are not authorized to view Uptime data, please contact your system administrator."})):i.a.createElement("h3",null,r.i18n.translate("xpack.synthetics.emptyStateError.title",{defaultMessage:"Error"}))),body:i.a.createElement(n.Fragment,null,!t&&e.map((e=>{var t,a;return i.a.createElement("p",{key:(null===(t=e.body)||void 0===t?void 0:t.message)||e.message},(null===(a=e.body)||void 0===a?void 0:a.message)||e.message)})))}))))};var zp=a(244);const Hp=({path:e,pageHeader:t,children:a,...s})=>{const{services:{observability:l}}=Object(p.useKibana)(),u=l.navigation.PageTemplate,d=function(){const{basePath:e}=Object(n.useContext)(E.c),{services:{docLinks:t}}=Object(p.useKibana)(),{data:a}=Object(c.useSelector)(B.j);if(a&&!a.indexExists)return{solution:r.i18n.translate("xpack.synthetics.noDataConfig.solutionName",{defaultMessage:"Observability"}),action:{beats:{title:r.i18n.translate("xpack.synthetics.noDataConfig.beatsCard.title",{defaultMessage:"Add monitors with Heartbeat"}),description:r.i18n.translate("xpack.synthetics.noDataConfig.beatsCard.description",{defaultMessage:"Proactively monitor the availability of your sites and services. Receive alerts and resolve issues faster to optimize your users experience."}),href:e+"/app/home#/tutorial/uptimeMonitors"}},docsLink:t.links.observability.guide}}(),{loading:m,error:g,data:b}=Object(zp.a)(),{inspectorAdapters:f}=Object(h.useInspectorContext)();if(Object(n.useEffect)((()=>{f.requests.reset()}),[f.requests]),g)return i.a.createElement(_p,{errors:[g]});const v=e===o.z||e===o.b,x=m&&v&&!b;return i.a.createElement(i.a.Fragment,null,i.a.createElement(u,y()({pageHeader:t,"data-test-subj":d?"data-missing":void 0,noDataConfig:v&&!m?d:void 0,isPageDataLoaded:!1===m&&v},s),x&&i.a.createElement(Bp,null),i.a.createElement("div",{style:{visibility:x?"hidden":"initial"},"data-test-subj":d?"data-missing":void 0},a)))},Up=()=>{const e=Object(c.useDispatch)();return Object(n.useEffect)((()=>{e(b.K.get())}),[e]),Object(c.useSelector)(B.H)},$p=()=>{var e,t,a,s;const l=Object(u.useHistory)(),[r,c]=Object(n.useState)(!1),[m,g]=Object(n.useState)(!1),{error:h,loading:E,enablement:b,disableSynthetics:f,enableSynthetics:y,totalMonitors:v}=zc(),{isEnabled:x,canEnable:S,areApiKeysEnabled:M}=b||{},{locations:k}=kc();Object(n.useEffect)((()=>{r&&x?(c(!1),pt.a.toasts.addSuccess({title:Jp,toastLifeTimeMs:3e3})):m&&!x?(g(!1),pt.a.toasts.addSuccess({title:Yp,toastLifeTimeMs:3e3})):r&&h?(c(!1),pt.a.toasts.addDanger({title:Kp,toastLifeTimeMs:3e3})):m&&h&&pt.a.toasts.addDanger({title:Vp,toastLifeTimeMs:3e3})}),[x,r,m,h]);const O=()=>x?S:x?void 0:S&&(v||0)>0,{isAllowed:j,loading:w}=Up(),I=w||E,C=Object(p.useKibana)().services,T=!(null==C||null===(e=C.application)||void 0===e||!e.capabilities.uptime.save),F=!(null==C||null===(t=C.fleet)||void 0===t||!t.authz.integrations.writeIntegrationPolicies),L=null===(a=Object(p.useKibana)().services)||void 0===a||null===(s=a.cloud)||void 0===s?void 0:s.isCloudEnabled,A=Boolean(L)||F;return i.a.createElement(d.EuiFlexGroup,{alignItems:"center"},i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1},O()&&!I&&i.a.createElement(d.EuiToolTip,{content:x?x?Qp:M?"":eg:Xp},i.a.createElement(d.EuiSwitch,{checked:Boolean(x),label:qp,disabled:I||!M,onChange:()=>{x?(g(!0),f()):(c(!0),y())},"data-test-subj":"syntheticsEnableSwitch"})),O()&&I&&i.a.createElement(d.EuiSwitch,{checked:Boolean(x),label:qp,disabled:!0,onChange:()=>{}})),i.a.createElement(d.EuiFlexItem,{style:{alignItems:"flex-end"},grow:!1},i.a.createElement(d.EuiToolTip,{content:x||S?A?"":Gp:Zp},i.a.createElement(d.EuiButton,{isLoading:I,fill:!0,isDisabled:!(T&&x&&j&&A&&0!==k.length),iconType:"plus","data-test-subj":"syntheticsAddMonitorBtn",href:l.createHref({pathname:o.r})},Wp))))},Gp=r.i18n.translate("xpack.synthetics.monitorManagement.privateLocationsNotAllowedMessage",{defaultMessage:"You do not have permission to add monitors to private locations. Contact your administrator to request access."}),Wp=r.i18n.translate("xpack.synthetics.monitorManagement.addMonitorLabel",{defaultMessage:"Add monitor"}),qp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableLabel",{defaultMessage:"Enable"}),Kp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnabledFailure",{defaultMessage:"Monitor Management was not able to be enabled. Please contact support."}),Vp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledFailure",{defaultMessage:"Monitor Management was not able to be disabled. Please contact support."}),Jp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableSuccess",{defaultMessage:"Monitor Management enabled successfully."}),Yp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabledSuccess",{defaultMessage:"Monitor Management disabled successfully."}),Zp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisabled",{defaultMessage:"Monitor Management is currently disabled. Please contact an administrator to enable Monitor Management."}),Xp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsEnableToolTip",{defaultMessage:"Enable Monitor Management to create lightweight and real-browser monitors from locations around the world."}),Qp=r.i18n.translate("xpack.synthetics.monitorManagement.syntheticsDisableToolTip",{defaultMessage:"Disabling Monitor Management will immediately stop the execution of monitors in all test locations and prevent the creation of new monitors."}),eg=r.i18n.translate("xpack.synthetics.monitorManagement.apiKeysDisabledToolTip",{defaultMessage:"API Keys are disabled for this cluster. Monitor Management requires the use of API keys to write back to your Elasticsearch cluster. To enable API keys, please contact an administrator."}),tg=({children:e})=>{const{isAllowed:t,signupUrl:a,loading:n}=Up();return!1===t?i.a.createElement(d.EuiEmptyPrompt,{title:i.a.createElement("h2",null,ng),body:i.a.createElement("p",null,sg),actions:[i.a.createElement(d.EuiButton,{color:"primary",fill:!0,isDisabled:!a,href:null!=a?a:void 0},ag)]}):i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(d.EuiEmptyPrompt,{icon:i.a.createElement(d.EuiLoadingLogo,{logo:"logoKibana",size:"xl"}),title:i.a.createElement("h2",null,ig)}),i.a.createElement("div",{style:{visibility:n?"hidden":"initial"}},e))},ag=r.i18n.translate("xpack.synthetics.monitorManagement.requestAccess",{defaultMessage:"Request access"}),ng=r.i18n.translate("xpack.synthetics.monitorManagement.label",{defaultMessage:"Monitor Management"}),ig=r.i18n.translate("xpack.synthetics.monitorManagement.loading.label",{defaultMessage:"Loading Monitor Management"}),sg=r.i18n.translate("xpack.synthetics.monitorManagement.publicBetaDescription",{defaultMessage:"We've got a brand new app on the way. In the meantime, we're excited to give you early access to our globally managed testing infrastructure. This will allow you to upload synthetic monitors using our new point and click script recorder and manage your monitors with a new UI."}),lg=r.i18n.translate("xpack.synthetics.routes.legacyBaseTitle",{defaultMessage:"Uptime - Kibana"}),rg=r.i18n.translate("xpack.synthetics.overview.heading",{defaultMessage:"Monitors"}),og=({path:e,title:t,telemetryId:a})=>(Object(A.h)(a),Object(n.useEffect)((()=>{document.title=t}),[e,t]),null),cg=()=>{const e=[{title:r.i18n.translate("xpack.synthetics.monitorRoute.title",{defaultMessage:"Monitor | {baseTitle}",values:{baseTitle:lg}}),path:o.x,component:Zi,dataTestSubj:"uptimeMonitorPage",telemetryId:A.a.Monitor,pageHeader:{children:i.a.createElement(Ap,null),pageTitle:i.a.createElement(Pp,null),rightSideItems:[i.a.createElement(Dp,null)]}},{title:r.i18n.translate("xpack.synthetics.settingsRoute.title",{defaultMessage:"Settings | {baseTitle}",values:{baseTitle:lg}}),path:o.C,component:Pr,dataTestSubj:"uptimeSettingsPage",telemetryId:A.a.Settings,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.settings.heading",defaultMessage:"Uptime settings"})},bottomBar:i.a.createElement(jr,null),bottomBarProps:{paddingSize:"m"}},{title:r.i18n.translate("xpack.synthetics.certificatesRoute.title",{defaultMessage:"Certificates | {baseTitle}",values:{baseTitle:lg}}),path:o.b,component:Lm,dataTestSubj:"uptimeCertificatesPage",telemetryId:A.a.Certificates,pageHeader:{pageTitle:i.a.createElement(Np,null),rightSideItems:[i.a.createElement(Rp,null)]}},{title:r.i18n.translate("xpack.synthetics.stepDetailRoute.title",{defaultMessage:"Synthetics detail | {baseTitle}",values:{baseTitle:lg}}),path:o.G,component:rr,dataTestSubj:"uptimeStepDetailPage",telemetryId:A.a.StepDetail,pageHeader:{children:i.a.createElement(lr,null),pageTitle:i.a.createElement(ir,null),rightSideItems:[i.a.createElement(sr,null)]}},{title:lg,path:o.L,component:Lp,dataTestSubj:"uptimeSyntheticCheckStepsPage",telemetryId:A.a.SyntheticCheckStepsPage,pageHeader:{pageTitle:i.a.createElement(Tp,null),rightSideItems:[i.a.createElement(Fp,null)]}},{title:lg,path:o.z,component:jp,dataTestSubj:"uptimeOverviewPage",telemetryId:A.a.Overview,pageHeader:{pageTitle:rg,rightSideItems:[i.a.createElement(Dp,null)]}},{title:r.i18n.translate("xpack.synthetics.mappingErrorRoute.title",{defaultMessage:"Synthetics | mapping error"}),path:o.n,component:R,dataTestSubj:"uptimeMappingErrorPage",telemetryId:A.a.MappingError,pageHeader:{pageTitle:i.a.createElement("div",null,i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.mappingErrorRoute.pageHeader.title",defaultMessage:"Mapping error"})),rightSideItems:[]}},{title:r.i18n.translate("xpack.synthetics.addMonitorRoute.title",{defaultMessage:"Add Monitor | {baseTitle}",values:{baseTitle:lg}}),path:o.r,component:()=>i.a.createElement(tg,null,i.a.createElement(Tc,null)),dataTestSubj:"uptimeMonitorAddPage",telemetryId:A.a.MonitorAdd,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.addMonitor.pageHeader.title",defaultMessage:"Add Monitor"}),rightSideItems:[i.a.createElement(um,null),i.a.createElement(O,null)]},bottomBar:i.a.createElement(cm,null),bottomBarProps:{paddingSize:"m"}},{title:r.i18n.translate("xpack.synthetics.editMonitorRoute.title",{defaultMessage:"Edit Monitor | {baseTitle}",values:{baseTitle:lg}}),path:o.s,component:()=>i.a.createElement(tg,null,i.a.createElement(_c,null)),dataTestSubj:"uptimeMonitorEditPage",telemetryId:A.a.MonitorEdit,pageHeader:{pageTitle:i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.editMonitor.pageHeader.title",defaultMessage:"Edit Monitor"}),rightSideItems:[i.a.createElement(um,null),i.a.createElement(O,null)]},bottomBar:i.a.createElement(cm,null),bottomBarProps:{paddingSize:"m"}},{title:r.i18n.translate("xpack.synthetics.monitorManagementRoute.title",{defaultMessage:"Monitor Management | {baseTitle}",values:{baseTitle:lg}}),path:o.v+"/:type?",component:()=>i.a.createElement(tg,null,i.a.createElement(lm,null)),dataTestSubj:"uptimeMonitorManagementListPage",telemetryId:A.a.MonitorManagement,pageHeader:{pageTitle:i.a.createElement(d.EuiFlexGroup,{alignItems:"center",gutterSize:"xs"},i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.monitorManagement.pageHeader.title",defaultMessage:"Monitor Management"})),i.a.createElement(d.EuiFlexItem,{grow:!1},i.a.createElement(d.EuiBetaBadge,{label:"Beta",tooltipContent:r.i18n.translate("xpack.synthetics.routes.monitorManagement.betaLabel",{defaultMessage:"This functionality is in beta and is subject to change. The design and code is less mature than official generally available features and is being provided as-is with no warranties. Beta features are not subject to the support service level agreement of official generally available features."})}))),rightSideItems:[i.a.createElement($p,null),i.a.createElement(um,null),i.a.createElement(O,null)]}}],{addInspectorRequest:t}=Object(h.useInspectorContext)();return Ep.a.addInspectorRequest=t,i.a.createElement(u.Switch,null,e.map((({title:e,path:t,component:a,dataTestSubj:n,telemetryId:s,pageHeader:l,...r})=>i.a.createElement(u.Route,{path:t,key:s,exact:!0},i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":n},i.a.createElement(og,{title:e,path:t,telemetryId:s}),i.a.createElement(Hp,y()({path:t,pageHeader:l},r),i.a.createElement(a,null)))))),i.a.createElement(u.Route,{component:Dr}))};a(174);var ug=a(115);const dg=r.i18n.translate("xpack.synthetics.alertDropdown.noWritePermissions",{defaultMessage:"You need read-write access to Uptime to create alerts in this app."}),mg=({alertOptions:e,setAlertFlyoutVisible:t})=>{var a,s,l;const[r,o]=Object(n.useState)(!1),c=Object(p.useKibana)(),{services:{observability:u}}=Object(p.useKibana)(),m=u.useRulesLink(),g=null!==(a=null===(s=c.services.application)||void 0===s||null===(l=s.capabilities.uptime)||void 0===l?void 0:l.save)&&void 0!==a&&a,h={"aria-label":ug.J.toggleMonitorStatusAriaLabel,"data-test-subj":"xpack.synthetics.toggleAlertFlyout",name:ug.J.toggleMonitorStatusContent,onClick:()=>{t(N.a.MONITOR_STATUS),o(!1)}},E={"aria-label":ug.J.toggleTlsAriaLabel,"data-test-subj":"xpack.synthetics.toggleTlsAlertFlyout",name:ug.J.toggleTlsContent,onClick:()=>{t(N.a.TLS),o(!1)}},b={"aria-label":ug.J.navigateToAlertingUIAriaLabel,"data-test-subj":"xpack.synthetics.navigateToAlertingUi",name:i.a.createElement(d.EuiLink,{color:"text",href:m.href},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.navigateToAlertingButton.content",defaultMessage:"Manage rules"})),icon:"tableOfContents"};let f,y=[];return e?e.forEach((e=>{e===N.a.MONITOR_STATUS?y.push(h):e===N.a.TLS&&y.push(E)})):y=[h,E],1===y.length&&(y[0].icon="bell"),f=1===y.length?[{id:0,items:[...y,b]}]:[{id:0,items:[{"aria-label":ug.J.openAlertContextPanelAriaLabel,"data-test-subj":"xpack.synthetics.openAlertContextPanel",name:ug.J.openAlertContextPanelLabel,icon:"bell",panel:1,toolTipContent:g?null:dg,disabled:!g},b]},{id:1,title:ug.J.toggleAlertFlyoutButtonLabel,items:y}],i.a.createElement(d.EuiPopover,{button:i.a.createElement(d.EuiHeaderLink,{color:"text","aria-label":ug.J.toggleButtonAriaLabel,"data-test-subj":"xpack.synthetics.alertsPopover.toggleButton",iconType:"arrowDown",iconSide:"right",onClick:()=>o(!r)},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.alerts.toggleAlertFlyoutButtonText",defaultMessage:"Alerts and rules"})),closePopover:()=>o(!1),isOpen:r,ownFocus:!0,panelPaddingSize:"none"},i.a.createElement(d.EuiContextMenu,{initialPanelId:0,panels:f}))},pg=({alertFlyoutVisible:e,alertTypeId:t,setAlertFlyoutVisibility:a})=>{const{triggersActionsUi:s}=Object(p.useKibana)().services,l=Object(n.useCallback)((()=>a(!1)),[a]),r=Object(n.useMemo)((()=>s.getAddAlertFlyout({consumer:"uptime",onClose:l,ruleTypeId:t,canChangeTrigger:!t})),[l,t]);return i.a.createElement(i.a.Fragment,null,e&&r)},gg=e=>{const t=Object(c.useDispatch)();return i.a.createElement(mg,y()({},e,{setAlertFlyoutVisible:e=>{"string"==typeof e?(t(Object(b.O)(e)),t(Object(b.P)(!0))):t(Object(b.P)(e))}}))},hg=()=>{const e=Object(c.useDispatch)(),t=Object(c.useSelector)(B.A),a=Object(c.useSelector)(B.z);return i.a.createElement(pg,{alertFlyoutVisible:t,alertTypeId:a,setAlertFlyoutVisibility:t=>e(Object(b.P)(t))})};var Eg=a(168);function bg(){const{services:{inspector:e,uiSettings:t}}=Object(p.useKibana)(),{isDev:a}=Object(Mt.c)(),{inspectorAdapters:n}=Object(h.useInspectorContext)();return(null==t?void 0:t.get(h.enableInspectEsQueries))||a?i.a.createElement(d.EuiHeaderLink,{color:"primary",onClick:()=>{e.open(n)}},r.i18n.translate("xpack.synthetics.inspectButtonText",{defaultMessage:"Inspect"})):null}const fg=()=>{const e=Object(u.useHistory)();return i.a.createElement(d.EuiHeaderLink,{"aria-label":yg,color:"text","data-test-subj":"syntheticsManagementPageLink",href:e.createHref({pathname:o.v})},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.manageMonitors",defaultMessage:"Monitor Management"}))},yg=r.i18n.translate("xpack.synthetics.page_header.manageLink.label",{defaultMessage:"Navigate to the Uptime Monitor Management page"}),vg=r.i18n.translate("xpack.synthetics.addDataButtonLabel",{defaultMessage:"Add data"}),xg=r.i18n.translate("xpack.synthetics.analyzeDataButtonLabel",{defaultMessage:"Explore data"}),Sg=r.i18n.translate("xpack.synthetics.analyzeDataButtonLabel.message",{defaultMessage:"Explore Data allows you to select and filter result data in any dimension and look for the cause or impact of performance problems."});function Mg(){var e,t,a,n,s;const l=Object(p.useKibana)(),{basePath:m}=Object(Mt.c)(),g=Object(A.e)(),{dateRangeStart:E,dateRangeEnd:b}=g,f=Object(u.useHistory)(),y=Object(c.useSelector)(B.w),x=Object(u.useRouteMatch)(o.x),S=null==y||null===(e=y.monitor)||void 0===e?void 0:e.id,M=Object(h.createExploratoryViewUrl)({reportType:"kpi-over-time",allSeries:[{dataType:"synthetics",seriesType:"area",selectedMetricField:"monitor.duration.us",time:{from:E,to:b},breakdown:S?"observer.geo.name":"monitor.type",reportDefinitions:{"monitor.name":null!=y&&null!==(t=y.monitor)&&void 0!==t&&t.name&&!0===(null==x?void 0:x.isExact)?[null==y||null===(a=y.monitor)||void 0===a?void 0:a.name]:[],"url.full":["ALL_VALUES"]},name:S?`${S}-response-duration`:"All monitors response duration"}]},m);return i.a.createElement(d.EuiHeaderLinks,{gutterSize:"xs"},i.a.createElement(fg,null),i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.settingsLink.label",{defaultMessage:"Navigate to the Uptime settings page"}),color:"text","data-test-subj":"settings-page-link",href:f.createHref({pathname:o.C,search:L(g,!0)})},i.a.createElement(v.FormattedMessage,{id:"xpack.synthetics.page_header.settingsLink",defaultMessage:"Settings"})),i.a.createElement(gg,null),i.a.createElement(d.EuiToolTip,{position:"top",content:i.a.createElement("p",null,Sg)},i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.analyzeData.label",{defaultMessage:'Navigate to the "Explore Data" view to visualize Synthetics/User data'}),href:M,color:"text",iconType:"visBarVerticalStacked","data-test-subj":"uptimeExploreDataButton"},xg)),i.a.createElement(d.EuiHeaderLink,{"aria-label":r.i18n.translate("xpack.synthetics.page_header.addDataLink.label",{defaultMessage:"Navigate to a tutorial about adding Uptime data"}),href:null===(n=l.services)||void 0===n||null===(s=n.application)||void 0===s?void 0:s.getUrlForApp("/home#/tutorial/uptimeMonitors"),color:"primary",iconType:"indexOpen"},vg),i.a.createElement(bg,null))}const kg=({appMountParameters:e})=>i.a.createElement(h.HeaderMenuPortal,{setHeaderActionMenu:e.setHeaderActionMenu,theme$:e.theme$},i.a.createElement(Mg,null));var Og=a(94);const jg=e=>{const{basePath:t,canSave:a,core:s,darkMode:l,i18n:o,plugins:f,renderGlobalHelpControls:y,setBadge:v,startPlugins:x,appMountParameters:S}=e;return Object(n.useEffect)((()=>{y(),v(a?void 0:{text:r.i18n.translate("xpack.synthetics.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:r.i18n.translate("xpack.synthetics.badge.readOnly.tooltip",{defaultMessage:"Unable to save"}),iconType:"glasses"})}),[a,y,v]),pt.a.core=s,pt.a.theme=e.appMountParameters.theme$,Eg.b.dispatch(Object(b.Q)(t)),i.a.createElement(d.EuiErrorBoundary,null,i.a.createElement(o.Context,null,i.a.createElement(p.KibanaThemeProvider,{theme$:e.appMountParameters.theme$,modify:{breakpoint:{xxl:1600,xxxl:2e3}}},i.a.createElement(c.Provider,{store:Eg.b},i.a.createElement(p.KibanaContextProvider,{services:{...s,...f,storage:Eg.a,data:x.data,fleet:x.fleet,inspector:x.inspector,triggersActionsUi:x.triggersActionsUi,observability:x.observability,cases:x.cases}},i.a.createElement(u.Router,{history:S.history},i.a.createElement(g.EuiThemeProvider,{darkMode:l},i.a.createElement(E.b,null,i.a.createElement(E.d,e,i.a.createElement(E.h,{darkMode:l},i.a.createElement(E.f,x,i.a.createElement(Og.a,{dataViews:x.dataViews},i.a.createElement("div",{className:m.APP_WRAPPER_CLASS,"data-test-subj":"uptimeApp"},i.a.createElement(p.RedirectAppLinks,{className:m.APP_WRAPPER_CLASS,application:s.application},i.a.createElement(h.InspectorContextProvider,null,i.a.createElement(hg,null),i.a.createElement(cg,null),i.a.createElement(kg,{appMountParameters:S}))))))))))))))))},wg=e=>i.a.createElement(jg,e);function Ig(e,t,a,n,s){var c;const{application:{capabilities:u},chrome:{setBadge:d,setHelpExtension:m},docLinks:p,http:{basePath:g},i18n:h}=e,{apm:E,infrastructure:b,logs:f}=((e,t)=>t.reduce(((t,a)=>(t[a]=e[a]&&!0===e[a].show,t)),{}))(u,o.m),y={isDev:s,plugins:t,canSave:null!==(c=u.uptime.save)&&void 0!==c&&c,core:e,i18n:h,startPlugins:a,basePath:g.get(),darkMode:e.uiSettings.get(o.g),commonlyUsedRanges:e.uiSettings.get(o.h),isApmAvailable:E,isInfraAvailable:b,isLogsAvailable:f,renderGlobalHelpControls:()=>m({appName:r.i18n.translate("xpack.synthetics.legacyHeader.appName",{defaultMessage:"Uptime"}),links:[{linkType:"documentation",href:`${p.links.observability.monitorUptime}`},{linkType:"discuss",href:"https://discuss.elastic.co/c/uptime"}]}),setBadge:d,appMountParameters:n,setBreadcrumbs:e.chrome.setBreadcrumbs};return l.a.render(i.a.createElement(wg,y),n.element),()=>{l.a.unmountComponentAtNode(n.element)}}}}]);