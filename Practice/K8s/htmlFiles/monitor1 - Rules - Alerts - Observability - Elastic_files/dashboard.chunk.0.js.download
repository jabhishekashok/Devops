(window.dashboard_bundle_jsonpfunction=window.dashboard_bundle_jsonpfunction||[]).push([[0],{54:function(e,t,a){"use strict";a.r(t),a.d(t,"pluginServices",(function(){return f})),a.d(t,"registry",(function(){return P}));var r=a(37),s=a(69),i=a(3),n=a(0),o=a(42),c=a.n(o),d=a(11),l=a(21),u=a(40),g=a(9),h=a(70);const v=e=>{if(e&&!Object(d.persistableControlGroupInputIsEqual)(e,Object(d.getDefaultControlGroupInput)()))return Object(d.controlGroupInputToRawControlGroupAttributes)(e)},b=e=>c()(e).isValid()?c()(e).utc().format("YYYY-MM-DDTHH:mm:ss.SSS[Z]"):e;var S=a(80);const p={dashboardSavedObject:new r.PluginServiceProvider((({coreStart:e},t)=>{const{savedObjects:{client:a}}=e;return{loadDashboardStateFromSavedObject:({id:e})=>Object(S.a)({id:e,savedObjectsClient:a,...t}),saveDashboardStateToSavedObject:({currentState:e,saveOptions:r,lastSavedId:s})=>(async({data:e,embeddable:t,lastSavedId:a,saveOptions:r,currentState:s,savedObjectsClient:o,savedObjectsTagging:c,dashboardSessionStorage:d,notifications:{toasts:S},initializerContext:{kibanaVersion:p}})=>{const{search:f,query:{timefilter:{timefilter:P}}}=e,{tags:m,query:w,title:y,panels:O,filters:T,timeRestore:j,description:C,controlGroupInput:D,useMargins:I,syncColors:E,syncCursor:M,syncTooltips:F,hidePanelTitles:N}=s,{searchSourceJSON:k,searchSourceReferences:A}=await(async()=>{const e=await f.searchSource.create();e.setField("filter",T.filter((e=>!Object(l.isFilterPinned)(e)))),e.setField("query",w);const t=e.getSerializedFields(),[a,r]=Object(u.extractSearchSourceReferences)(t);return{searchSourceReferences:r,searchSourceJSON:JSON.stringify(a)}})(),R=JSON.stringify({useMargins:I,syncColors:E,syncCursor:M,syncTooltips:F,hidePanelTitles:N}),L=JSON.stringify(Object(g.b)(O,p)),{from:B,to:x}=P.getTime(),G=j?b(B):void 0,V=j?b(x):void 0,U=j?Object(i.pick)(P.getRefreshInterval(),["display","pause","section","value"]):void 0,z={controlGroupInput:v(D),kibanaSavedObjectMeta:{searchSourceJSON:k},description:null!=C?C:"",refreshInterval:U,timeRestore:j,optionsJSON:R,panelsJSON:L,timeFrom:G,title:y,timeTo:V,version:1},{attributes:W,references:J}=Object(g.f)({attributes:z,references:A},{embeddablePersistableStateService:t}),$=c.updateTagsReferences?c.updateTagsReferences(J,m):J,q=r.saveAsCopy?void 0:a;try{const{id:e}=await o.create(n.g,W,{id:q,overwrite:!0,references:$});return e&&(S.addSuccess({title:h.a.getSuccessString(s.title),"data-test-subj":"saveDashboardSuccess"}),e!==a)?(d.clearState(a),{redirectRequired:!0,id:e}):{id:e}}catch(e){return S.addDanger({title:h.a.getFailureString(s.title,e.message),"data-test-subj":"saveDashboardFailure"}),{error:e}}})({saveOptions:r,lastSavedId:s,currentState:e,savedObjectsClient:a,...t}),findDashboards:{findSavedObjects:({hasReference:e,hasNoReference:t,search:r,size:s})=>async function({savedObjectsClient:e,hasReference:t,hasNoReference:a,search:r,size:s}){const{total:i,savedObjects:o}=await e.find({type:n.g,search:r?`${r}*`:void 0,searchFields:["title^3","description"],defaultSearchOperator:"AND",perPage:s,hasReference:t,hasNoReference:a,page:1});return{total:i,hits:o}}({hasReference:e,hasNoReference:t,search:r,size:s,savedObjectsClient:a}),findByIds:e=>async function(e,t){const{savedObjects:a}=await e.bulkGet(t.map((e=>({id:e,type:n.g}))));return a.map((e=>{if(e.error)return{status:"error",error:e.error,id:e.id};const{attributes:t,id:a}=e;return{id:a,status:"success",attributes:t}}))}(a,e),findByTitle:e=>async function(e,t){const a=(await t.find({search:`"${e}"`,searchFields:["title"],type:"dashboard"})).savedObjects.filter((t=>t.attributes.title.toLowerCase()===e.toLowerCase()));if(1===a.length)return{id:a[0].id}}(e,a)},checkForDuplicateDashboardTitle:e=>async function({title:e,copyOnSave:t,lastSavedTitle:a,onTitleDuplicate:r,isTitleDuplicateConfirmed:s},i){return!!s||e===a&&!t||!(await i.find({perPage:10,fields:["title"],search:`"${e}"`,searchFields:["title"],type:n.g})).savedObjects.find((t=>t.get("title").toLowerCase()===e.toLowerCase()))||(null==r||r(),!1)}(e,a),savedObjectsClient:a}}),["dashboardSessionStorage","savedObjectsTagging","initializerContext","screenshotMode","notifications","embeddable","spaces","data"]),dashboardSessionStorage:new r.PluginServiceProvider(s.b,["notifications","spaces"]),analytics:new r.PluginServiceProvider((({coreStart:e})=>{const{analytics:{reportEvent:t}}=e;return{reportEvent:t}})),application:new r.PluginServiceProvider((({coreStart:e})=>{const{application:{currentAppId$:t,navigateToApp:a,navigateToUrl:r,getUrlForApp:s,capabilities:{advancedSettings:i,maps:n,navLinks:o,visualize:c}}}=e;return{currentAppId$:t,navigateToApp:a,navigateToUrl:r,getUrlForApp:s,capabilities:{advancedSettings:i,maps:n,navLinks:o,visualize:c}}})),chrome:new r.PluginServiceProvider((({coreStart:e})=>{const{chrome:{docTitle:t,setBadge:a,getIsVisible$:r,recentlyAccessed:s,setBreadcrumbs:i,setHelpExtension:n,setIsVisible:o}}=e;return{docTitle:t,setBadge:a,getIsVisible$:r,recentlyAccessed:s,setBreadcrumbs:i,setHelpExtension:n,setIsVisible:o}})),coreContext:new r.PluginServiceProvider((({coreStart:e})=>{const{executionContext:t,i18n:{Context:a}}=e;return{executionContext:t,i18nContext:a}})),dashboardCapabilities:new r.PluginServiceProvider((({coreStart:e})=>{const{application:{capabilities:{dashboard:t,maps:a,visualize:r}}}=e;return{show:Boolean(t.show),saveQuery:Boolean(t.saveQuery),createNew:Boolean(t.createNew),mapsCapabilities:{save:Boolean(null==a?void 0:a.save)},createShortUrl:Boolean(t.createShortUrl),showWriteControls:Boolean(t.showWriteControls),visualizeCapabilities:{save:Boolean(null==r?void 0:r.save)},storeSearchSession:Boolean(t.storeSearchSession)}})),data:new r.PluginServiceProvider((({startPlugins:e})=>{const{data:{dataViews:t,fieldFormats:a,query:r,search:s}}=e;return{dataViews:t,fieldFormats:a,query:r,search:s}})),dataViewEditor:new r.PluginServiceProvider((({startPlugins:e})=>{const{dataViewEditor:{openEditor:t,userPermissions:a}}=e;return{openEditor:t,userPermissions:a}})),documentationLinks:new r.PluginServiceProvider((({coreStart:e})=>{const{docLinks:{links:{kibana:t,indexPatterns:{introduction:a},dashboard:r}}}=e;return{indexPatternsDocLink:a,kibanaGuideDocLink:t.guide,dashboardDocLink:r.guide}})),embeddable:new r.PluginServiceProvider((({startPlugins:e})=>{const{embeddable:t}=e;return Object(i.pick)(t,["getEmbeddableFactory","getEmbeddableFactories","getStateTransfer","EmbeddablePanel","getAllMigrations","telemetry","extract","inject"])})),http:new r.PluginServiceProvider((({coreStart:e})=>{const{http:{basePath:t}}=e;return{basePath:t}})),initializerContext:new r.PluginServiceProvider((({initContext:e})=>{const{env:{packageInfo:{version:t}},config:{get:a}}=e;return{kibanaVersion:t,allowByValueEmbeddables:a().allowByValueEmbeddables}})),navigation:new r.PluginServiceProvider((({startPlugins:e})=>{const{navigation:{ui:{TopNavMenu:t}}}=e;return{TopNavMenu:t}})),notifications:new r.PluginServiceProvider((({coreStart:e})=>{const{notifications:{toasts:t}}=e;return{toasts:t}})),overlays:new r.PluginServiceProvider((({coreStart:e})=>{const{overlays:{banners:t,openConfirm:a,openFlyout:r,openModal:s}}=e;return{banners:t,openConfirm:a,openFlyout:r,openModal:s}})),savedObjectsTagging:new r.PluginServiceProvider((({startPlugins:e})=>{const{savedObjectsTaggingOss:t}=e;if(!t)return{hasApi:!1};const{getTaggingApi:a}=t,r=a();if(!r)return{hasApi:!1};const{ui:{components:s,parseSearchQuery:i,hasTagDecoration:n,getSearchBarFilter:o,updateTagsReferences:c,getTagIdsFromReferences:d,getTableColumnDefinition:l,getTagList:u}}=r;return{hasApi:!0,components:s,hasTagDecoration:n,parseSearchQuery:i,getSearchBarFilter:o,updateTagsReferences:c,getTagIdsFromReferences:d,getTableColumnDefinition:l,getTagList:u}})),screenshotMode:new r.PluginServiceProvider((({startPlugins:e})=>{const{screenshotMode:{isScreenshotMode:t,getScreenshotContext:a}}=e;return{isScreenshotMode:t,getScreenshotContext:a}})),settings:new r.PluginServiceProvider((({coreStart:e,startPlugins:t})=>{const{uiSettings:a,theme:r}=e,{presentationUtil:{labsService:{isProjectEnabled:s}}}=t;return{uiSettings:a,theme:r,isProjectEnabledInLabs:s}})),share:new r.PluginServiceProvider((({startPlugins:e})=>{const{share:t}=e;if(!t)return{};const{toggleShareContextMenu:a}=t;return{toggleShareContextMenu:a}})),spaces:new r.PluginServiceProvider((({startPlugins:e})=>{const{spaces:t}=e;if(!t||!t.ui)return{};const{getActiveSpace$:a,ui:{components:{getLegacyUrlConflict:r},redirectLegacyUrl:s}}=t;return{getActiveSpace$:a,getLegacyUrlConflict:r,redirectLegacyUrl:s}})),urlForwarding:new r.PluginServiceProvider((({startPlugins:e})=>{const{urlForwarding:{navigateToLegacyKibanaUrl:t}}=e;return{navigateToLegacyKibanaUrl:t}})),usageCollection:new r.PluginServiceProvider((({startPlugins:e})=>{const{usageCollection:t}=e;if(!t)return{};const{reportUiCounter:a}=t;return{reportUiCounter:a}})),visualizations:new r.PluginServiceProvider((({startPlugins:e})=>{const{visualizations:{get:t,getAliases:a,getByGroup:r,showNewVisModal:s}}=e;return{get:t,getAliases:a,getByGroup:r,showNewVisModal:s}})),customBranding:new r.PluginServiceProvider((({coreStart:e})=>{const{customBranding:t}=e;return{hasCustomBranding$:t.hasCustomBranding$}}))},f=new r.PluginServices,P=new r.PluginServiceRegistry(p)},69:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return g}));var r=a(1),s=a.n(r),i=a(13),n=a(47),o=a(33),c=a(4),d=a(70);const l="unsavedDashboard",u="dashboardStateManagerPanels";class DashboardSessionStorageService{constructor(e){s()(this,"activeSpaceId",void 0),s()(this,"sessionStorage",void 0),s()(this,"notifications",void 0),s()(this,"spaces",void 0),({notifications:this.notifications,spaces:this.spaces}=e),this.sessionStorage=new c.Storage(sessionStorage),this.activeSpaceId="default",this.spaces.getActiveSpace$&&Object(i.firstValueFrom)(this.spaces.getActiveSpace$()).then((e=>{this.activeSpaceId=e.id}))}clearState(e=l){try{const t=this.sessionStorage.get(u),a=(null==t?void 0:t[this.activeSpaceId])||{};a[e]&&(delete a[e],this.sessionStorage.set(u,t))}catch(e){this.notifications.toasts.addDanger({title:d.c.getPanelsClearError(e.message),"data-test-subj":"dashboardPanelsClearFailure"})}}getState(e=l){try{var t,a;return null===(t=this.sessionStorage.get(u))||void 0===t||null===(a=t[this.activeSpaceId])||void 0===a?void 0:a[e]}catch(e){this.notifications.toasts.addDanger({title:d.c.getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"})}}setState(e=l,t){try{const a=this.sessionStorage.get(u)||{};Object(n.set)(a,[this.activeSpaceId,e],t),this.sessionStorage.set(u,a)}catch(e){this.notifications.toasts.addDanger({title:d.c.getPanelsSetError(e.message),"data-test-subj":"dashboardPanelsSetFailure"})}}getDashboardIdsWithUnsavedChanges(){try{var e;const t=(null===(e=this.sessionStorage.get(u))||void 0===e?void 0:e[this.activeSpaceId])||{},a=[];return Object.keys(t).map((e=>{t[e].viewMode===o.ViewMode.EDIT&&Object.keys(t[e]).some((e=>"viewMode"!==e))&&a.push(e)})),a}catch(e){return this.notifications.toasts.addDanger({title:d.c.getPanelsGetError(e.message),"data-test-subj":"dashboardPanelsGetFailure"}),[]}}dashboardHasUnsavedEdits(e=l){return-1!==this.getDashboardIdsWithUnsavedChanges().indexOf(e)}}const g=(e,t)=>new DashboardSessionStorageService(t)},70:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return n}));var r=a(2);const s={getEmptyDashboardTitle:()=>r.i18n.translate("dashboard.emptyDashboardTitle",{defaultMessage:"This dashboard is empty."}),getEmptyDashboardAdditionalPrivilege:()=>r.i18n.translate("dashboard.emptyDashboardAdditionalPrivilege",{defaultMessage:"You need additional privileges to edit this dashboard."}),getFillDashboardTitle:()=>r.i18n.translate("dashboard.fillDashboardTitle",{defaultMessage:"This dashboard is empty. Let’s fill it up!"}),getHowToStartWorkingOnNewDashboardDescription:()=>r.i18n.translate("dashboard.howToStartWorkingOnNewDashboardDescription",{defaultMessage:"Click edit in the menu bar above to start adding panels."}),getHowToStartWorkingOnNewDashboardEditLinkAriaLabel:()=>r.i18n.translate("dashboard.howToStartWorkingOnNewDashboardEditLinkAriaLabel",{defaultMessage:"Edit dashboard"}),getEmptyWidgetTitle:()=>r.i18n.translate("dashboard.emptyWidget.addPanelTitle",{defaultMessage:"Add your first visualization"}),getEmptyWidgetDescription:()=>r.i18n.translate("dashboard.emptyWidget.addPanelDescription",{defaultMessage:"Create content that tells a story about your data."})},i={getSuccessString:e=>r.i18n.translate("dashboard.dashboardWasSavedSuccessMessage",{defaultMessage:"Dashboard '{dashTitle}' was saved",values:{dashTitle:e}}),getFailureString:(e,t)=>r.i18n.translate("dashboard.dashboardWasNotSavedDangerMessage",{defaultMessage:"Dashboard '{dashTitle}' was not saved. Error: {errorMessage}",values:{dashTitle:e,errorMessage:t}})},n={getPanelsGetError:e=>r.i18n.translate("dashboard.panelStorageError.getError",{defaultMessage:"Error encountered while fetching unsaved changes: {message}",values:{message:e}}),getPanelsSetError:e=>r.i18n.translate("dashboard.panelStorageError.setError",{defaultMessage:"Error encountered while setting unsaved changes: {message}",values:{message:e}}),getPanelsClearError:e=>r.i18n.translate("dashboard.panelStorageError.clearError",{defaultMessage:"Error encountered while clearing unsaved changes: {message}",values:{message:e}})}},80:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return g}));var r=a(43),s=a(3),i=a(33),n=a(37),o=a(11),c=a(40),d=a(9),l=a(0);function u(e){return Object(s.has)(e,"language")?e:{query:e,language:"lucene"}}const g=async({savedObjectsTagging:e,savedObjectsClient:t,embeddable:a,data:s,id:g})=>{var h,v,b;const{search:S,query:{queryString:p}}=s,f=g,P=Object(r.v4)(),m={...l.j,id:P};if(!f)return{dashboardInput:m,dashboardFound:!0};const{saved_object:w,...y}=await t.resolve(l.g,f);if(!w._version)return{dashboardInput:m,dashboardFound:!1,dashboardId:f};const{references:O,attributes:T}=w,j=O&&0!==O.length?Object(d.g)({references:O,attributes:T},{embeddablePersistableStateService:a}):T,C=j.kibanaSavedObjectMeta.searchSourceJSON,D=await(async()=>{if(!C)return await S.searchSource.create();try{let e=Object(c.parseSearchSourceJSON)(C);return e=Object(c.injectSearchSourceReferences)(e,O),await S.searchSource.create(e)}catch(e){return await S.searchSource.create()}})(),I=Object(n.cleanFiltersForSerialize)(null!==(h=null==D?void 0:D.getOwnField("filter"))&&void 0!==h?h:[]),E=u((null==D?void 0:D.getOwnField("query"))||p.getDefaultQuery()),{refreshInterval:M,description:F,timeRestore:N,optionsJSON:k,panelsJSON:A,timeFrom:R,timeTo:L,title:B}=j,x=N&&R&&L?{from:R,to:L}:void 0,G=k?JSON.parse(k):void 0,V=Object(d.c)(A?JSON.parse(A):[]);return{resolveMeta:y,dashboardFound:!0,dashboardId:f,dashboardInput:{...l.j,...G,id:P,refreshInterval:M,timeRestore:N,description:F,timeRange:x,filters:I,panels:V,query:E,title:B,viewMode:i.ViewMode.VIEW,tags:null!==(v=null===(b=e.getTagIdsFromReferences)||void 0===b?void 0:b.call(e,O))&&void 0!==v?v:[],controlGroupInput:j.controlGroupInput&&Object(o.rawControlGroupAttributesToControlGroupInput)(j.controlGroupInput)}}}}}]);