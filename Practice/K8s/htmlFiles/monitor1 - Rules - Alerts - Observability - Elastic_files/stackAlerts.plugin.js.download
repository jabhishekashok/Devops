/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */!function(e){function r(r){for(var t,n,a=r[0],s=r[1],o=0,l=[];o<a.length;o++)n=a[o],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&l.push(i[n][0]),i[n]=0;for(t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t]);for(u&&u(r);l.length;)l.shift()()}var t={},i={0:0};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.e=function(e){var r=[],t=i[e];if(0!==t)if(t)r.push(t[2]);else{var a=new Promise((function(r,n){t=i[e]=[r,n]}));r.push(t[2]=a);var s,o=document.createElement("script");o.charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.src=function(e){return n.p+"stackAlerts.chunk."+e+".js"}(e);var u=new Error;s=function(r){o.onerror=o.onload=null,clearTimeout(l);var t=i[e];if(0!==t){if(t){var n=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",u.name="ChunkLoadError",u.type=n,u.request=a,t[1](u)}i[e]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:o})}),12e4);o.onerror=o.onload=s,document.head.appendChild(o)}return Promise.all(r)},n.m=e,n.c=t,n.d=function(e,r,t){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)n.d(t,i,function(r){return e[r]}.bind(null,i));return t},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n.oe=function(e){throw console.error(e),e};var a=window.stackAlerts_bundle_jsonpfunction=window.stackAlerts_bundle_jsonpfunction||[],s=a.push.bind(a);a.push=r,a=a.slice();for(var o=0;o<a.length;o++)r(a[o]);var u=s;n(n.s=8)}([function(e,r){e.exports=__kbnSharedDeps__.KbnI18n},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/triggersActionsUi/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r){e.exports=__kbnSharedDeps__.React},function(e,r){e.exports=__kbnSharedDeps__.Lodash},function(e,r,t){"use strict";t.d(r,"c",(function(){return i})),t.d(r,"b",(function(){return n})),t.d(r,"e",(function(){return a})),t.d(r,"d",(function(){return s})),t.d(r,"a",(function(){return u}));const i={THRESHOLD_COMPARATOR:t(1).COMPARATORS.GREATER_THAN,QUERY:'{\n    "query":{\n      "match_all" : {}\n    }\n  }',SIZE:100,TIME_WINDOW_SIZE:5,TIME_WINDOW_UNIT:"m",THRESHOLD:[1e3],AGGREGATION_TYPE:"count",TERM_SIZE:5,GROUP_BY:"all",EXCLUDE_PREVIOUS_HITS:!0},n={searchType:new Array,threshold0:new Array,threshold1:new Array,timeWindowSize:new Array,size:new Array,aggField:new Array,aggType:new Array,groupBy:new Array,termSize:new Array,termField:new Array},a={searchConfiguration:new Array,timeField:new Array},s={index:new Array,esQuery:new Array,timeField:new Array},o={...n,...a,...s},u=Object.keys(o)},function(e,r){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,r,t){"use strict";t.d(r,"b",(function(){return n})),t.d(r,"a",(function(){return a})),t.d(r,"c",(function(){return s}));var i=t(1);const n=e=>"searchSource"===e.searchType,a=e=>(null!=e?e:[]).filter((e=>e.isMapped)).map((e=>{const r={name:e.name,searchable:e.searchable,aggregatable:e.aggregatable,type:e.type,normalizedType:e.type};if("string"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t,r.normalizedType=t}else if("number"===e.type){const t=e.esTypes&&e.esTypes.length>0?e.esTypes[0]:e.type;r.type=t}return r})),s=()=>Object(i.useKibana)().services},function(e,r,t){"use strict";t.d(r,"b",(function(){return l})),t.d(r,"a",(function(){return d}));var i=t(3),n=t(0),a=t(1),s=t(6),o=t(4);const u=e=>{const r=Object(i.defaultsDeep)({},o.e);return e.searchConfiguration?e.searchConfiguration.index?(e.timeField||r.timeField.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewTimeFieldText",{defaultMessage:"Data view should have a time field."})),r):(r.searchConfiguration.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredDataViewText",{defaultMessage:"Data view is required."})),r):(r.searchConfiguration.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchConfiguration",{defaultMessage:"Search source configuration is required."})),r)},l=e=>{const r={errors:{}},t=(e=>{const{size:r,threshold:t,timeWindowSize:s,thresholdComparator:u,aggType:l,aggField:d,groupBy:c,termSize:p,termField:h}=e,y=Object(i.defaultsDeep)({},o.b);return"index"in e||e.searchType?(l&&a.builtInAggregationTypes[l].fieldRequired&&!d&&y.aggField.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),c&&a.builtInGroupByTypes[c]&&a.builtInGroupByTypes[c].sizeRequired&&!p&&y.termSize.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),c&&a.builtInGroupByTypes[c].validNormalizedTypes&&a.builtInGroupByTypes[c].validNormalizedTypes.length>0&&!h&&y.termField.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),t&&0!==t.length&&void 0!==t[0]||y.threshold0.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold 0 is required."})),u&&a.builtInComparators[u].requiredValues>1&&(!t||void 0===t[1]||t&&t.length<a.builtInComparators[u].requiredValues)&&y.threshold1.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold 1 is required."})),t&&2===t.length&&t[0]>t[1]&&y.threshold1.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold 1 must be > Threshold 0."})),s||y.timeWindowSize.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),Object(i.isNil)(r)&&y.size.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSizeText",{defaultMessage:"Size is required."})),(r&&r<0||r>1e4)&&y.size.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.invalidSizeRangeText",{defaultMessage:"Size must be between 0 and {max, number}.",values:{max:1e4}})),y):(y.searchType.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredSearchType",{defaultMessage:"Query type is required."})),y)})(e);if(r.errors=t,Object(s.b)(e))return r.errors={...r.errors,...u(e)},r;const l=(e=>{const r=Object(i.defaultsDeep)({},o.d);if(e.index&&0!==e.index.length||r.index.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),e.timeField||r.timeField.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),e.esQuery)try{JSON.parse(e.esQuery).query||r.esQuery.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredEsQueryText",{defaultMessage:"Query field is required."}))}catch(e){r.esQuery.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.jsonQueryText",{defaultMessage:"Query must be valid JSON."}))}else r.esQuery.push(n.i18n.translate("xpack.stackAlerts.esQuery.ui.validation.error.requiredQueryText",{defaultMessage:"Elasticsearch query is required."}));return r})(e);return r.errors={...r.errors,...l},r},d=e=>{const{errors:r}=l(e);return Object.keys(r).some((e=>r[e]&&r[e].length))}},function(e,r,t){t(9),__kbnBundles__.define("plugin/stackAlerts/public",t,10)},function(e,r,t){t.p=window.__kbnPublicPath__.stackAlerts},function(e,r,t){"use strict";t.r(r),t.d(r,"plugin",(function(){return p}));var i=t(2),n=t(0);const a=e=>{const{index:r,geoField:t,entity:i,dateField:a,boundaryType:s,boundaryIndexTitle:o,boundaryGeoField:u}=e,l={errors:{}},d={index:new Array,indexId:new Array,geoField:new Array,entity:new Array,dateField:new Array,boundaryType:new Array,boundaryIndexTitle:new Array,boundaryIndexId:new Array,boundaryGeoField:new Array};return l.errors=d,r||d.index.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredIndexTitleText",{defaultMessage:"Data view is required."})),t||d.geoField.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredGeoFieldText",{defaultMessage:"Geo field is required."})),i||d.entity.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredEntityText",{defaultMessage:"Entity is required."})),a||d.dateField.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredDateFieldText",{defaultMessage:"Date field is required."})),s||d.boundaryType.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryTypeText",{defaultMessage:"Boundary type is required."})),o||d.boundaryIndexTitle.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryIndexTitleText",{defaultMessage:"Boundary data view title is required."})),u||d.boundaryGeoField.push(n.i18n.translate("xpack.stackAlerts.geoContainment.error.requiredBoundaryGeoFieldText",{defaultMessage:"Boundary geo field is required."})),l};var s=t(5),o=t(1);const u=e=>{const{index:r,timeField:t,aggType:i,aggField:a,groupBy:u,termSize:l,termField:d,threshold:c,timeWindowSize:p,thresholdComparator:h,filterKuery:y}=e,g={errors:{}},f={aggField:new Array,termSize:new Array,termField:new Array,timeWindowSize:new Array,threshold0:new Array,threshold1:new Array,index:new Array,timeField:new Array,filterKuery:new Array};if(g.errors=f,y)try{Object(s.toElasticsearchQuery)(Object(s.fromKueryExpression)(y))}catch(e){f.filterKuery.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.invalidKql",{defaultMessage:"Filter query is invalid."}))}return r&&0!==r.length||f.index.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredIndexText",{defaultMessage:"Index is required."})),t||f.timeField.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeFieldText",{defaultMessage:"Time field is required."})),i&&o.builtInAggregationTypes[i].fieldRequired&&!a&&f.aggField.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredAggFieldText",{defaultMessage:"Aggregation field is required."})),u&&o.builtInGroupByTypes[u]&&o.builtInGroupByTypes[u].sizeRequired&&!l&&f.termSize.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermSizedText",{defaultMessage:"Term size is required."})),u&&o.builtInGroupByTypes[u].validNormalizedTypes&&o.builtInGroupByTypes[u].validNormalizedTypes.length>0&&!d&&f.termField.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTermFieldText",{defaultMessage:"Term field is required."})),p||f.timeWindowSize.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredTimeWindowSizeText",{defaultMessage:"Time window size is required."})),c&&0!==c.length&&void 0!==c[0]||f.threshold0.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold0Text",{defaultMessage:"Threshold0 is required."})),h&&o.builtInComparators[h].requiredValues>1&&(!c||void 0===c[1]||c&&c.length<o.builtInComparators[h].requiredValues)&&f.threshold1.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.requiredThreshold1Text",{defaultMessage:"Threshold1 is required."})),c&&2===c.length&&c[0]>c[1]&&f.threshold1.push(n.i18n.translate("xpack.stackAlerts.threshold.ui.validation.error.greaterThenThreshold0Text",{defaultMessage:"Threshold1 should be > Threshold0."})),g};var l=t(7);const d=".es-query";function c({ruleTypeRegistry:e,alerting:r}){e.register({id:".geo-containment",description:n.i18n.translate("xpack.stackAlerts.geoContainment.descriptionText",{defaultMessage:"Alert when an entity is contained within a geo boundary."}),iconClass:"globe",documentationUrl:null,ruleParamsExpression:Object(i.lazy)((()=>t.e(2).then(t.bind(null,50)))),validate:a,requiresAppContext:!1}),e.register({id:".index-threshold",description:n.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.descriptionText",{defaultMessage:"Alert when an aggregated query meets the threshold."}),iconClass:"alert",documentationUrl:e=>e.links.alerting.indexThreshold,ruleParamsExpression:Object(i.lazy)((()=>t.e(3).then(t.bind(null,51)))),validate:u,defaultActionMessage:n.i18n.translate("xpack.stackAlerts.threshold.ui.alertType.defaultActionMessage",{defaultMessage:"alert '\\{\\{alertName\\}\\}' is active for group '\\{\\{context.group\\}\\}':\n\n- Value: \\{\\{context.value\\}\\}\n- Conditions Met: \\{\\{context.conditions\\}\\} over \\{\\{params.timeWindowSize\\}\\}\\{\\{params.timeWindowUnit\\}\\}\n- Timestamp: \\{\\{context.date\\}\\}"}),requiresAppContext:!1}),e.register(function(e){return function(e){e.registerNavigation("discover",d,(e=>`#/viewAlert/${e.id}`))}(e),{id:d,description:n.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.descriptionText",{defaultMessage:"Alert when matches are found during the latest query run."}),iconClass:"logoElastic",documentationUrl:e=>e.links.alerting.esQuery,ruleParamsExpression:Object(i.lazy)((()=>t.e(1).then(t.bind(null,49)))),validate:l.b,defaultActionMessage:n.i18n.translate("xpack.stackAlerts.esQuery.ui.alertType.defaultActionMessage",{defaultMessage:"Elasticsearch query alert '\\{\\{alertName\\}\\}' is active:\n\n- Value: \\{\\{context.value\\}\\}\n- Conditions Met: \\{\\{context.conditions\\}\\} over \\{\\{params.timeWindowSize\\}\\}\\{\\{params.timeWindowUnit\\}\\}\n- Timestamp: \\{\\{context.date\\}\\}\n- Link: \\{\\{context.link\\}\\}"}),requiresAppContext:!1}}(r))}class plugin_StackAlertsPublicPlugin{constructor(){}setup(e,{triggersActionsUi:r,alerting:t}){c({ruleTypeRegistry:r.ruleTypeRegistry,alerting:t})}start(){}stop(){}}const p=()=>new plugin_StackAlertsPublicPlugin},function(e,r){e.exports=__kbnSharedDeps__.EmotionReact},function(e,r){e.exports=__kbnSharedDeps__.ElasticEui},function(e,r){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r){e.exports=__kbnSharedDeps_npm__},function(e,r){e.exports=__kbnSharedDeps__.Rxjs},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/triggersActionsUi/public/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r){e.exports=__kbnSharedDeps__.Classnames},function(e,r){e.exports=__kbnSharedDeps__.ElasticCharts},function(e,r){e.exports=__kbnSharedDeps__.MomentTimezone},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/alerting/common/parse_duration");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/data/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/esUiShared/public");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))},function(e,r,t){t.r(r);var i=__kbnBundles__.get("plugin/alerting/common");Object.defineProperties(r,Object.getOwnPropertyDescriptors(i))}]);