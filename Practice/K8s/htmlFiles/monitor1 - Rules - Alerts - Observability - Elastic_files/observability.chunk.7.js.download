/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.observability_bundle_jsonpfunction=window.observability_bundle_jsonpfunction||[]).push([[7],{108:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(0),l=a(50);const s=({paramsForApiCall:e,initialDataState:t,executeApiCall:a,shouldExecuteApiCall:s})=>{const{http:i}=Object(l.a)().services,[n,o]=Object(r.useState)(!1),[u,c]=Object(r.useState)(!1),[d,m]=Object(r.useState)(t),{fetch:b,cancel:p}=Object(r.useMemo)((()=>{const t=new AbortController;let r=!1;return{fetch:async()=>{if(s(e)){c(!1),o(!0);try{const l=await a(e,t,i);r||(o(!1),m(l))}catch(e){c(!0),o(!1)}}},cancel:()=>{r=!0,t.abort()}}}),[a,i,e,s]);return Object(r.useEffect)((()=>(b(),()=>{p()})),[b,p]),{data:d,loading:n,error:u}}},113:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,l=(r=a(0))&&"object"==typeof r&&"default"in r?r:{default:r},s=e=>"checkbox"===e.type,i=e=>e instanceof Date,n=e=>null==e;const o=e=>"object"==typeof e;var u=e=>!n(e)&&!Array.isArray(e)&&o(e)&&!i(e),c=e=>u(e)&&e.target?s(e.target)?e.target.checked:e.target.value:e,d=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),m=e=>Array.isArray(e)?e.filter(Boolean):[],b=e=>void 0===e,p=(e,t,a)=>{if(!t||!u(e))return a;const r=m(t.split(/[,[\].]+?/)).reduce(((e,t)=>n(e)?e:e[t]),e);return b(r)||r===e?b(e[t])?a:e[t]:r};const g="blur",f="onChange",E="onSubmit",y="all",v="pattern",h="required",x=l.default.createContext(null),S=()=>l.default.useContext(x);var k=(e,t,a,r=!0)=>{const l={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(l,s,{get:()=>{const l=s;return t._proxyFormState[l]!==y&&(t._proxyFormState[l]=!r||y),a&&(a[l]=!0),e[l]}});return l},T=e=>u(e)&&!Object.keys(e).length,j=(e,t,a,r)=>{a(e);const{name:l,...s}=e;return T(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find((e=>t[e]===(!r||y)))},F=e=>Array.isArray(e)?e:[e],O=(e,t,a)=>a&&t?e===t:!e||!t||e===t||F(e).some((e=>e&&(e.startsWith(t)||t.startsWith(e))));function w(e){const t=l.default.useRef(e);t.current=e,l.default.useEffect((()=>{const a=!e.disabled&&t.current.subject.subscribe({next:t.current.next});return()=>{a&&a.unsubscribe()}}),[e.disabled])}function C(e){const t=S(),{control:a=t.control,disabled:r,name:s,exact:i}=e||{},[n,o]=l.default.useState(a._formState),u=l.default.useRef(!0),c=l.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=l.default.useRef(s);return d.current=s,w({disabled:r,next:e=>u.current&&O(d.current,e.name,i)&&j(e,c.current,a._updateFormState)&&o({...a._formState,...e}),subject:a._subjects.state}),l.default.useEffect((()=>{u.current=!0;const e=a._proxyFormState.isDirty&&a._getDirty();return e!==a._formState.isDirty&&a._subjects.state.next({isDirty:e}),c.current.isValid&&a._updateValid(!0),()=>{u.current=!1}}),[a]),k(n,a,c.current,!1)}var A=e=>"string"==typeof e,M=(e,t,a,r,l)=>A(e)?(r&&t.watch.add(e),p(a,e,l)):Array.isArray(e)?e.map((e=>(r&&t.watch.add(e),p(a,e)))):(r&&(t.watchAll=!0),a),D="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function _(e){let t;const a=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(D&&(e instanceof Blob||e instanceof FileList)||!a&&!u(e))return e;if(t=a?[]:{},Array.isArray(e)||(e=>{const t=e.constructor&&e.constructor.prototype;return u(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)t[a]=_(e[a]);else t=e}return t}function L(e){const t=S(),{control:a=t.control,name:r,defaultValue:s,disabled:i,exact:n}=e||{},o=l.default.useRef(r);o.current=r,w({disabled:i,subject:a._subjects.watch,next:e=>{O(o.current,e.name,n)&&c(_(M(o.current,a._names,e.values||a._formValues,!1,s)))}});const[u,c]=l.default.useState(a._getWatch(r,s));return l.default.useEffect((()=>a._removeUnmounted())),u}function I(e){const t=S(),{name:a,control:r=t.control,shouldUnregister:s}=e,i=d(r._names.array,a),n=L({control:r,name:a,defaultValue:p(r._formValues,a,p(r._defaultValues,a,e.defaultValue)),exact:!0}),o=C({control:r,name:a}),u=l.default.useRef(r.register(a,{...e.rules,value:n}));return l.default.useEffect((()=>{const e=(e,t)=>{const a=p(r._fields,e);a&&(a._f.mount=t)};return e(a,!0),()=>{const t=r._options.shouldUnregister||s;(i?t&&!r._stateFlags.action:t)?r.unregister(a):e(a,!1)}}),[a,r,i,s]),{field:{name:a,value:n,onChange:l.default.useCallback((e=>u.current.onChange({target:{value:c(e),name:a},type:"change"})),[a]),onBlur:l.default.useCallback((()=>u.current.onBlur({target:{value:p(r._formValues,a),name:a},type:g})),[a,r]),ref:e=>{const t=p(r._fields,a);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})}},formState:o,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!p(o.errors,a)},isDirty:{enumerable:!0,get:()=>!!p(o.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!p(o.touchedFields,a)},error:{enumerable:!0,get:()=>p(o.errors,a)}})}}var P=(e,t,a,r,l)=>t?{...a[e],types:{...a[e]&&a[e].types?a[e].types:{},[r]:l||!0}}:{},V=e=>/^\w*$/.test(e),R=e=>m(e.replace(/["|']|\]/g,"").split(/\.|\[/));function B(e,t,a){let r=-1;const l=V(t)?[t]:R(t),s=l.length,i=s-1;for(;++r<s;){const t=l[r];let s=a;if(r!==i){const a=e[t];s=u(a)||Array.isArray(a)?a:isNaN(+l[r+1])?{}:[]}e[t]=s,e=e[t]}return e}const z=(e,t,a)=>{for(const r of a||Object.keys(e)){const a=p(e,r);if(a){const{_f:e,...r}=a;if(e&&t(e.name)){if(e.ref.focus){e.ref.focus();break}if(e.refs&&e.refs[0].focus){e.refs[0].focus();break}}else u(r)&&z(r,t)}}};var N=()=>{const e="undefined"==typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)}))},W=(e,t,a={})=>a.shouldFocus||b(a.shouldFocus)?a.focusName||`${e}.${b(a.focusIndex)?t:a.focusIndex}.`:"",q=e=>({isOnSubmit:!e||e===E,isOnBlur:"onBlur"===e,isOnChange:e===f,isOnAll:e===y,isOnTouch:"onTouched"===e}),U=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some((t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))))),G=(e,t,a)=>{const r=m(p(e,a));return B(r,"root",t[a]),B(e,a,r),e},K=e=>"boolean"==typeof e,H=e=>"file"===e.type,$=e=>"function"==typeof e,Q=e=>{if(!D)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},J=e=>A(e)||l.default.isValidElement(e),Y=e=>"radio"===e.type,Z=e=>e instanceof RegExp;const X={value:!1,isValid:!1},ee={value:!0,isValid:!0};var te=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter((e=>e&&e.checked&&!e.disabled)).map((e=>e.value));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!b(e[0].attributes.value)?b(e[0].value)||""===e[0].value?ee:{value:e[0].value,isValid:!0}:ee:X}return X};const ae={isValid:!1,value:null};var re=e=>Array.isArray(e)?e.reduce(((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e),ae):ae;function le(e,t,a="validate"){if(J(e)||Array.isArray(e)&&e.every(J)||K(e)&&!e)return{type:a,message:J(e)?e:"",ref:t}}var se=e=>u(e)&&!Z(e)?e:{value:e,message:""},ie=async(e,t,a,r,l)=>{const{ref:i,refs:o,required:c,maxLength:d,minLength:m,min:g,max:f,pattern:E,validate:y,name:x,valueAsNumber:S,mount:k,disabled:j}=e._f,F=p(t,x);if(!k||j)return{};const O=o?o[0]:i,w=e=>{r&&O.reportValidity&&(O.setCustomValidity(K(e)?"":e||""),O.reportValidity())},C={},M=Y(i),D=s(i),_=M||D,L=(S||H(i))&&b(i.value)&&b(F)||Q(i)&&""===i.value||""===F||Array.isArray(F)&&!F.length,I=P.bind(null,x,a,C),V=(e,t,a,r="maxLength",l="minLength")=>{const s=e?t:a;C[x]={type:e?r:l,message:s,ref:i,...I(e?r:l,s)}};if(l?!Array.isArray(F)||!F.length:c&&(!_&&(L||n(F))||K(F)&&!F||D&&!te(o).isValid||M&&!re(o).isValid)){const{value:e,message:t}=J(c)?{value:!!c,message:c}:se(c);if(e&&(C[x]={type:h,message:t,ref:O,...I(h,t)},!a))return w(t),C}if(!(L||n(g)&&n(f))){let e,t;const r=se(f),l=se(g);if(n(F)||isNaN(F)){const a=i.valueAsDate||new Date(F),s=e=>new Date((new Date).toDateString()+" "+e),n="time"==i.type,o="week"==i.type;A(r.value)&&F&&(e=n?s(F)>s(r.value):o?F>r.value:a>new Date(r.value)),A(l.value)&&F&&(t=n?s(F)<s(l.value):o?F<l.value:a<new Date(l.value))}else{const a=i.valueAsNumber||(F?+F:F);n(r.value)||(e=a>r.value),n(l.value)||(t=a<l.value)}if((e||t)&&(V(!!e,r.message,l.message,"max","min"),!a))return w(C[x].message),C}if((d||m)&&!L&&(A(F)||l&&Array.isArray(F))){const e=se(d),t=se(m),r=!n(e.value)&&F.length>e.value,l=!n(t.value)&&F.length<t.value;if((r||l)&&(V(r,e.message,t.message),!a))return w(C[x].message),C}if(E&&!L&&A(F)){const{value:e,message:t}=se(E);if(Z(e)&&!F.match(e)&&(C[x]={type:v,message:t,ref:i,...I(v,t)},!a))return w(t),C}if(y)if($(y)){const e=le(await y(F,t),O);if(e&&(C[x]={...e,...I("validate",e.message)},!a))return w(e.message),C}else if(u(y)){let e={};for(const r in y){if(!T(e)&&!a)break;const l=le(await y[r](F,t),O,r);l&&(e={...l,...I(r,l.message)},w(l.message),a&&(C[x]=e))}if(!T(e)&&(C[x]={ref:O,...e},!a))return C}return w(!0),C};function ne(e,t){return[...e,...F(t)]}var oe=e=>Array.isArray(e)?e.map((()=>{})):void 0;function ue(e,t,a){return[...e.slice(0,t),...F(a),...e.slice(t)]}var ce=(e,t,a)=>Array.isArray(e)?(b(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[];function de(e,t){return[...F(t),...F(e)]}var me=(e,t)=>b(t)?[]:function(e,t){let a=0;const r=[...e];for(const e of t)r.splice(e-a,1),a++;return m(r).length?r:[]}(e,F(t).sort(((e,t)=>e-t))),be=(e,t,a)=>{e[t]=[e[a],e[a]=e[t]][0]};function pe(e,t){const a=Array.isArray(t)?t:V(t)?[t]:R(t),r=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let r=0;for(;r<a;)e=b(e)?r++:e[t[r++]];return e}(e,a),l=a.length-1,s=a[l];return r&&delete r[s],0!==l&&(u(r)&&T(r)||Array.isArray(r)&&function(e){for(const t in e)if(!b(e[t]))return!1;return!0}(r))&&pe(e,a.slice(0,-1)),e}var ge=(e,t,a)=>(e[t]=a,e);function fe(){let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter((e=>e!==t))}}),unsubscribe:()=>{e=[]}}}var Ee=e=>n(e)||!o(e);function ye(e,t){if(Ee(e)||Ee(t))return e===t;if(i(e)&&i(t))return e.getTime()===t.getTime();const a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(const l of a){const a=e[l];if(!r.includes(l))return!1;if("ref"!==l){const e=t[l];if(i(a)&&i(e)||u(a)&&u(e)||Array.isArray(a)&&Array.isArray(e)?!ye(a,e):a!==e)return!1}}return!0}var ve=e=>"select-multiple"===e.type,he=e=>Q(e)&&e.isConnected,xe=e=>{for(const t in e)if($(e[t]))return!0;return!1};function Se(e,t={}){const a=Array.isArray(e);if(u(e)||a)for(const a in e)Array.isArray(e[a])||u(e[a])&&!xe(e[a])?(t[a]=Array.isArray(e[a])?[]:{},Se(e[a],t[a])):n(e[a])||(t[a]=!0);return t}function ke(e,t,a){const r=Array.isArray(e);if(u(e)||r)for(const r in e)Array.isArray(e[r])||u(e[r])&&!xe(e[r])?b(t)||Ee(a[r])?a[r]=Array.isArray(e[r])?Se(e[r],[]):{...Se(e[r])}:ke(e[r],n(t)?{}:t[r],a[r]):ye(e[r],t[r])?delete a[r]:a[r]=!0;return a}var Te=(e,t)=>ke(e,t,Se(t)),je=(e,{valueAsNumber:t,valueAsDate:a,setValueAs:r})=>b(e)?e:t?""===e?NaN:e?+e:e:a&&A(e)?new Date(e):r?r(e):e;function Fe(e){const t=e.ref;if(!(e.refs?e.refs.every((e=>e.disabled)):t.disabled))return H(t)?t.files:Y(t)?re(e.refs).value:ve(t)?[...t.selectedOptions].map((({value:e})=>e)):s(t)?te(e.refs).value:je(b(t.value)?e.ref.value:t.value,e)}var Oe=e=>b(e)?e:Z(e)?e.source:u(e)?Z(e.value)?e.value.source:e.value:e;function we(e,t,a){const r=p(e,a);if(r||V(a))return{error:r,name:a};const l=a.split(".");for(;l.length;){const r=l.join("."),s=p(t,r),i=p(e,r);if(s&&!Array.isArray(s)&&a!==r)return{name:a};if(i&&i.type)return{name:r,error:i};l.pop()}return{name:a}}const Ce={mode:E,reValidateMode:f,shouldFocusError:!0};function Ae(e={},t){let a={...Ce,...e};const r=e.resetOptions&&e.resetOptions.keepDirtyValues;let l,o={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},f={},E=(u(a.defaultValues)||u(a.values))&&_(a.defaultValues||a.values)||{},v=a.shouldUnregister?{}:_(E),h={action:!1,mount:!1,watch:!1},x={mount:new Set,unMount:new Set,array:new Set,watch:new Set},S=0;const k={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},j={watch:fe(),array:fe(),state:fe()},O=q(a.mode),w=q(a.reValidateMode),C=a.criteriaMode===y,L=async e=>{if(k.isValid||e){const e=a.resolver?T((await N()).errors):await W(f,!0);e!==o.isValid&&j.state.next({isValid:e})}},I=e=>k.isValidating&&j.state.next({isValidating:e}),P=(e,t,a,r)=>{const l=p(f,e);if(l){const s=p(v,e,b(a)?p(E,e):a);b(s)||r&&r.defaultChecked||t?B(v,e,t?s:Fe(l._f)):X(e,s),h.mount&&L()}},V=(e,t,a,r,l)=>{let s=!1,i=!1;const n={name:e};if(!a||r){k.isDirty&&(i=o.isDirty,o.isDirty=n.isDirty=J(),s=i!==n.isDirty);const a=ye(p(E,e),t);i=p(o.dirtyFields,e),a?pe(o.dirtyFields,e):B(o.dirtyFields,e,!0),n.dirtyFields=o.dirtyFields,s=s||k.dirtyFields&&i!==!a}if(a){const t=p(o.touchedFields,e);t||(B(o.touchedFields,e,a),n.touchedFields=o.touchedFields,s=s||k.touchedFields&&t!==a)}return s&&l&&j.state.next(n),s?n:{}},R=(t,a,r,s)=>{const i=p(o.errors,t),n=k.isValid&&K(a)&&o.isValid!==a;var u;if(e.delayError&&r?(u=()=>((e,t)=>{B(o.errors,e,t),j.state.next({errors:o.errors})})(t,r),l=e=>{clearTimeout(S),S=window.setTimeout(u,e)},l(e.delayError)):(clearTimeout(S),l=null,r?B(o.errors,t,r):pe(o.errors,t)),(r?!ye(i,r):i)||!T(s)||n){const e={...s,...n&&K(a)?{isValid:a}:{},errors:o.errors,name:t};o={...o,...e},j.state.next(e)}I(!1)},N=async e=>await a.resolver(v,a.context,((e,t,a,r)=>{const l={};for(const a of e){const e=p(t,a);e&&B(l,a,e._f)}return{criteriaMode:a,names:[...e],fields:l,shouldUseNativeValidation:r}})(e||x.mount,f,a.criteriaMode,a.shouldUseNativeValidation)),W=async(e,t,r={valid:!0})=>{for(const l in e){const s=e[l];if(s){const{_f:e,...l}=s;if(e){const l=x.array.has(e.name),i=await ie(s,v,C,a.shouldUseNativeValidation,l);if(i[e.name]&&(r.valid=!1,t))break;!t&&(p(i,e.name)?l?G(o.errors,i,e.name):B(o.errors,e.name,i[e.name]):pe(o.errors,e.name))}l&&await W(l,t,r)}}return r.valid},J=(e,t)=>(e&&t&&B(v,e,t),!ye(le(),E)),Z=(e,t,a)=>M(e,x,{...h.mount?v:b(t)?E:A(e)?{[e]:t}:t},a,t),X=(e,t,a={})=>{const r=p(f,e);let l=t;if(r){const a=r._f;a&&(!a.disabled&&B(v,e,je(t,a)),l=Q(a.ref)&&n(t)?"":t,ve(a.ref)?[...a.ref.options].forEach((e=>e.selected=l.includes(e.value))):a.refs?s(a.ref)?a.refs.length>1?a.refs.forEach((e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(l)?!!l.find((t=>t===e.value)):l===e.value))):a.refs[0]&&(a.refs[0].checked=!!l):a.refs.forEach((e=>e.checked=e.value===l)):H(a.ref)?a.ref.value="":(a.ref.value=l,a.ref.type||j.watch.next({name:e})))}(a.shouldDirty||a.shouldTouch)&&V(e,l,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&re(e)},ee=(e,t,a)=>{for(const r in t){const l=t[r],s=`${e}.${r}`,n=p(f,s);!x.array.has(e)&&Ee(l)&&(!n||n._f)||i(l)?X(s,l,a):ee(s,l,a)}},te=(e,a,r={})=>{const l=p(f,e),s=x.array.has(e),i=_(a);B(v,e,i),s?(j.array.next({name:e,values:v}),(k.isDirty||k.dirtyFields)&&r.shouldDirty&&j.state.next({name:e,dirtyFields:Te(E,v),isDirty:J(e,i)})):!l||l._f||n(i)?X(e,i,r):ee(e,i,r),U(e,x)&&j.state.next({}),j.watch.next({name:e}),!h.mount&&t()},ae=async e=>{const t=e.target;let r=t.name;const s=p(f,r);if(s){let n,u;const d=t.type?Fe(s._f):c(e),m=e.type===g||"focusout"===e.type,b=!((i=s._f).mount&&(i.required||i.min||i.max||i.maxLength||i.minLength||i.pattern||i.validate)||a.resolver||p(o.errors,r)||s._f.deps)||((e,t,a,r,l)=>!l.isOnAll&&(!a&&l.isOnTouch?!(t||e):(a?r.isOnBlur:l.isOnBlur)?!e:!(a?r.isOnChange:l.isOnChange)||e))(m,p(o.touchedFields,r),o.isSubmitted,w,O),E=U(r,x,m);B(v,r,d),m?(s._f.onBlur&&s._f.onBlur(e),l&&l(0)):s._f.onChange&&s._f.onChange(e);const y=V(r,d,m,!1),h=!T(y)||E;if(!m&&j.watch.next({name:r,type:e.type}),b)return k.isValid&&L(),h&&j.state.next({name:r,...E?{}:y});if(!m&&E&&j.state.next({}),I(!0),a.resolver){const{errors:e}=await N([r]),t=we(o.errors,f,r),a=we(e,f,t.name||r);n=a.error,r=a.name,u=T(e)}else n=(await ie(s,v,C,a.shouldUseNativeValidation))[r],n?u=!1:k.isValid&&(u=await W(f,!0));s._f.deps&&re(s._f.deps),R(r,u,n,y)}var i},re=async(e,t={})=>{let r,l;const s=F(e);if(I(!0),a.resolver){const t=await(async e=>{const{errors:t}=await N();if(e)for(const a of e){const e=p(t,a);e?B(o.errors,a,e):pe(o.errors,a)}else o.errors=t;return t})(b(e)?e:s);r=T(t),l=e?!s.some((e=>p(t,e))):r}else e?(l=(await Promise.all(s.map((async e=>{const t=p(f,e);return await W(t&&t._f?{[e]:t}:t)})))).every(Boolean),(l||o.isValid)&&L()):l=r=await W(f);return j.state.next({...!A(e)||k.isValid&&r!==o.isValid?{}:{name:e},...a.resolver||!e?{isValid:r}:{},errors:o.errors,isValidating:!1}),t.shouldFocus&&!l&&z(f,(e=>e&&p(o.errors,e)),e?s:x.mount),l},le=e=>{const t={...E,...h.mount?v:{}};return b(e)?t:A(e)?p(t,e):e.map((e=>p(t,e)))},se=(e,t)=>({invalid:!!p((t||o).errors,e),isDirty:!!p((t||o).dirtyFields,e),isTouched:!!p((t||o).touchedFields,e),error:p((t||o).errors,e)}),ne=(e,t={})=>{for(const r of e?F(e):x.mount)x.mount.delete(r),x.array.delete(r),p(f,r)&&(t.keepValue||(pe(f,r),pe(v,r)),!t.keepError&&pe(o.errors,r),!t.keepDirty&&pe(o.dirtyFields,r),!t.keepTouched&&pe(o.touchedFields,r),!a.shouldUnregister&&!t.keepDefaultValue&&pe(E,r));j.watch.next({}),j.state.next({...o,...t.keepDirty?{isDirty:J()}:{}}),!t.keepIsValid&&L()},oe=(e,t={})=>{let r=p(f,e);const l=K(t.disabled);return B(f,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),x.mount.add(e),r?l&&B(v,e,t.disabled?void 0:p(v,e,Fe(r._f))):P(e,!0,t.value),{...l?{disabled:t.disabled}:{},...a.shouldUseNativeValidation?{required:!!t.required,min:Oe(t.min),max:Oe(t.max),minLength:Oe(t.minLength),maxLength:Oe(t.maxLength),pattern:Oe(t.pattern)}:{},name:e,onChange:ae,onBlur:ae,ref:l=>{if(l){oe(e,t),r=p(f,e);const a=b(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,i=(e=>Y(e)||s(e))(a),n=r._f.refs||[];if(i?n.find((e=>e===a)):a===r._f.ref)return;B(f,e,{_f:{...r._f,...i?{refs:[...n.filter(he),a,...Array.isArray(p(E,e))?[{}]:[]],ref:{type:a.type,name:e}}:{ref:a}}}),P(e,!1,void 0,a)}else r=p(f,e,{}),r._f&&(r._f.mount=!1),(a.shouldUnregister||t.shouldUnregister)&&(!d(x.array,e)||!h.action)&&x.unMount.add(e)}}},ue=()=>a.shouldFocusError&&z(f,(e=>e&&p(o.errors,e)),x.mount),ce=(a,l={})=>{const s=a||E,i=_(s),n=a&&!T(a)?i:E;if(l.keepDefaultValues||(E=s),!l.keepValues){if(l.keepDirtyValues||r)for(const e of x.mount)p(o.dirtyFields,e)?B(n,e,p(v,e)):te(e,p(n,e));else{if(D&&b(a))for(const e of x.mount){const t=p(f,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Q(e)){const t=e.closest("form");if(t){t.reset();break}}}}f={}}v=e.shouldUnregister?l.keepDefaultValues?_(E):{}:i,j.array.next({values:n}),j.watch.next({values:n})}x={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!h.mount&&t(),h.mount=!k.isValid||!!l.keepIsValid,h.watch=!!e.shouldUnregister,j.state.next({submitCount:l.keepSubmitCount?o.submitCount:0,isDirty:l.keepDirty||l.keepDirtyValues?o.isDirty:!(!l.keepDefaultValues||ye(a,E)),isSubmitted:!!l.keepIsSubmitted&&o.isSubmitted,dirtyFields:l.keepDirty||l.keepDirtyValues?o.dirtyFields:l.keepDefaultValues&&a?Te(E,a):{},touchedFields:l.keepTouched?o.touchedFields:{},errors:l.keepErrors?o.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},de=(e,t)=>ce($(e)?e(v):e,t);return $(a.defaultValues)&&a.defaultValues().then((e=>{de(e,a.resetOptions),j.state.next({isLoading:!1})})),{control:{register:oe,unregister:ne,getFieldState:se,_executeSchema:N,_focusError:ue,_getWatch:Z,_getDirty:J,_updateValid:L,_removeUnmounted:()=>{for(const e of x.unMount){const t=p(f,e);t&&(t._f.refs?t._f.refs.every((e=>!he(e))):!he(t._f.ref))&&ne(e)}x.unMount=new Set},_updateFieldArray:(e,t=[],a,r,l=!0,s=!0)=>{if(r&&a){if(h.action=!0,s&&Array.isArray(p(f,e))){const t=a(p(f,e),r.argA,r.argB);l&&B(f,e,t)}if(s&&Array.isArray(p(o.errors,e))){const t=a(p(o.errors,e),r.argA,r.argB);l&&B(o.errors,e,t),((e,t)=>{!m(p(e,t)).length&&pe(e,t)})(o.errors,e)}if(k.touchedFields&&s&&Array.isArray(p(o.touchedFields,e))){const t=a(p(o.touchedFields,e),r.argA,r.argB);l&&B(o.touchedFields,e,t)}k.dirtyFields&&(o.dirtyFields=Te(E,v)),j.state.next({name:e,isDirty:J(e,t),dirtyFields:o.dirtyFields,errors:o.errors,isValid:o.isValid})}else B(v,e,t)},_getFieldArray:t=>m(p(h.mount?v:E,t,e.shouldUnregister?p(E,t,[]):[])),_reset:ce,_updateFormState:e=>{o={...o,...e}},_subjects:j,_proxyFormState:k,get _fields(){return f},get _formValues(){return v},get _stateFlags(){return h},set _stateFlags(e){h=e},get _defaultValues(){return E},get _names(){return x},set _names(e){x=e},get _formState(){return o},set _formState(e){o=e},get _options(){return a},set _options(e){a={...a,...e}}},trigger:re,register:oe,handleSubmit:(e,t)=>async r=>{r&&(r.preventDefault&&r.preventDefault(),r.persist&&r.persist());let l=_(v);if(j.state.next({isSubmitting:!0}),a.resolver){const{errors:e,values:t}=await N();o.errors=e,l=t}else await W(f);pe(o.errors,"root"),T(o.errors)?(j.state.next({errors:{}}),await e(l,r)):(t&&await t({...o.errors},r),ue()),j.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:T(o.errors),submitCount:o.submitCount+1,errors:o.errors})},watch:(e,t)=>$(e)?j.watch.subscribe({next:a=>e(Z(void 0,t),a)}):Z(e,t,!0),setValue:te,getValues:le,reset:de,resetField:(e,t={})=>{p(f,e)&&(b(t.defaultValue)?te(e,p(E,e)):(te(e,t.defaultValue),B(E,e,t.defaultValue)),t.keepTouched||pe(o.touchedFields,e),t.keepDirty||(pe(o.dirtyFields,e),o.isDirty=t.defaultValue?J(e,p(E,e)):J()),t.keepError||(pe(o.errors,e),k.isValid&&L()),j.state.next({...o}))},clearErrors:e=>{e&&F(e).forEach((e=>pe(o.errors,e))),j.state.next({errors:e?o.errors:{}})},unregister:ne,setError:(e,t,a)=>{const r=(p(f,e,{_f:{}})._f||{}).ref;B(o.errors,e,{...t,ref:r}),j.state.next({name:e,errors:o.errors,isValid:!1}),a&&a.shouldFocus&&r&&r.focus&&r.focus()},setFocus:(e,t={})=>{const a=p(f,e),r=a&&a._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select())}},getFieldState:se}}t.Controller=e=>e.render(I(e)),t.FormProvider=e=>{const{children:t,...a}=e;return l.default.createElement(x.Provider,{value:a},t)},t.appendErrors=P,t.get=p,t.set=B,t.useController=I,t.useFieldArray=function(e){const t=S(),{control:a=t.control,name:r,keyName:s="id",shouldUnregister:i}=e,[n,o]=l.default.useState(a._getFieldArray(r)),u=l.default.useRef(a._getFieldArray(r).map(N)),c=l.default.useRef(n),d=l.default.useRef(r),m=l.default.useRef(!1);d.current=r,c.current=n,a._names.array.add(r),e.rules&&a.register(r,e.rules),w({next:({values:e,name:t})=>{if(t===d.current||!t){const t=p(e,d.current);Array.isArray(t)&&(o(t),u.current=t.map(N))}},subject:a._subjects.array});const b=l.default.useCallback((e=>{m.current=!0,a._updateFieldArray(r,e)}),[a,r]);return l.default.useEffect((()=>{if(a._stateFlags.action=!1,U(r,a._names)&&a._subjects.state.next({}),m.current&&(!q(a._options.mode).isOnSubmit||a._formState.isSubmitted))if(a._options.resolver)a._executeSchema([r]).then((e=>{const t=p(e.errors,r),l=p(a._formState.errors,r);(l?!t&&l.type:t&&t.type)&&(t?B(a._formState.errors,r,t):pe(a._formState.errors,r),a._subjects.state.next({errors:a._formState.errors}))}));else{const e=p(a._fields,r);e&&e._f&&ie(e,a._formValues,a._options.criteriaMode===y,a._options.shouldUseNativeValidation,!0).then((e=>!T(e)&&a._subjects.state.next({errors:G(a._formState.errors,e,r)})))}a._subjects.watch.next({name:r,values:a._formValues}),a._names.focus&&z(a._fields,(e=>!!e&&e.startsWith(a._names.focus||""))),a._names.focus="",a._updateValid()}),[n,r,a]),l.default.useEffect((()=>(!p(a._formValues,r)&&a._updateFieldArray(r),()=>{(a._options.shouldUnregister||i)&&a.unregister(r)})),[r,a,s,i]),{swap:l.default.useCallback(((e,t)=>{const l=a._getFieldArray(r);be(l,e,t),be(u.current,e,t),b(l),o(l),a._updateFieldArray(r,l,be,{argA:e,argB:t},!1)}),[b,r,a]),move:l.default.useCallback(((e,t)=>{const l=a._getFieldArray(r);ce(l,e,t),ce(u.current,e,t),b(l),o(l),a._updateFieldArray(r,l,ce,{argA:e,argB:t},!1)}),[b,r,a]),prepend:l.default.useCallback(((e,t)=>{const l=F(_(e)),s=de(a._getFieldArray(r),l);a._names.focus=W(r,0,t),u.current=de(u.current,l.map(N)),b(s),o(s),a._updateFieldArray(r,s,de,{argA:oe(e)})}),[b,r,a]),append:l.default.useCallback(((e,t)=>{const l=F(_(e)),s=ne(a._getFieldArray(r),l);a._names.focus=W(r,s.length-1,t),u.current=ne(u.current,l.map(N)),b(s),o(s),a._updateFieldArray(r,s,ne,{argA:oe(e)})}),[b,r,a]),remove:l.default.useCallback((e=>{const t=me(a._getFieldArray(r),e);u.current=me(u.current,e),b(t),o(t),a._updateFieldArray(r,t,me,{argA:e})}),[b,r,a]),insert:l.default.useCallback(((e,t,l)=>{const s=F(_(t)),i=ue(a._getFieldArray(r),e,s);a._names.focus=W(r,e,l),u.current=ue(u.current,e,s.map(N)),b(i),o(i),a._updateFieldArray(r,i,ue,{argA:e,argB:oe(t)})}),[b,r,a]),update:l.default.useCallback(((e,t)=>{const l=_(t),s=ge(a._getFieldArray(r),e,l);u.current=[...s].map(((t,a)=>t&&a!==e?u.current[a]:N())),b(s),o([...s]),a._updateFieldArray(r,s,ge,{argA:e,argB:l},!0,!1)}),[b,r,a]),replace:l.default.useCallback((e=>{const t=F(_(e));u.current=t.map(N),b([...t]),o([...t]),a._updateFieldArray(r,[...t],(e=>e),{},!0,!1)}),[b,r,a]),fields:l.default.useMemo((()=>n.map(((e,t)=>({...e,[s]:u.current[t]||N()})))),[n,s])}},t.useForm=function(e={}){const t=l.default.useRef(),[a,r]=l.default.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:$(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...Ae(e,(()=>r((e=>({...e}))))),formState:a});const s=t.current.control;return s._options=e,w({subject:s._subjects.state,next:e=>{j(e,s._proxyFormState,s._updateFormState,!0)&&r({...s._formState})}}),l.default.useEffect((()=>{s._stateFlags.mount||(s._updateValid(),s._stateFlags.mount=!0),s._stateFlags.watch&&(s._stateFlags.watch=!1,s._subjects.state.next({})),s._removeUnmounted()})),l.default.useEffect((()=>{e.values&&!ye(e.values,s._defaultValues)&&s._reset(e.values,s._options.resetOptions)}),[e.values,s]),l.default.useEffect((()=>{a.submitCount&&s._focusError()}),[s,a.submitCount]),t.current.formState=k(a,s),t.current},t.useFormContext=S,t.useFormState=C,t.useWatch=L},120:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(0),l=a(108);const s={results:[],total:0,page:0,perPage:0};function i({name:e,page:t,refetch:a,sortBy:i,indicatorTypes:o}){const[u,c]=Object(r.useState)(s),d=Object(r.useMemo)((()=>({name:e,page:t,sortBy:i,indicatorTypes:o})),[e,t,i,o]),m=Object(r.useCallback)((e=>e.name===d.name||e.page===d.page||e.sortBy===d.sortBy||e.indicatorTypes===d.indicatorTypes||a),[d,a]),{data:b,loading:p,error:g}=Object(l.a)({paramsForApiCall:d,initialDataState:u,executeApiCall:n,shouldExecuteApiCall:m});return Object(r.useEffect)((()=>{c(b)}),[b]),{sloList:u,loading:p,error:g}}const n=async(e,t,a)=>{try{return await a.get("/api/observability/slos",{query:{...e.page&&{page:e.page},...e.name&&{name:e.name},...e.sortBy&&{sortBy:e.sortBy},...e.indicatorTypes&&e.indicatorTypes.length>0&&{indicatorTypes:e.indicatorTypes.join(",")}},signal:t.signal})}catch(e){}return s}},121:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return s}));var r=a(87);function l(e){const t=e.substring(0,e.length-1),a=e.substring(e.length-1);return{value:parseInt(t,10),unit:a}}function s(e){switch(e.unit){case"m":return e.value;case"h":return 60*e.value;case"d":return 24*e.value*60;case"w":return 7*e.value*24*60;case"M":return 30*e.value*24*60;case"Y":return 365*e.value*24*60}Object(r.assertNever)(e.unit)}},122:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(0),l=a(108);function s(e){const t=Object(r.useMemo)((()=>({sloId:e})),[e]),a=Object(r.useCallback)((e=>t.sloId===e.sloId),[t]),{loading:s,data:n}=Object(l.a)({paramsForApiCall:t,initialDataState:void 0,executeApiCall:i,shouldExecuteApiCall:a});return{loading:s,slo:n}}const i=async(e,t,a)=>{if(void 0!==e.sloId)try{return await a.get(`/api/observability/slos/${e.sloId}`,{query:{},signal:t.signal})}catch(e){}}},201:function(e,t,a){e.exports=a(53)(1859)},202:function(e,t,a){e.exports=a.p+"059c3a548a47cf1b7b7288eacf4ddaa9.svg"},233:function(e,t,a){"use strict";a.r(t),a.d(t,"renderApp",(function(){return ua}));var r=a(1),l=a(0),s=a.n(l),i=a(88),n=a.n(i),o=a(23),u=a(6),c=a(54),d=a(7),m=a(21),b=a(126),p=a(111),g=a(109),f=a(106),E=a(128),y=a(94),v=a(10);const h=v.observabilityFeatureId,x=v.casesPath;var S=a(98),k=a(14),T=a(19);const j="/internal/rac/alerts";var F=a(175),O=a(108);const w=e=>{const{observabilityRuleTypeRegistry:t}=Object(S.a)(),a=Object(l.useMemo)((()=>({id:e,ruleType:t})),[e,t]),r=Object(l.useCallback)((e=>!Object(T.isEmpty)(e.id)),[]),{loading:s,data:i}=Object(O.a)({paramsForApiCall:a,initialDataState:null,executeApiCall:C,shouldExecuteApiCall:r});return[s,i]},C=async(e,t,a)=>{const{id:r,ruleType:l}=e;try{const e=await a.get(j,{query:{id:r},signal:t.signal});if(void 0!==e)return Object(F.a)(l)(e)}catch(e){}return null},A=e=>{const t=Object(l.useMemo)((()=>_(e)),[e]),a=Object(l.useCallback)((e=>e.length>0),[]),{loading:r,data:s}=Object(O.a)({paramsForApiCall:t,initialDataState:void 0,executeApiCall:M,shouldExecuteApiCall:a});return[r,null!=s?s:{}]},M=async(e,t,a)=>{try{const r=await a.post(`${j}/find`,{body:JSON.stringify({query:{ids:{values:e}},track_total_hits:!1,size:1e4}),signal:t.signal});if(r)return D(r)}catch(e){}},D=e=>e.hits.hits.reduce(((e,{_id:t,_index:a,_source:r})=>({...e,[t]:{_id:t,_index:a,...r}})),{}),_=e=>e.filter((e=>!Object(T.isEmpty)(e)));var L=a(99);const I=s.a.memo((({permissions:e})=>{const{cases:t,http:{basePath:{prepend:a}},application:{navigateToUrl:r}}=Object(d.useKibana)().services,{observabilityRuleTypeRegistry:i}=Object(S.a)(),[n,o]=Object(l.useState)(""),u=Object(l.useCallback)((()=>{o("")}),[]),[c,m]=w(n);return s.a.createElement(s.a.Fragment,null,!1===c&&m&&""!==n&&s.a.createElement(l.Suspense,{fallback:null},s.a.createElement(k.LazyAlertsFlyout,{alert:m,observabilityRuleTypeRegistry:i,onClose:u})),t.ui.getCases({basePath:x,permissions:e,owner:[h],features:{alerts:{sync:!1,isExperimental:!1}},useFetchAlertData:A,showAlertDetails:e=>{o(e)},ruleDetailsNavigation:{href:e=>a(L.c.observability.ruleDetails(e)),onClick:async(e,t)=>{const l=a(L.c.observability.ruleDetails(e));return null!=t&&t.preventDefault(),r(l)}}}))}));I.displayName="Cases";var P=a(20),V=a.n(P),R=a(5),B=a(22);const z=a.n(B)()(R.EuiEmptyPrompt).withConfig({displayName:"EmptyPrompt",componentId:"sc-lbahp1-0"})(["align-self:center;max-width:60em;"]);z.displayName="EmptyPrompt";const N=s.a.memo((({actions:e,message:t,title:a,...r})=>{const i=Object.keys(e),n=Object(l.useMemo)((()=>Object.values(e).filter((e=>e.label&&e.url)).map((({icon:e,label:t,target:a,url:r,descriptionTitle:l,description:n,onClick:o,fill:u=!0},c)=>null!=l||null!=n?s.a.createElement(R.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${i[c]}`},s.a.createElement(R.EuiCard,{title:null!=l&&l,description:null!=n&&n,footer:s.a.createElement(R.EuiButton,{href:r,onClick:o,iconType:e,target:a,fill:u,"data-test-subj":`emptyPageAction-${i[c]}`},t)})):s.a.createElement(R.EuiFlexItem,{grow:!1,style:{maxWidth:283},key:`emptyPageAction-${i[c]}`},s.a.createElement(R.EuiButton,{href:r,onClick:o,iconType:e,target:a,"data-test-subj":`emptyPageAction-${i[c]}`},t))))),[e,i]);return s.a.createElement(z,V()({iconType:"casesApp",title:s.a.createElement("h2",null,a),body:t&&s.a.createElement("p",null,t),actions:s.a.createElement(R.EuiFlexGroup,{justifyContent:"center"},n)},r))}));N.displayName="EmptyPageComponent";const W=s.a.memo(N);W.displayName="EmptyPage";const q=r.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsTitle",{defaultMessage:"Kibana feature privileges required"}),U=r.i18n.translate("xpack.observability.cases.caseFeatureNoPermissionsMessage",{defaultMessage:"To view cases, you must have privileges for the Cases feature in the Kibana space. For more information, contact your Kibana administrator."}),G=r.i18n.translate("xpack.observability.cases.caseView.goToDocumentationButton",{defaultMessage:"View documentation"});var K=a(50);const H=s.a.memo((()=>{const e=Object(K.a)().services.docLinks,t=Object(l.useMemo)((()=>({savedObject:{icon:"documents",label:G,url:`${e.ELASTIC_WEBSITE_URL}guide/en/security/${e.DOC_LINK_VERSION}s`,target:"_blank"}})),[e]);return s.a.createElement(W,{actions:t,message:U,"data-test-subj":"noFeaturePermissions",title:q})}));H.displayName="CaseSavedObjectNoPermissions";var $=a(110),Q=a(103),J=a(139),Y=a(156);const Z=s.a.memo((()=>{const e=Object($.a)(),{docLinks:t,http:a}=Object(d.useKibana)().services,{ObservabilityPageTemplate:r}=Object(S.a)(),{hasAnyData:l,isAllRequestsComplete:i}=Object(Q.a)();if(!l&&!i)return s.a.createElement(J.a,null);const n=!0===l||!1===i&&void 0,o=Object(Y.a)({hasData:n,basePath:a.basePath,docsLink:t.links.observability.guide});return e.read?s.a.createElement(r,{isPageDataLoaded:i,"data-test-subj":o?"noDataPage":void 0,noDataConfig:o},s.a.createElement(I,{permissions:e})):s.a.createElement(H,null)}));Z.displayName="CasesPage";var X=a(140);const ee=new g.Type("JSON",g.any.is,((e,t)=>f.either.chain(g.string.validate(e,t),(a=>{try{return g.success(JSON.parse(a))}catch(a){return g.failure(e,t)}}))),(e=>JSON.stringify(e)));var te=a(173),ae=a(82),re=a(89),le=a(91);const se={lastResponse:[],status:[]},ie=Object(m.createStateContainer)(se,{setLastResponse:e=>t=>{const a=t;return t.forEach((t=>{e.lastResponse.includes(t)?a.filter((e=>e!==t)):a.concat(t)})),{...e,lastResponse:a}},setStatus:e=>t=>{const a=t;return t.forEach((t=>{e.status.includes(t)?a.filter((e=>e!==t)):a.concat(t)})),{...e,status:a}}}),{Provider:ne,useContainer:oe}=Object(m.createStateContainerReactHelpers)();var ue=a(51);r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusLicenseError",{defaultMessage:"License Error"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusOk",{defaultMessage:"Ok"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusActive",{defaultMessage:"Active"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusError",{defaultMessage:"Error"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusPending",{defaultMessage:"Pending"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusUnknown",{defaultMessage:"Unknown"}),r.i18n.translate("xpack.observability.rules.rulesTable.ruleStatusWarning",{defaultMessage:"warning"}),r.i18n.translate("xpack.observability.rules.rulesTable.columns.lastResponseTitle",{defaultMessage:"Last response"});const ce=r.i18n.translate("xpack.observability.rulesTitle",{defaultMessage:"Rules"}),de=r.i18n.translate("xpack.observability.breadcrumbs.rulesLinkText",{defaultMessage:"Rules"}),me=(r.i18n.translate("xpack.observability.rules.loadError",{defaultMessage:"Unable to load rules"}),r.i18n.translate("xpack.observability.rulesList.unableToLoadRuleTags",{defaultMessage:"Unable to load rule tags"}),r.i18n.translate("xpack.observability.rules.rulesTable.changeStatusAriaLabel",{defaultMessage:"Change status"}),["ruleName","ruleExecutionStatusLastDate","ruleSnoozeNotify","ruleExecutionStatus","ruleExecutionState"]);function be(){const{ObservabilityPageTemplate:e}=Object(S.a)(),{http:t,docLinks:a,triggersActionsUi:{getAddAlertFlyout:i,getRulesList:n,getRulesSettingsLink:u}}=Object(K.a)().services,{status:c,setStatus:d,lastResponse:b,setLastResponse:p}=function(){const e=oe();!function(e){const t=Object(o.useHistory)();Object(l.useEffect)((()=>{const a=Object(m.createKbnUrlStateStorage)({history:t,useHash:!1,useHashQuery:!1}),{start:r,stop:l}=function(e,t){return Object(m.syncState)({storageKey:"_a",stateContainer:{...e,set:t=>{e.set({...se,...t})}},stateStorage:t})}(e,a);return r(),function(e,t){const a=t.get("_a");if(a){const t={...se,...a};e.set(t)}else e.set(se);t.set("_a",e.get())}(e,a),l}),[e,t])}(e);const{setLastResponse:t,setStatus:a}=e.transitions,{lastResponse:r,status:s}=Object(m.useContainerSelector)(e,(e=>e));return{lastResponse:r,status:s,setLastResponse:t,setStatus:a}}(),g=function(){const{observabilityRuleTypeRegistry:e}=Object(S.a)();return Object(l.useMemo)((()=>e.list()),[e])}(),{ruleTypes:f}=Object(re.useLoadRuleTypes)({filteredRuleTypes:g}),[E,y]=Object(l.useState)(!1),[v,h]=Object(l.useState)(new Date),x=[...f.values()].some((e=>{var t;return null===(t=e.authorizedConsumers[le.ALERTS_FEATURE_ID])||void 0===t?void 0:t.all}));return Object(ue.a)([{text:r.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:t.basePath.prepend("/app/observability/alerts")},{text:de}]),s.a.createElement(e,{pageHeader:{pageTitle:s.a.createElement(s.a.Fragment,null,ce),rightSideItems:[s.a.createElement(R.EuiButton,{fill:!0,key:"create-alert",iconType:"plusInCircle","data-test-subj":"createRuleButton",disabled:!x,onClick:()=>y(!0)},s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.rules.addRuleButtonLabel",defaultMessage:"Create rule"})),s.a.createElement(u,null),s.a.createElement(R.EuiButtonEmpty,{href:a.links.observability.createAlerts,target:"_blank",iconType:"help","data-test-subj":"documentationLink"},s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.rules.docsLinkText",defaultMessage:"Documentation"}))]},"data-test-subj":"rulesPage"},s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"s"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(n,{filteredRuleTypes:g,showActionFilter:!1,ruleDetailsRoute:"alerts/rules/:ruleId",statusFilter:c,onStatusFilterChange:d,lastResponseFilter:b,onLastResponseFilterChange:p,refresh:v,rulesListKey:"observability_rulesListColumns",visibleColumns:me}))),E&&s.a.createElement(i,{consumer:le.ALERTS_FEATURE_ID,filteredRuleTypes:g,onClose:()=>{y(!1)},onSave:()=>(h(new Date),Promise.resolve())}))}function pe(){return s.a.createElement(ne,{value:ie},s.a.createElement(be,null))}var ge=a(46),fe=a(143),Ee=a(181);r.i18n.translate("xpack.observability.ruleDetails.tagsTitle",{defaultMessage:"Tags"});const ye=r.i18n.translate("xpack.observability.ruleDetails.lastUpdatedMessage",{defaultMessage:"Last updated"}),ve=r.i18n.translate("xpack.observability.ruleDetails.byWord",{defaultMessage:"by"}),he=r.i18n.translate("xpack.observability.ruleDetails.onWord",{defaultMessage:"on"}),xe=r.i18n.translate("xpack.observability.ruleDetails.createdWord",{defaultMessage:"Created"}),Se=(e,t,a)=>r.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:a}}),ke=r.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),Te=r.i18n.translate("xpack.observability.ruleDetails.ruleStatusLicenseError",{defaultMessage:"License Error"}),je={ok:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusOk",{defaultMessage:"Ok"}),active:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusActive",{defaultMessage:"Active"}),error:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusError",{defaultMessage:"Error"}),pending:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusPending",{defaultMessage:"Pending"}),unknown:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusUnknown",{defaultMessage:"Unknown"}),warning:r.i18n.translate("xpack.observability.ruleDetails.ruleStatusWarning",{defaultMessage:"Warning"})};function Fe({idsToDelete:e,apiDeleteCall:t,onDeleted:a,onCancel:i,onErrors:n,singleTitle:o,multipleTitle:u,setIsLoadingState:c}){const[d,m]=Object(l.useState)(!1);Object(l.useEffect)((()=>{m(e.length>0)}),[e]);const{http:b,notifications:{toasts:p}}=Object(K.a)().services,g=e.length;return d?s.a.createElement(R.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"deleteIdsConfirmation",title:Se(g,o,u),onCancel:()=>{m(!1),i()},onConfirm:async()=>{m(!1),c(!0);const{total:l,errors:s}=await t({ids:e,http:b});c(!1);const i=s.length,d=l-i;d>0&&p.addSuccess(((e,t,a)=>r.i18n.translate("xpack.observability.rules.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:a}}))(d,o,u)),i>0&&(p.addDanger(((e,t,a)=>r.i18n.translate("xpack.observability.rules.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:a}}))(i,o,u)),await n()),await a()},cancelButtonText:ke,confirmButtonText:Se(g,o,u)},((e,t,a)=>r.i18n.translate("xpack.observability.rules.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You can't recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:a}}))(g,o,u)):null}function Oe({size:e}){return s.a.createElement(R.EuiFlexGroup,{"data-test-subj":"centerJustifiedSpinner",justifyContent:"center"},s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(R.EuiLoadingSpinner,{size:e||"xl"})))}var we=a(39);function Ce({ruleId:e,http:t}){const[a,s]=Object(l.useState)({isRuleLoading:!0,rule:void 0,errorRule:void 0}),i=Object(l.useCallback)((async()=>{try{if(!e)return;const a=await Object(re.loadRule)({http:t,ruleId:e});s((e=>({...e,isRuleLoading:!1,rule:a})))}catch(e){s((t=>{return{...t,isRuleLoading:!1,errorRule:(a=e instanceof Error?e.message:"string"==typeof e?e:"",r.i18n.translate("xpack.observability.ruleDetails.ruleLoadError",{defaultMessage:"Unable to load rule. Reason: {message}",values:{message:a}}))};var a}))}}),[e,t]);return Object(l.useEffect)((()=>{i()}),[i]),{...a,reloadRule:i}}var Ae=a(28),Me=a.n(Ae);function De(e){switch(e){case"active":return"success";case"error":return"danger";case"ok":return"primary";case"pending":return"accent";default:return"subdued"}}function _e({rule:e}){const{triggersActionsUi:t}=Object(K.a)().services;return s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiFlexGroup,{alignItems:"center"},s.a.createElement(R.EuiFlexItem,{grow:!1,"data-test-subj":"ruleName"},e.name)),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(R.EuiSpacer,{size:"m"}),s.a.createElement(R.EuiText,{size:"xs"},s.a.createElement(R.EuiBadge,{color:De(e.executionStatus.status)},e.executionStatus.status.charAt(0).toUpperCase()+e.executionStatus.status.slice(1))),s.a.createElement(R.EuiSpacer,{size:"m"})),s.a.createElement(R.EuiFlexGroup,{direction:"column",alignItems:"flexStart"},s.a.createElement(R.EuiFlexItem,{component:"span",grow:!1},s.a.createElement(R.EuiText,{color:"subdued",size:"xs"},s.a.createElement("b",null,ye)," ",ve," ",e.updatedBy," ",he," ",Me()(e.updatedAt).format("ll"),"  ",s.a.createElement("b",null,xe)," ",ve," ",e.createdBy," ",he," ",Me()(e.createdAt).format("ll"))),s.a.createElement(R.EuiSpacer,{size:"xs"})),e.tags.length>0&&t.getRuleTagBadge({tagsOutPopover:!0,tags:e.tags}),s.a.createElement(R.EuiSpacer,{size:"xs"}))}var Le=a(107),Ie=a(38);function Pe(){var e;const{charts:t,http:a,triggersActionsUi:{alertsTableConfigurationRegistry:i,ruleTypeRegistry:n,getEditAlertFlyout:u,getRuleEventLogList:c,getAlertsStateTable:m,getAlertSummaryWidget:b,getRuleStatusPanel:p,getRuleDefinition:g},application:{capabilities:f,navigateToUrl:E},notifications:{toasts:y},share:{url:{locators:h}}}=Object(d.useKibana)().services,{ruleId:x}=Object(o.useParams)(),{ObservabilityPageTemplate:k,observabilityRuleTypeRegistry:T}=Object(S.a)(),j=Object(o.useHistory)(),F=Object(o.useLocation)(),O={theme:t.theme.useChartsTheme(),baseTheme:t.theme.useChartsBaseTheme()},w=Object(l.useMemo)((()=>T.list()),[T]),{isRuleLoading:C,rule:A,errorRule:M,reloadRule:D}=Ce({ruleId:x,http:a}),{ruleTypes:_}=Object(re.useLoadRuleTypes)({filteredRuleTypes:w}),[L,I]=Object(l.useState)((()=>{var e;const t=(null===(e=Object(ge.b)(F.search))||void 0===e?void 0:e.tabId)||we.b;return[we.b,we.a].includes(t)?t:we.b})),[P,V]=Object(l.useState)(),[B,z]=Object(l.useState)(),[N,W]=Object(l.useState)([]),[q,U]=Object(l.useState)(!1),[G,K]=Object(l.useState)(!1),[H,$]=Object(l.useState)(!1),[Q,J]=Object(l.useState)(),[Y,Z]=Object(l.useState)(fe.c),X=Object(l.useRef)([{query:`kibana.alert.rule.uuid: ${x}`,language:"kuery"}]),ee=Object(l.useRef)({term:{"kibana.alert.rule.uuid":x}}),te=Object(l.useRef)(null);Object(l.useEffect)((()=>{Z(Object(fe.c)())}),[Q]);const ae=Object(l.useRef)([]);Object(l.useEffect)((()=>{(async()=>{ae.current=await Object(re.getNotifyWhenOptions)()})()}),[]);const se=Object(l.useCallback)((()=>{$(!1),A&&W([A.id])}),[A]),ie=Object(l.useCallback)((()=>{$(!1),K(!0)}),[]);Object(l.useEffect)((()=>{if(_.length&&A){const e=_.find((e=>e.id===A.ruleTypeId));z(e),A.consumer===le.ALERTS_FEATURE_ID&&e&&e.producer?V([e.producer]):V([A.consumer])}}),[A,_]),Object(ue.a)([{text:r.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"}),href:a.basePath.prepend(Le.a.observability.alerts)},{href:a.basePath.prepend(Le.a.observability.rules),text:de},{text:A&&A.name}]);const ne=(e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute})(f),oe=A&&function(e,t){var a,r;return null!==(a=null==t||null===(r=t.authorizedConsumers[e.consumer])||void 0===r?void 0:r.all)&&void 0!==a&&a}(A,B)&&(ne||!ne&&0===A.actions.length),ce=oe&&!!n.has(A.ruleTypeId)&&!n.get(A.ruleTypeId).requiresAppContext,me=[{id:we.b,name:r.i18n.translate("xpack.observability.ruleDetails.rule.eventLogTabText",{defaultMessage:"Execution history"}),"data-test-subj":"eventLogListTab",content:s.a.createElement(R.EuiFlexGroup,{style:{minHeight:600},direction:"column"},s.a.createElement(R.EuiFlexItem,null,c({ruleId:null==A?void 0:A.id,ruleType:B})))},{id:we.a,name:r.i18n.translate("xpack.observability.ruleDetails.rule.alertsTabText",{defaultMessage:"Alerts"}),"data-test-subj":"ruleAlertListTab",content:s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiSpacer,{size:"m"}),s.a.createElement(Ee.b,{appName:we.c,onEsQueryChange:J,urlStorageKey:we.e,defaultSearchQueries:X.current}),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiFlexGroup,{style:{minHeight:450},direction:"column"},s.a.createElement(R.EuiFlexItem,null,Q&&P&&s.a.createElement(m,{alertsTableConfigurationRegistry:i,configurationId:v.observabilityFeatureId,id:we.d,flyoutSize:"s",featureIds:P,query:Q,showExpandToDetails:!1,showAlertStatusWithFlapping:!0}))))}];if(q||C)return s.a.createElement(Oe,null);if(!A||M)return s.a.createElement(R.EuiPanel,null,s.a.createElement(R.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:s.a.createElement("h2",null,r.i18n.translate("xpack.observability.ruleDetails.errorPromptTitle",{defaultMessage:"Unable to load rule details"})),body:s.a.createElement("p",null,r.i18n.translate("xpack.observability.ruleDetails.errorPromptBody",{defaultMessage:"There was an error loading the rule details."}))}));const be=(null===(e=A.executionStatus.error)||void 0===e?void 0:e.reason)===le.RuleExecutionStatusErrorReasons.License?Te:je[A.executionStatus.status];return s.a.createElement(k,{"data-test-subj":"ruleDetails",pageHeader:{pageTitle:s.a.createElement(_e,{rule:A}),bottomBorder:!1,rightSideItems:ce?[s.a.createElement(R.EuiFlexGroup,{direction:"rowReverse",alignItems:"flexStart"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiPopover,{id:"contextRuleEditMenu",isOpen:H,closePopover:()=>$(!1),button:s.a.createElement(R.EuiButton,{fill:!0,iconSide:"right",onClick:()=>$((e=>!e)),iconType:"arrowDown","data-test-subj":"actions"},r.i18n.translate("xpack.observability.ruleDetails.actionsButtonLabel",{defaultMessage:"Actions"}))},s.a.createElement(R.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"s"},s.a.createElement(R.EuiButtonEmpty,{"data-test-subj":"editRuleButton",size:"s",iconType:"pencil",onClick:ie},s.a.createElement(R.EuiText,{size:"s"},r.i18n.translate("xpack.observability.ruleDetails.editRule",{defaultMessage:"Edit rule"}))),s.a.createElement(R.EuiButtonEmpty,{size:"s",iconType:"trash",color:"danger",onClick:se,"data-test-subj":"deleteRuleButton"},s.a.createElement(R.EuiText,{size:"s"},r.i18n.translate("xpack.observability.ruleDetails.deleteRule",{defaultMessage:"Delete rule"})))))))]:[]}},s.a.createElement(R.EuiFlexGroup,{wrap:!0,gutterSize:"m"},s.a.createElement(R.EuiFlexItem,{style:{minWidth:350}},s.a.createElement(p,{rule:A,isEditable:ce,requestRefresh:D,healthColor:De(A.executionStatus.status),statusMessage:be})),s.a.createElement(R.EuiFlexItem,{style:{minWidth:350}},s.a.createElement(b,{chartThemes:O,featureIds:P,onClick:async(e=Ie.a)=>{var t,a;Z(Object(fe.c)()),await(null===(t=h.get(v.ruleDetailsLocatorID))||void 0===t?void 0:t.navigate({rangeFrom:fe.a.from,rangeTo:fe.a.to,ruleId:x,status:e,tabId:we.a},{replace:!0})),I(we.a),null===(a=te.current)||void 0===a||a.scrollIntoView({behavior:"smooth"})},timeRange:Y,filter:ee.current})),g({rule:A,onEditRule:D})),s.a.createElement(R.EuiSpacer,{size:"l"}),s.a.createElement("div",{ref:te}),s.a.createElement(R.EuiTabbedContent,{"data-test-subj":"ruleDetailsTabbedContent",tabs:me,selectedTab:me.find((e=>e.id===L)),onTabClick:e=>{var t;t=e.id,I(t),(e=>{const t=e.tabId===we.a?{...Object(ge.b)(F.search),...e}:{tabId:we.b};j.replace({...F,search:Object(ge.a)(t)})})({tabId:t})}}),G&&s.a.createElement(u,{initialRule:A,onClose:()=>{K(!1)},onSave:D}),s.a.createElement(Fe,{onDeleted:()=>{W([]),E(a.basePath.prepend(Le.a.observability.rules))},onErrors:()=>{W([]),E(a.basePath.prepend(Le.a.observability.rules))},onCancel:()=>W([]),apiDeleteCall:re.bulkDeleteRules,idsToDelete:N,singleTitle:A.name,multipleTitle:A.name,setIsLoadingState:()=>U(!0)}),M&&y.addDanger({title:M}))}var Ve=a(92),Re=a(15);function Be({alert:e}){const{http:t,cases:{hooks:{getUseCasesAddToExistingCaseModal:a}},triggersActionsUi:{getEditAlertFlyout:i,getRuleSnoozeModal:n}}=Object(K.a)().services,{rule:o,reloadRule:u}=Ce({http:t,ruleId:(null==e?void 0:e.fields[Re.J])||""}),[c,d]=Object(l.useState)(!1),[m,b]=Object(l.useState)(!1),[p,g]=Object(l.useState)(!1),f=a(),E=e&&o?[{alertId:(null==e?void 0:e.fields[Re.X])||"",index:".internal.alerts-observability.metrics.alerts-*",rule:{id:o.id,name:o.name},type:Ve.CommentType.alert}]:[];return s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiPopover,{isOpen:c,closePopover:()=>d(!1),button:s.a.createElement(R.EuiButton,{fill:!0,iconType:"arrowDown",iconSide:"right",onClick:()=>d(!c),"data-test-subj":"alert-details-header-actions-menu-button"},r.i18n.translate("xpack.observability.alertDetails.actionsButtonLabel",{defaultMessage:"Actions"}))},s.a.createElement(R.EuiFlexGroup,{direction:"column",alignItems:"flexStart",gutterSize:"s"},s.a.createElement(R.EuiButtonEmpty,{size:"s",color:"text",disabled:!(null!=e&&e.fields[Re.J]),onClick:()=>{d(!1),b(!0)},"data-test-subj":"view-rule-details-button"},s.a.createElement(R.EuiText,{size:"s"},r.i18n.translate("xpack.observability.alertDetails.viewRuleDetails",{defaultMessage:"View rule details"}))),s.a.createElement(R.EuiButtonEmpty,{size:"s",color:"text",onClick:()=>{d(!1),g(!0)},"data-test-subj":"snooze-rule-button"},s.a.createElement(R.EuiText,{size:"s"},r.i18n.translate("xpack.observability.alertDetails.editSnoozeRule",{defaultMessage:"Snooze the rule"}))),s.a.createElement(R.EuiButtonEmpty,{size:"s",color:"text",onClick:()=>{d(!1),f.open({attachments:E})},"data-test-subj":"add-to-case-button"},s.a.createElement(R.EuiText,{size:"s"},r.i18n.translate("xpack.observability.alertDetails.addToCase",{defaultMessage:"Add to case"}))))),o&&m?i({initialRule:o,onClose:()=>{b(!1)},onSave:u}):null,o&&p?n({rule:o,onClose:()=>g(!1),onRuleChanged:u,onLoading:T.noop}):null)}var ze=a(179),Ne=a(55),We=a(152);const qe="MMM D, YYYY @ HH:mm:ss.SSS";function Ue({alert:e}){var t,a,r;const l=null==e?void 0:e.fields[Re.D];return s.a.createElement("div",{"data-test-subj":"alert-summary-container"},s.a.createElement(R.EuiFlexGroup,null,s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.actualValue",defaultMessage:"Actual value"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiText,{size:"s",color:"subdued"},Object(ze.a)(null==e?void 0:e.fields[Re.G],null==e?void 0:e.fields[Re.f]))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.expectedValue",defaultMessage:"Expected value"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiText,{size:"s",color:"subdued"},Object(ze.a)(null==e?void 0:e.fields[Re.G],null==e?void 0:e.fields[Re.e]))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.duration",defaultMessage:"Duration"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiText,{size:"s",color:"subdued"},Object(Ne.a)(Number(null==e?void 0:e.fields[Re.c])))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.alertStatus",defaultMessage:"Status"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),null!=e&&e.fields[Re.N]?s.a.createElement(We.a,{textSize:"s",alertStatus:e.fields[Re.N]===Re.O?Re.O:Re.P}):s.a.createElement("div",{"data-test-subj":"noAlertStatus"},"-"))),s.a.createElement(R.EuiSpacer,{size:"m"}),s.a.createElement(R.EuiFlexGroup,null,s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.source",defaultMessage:"Source"}))),s.a.createElement("div",null,s.a.createElement(R.EuiSpacer,{size:"s"}),"-")),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.started",defaultMessage:"Started"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiText,{size:"s",color:"subdued"},Me()(null==e||null===(t=e.fields[Re.M])||void 0===t?void 0:t.toString()).format(qe))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.lastStatusUpdate",defaultMessage:"Last status update"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement(R.EuiText,{size:"s",color:"subdued"},Me()(null==e||null===(a=e.fields[Re.hb])||void 0===a?void 0:a.toString()).fromNow(),", ",Me()(null==e||null===(r=e.fields[Re.hb])||void 0===r?void 0:r.toString()).format(qe))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("h5",null,s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.pages.alertDetails.alertSummary.ruleTags",defaultMessage:"Rule Tags"}))),s.a.createElement(R.EuiSpacer,{size:"s"}),s.a.createElement("div",null,l&&l.length>0?s.a.createElement(R.EuiBadgeGroup,null,l.map(((e,t)=>s.a.createElement(R.EuiBadge,{"data-test-subj":`ruleTagBadge-${e}`,key:t,color:"hollow"},s.a.createElement(R.EuiText,{size:"s"},e))))):s.a.createElement("div",{"data-test-subj":"noRuleTags"},"-")))))}var Ge=a(48),Ke=a(129),He=function(){const{ObservabilityPageTemplate:e}=Object(S.a)();return s.a.createElement(e,{"data-test-subj":"pageNotFound"},s.a.createElement(R.EuiCallOut,{color:"warning",iconType:"iInCircle",title:s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.notFoundPage.title",defaultMessage:"Page Not Found"}),"data-test-subj":"observabilityPageNotFoundBanner"},s.a.createElement("p",{"data-test-subj":"observabilityPageNotFoundBannerText"},s.a.createElement(ae.FormattedMessage,{id:"xpack.observability.notFoundPage.bannerText",defaultMessage:"The Observability application doesn't recognize this route"}))))};function $e(){const{uiSettings:e,http:t,cases:{helpers:{canUseCases:a},ui:{getCasesContext:i}},triggersActionsUi:{ruleTypeRegistry:n}}=Object(K.a)().services,{ObservabilityPageTemplate:u,config:c}=Object(S.a)(),{alertId:d}=Object(o.useParams)(),[m,b]=w(d),[p,g]=Object(l.useState)(null),f=i(),E=a(),{rule:y}=Ce({ruleId:null==b?void 0:b.fields[Re.J],http:t});if(Object(l.useEffect)((()=>{b&&g(n.get(null==b?void 0:b.fields[Re.G]))}),[b,n]),Object(ue.a)([{href:t.basePath.prepend(Le.a.observability.alerts),text:r.i18n.translate("xpack.observability.breadcrumbs.alertsLinkText",{defaultMessage:"Alerts"})}]),m)return s.a.createElement(Oe,null);if(b&&!Object(Ke.a)(b,c))return s.a.createElement(He,null);if(!m&&!b)return s.a.createElement(R.EuiPanel,{"data-test-subj":"alertDetailsError"},s.a.createElement(R.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:s.a.createElement("h2",null,r.i18n.translate("xpack.observability.alertDetails.errorPromptTitle",{defaultMessage:"Unable to load alert details"})),body:s.a.createElement("p",null,r.i18n.translate("xpack.observability.alertDetails.errorPromptBody",{defaultMessage:"There was an error loading the alert details."}))}));const h=p?p.alertDetailsAppSection:null,x=function(e){const t=null==e?void 0:e.get(Ge.a.DATEFORMAT_TZ);return t&&"Browser"!==t?t:"local"}(e);return s.a.createElement(u,{pageHeader:{pageTitle:s.a.createElement(Qe,{title:null==b?void 0:b.reason,active:Boolean(null==b?void 0:b.active)}),rightSideItems:[s.a.createElement(f,{owner:[v.observabilityFeatureId],permissions:E,features:{alerts:{sync:!1}}},s.a.createElement(Be,{alert:b}))],bottomBorder:!1},"data-test-subj":"alertDetails"},s.a.createElement(Ue,{alert:b}),s.a.createElement(R.EuiSpacer,{size:"l"}),h&&y&&s.a.createElement(h,{alert:b,rule:y,timeZone:x}))}function Qe({title:e,active:t}){const a=t?r.i18n.translate("xpack.observability.alertDetails.alertActiveState",{defaultMessage:"Active"}):r.i18n.translate("xpack.observability.alertDetails.alertRecoveredState",{defaultMessage:"Recovered"});return s.a.createElement("div",{"data-test-subj":"page-title-container"},e,s.a.createElement(R.EuiFlexGroup,null,s.a.createElement(R.EuiFlexItem,null,s.a.createElement("div",null,"boolean"==typeof t?s.a.createElement(R.EuiBadge,{color:"#BD271E","data-test-subj":"page-title-active-badge"},a):null))))}var Je=a(58),Ye=a(29),Ze=a(112),Xe=a.n(Ze);const et=()=>{var e;const{licensing:t}=Object(K.a)().services,a=Xe()(null!==(e=null==t?void 0:t.license$)&&void 0!==e?e:new Ye.Observable,null);return{getLicense:()=>a,hasAtLeast:Object(l.useCallback)((e=>{if(a)return!!a&&a.isAvailable&&a.isActive&&a.hasAtLeast(e)}),[a])}};var tt=a(120);const at=[{label:r.i18n.translate("xpack.observability.slos.list.sortBy.name",{defaultMessage:"Name"}),type:"name",checked:"on"},{label:r.i18n.translate("xpack.observability.slos.list.sortBy.indicatorType",{defaultMessage:"Indicator type"}),type:"indicatorType"}],rt=[{label:r.i18n.translate("xpack.observability.slos.list.indicatorTypeFilter.apmLatency",{defaultMessage:"APM latency"}),type:"sli.apm.transactionDuration"},{label:r.i18n.translate("xpack.observability.slos.list.indicatorTypeFilter.apmAvailability",{defaultMessage:"APM availability"}),type:"sli.apm.transactionErrorRate"},{label:r.i18n.translate("xpack.observability.slos.list.indicatorTypeFilter.customKql",{defaultMessage:"Custom KQL"}),type:"sli.kql.custom"}];function lt({loading:e,onChangeQuery:t,onChangeSort:a,onChangeIndicatorTypeFilter:i}){const[n,o]=Object(l.useState)(!1),[u,c]=Object(l.useState)(!1),[d,m]=Object(l.useState)(at),[b,p]=Object(l.useState)(rt),g=d.find((e=>"on"===e.checked)),f=b.filter((e=>"on"===e.checked)),E=()=>o(!n),y=()=>c(!u);return Object(l.useEffect)((()=>{"name"!==(null==g?void 0:g.type)&&"indicatorType"!==(null==g?void 0:g.type)||a(g.type)}),[a,g]),s.a.createElement(R.EuiFlexGroup,{direction:"row",gutterSize:"s"},s.a.createElement(R.EuiFlexItem,{grow:!0},s.a.createElement(R.EuiFieldSearch,{fullWidth:!0,isLoading:e,onChange:t,placeholder:r.i18n.translate("xpack.observability.slos.list.search",{defaultMessage:"Search"})})),s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:200}},s.a.createElement(R.EuiFilterGroup,null,s.a.createElement(R.EuiPopover,{button:s.a.createElement(R.EuiFilterButton,{iconType:"arrowDown",onClick:E,isSelected:n,numFilters:f.length},r.i18n.translate("xpack.observability.slos.list.indicatorTypeFilter",{defaultMessage:"Indicator type"})),isOpen:n,closePopover:E,panelPaddingSize:"none",anchorPosition:"downCenter"},s.a.createElement("div",{style:{width:300}},s.a.createElement(R.EuiPopoverTitle,{paddingSize:"s"},r.i18n.translate("xpack.observability.slos.list.indicatorTypeFilter",{defaultMessage:"Indicator type"})),s.a.createElement(R.EuiSelectable,{options:b,onChange:e=>{p(e),i(e.filter((e=>"on"===e.checked)).map((e=>e.type)))}},(e=>e)))))),s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:200}},s.a.createElement(R.EuiFilterGroup,null,s.a.createElement(R.EuiPopover,{button:s.a.createElement(R.EuiFilterButton,{iconType:"arrowDown",onClick:y,isSelected:u},r.i18n.translate("xpack.observability.slos.list.sortByType",{defaultMessage:"Sort by {type}",values:{type:(null==g?void 0:g.label.toLowerCase())||""}})),isOpen:u,closePopover:y,panelPaddingSize:"none",anchorPosition:"downCenter"},s.a.createElement("div",{style:{width:300}},s.a.createElement(R.EuiPopoverTitle,{paddingSize:"s"},r.i18n.translate("xpack.observability.slos.list.sortBy",{defaultMessage:"Sort by"})),s.a.createElement(R.EuiSelectable,{singleSelection:!0,options:d,onChange:e=>{m(e),c(!1)}},(e=>e)))))))}const st={},it=async(e,t,a)=>{try{return await a.post("/internal/observability/slos/_historical_summary",{body:JSON.stringify({sloIds:e.sloIds}),signal:t.signal})}catch(e){}return st};function nt(){const{http:e}=Object(K.a)().services,[t,a]=Object(l.useState)(!1),[r,s]=Object(l.useState)(!1),[i,n]=Object(l.useState)(void 0);return{loading:t,error:i,success:r,createSlo:Object(l.useCallback)((async t=>{a(!0),n(""),s(!1);const r=JSON.stringify(t);try{await e.post("/api/observability/slos",{body:r}),s(!0)}catch(e){n(e)}finally{s(!1),a(!1)}}),[e]),updateSlo:Object(l.useCallback)((async(t,r)=>{a(!0),n(""),s(!1);const l=JSON.stringify(r);try{await e.put(`/api/observability/slos/${t}`,{body:l}),s(!0)}catch(e){n(e)}finally{s(!1),a(!1)}}),[e])}}var ot=a(17),ut=a(84),ct=a(49);function dt({chart:e,data:t,id:a,loading:r,state:l}){const i=Object(K.a)().services.charts,n=i.theme.useChartsTheme(),o=i.theme.useChartsBaseTheme(),{euiTheme:u}=Object(R.useEuiTheme)(),c="error"===l?u.colors.danger:u.colors.success,d="area"===e?ut.AreaSeries:ut.LineSeries;return r?s.a.createElement(R.EuiLoadingChart,{size:"m",mono:!0}):s.a.createElement(ut.Chart,{size:{height:28,width:80}},s.a.createElement(ut.Settings,{baseTheme:o,showLegend:!1,theme:[n,ct.EUI_SPARKLINE_THEME_PARTIAL],tooltip:"none"}),s.a.createElement(d,{color:c,data:t,fit:ut.Fit.Nearest,id:a,lineSeriesStyle:{line:{strokeWidth:1},point:{visible:!1}},xAccessor:"key",xScaleType:ut.ScaleType.Time,yAccessors:["value"],yScaleType:ut.ScaleType.Linear}))}function mt({slo:e,historicalSummary:t=[],historicalSummaryLoading:a}){const l="VIOLATED"===e.summary.status||"DEGRADING"===e.summary.status,i=l?"danger":"",n=t.map((e=>({key:new Date(e.date).getTime(),value:"NO_DATA"===e.status?void 0:e.sliValue}))),o=t.map((e=>({key:new Date(e.date).getTime(),value:"NO_DATA"===e.status?void 0:e.errorBudget.remaining})));return s.a.createElement(R.EuiFlexGroup,{direction:"row",justifyContent:"spaceBetween",gutterSize:"xl"},s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:210}},s.a.createElement(R.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"xs",alignItems:"center"},s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:120}},s.a.createElement(R.EuiStat,{description:r.i18n.translate("xpack.observability.slos.slo.stats.objective",{defaultMessage:"{objective} target",values:{objective:Object(Ne.d)(e.objective.target,1)}}),title:"NO_DATA"===e.summary.status?ot.a:Object(Ne.d)(e.summary.sliValue,1),titleColor:i,titleSize:"m",reverse:!0})),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(dt,{chart:"line",id:"sli_history",state:l?"error":"success",data:n,loading:a})))),s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:240}},s.a.createElement(R.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"xs",alignItems:"center"},s.a.createElement(R.EuiFlexItem,{grow:!1,style:{width:160}},s.a.createElement(R.EuiStat,{description:r.i18n.translate("xpack.observability.slos.slo.stats.budgetRemaining",{defaultMessage:"Budget remaining"}),title:Object(Ne.d)(e.summary.errorBudget.remaining,1),titleColor:i,titleSize:"m",reverse:!0})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(dt,{chart:"area",id:"error_budget_burn_down",state:l?"error":"success",data:o,loading:a})))))}function bt({slo:{id:e,name:t},onCancel:a,onDeleting:i,onDeleted:n}){const{notifications:{toasts:o}}=Object(K.a)().services,[u,c]=Object(l.useState)(!0),{deleteSlo:d,success:m,loading:b,error:p}=function(){const{http:e}=Object(K.a)().services,[t,a]=Object(l.useState)(!1),[r,s]=Object(l.useState)(!1),[i,n]=Object(l.useState)(void 0);return{loading:t,error:i,success:r,deleteSlo:Object(l.useCallback)((async t=>{a(!0),n(""),s(!1);try{await e.delete(`/api/observability/slos/${t}`),s(!0)}catch(e){n(e)}}),[e])}}();return b&&i(),m&&(o.addSuccess(Et(t)),n()),p&&o.addDanger(yt(t)),u?s.a.createElement(R.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"sloDeleteConfirmationModal",title:pt(),cancelButtonText:gt(),confirmButtonText:ft(t),onCancel:a,onConfirm:()=>{c(!1),d(e)}},r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.descriptionText",{defaultMessage:"You can't recover {name} after deleting.",values:{name:t}})):null}const pt=()=>r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.title",{defaultMessage:"Are you sure?"}),gt=()=>r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.cancelButtonLabel",{defaultMessage:"Cancel"}),ft=e=>r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.deleteButtonLabel",{defaultMessage:"Delete {name}",values:{name:e}}),Et=e=>r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.successNotification.descriptionText",{defaultMessage:"Deleted {name}",values:{name:e}}),yt=e=>r.i18n.translate("xpack.observability.slos.slo.deleteConfirmationModal.errorNotification.descriptionText",{defaultMessage:"Failed to delete {name}",values:{name:e}});var vt=a(86);function ht({slo:e}){return s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement("div",null,"NO_DATA"===e.summary.status&&s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDisabled},r.i18n.translate("xpack.observability.slos.slo.state.noData",{defaultMessage:"No data"})),"HEALTHY"===e.summary.status&&s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorSuccess},r.i18n.translate("xpack.observability.slos.slo.state.healthy",{defaultMessage:"Healthy"})),"DEGRADING"===e.summary.status&&s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorWarning},r.i18n.translate("xpack.observability.slos.slo.state.degrading",{defaultMessage:"Degrading"})),"VIOLATED"===e.summary.status&&s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDanger},r.i18n.translate("xpack.observability.slos.slo.state.violated",{defaultMessage:"Violated"})))),e.summary.errorBudget.isEstimated&&s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement("div",null,s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDisabled},r.i18n.translate("xpack.observability.slos.slo.state.forecasted",{defaultMessage:"Forecasted"})))))}var xt=a(87);function St({slo:e}){return s.a.createElement("div",null,s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDisabled},function(e){switch(e){case"sli.kql.custom":return r.i18n.translate("xpack.observability.slos.slo.indicator.customKql",{defaultMessage:"KQL"});case"sli.apm.transactionDuration":return r.i18n.translate("xpack.observability.slos.slo.indicator.apmLatency",{defaultMessage:"Latency"});case"sli.apm.transactionErrorRate":return r.i18n.translate("xpack.observability.slos.slo.indicator.apmAvailability",{defaultMessage:"Availability"});default:Object(xt.assertNever)(e)}}(e.indicator.type)))}function kt({slo:e}){const t=Number(e.timeWindow.duration.slice(0,-1)),a=e.timeWindow.duration.slice(-1);if("isRolling"in e.timeWindow){const e=function(e,t){switch(t){case"d":return r.i18n.translate("xpack.observability.slos.slo.timeWindow.days",{defaultMessage:"{duration} days",values:{duration:e}});case"w":return r.i18n.translate("xpack.observability.slos.slo.timeWindow.weeks",{defaultMessage:"{duration} weeks",values:{duration:e}});case"M":return r.i18n.translate("xpack.observability.slos.slo.timeWindow.months",{defaultMessage:"{duration} months",values:{duration:e}});case"Q":return r.i18n.translate("xpack.observability.slos.slo.timeWindow.quarterss",{defaultMessage:"{duration} quarters",values:{duration:e}});case"Y":return r.i18n.translate("xpack.observability.slos.slo.timeWindow.years",{defaultMessage:"{duration} years",values:{duration:e}})}}(t,a);return s.a.createElement("div",null,s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDisabled,iconType:"editorItemAlignRight",iconSide:"left"},e))}const l=Tt(a),i=Me.a.utc(),n=Me.a.utc(e.timeWindow.calendar.startTime),o=i.diff(n,l),u=n.clone().add(Math.floor(o/t)*t,l),c=u.clone().add(t,l).diff(u,"days"),d=i.diff(u,"days")+1;return s.a.createElement("div",null,s.a.createElement(R.EuiBadge,{color:vt.euiLightVars.euiColorDisabled,iconType:"calendar",iconSide:"left"},r.i18n.translate("xpack.observability.slos.slo.timeWindow.calendar",{defaultMessage:"{elapsed}/{total} days",values:{elapsed:Math.min(d,c),total:c}})))}const Tt=e=>{switch(e){case"d":return"days";case"w":return"weeks";case"M":return"months";case"Q":return"quarters";case"Y":return"years"}};function jt({slo:e}){return s.a.createElement(R.EuiFlexGroup,{direction:"row",responsive:!1,gutterSize:"s"},s.a.createElement(ht,{slo:e}),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(St,{slo:e})),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(kt,{slo:e})))}var Ft=a(201),Ot=a.n(Ft),wt=a(121);function Ct(e){if(e)return{...Ot()(e,["id","revision","createdAt","updatedAt","summary","enabled"]),objective:{target:100*e.objective.target,...e.objective.timesliceTarget&&{timesliceTarget:100*e.objective.timesliceTarget},...e.objective.timesliceWindow&&{timesliceWindow:String(Object(wt.a)(e.objective.timesliceWindow).value)}}}}function At(e){return{...e,objective:{target:e.objective.target/100,...e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},...e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}}}}function Mt({slo:e,historicalSummary:t=[],historicalSummaryLoading:a,onCloned:i,onCloning:n,onDeleted:o,onDeleting:u}){const{application:{navigateToUrl:c},http:{basePath:d}}=Object(K.a)().services,{createSlo:m,loading:b,success:p}=nt(),[g,f]=Object(l.useState)(!1),[E,y]=Object(l.useState)(!1),[v,h]=Object(l.useState)(!1),x=()=>{f(!g)};return Object(l.useEffect)((()=>{b&&n(),p&&i()}),[p,b,i,n]),s.a.createElement(R.EuiPanel,{"data-test-subj":"sloItem",hasBorder:!0,hasShadow:!1,color:b||v?"subdued":void 0,style:{opacity:b||v?.3:1,transition:"opacity 0.15s ease-in"}},s.a.createElement(R.EuiFlexGroup,{responsive:!1,alignItems:"center"},s.a.createElement(R.EuiFlexItem,{grow:!0},s.a.createElement(R.EuiFlexGroup,null,s.a.createElement(R.EuiFlexItem,{grow:!0},s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"m"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiText,{size:"s"},e.name)),s.a.createElement(jt,{slo:e}))),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(mt,{slo:e,historicalSummary:t,historicalSummaryLoading:a})))),s.a.createElement(R.EuiFlexItem,{grow:!1},s.a.createElement(R.EuiPopover,{anchorPosition:"downLeft",button:s.a.createElement(R.EuiButtonIcon,{"aria-label":"Actions",display:"empty",color:"text",iconType:"boxesVertical",size:"s",onClick:x}),panelPaddingSize:"none",closePopover:x,isOpen:g},s.a.createElement(R.EuiContextMenuPanel,{size:"s",items:[s.a.createElement(R.EuiContextMenuItem,{key:"edit",icon:"pencil",onClick:()=>{c(d.prepend(L.c.observability.sloEdit(e.id)))},"data-test-subj":"sloActionsEdit"},r.i18n.translate("xpack.observability.slos.slo.item.actions.edit",{defaultMessage:"Edit"})),s.a.createElement(R.EuiContextMenuItem,{key:"clone",icon:"copy",onClick:()=>{const t=At(Ct({...e,name:`[Copy] ${e.name}`}));m(t),f(!1)},"data-test-subj":"sloActionsClone"},r.i18n.translate("xpack.observability.slos.slo.item.actions.clone",{defaultMessage:"Clone"})),s.a.createElement(R.EuiContextMenuItem,{key:"delete",icon:"trash",onClick:()=>{y(!0),h(!0),f(!1)},"data-test-subj":"sloActionsDelete"},r.i18n.translate("xpack.observability.slos.slo.item.actions.delete",{defaultMessage:"Delete"}))]})))),E?s.a.createElement(bt,{slo:e,onCancel:()=>{y(!1),h(!1)},onDeleting:u,onDeleted:()=>{y(!1),o()}}):null)}function Dt(){return s.a.createElement(R.EuiCallOut,{title:r.i18n.translate("xpack.observability.slos.list.emptyTitle",{defaultMessage:"No results"}),color:"warning",iconType:"alert"},r.i18n.translate("xpack.observability.slos.list.emptyMessage",{defaultMessage:"There are no results for your criteria."}))}function _t(){return s.a.createElement(R.EuiEmptyPrompt,{iconType:"alert",color:"danger",title:s.a.createElement("h2",null,r.i18n.translate("xpack.observability.slos.list.errorTitle",{defaultMessage:"Unable to load SLOs"})),body:s.a.createElement("p",null,r.i18n.translate("xpack.observability.slos.list.errorMessage",{defaultMessage:"There was an error loading the SLOs. Contact your administrator for help."}))})}function Lt({sloList:e,loading:t,error:a,onCloned:r,onCloning:i,onDeleted:n,onDeleting:o}){const[u,c]=Object(l.useState)([]);Object(l.useEffect)((()=>{c(e.map((e=>e.id)))}),[e]);const{loading:d,data:m}=function({sloIds:e=[]}){const[t,a]=Object(l.useState)(st),r=Object(l.useMemo)((()=>({sloIds:e})),[e]),s=Object(l.useCallback)((e=>e.sloIds.length>0),[]),{data:i,loading:n,error:o}=Object(O.a)({paramsForApiCall:r,initialDataState:t,executeApiCall:it,shouldExecuteApiCall:s});return Object(l.useEffect)((()=>{a(i)}),[i]),{data:t,loading:n,error:o}}({sloIds:u});return t||a||0!==e.length?!t&&a?s.a.createElement(_t,null):s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"s"},e.map((e=>s.a.createElement(R.EuiFlexItem,{key:e.id},s.a.createElement(Mt,{slo:e,historicalSummary:m[e.id],historicalSummaryLoading:d,onCloned:r,onCloning:i,onDeleted:n,onDeleting:o}))))):s.a.createElement(Dt,null)}function It(){const[e,t]=Object(l.useState)(0),[a,r]=Object(l.useState)(""),[i,n]=Object(l.useState)("name"),[o,u]=Object(l.useState)([]),[c,d]=Object(l.useState)(!1),[m,b]=Object(l.useState)(!1),{loading:p,error:g,sloList:{results:f=[],total:E,perPage:y}}=Object(tt.a)({page:e+1,name:a,sortBy:i,indicatorTypes:o,refetch:m});Object(l.useEffect)((()=>{m&&b(!1),p||d(!1)}),[p,m]);const v=()=>{d(!0)},h=()=>{b(!0)},x=Object(l.useMemo)((()=>Object(T.debounce)((e=>{r(e.target.value)}),300)),[]);return s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"m","data-test-subj":"sloList"},s.a.createElement(R.EuiFlexItem,{grow:!0},s.a.createElement(lt,{loading:p||c,onChangeQuery:x,onChangeSort:e=>{n(e)},onChangeIndicatorTypeFilter:e=>{u(e)}})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(Lt,{sloList:f,loading:p,error:g,onCloned:h,onCloning:v,onDeleting:v,onDeleted:h})),f.length?s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"s",alignItems:"flexEnd"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiPagination,{pageCount:Math.ceil(E/y),activePage:e,onPageClick:e=>{t(e),b(!0)}})))):null)}var Pt=a(202),Vt=a.n(Pt);function Rt(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(K.a)().services,{hasAtLeast:a}=et(),l=a("platinum");return s.a.createElement(R.EuiPageTemplate,{minHeight:"0","data-test-subj":"slosPageWelcomePrompt",style:{paddingBlockStart:0}},s.a.createElement(R.EuiPageTemplate.EmptyPrompt,{title:s.a.createElement(R.EuiTitle,{size:"l"},s.a.createElement("h1",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.title",{defaultMessage:"Track and deliver on your SLOs"}))),icon:s.a.createElement(R.EuiImage,{size:"fullWidth",src:Vt.a,alt:""}),color:"transparent",layout:"horizontal",hasBorder:!1,body:s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.messageParagraph1",{defaultMessage:"Measure key metrics important to the business, such as service-level indicators and service-level objectives (SLIs/SLOs) to deliver on SLAs."})),s.a.createElement("p",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.messageParagraph2",{defaultMessage:"Easily report the uptime and reliability of your services to stakeholders with real-time insights."})),s.a.createElement(R.EuiSpacer,{size:"s"})),actions:s.a.createElement(s.a.Fragment,null,l?s.a.createElement(R.EuiFlexGroup,{direction:"column"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("span",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.getStartedMessage",{defaultMessage:"To get started, create your first SLO."})))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement("span",null,s.a.createElement(R.EuiButton,{fill:!0,color:"primary",onClick:()=>{e(t.prepend(L.c.observability.sloCreate))}},r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.buttonLabel",{defaultMessage:"Create SLO"}))))):s.a.createElement(R.EuiFlexGroup,{direction:"column"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("span",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.needLicenseMessage",{defaultMessage:"You need an Elastic Cloud subscription or Platinum license to use SLOs."})))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFlexGroup,{direction:"row"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiButton,{fill:!0,href:"https://www.elastic.co/cloud/elasticsearch-service/signup",target:"_blank","data-test-subj":"slosPageWelcomePromptSignupForCloudButton"},r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.signupForCloud",{defaultMessage:"Sign up for Elastic Cloud"}))),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiButton,{href:"https://www.elastic.co/subscriptions",target:"_blank","data-test-subj":"slosPageWelcomePromptSignupForLicenseButton"},r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.signupForLicense",{defaultMessage:"Sign up for license"}))))))),footer:s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiTitle,{size:"xxs"},s.a.createElement("span",null,r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.learnMore",{defaultMessage:"Want to learn more?"})))," ",s.a.createElement(R.EuiLink,{href:"#",target:"_blank"},r.i18n.translate("xpack.observability.slos.sloList.welcomePrompt.learnMoreLink",{defaultMessage:"Read the docs"})))}))}function Bt(e){return!0===e.unsafe.slo.enabled}function zt(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(K.a)().services,{ObservabilityPageTemplate:a,config:l}=Object(S.a)(),{hasAtLeast:i}=et(),{loading:n,sloList:{total:o}}=Object(tt.a)({refetch:!1});return Object(ue.a)([{href:t.prepend(L.c.observability.slos),text:r.i18n.translate("xpack.observability.breadcrumbs.slosLinkText",{defaultMessage:"SLOs"})}]),Bt(l)?n?null:0!==o&&i("platinum")?s.a.createElement(a,{pageHeader:{pageTitle:r.i18n.translate("xpack.observability.slosPageTitle",{defaultMessage:"SLOs"}),rightSideItems:[s.a.createElement(R.EuiButton,{color:"primary",fill:!0,onClick:()=>{e(t.prepend(L.c.observability.sloCreate))}},r.i18n.translate("xpack.observability.slos.sloList.pageHeader.createNewButtonLabel",{defaultMessage:"Create new SLO"}))],bottomBorder:!1},"data-test-subj":"slosPage"},s.a.createElement(It,null)):s.a.createElement(Rt,null):s.a.createElement(He,null)}var Nt=a(122);function Wt(e){const{slo:t}=e;return s.a.createElement("pre",{"data-test-subj":"sloDetails"},JSON.stringify(t,null,2))}function qt(e){const{isLoading:t,slo:a}=e;return t?s.a.createElement(R.EuiLoadingSpinner,{"data-test-subj":"loadingTitle"}):s.a.createElement(s.a.Fragment,null,a&&a.name)}function Ut(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(K.a)().services,{ObservabilityPageTemplate:a,config:l}=Object(S.a)(),{sloId:i}=Object(o.useParams)(),{hasAtLeast:n}=et(),u=n("platinum"),{loading:c,slo:d}=Object(Nt.a)(i);Object(ue.a)(function(e,t){var a;return[{href:e.prepend(L.c.observability.slos),text:r.i18n.translate("xpack.observability.breadcrumbs.slosLinkText",{defaultMessage:"SLOs"})},{text:null!==(a=null==t?void 0:t.name)&&void 0!==a?a:r.i18n.translate("xpack.observability.breadcrumbs.sloDetailsLinkText",{defaultMessage:"Details"})}]}(t,d));const m=!c&&void 0===d;return!Bt(l)||m?s.a.createElement(He,null):(!1===u&&e(t.prepend(L.c.observability.slos)),s.a.createElement(a,{pageHeader:{pageTitle:s.a.createElement(qt,{isLoading:c,slo:d}),rightSideItems:[],bottomBorder:!0},"data-test-subj":"sloDetailsPage"},c&&s.a.createElement(R.EuiLoadingSpinner,{"data-test-subj":"loadingDetails"}),!c&&s.a.createElement(Wt,{slo:d})))}var Gt=a(113);function Kt({control:e}){const{loading:t,indices:a=[]}=function(){const e=Object(l.useRef)(!1),{data:t,loading:a,error:r}=Object(O.a)({paramsForApiCall:{},initialDataState:void 0,executeApiCall:async(t,a,r)=>{try{const t=await r.get("/api/index_management/indices",{signal:a.signal});if(void 0!==t)return e.current=!0,t}catch(e){}},shouldExecuteApiCall:()=>!1===e.current});return{indices:t,loading:a,error:r}}(),[i,n]=Object(l.useState)([]);Object(l.useEffect)((()=>{n([Ht(a)])}),[a.length]);const o=e=>{const t=[];if(!e)return n([Ht(a)]);const l=e.endsWith("*")?e.substring(0,e.length-1):e,s=a.filter((({name:e})=>e.startsWith(l)));if(0===s.length)return n([]);t.push(Ht(s));const i=e.endsWith("*")?e:`${e}*`;t.push({label:r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.indexPatternLabel",{defaultMessage:"Use an index pattern"}),options:[{value:i,label:i}]}),n(t)};return s.a.createElement(R.EuiFormRow,{label:r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.label",{defaultMessage:"Index"}),helpText:r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.helpText",{defaultMessage:"Use * to broaden your query."})},s.a.createElement(Gt.Controller,{name:"indicator.params.index",control:e,rules:{required:!0},render:({field:e,fieldState:a})=>s.a.createElement(R.EuiComboBox,V()({},e,{"aria-label":r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.placeholder",{defaultMessage:"Select an index or index pattern"}),async:!0,"data-test-subj":"indexSelection",isClearable:!0,isInvalid:!!a.error,isLoading:t,onChange:t=>{if(t.length)return e.onChange(t[0].value);e.onChange("")},onSearchChange:o,options:i,placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.placeholder",{defaultMessage:"Select an index or index pattern"}),selectedOptions:e.value?[{value:e.value,label:e.value,"data-test-subj":"indexSelectionSelectedValue"}]:[],singleSelection:!0}))}))}function Ht(e){return{label:r.i18n.translate("xpack.observability.slos.sloEdit.customKql.indexSelection.indexOptionsLabel",{defaultMessage:"Select an existing index"}),options:e.map((({name:e})=>({label:e,value:e}))).sort(((e,t)=>String(e.label).localeCompare(t.label)))}}var $t=a(90);function Qt({control:e,dataTestSubj:t,indexPatternString:a,label:r,name:i,placeholder:n}){const{data:o,dataViews:u,docLinks:c,http:d,notifications:m,storage:b,uiSettings:p,unifiedSearch:g}=Object(K.a)().services,{dataView:f}=function({indexPatternString:e}){const{dataViews:t}=Object(K.a)().services,[a,r]=Object(l.useState)(),[s,i]=Object(l.useState)(!1);return Object(l.useEffect)((()=>{e&&(i(!0),t.create({title:e,allowNoIndex:!0}).then((e=>{r(e)})).finally((()=>{i(!1)})))}),[e,t]),{dataView:a,loading:s}}({indexPatternString:a});return s.a.createElement(R.EuiFormRow,{label:r,fullWidth:!0},s.a.createElement(Gt.Controller,{name:i,control:e,render:({field:e})=>s.a.createElement($t.QueryStringInput,{appName:"Observability",bubbleSubmitEvent:!1,dataTestSubj:t,deps:{data:o,dataViews:u,docLinks:c,http:d,notifications:m,storage:b,uiSettings:p,unifiedSearch:g},disableAutoFocus:!0,disableLanguageSwitcher:!0,indexPatterns:f?[f]:[],isDisabled:!a,languageSwitcherPopoverAnchorPosition:"rightDown",placeholder:n,query:{query:String(e.value),language:"kuery"},size:"s",onChange:t=>{e.onChange(t.query)}})}))}function Jt({control:e,watch:t}){return s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"l"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(Kt,{control:e})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(Qt,{control:e,dataTestSubj:"sloFormCustomKqlFilterQueryInput",indexPatternString:t("indicator.params.index"),label:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.queryFilter",{defaultMessage:"Query filter"}),name:"indicator.params.filter",placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.customFilter",{defaultMessage:"Custom filter to apply on the index"})})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(Qt,{control:e,dataTestSubj:"sloFormCustomKqlGoodQueryInput",indexPatternString:t("indicator.params.index"),label:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.goodQuery",{defaultMessage:"Good query"}),name:"indicator.params.good",placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.goodQueryPlaceholder",{defaultMessage:"Define the good events"})})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(Qt,{control:e,dataTestSubj:"sloFormCustomKqlTotalQueryInput",indexPatternString:t("indicator.params.index"),label:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.totalQuery",{defaultMessage:"Total query"}),name:"indicator.params.total",placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.sloDefinition.customKql.totalQueryPlaceholder",{defaultMessage:"Define the total events"})})))}function Yt({control:e}){const t=Object(R.useGeneratedHtmlId)({prefix:"sloName"}),a=Object(R.useGeneratedHtmlId)({prefix:"sloDescription"});return s.a.createElement(R.EuiFlexGroup,{direction:"column",gutterSize:"l"},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.description.sloName",{defaultMessage:"SLO Name"})),s.a.createElement(Gt.Controller,{name:"name",control:e,rules:{required:!0},render:({field:e})=>s.a.createElement(R.EuiFieldText,V()({fullWidth:!0,id:t,"data-test-subj":"sloFormNameInput",placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.description.sloNamePlaceholder",{defaultMessage:"Name for the SLO"})},e))})),s.a.createElement(R.EuiFlexItem,{grow:!0},s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.description.sloDescription",{defaultMessage:"Description"})),s.a.createElement(Gt.Controller,{name:"description",control:e,render:({field:e})=>s.a.createElement(R.EuiTextArea,V()({fullWidth:!0,id:a,"data-test-subj":"sloFormDescriptionTextArea",placeholder:r.i18n.translate("xpack.observability.slos.sloEdit.description.sloDescriptionPlaceholder",{defaultMessage:"A short description of the SLO"})},e))})))}function Zt({control:e}){return s.a.createElement(R.EuiFlexGrid,{columns:3},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.timeSliceTarget.label",{defaultMessage:"Timeslice target (%)"})),s.a.createElement(Gt.Controller,{name:"objective.timesliceTarget",control:e,defaultValue:95,rules:{required:!0,min:.001,max:99.999},render:({field:e})=>s.a.createElement(R.EuiFieldNumber,V()({},e,{value:String(e.value),"data-test-subj":"sloFormObjectiveTimesliceTargetInput",min:.001,max:99.999,step:.001,onChange:t=>e.onChange(Number(t.target.value))}))})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.timesliceWindow.label",{defaultMessage:"Timeslice window (minutes)"})),s.a.createElement(Gt.Controller,{name:"objective.timesliceWindow",defaultValue:"1",control:e,rules:{required:!0,min:1,max:120},render:({field:e})=>s.a.createElement(R.EuiFieldNumber,V()({},e,{"data-test-subj":"sloFormObjectiveTimesliceWindowInput",value:String(e.value),min:1,max:120,step:1,onChange:t=>e.onChange(String(Number(t.target.value)))}))})))}const Xt=[{value:"sli.kql.custom",text:r.i18n.translate("xpack.observability.slos.sloTypes.kqlCustomIndicator",{defaultMessage:"KQL custom indicator"})}],ea=[{value:"occurrences",text:r.i18n.translate("xpack.observability.slos.sloEdit.budgetingMethod.occurrences",{defaultMessage:"Occurrences"})},{value:"timeslices",text:r.i18n.translate("xpack.observability.slos.sloEdit.budgetingMethod.timeslices",{defaultMessage:"Timeslices"})}],ta=[90,30,7].map((e=>({value:`${e}d`,text:r.i18n.translate("xpack.observability.slos.sloEdit.timeWindow.days",{defaultMessage:"{number} days",values:{number:e}})}))),aa={name:"",description:"",indicator:{type:Xt[0].value,params:{index:"",filter:"",good:"",total:""}},timeWindow:{duration:ta[ta.findIndex((e=>"30d"===e.value))].value,isRolling:!0},budgetingMethod:ea[0].value,objective:{target:99.5}};function ra({control:e,watch:t}){const a=Object(R.useGeneratedHtmlId)({prefix:"budgetingSelect"}),l=Object(R.useGeneratedHtmlId)({prefix:"timeWindowSelect"});return s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiFlexGrid,{columns:3},s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.budgetingMethod.label",{defaultMessage:"Budgeting method"})),s.a.createElement(Gt.Controller,{name:"budgetingMethod",control:e,rules:{required:!0},render:({field:e})=>s.a.createElement(R.EuiSelect,V()({id:a,"data-test-subj":"sloFormBudgetingMethodSelect",options:ea},e))})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.timeWindow.label",{defaultMessage:"Time window"})),s.a.createElement(Gt.Controller,{name:"timeWindow.duration",control:e,rules:{required:!0},render:({field:e})=>s.a.createElement(R.EuiSelect,V()({id:l,"data-test-subj":"sloFormTimeWindowDurationSelect",options:ta},e,{value:String(e.value)}))})),s.a.createElement(R.EuiFlexItem,null,s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.targetSlo.label",{defaultMessage:"Target / SLO (%)"})),s.a.createElement(Gt.Controller,{name:"objective.target",control:e,rules:{required:!0,min:.001,max:99.999},render:({field:e})=>s.a.createElement(R.EuiFieldNumber,V()({"data-test-subj":"sloFormObjectiveTargetInput"},e,{value:String(e.value),min:.001,max:99.999,step:.001,onChange:t=>e.onChange(Number(t.target.value))}))}))),"timeslices"===t("budgetingMethod")?s.a.createElement(s.a.Fragment,null,s.a.createElement(R.EuiSpacer,{size:"xl"}),s.a.createElement(Zt,{control:e})):null)}function la({slo:e}){const t=void 0!==e,{application:{navigateToUrl:a},http:{basePath:i},notifications:{toasts:n}}=Object(K.a)().services,{control:o,watch:u,getFieldState:c,getValues:d,formState:m}=Object(Gt.useForm)({defaultValues:aa,values:Ct(e),mode:"all"}),{isDefinitionValid:b,isDescriptionValid:p,isObjectiveValid:g}=function({getFieldState:e,formState:t}){return{isDefinitionValid:["indicator.params.index","indicator.params.filter","indicator.params.good","indicator.params.total"].every((a=>void 0===e(a,t).error)),isObjectiveValid:["budgetingMethod","timeWindow.duration","objective.target","objective.timesliceTarget","objective.timesliceWindow"].every((a=>void 0===e(a,t).error)),isDescriptionValid:["name","description"].every((a=>void 0===e(a,t).error))}}({getFieldState:c,formState:m}),{loading:f,success:E,error:y,createSlo:v,updateSlo:h}=nt();return Object(l.useEffect)((()=>{E&&(n.addSuccess(t?r.i18n.translate("xpack.observability.slos.sloEdit.update.success",{defaultMessage:"Successfully updated {name}",values:{name:d().name}}):r.i18n.translate("xpack.observability.slos.sloEdit.creation.success",{defaultMessage:"Successfully created {name}",values:{name:d().name}})),a(i.prepend(L.c.observability.slos))),y&&n.addError(new Error(y),{title:r.i18n.translate("xpack.observability.slos.sloEdit.creation.error",{defaultMessage:"Something went wrong"})})}),[E,y,n,t,d,a,i]),s.a.createElement(R.EuiTimeline,{"data-test-subj":"sloForm"},s.a.createElement(R.EuiTimelineItem,{verticalAlign:"top",icon:s.a.createElement(R.EuiAvatar,{name:b?"Check":"1",iconType:b?"check":"",color:b?vt.euiThemeVars.euiColorSuccess:vt.euiThemeVars.euiColorPrimary})},s.a.createElement(R.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:775}},s.a.createElement(R.EuiTitle,null,s.a.createElement("h2",null,r.i18n.translate("xpack.observability.slos.sloEdit.definition.title",{defaultMessage:"Define SLI"}))),s.a.createElement(R.EuiSpacer,{size:"xl"}),s.a.createElement(R.EuiFormLabel,null,r.i18n.translate("xpack.observability.slos.sloEdit.definition.sliType",{defaultMessage:"SLI type"})),s.a.createElement(Gt.Controller,{name:"indicator.type",control:o,rules:{required:!0},render:({field:e})=>s.a.createElement(R.EuiSelect,V()({"data-test-subj":"sloFormIndicatorTypeSelect"},e,{options:Xt}))}),s.a.createElement(R.EuiSpacer,{size:"xxl"}),"sli.kql.custom"===u("indicator.type")?s.a.createElement(Jt,{control:o,watch:u}):null,s.a.createElement(R.EuiSpacer,{size:"m"}))),s.a.createElement(R.EuiTimelineItem,{verticalAlign:"top",icon:s.a.createElement(R.EuiAvatar,{name:g?"Check":"2",iconType:g?"check":"",color:g?vt.euiThemeVars.euiColorSuccess:vt.euiThemeVars.euiColorPrimary})},s.a.createElement(R.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:775}},s.a.createElement(R.EuiTitle,null,s.a.createElement("h2",null,r.i18n.translate("xpack.observability.slos.sloEdit.objectives.title",{defaultMessage:"Set objectives"}))),s.a.createElement(R.EuiSpacer,{size:"xl"}),s.a.createElement(ra,{control:o,watch:u}),s.a.createElement(R.EuiSpacer,{size:"xl"}))),s.a.createElement(R.EuiTimelineItem,{verticalAlign:"top",icon:s.a.createElement(R.EuiAvatar,{name:p?"Check":"3",iconType:p?"check":"",color:p?vt.euiThemeVars.euiColorSuccess:vt.euiThemeVars.euiColorPrimary})},s.a.createElement(R.EuiPanel,{hasBorder:!1,hasShadow:!1,paddingSize:"none",style:{maxWidth:775}},s.a.createElement(R.EuiTitle,null,s.a.createElement("h2",null,r.i18n.translate("xpack.observability.slos.sloEdit.description.title",{defaultMessage:"Describe SLO"}))),s.a.createElement(R.EuiSpacer,{size:"xl"}),s.a.createElement(Yt,{control:o}),s.a.createElement(R.EuiSpacer,{size:"xl"}),s.a.createElement(R.EuiButton,{fill:!0,color:"primary","data-test-subj":"sloFormSubmitButton",onClick:()=>{const a=d();if(t){const t=function(e){return{...e,objective:{target:e.objective.target/100,...e.objective.timesliceTarget&&{timesliceTarget:e.objective.timesliceTarget/100},...e.objective.timesliceWindow&&{timesliceWindow:`${e.objective.timesliceWindow}m`}}}}(a);h(e.id,t)}else{const e=At(a);v(e)}},disabled:!m.isValid,isLoading:f&&!y},t?r.i18n.translate("xpack.observability.slos.sloEdit.editSloButton",{defaultMessage:"Update SLO"}):r.i18n.translate("xpack.observability.slos.sloEdit.createSloButton",{defaultMessage:"Create SLO"})),s.a.createElement(R.EuiSpacer,{size:"xl"}))))}function sa(){const{application:{navigateToUrl:e},http:{basePath:t}}=Object(K.a)().services,{ObservabilityPageTemplate:a,config:l}=Object(S.a)(),{sloId:i}=Object(o.useParams)(),{hasAtLeast:n}=et(),u=n("platinum");Object(ue.a)([{href:t.prepend(L.c.observability.slos),text:r.i18n.translate("xpack.observability.breadcrumbs.sloEditLinkText",{defaultMessage:"SLOs"})}]);const{slo:c,loading:d}=Object(Nt.a)(i);return Bt(l)?(!1===u&&e(t.prepend(L.c.observability.slos)),d?null:s.a.createElement(a,{pageHeader:{pageTitle:c?r.i18n.translate("xpack.observability.sloEditPageTitle",{defaultMessage:"Edit SLO"}):r.i18n.translate("xpack.observability.sloCreatePageTitle",{defaultMessage:"Create new SLO"}),rightSideItems:[],bottomBorder:!1},"data-test-subj":"slosEditPage"},s.a.createElement(la,{slo:c}))):s.a.createElement(He,null)}function ia({to:e}){return Object(o.useHistory)().replace(e),null}const na={"/":{handler:()=>s.a.createElement(ia,{to:"/overview"}),params:{},exact:!0},"/landing":{handler:()=>s.a.createElement(ia,{to:"/overview"}),params:{},exact:!0},"/overview":{handler:({query:e})=>s.a.createElement(Je.b,null,s.a.createElement(J.b,null)),params:{},exact:!0},[v.casesPath]:{handler:()=>s.a.createElement(y.TrackApplicationView,{viewId:L.a.cases},s.a.createElement(Z,null)),params:{},exact:!1},"/alerts":{handler:()=>s.a.createElement(y.TrackApplicationView,{viewId:L.a.alerts},s.a.createElement(X.a,null)),params:{},exact:!0},"/exploratory-view/":{handler:()=>s.a.createElement(te.a,null),params:{query:g.partial({rangeFrom:g.string,rangeTo:g.string,refreshPaused:ee.pipe(g.boolean),refreshInterval:ee.pipe(g.number)})},exact:!0},"/alerts/rules":{handler:()=>s.a.createElement(y.TrackApplicationView,{viewId:L.a.rules},s.a.createElement(pe,null)),params:{},exact:!0},"/alerts/rules/:ruleId":{handler:()=>s.a.createElement(Pe,null),params:{},exact:!0},"/alerts/:alertId":{handler:()=>s.a.createElement($e,null),params:{},exact:!0},"/slos":{handler:()=>s.a.createElement(zt,null),params:{},exact:!0},"/slos/create":{handler:()=>s.a.createElement(sa,null),params:{},exact:!0},"/slos/edit/:sloId":{handler:()=>s.a.createElement(sa,null),params:{},exact:!0},"/slos/:sloId":{handler:()=>s.a.createElement(Ut,null),params:{},exact:!0}};function oa(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.Switch,null,Object.keys(na).map((e=>{const t=e,{handler:a,exact:r}=na[t];return s.a.createElement(o.Route,{key:t,path:t,exact:r,component:()=>{const e=function(e){const t=Object(o.useLocation)(),a=Object(o.useParams)(),r=function(e){const t=new URLSearchParams(e.search),a={};return t.forEach(((e,t)=>{a[t]=e})),a}(t),{query:l,path:s}=na[e].params,i={queryRt:l?g.exact(l):g.strict({}),pathRt:s?g.exact(s):g.strict({})},n=i.queryRt.decode(r),u=i.pathRt.decode(a);return Object(f.isLeft)(n)&&console.error(E.PathReporter.report(n)[0]),Object(f.isLeft)(u)&&console.error(E.PathReporter.report(u)[0]),{query:Object(f.isLeft)(n)?{}:n.right,path:Object(f.isLeft)(u)?{}:u.right}}(t);return a(e)}})}))))}const ua=({core:e,config:t,plugins:a,appMountParameters:l,observabilityRuleTypeRegistry:i,ObservabilityPageTemplate:g,usageCollection:f,isDev:E,kibanaVersion:y})=>{var v;const{element:h,history:x,theme$:S}=l,k=e.i18n,T=e.uiSettings.get("theme:darkMode");e.chrome.setHelpExtension({appName:r.i18n.translate("xpack.observability.feedbackMenu.appName",{defaultMessage:"Observability"}),links:[{linkType:"discuss",href:"https://ela.st/observability-discuss"}]}),h.classList.add(u.APP_WRAPPER_CLASS);const j=null!==(v=null==f?void 0:f.components.ApplicationUsageTrackingProvider)&&void 0!==v?v:s.a.Fragment;return n.a.render(s.a.createElement(j,null,s.a.createElement(d.KibanaThemeProvider,{theme$:S},s.a.createElement(d.KibanaContextProvider,{services:{...e,...a,storage:new m.Storage(localStorage),isDev:E,kibanaVersion:y}},s.a.createElement(p.a.Provider,{value:{config:t,appMountParameters:l,observabilityRuleTypeRegistry:i,ObservabilityPageTemplate:g}},s.a.createElement(o.Router,{history:x},s.a.createElement(c.EuiThemeProvider,{darkMode:T},s.a.createElement(k.Context,null,s.a.createElement(d.RedirectAppLinks,{application:e.application,className:u.APP_WRAPPER_CLASS},s.a.createElement(b.b,null,s.a.createElement(oa,null)))))))))),h),()=>{n.a.unmountComponentAtNode(h)}}}}]);