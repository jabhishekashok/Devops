!function(e){function t(t){for(var r,i,o=t[0],s=t[1],a=0,d=[];a<o.length;a++)i=o[a],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&d.push(n[i][0]),n[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);d.length;)d.shift()()}var r={},n={3:0};function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,i){r=n[e]=[t,i]}));t.push(r[2]=o);var s,a=document.createElement("script");a.charset="utf-8",a.timeout=120,i.nc&&a.setAttribute("nonce",i.nc),a.src=function(e){return i.p+"discover.chunk."+e+".js"}(e);var c=new Error;s=function(t){a.onerror=a.onload=null,clearTimeout(d);var r=n[e];if(0!==r){if(r){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,r[1](c)}n[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:a})}),12e4);a.onerror=a.onload=s,document.head.appendChild(a)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.discover_bundle_jsonpfunction=window.discover_bundle_jsonpfunction||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var a=0;a<o.length;a++)t(o[a]);var c=s;i(i.s=25)}([function(e,t,r){e.exports=r(24)(2)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnI18n},function(e,t,r){"use strict";r.r(t),r.d(t,"PLUGIN_ID",(function(){return s})),r.d(t,"APP_ICON",(function(){return a})),r.d(t,"DEFAULT_COLUMNS_SETTING",(function(){return c})),r.d(t,"SAMPLE_SIZE_SETTING",(function(){return d})),r.d(t,"SAMPLE_ROWS_PER_PAGE_SETTING",(function(){return u})),r.d(t,"SORT_DEFAULT_ORDER_SETTING",(function(){return l})),r.d(t,"SEARCH_ON_PAGE_LOAD_SETTING",(function(){return p})),r.d(t,"DOC_HIDE_TIME_COLUMN_SETTING",(function(){return f})),r.d(t,"FIELDS_LIMIT_SETTING",(function(){return _})),r.d(t,"CONTEXT_DEFAULT_SIZE_SETTING",(function(){return h})),r.d(t,"CONTEXT_STEP_SETTING",(function(){return b})),r.d(t,"CONTEXT_TIE_BREAKER_FIELDS_SETTING",(function(){return g})),r.d(t,"DOC_TABLE_LEGACY",(function(){return v})),r.d(t,"MODIFY_COLUMNS_ON_SWITCH",(function(){return S})),r.d(t,"SEARCH_FIELDS_FROM_SOURCE",(function(){return O})),r.d(t,"MAX_DOC_FIELDS_DISPLAYED",(function(){return y})),r.d(t,"SHOW_FIELD_STATISTICS",(function(){return m})),r.d(t,"SHOW_MULTIFIELDS",(function(){return w})),r.d(t,"TRUNCATE_MAX_HEIGHT",(function(){return E})),r.d(t,"ROW_HEIGHT_OPTION",(function(){return j})),r.d(t,"SEARCH_EMBEDDABLE_TYPE",(function(){return D})),r.d(t,"HIDE_ANNOUNCEMENTS",(function(){return T})),r.d(t,"SHOW_LEGACY_FIELD_TOP_VALUES",(function(){return P})),r.d(t,"ENABLE_SQL",(function(){return x})),r.d(t,"DISCOVER_APP_LOCATOR",(function(){return o})),r.d(t,"DiscoverAppLocatorDefinition",(function(){return locator_DiscoverAppLocatorDefinition}));var n=r(0),i=r.n(n);const o="DISCOVER_APP_LOCATOR";class locator_DiscoverAppLocatorDefinition{constructor(e){i()(this,"id",o),i()(this,"getLocation",(async e=>{const{useHash:t=this.deps.useHash,filters:n,dataViewId:i,indexPatternId:o,dataViewSpec:s,query:a,refreshInterval:c,savedSearchId:d,timeRange:u,searchSessionId:l,columns:p,savedQuery:f,sort:_,interval:h,viewMode:b,hideAggregatedPreview:g,breakdownField:v,isAlertResults:S}=e,O=d?`view/${encodeURIComponent(d)}`:"",y={},m={},{isFilterPinned:w}=await Promise.resolve().then(r.t.bind(null,41,7));a&&(y.query=a),n&&n.length&&(y.filters=null==n?void 0:n.filter((e=>!w(e)))),o&&(y.index=o),i&&(y.index=i),p&&(y.columns=p),f&&(y.savedQuery=f),_&&(y.sort=_),h&&(y.interval=h),u&&(m.time=u),n&&n.length&&(m.filters=null==n?void 0:n.filter((e=>w(e)))),c&&(m.refreshInterval=c),b&&(y.viewMode=b),g&&(y.hideAggregatedPreview=g),v&&(y.breakdownField=v);const E={};s&&(E.dataViewSpec=s),S&&(E.isAlertResults=S);let j=`#/${O}`;return j=this.deps.setStateToKbnUrl("_g",m,{useHash:t},j),j=this.deps.setStateToKbnUrl("_a",y,{useHash:t},j),l&&(j=`${j}&searchSessionId=${l}`),{app:"discover",path:j,state:E}})),this.deps=e}}const s="discover",a="discoverApp",c="defaultColumns",d="discover:sampleSize",u="discover:sampleRowsPerPage",l="discover:sort:defaultOrder",p="discover:searchOnPageLoad",f="doc_table:hideTimeColumn",_="fields:popularLimit",h="context:defaultSize",b="context:step",g="context:tieBreakerFields",v="doc_table:legacy",S="discover:modifyColumnsOnSwitch",O="discover:searchFieldsFromSource",y="discover:maxDocFieldsDisplayed",m="discover:showFieldStatistics",w="discover:showMultiFields",E="truncate:maxHeight",j="discover:rowHeightOption",D="search",T="hideAnnouncements",P="discover:showLegacyFieldTopValues",x="discover:enableSql"},function(e,t){e.exports=__kbnSharedDeps__.React},function(e,t){e.exports=__kbnSharedDeps__.EmotionReact},function(e,t,r){"use strict";r.d(t,"j",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return d})),r.d(t,"h",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"k",(function(){return p})),r.d(t,"a",(function(){return f})),r.d(t,"g",(function(){return _})),r.d(t,"c",(function(){return h})),r.d(t,"l",(function(){return b})),r.d(t,"d",(function(){return g})),r.d(t,"i",(function(){return v}));var n=r(9),i=r(16),o=r(1);let s;const a=e=>s=e,c=()=>s,[d,u]=Object(o.createGetterSetter)("headerActionMenuMounter"),[l,p]=Object(o.createGetterSetter)("urlTracker"),[f,_]=Object(o.createGetterSetter)("DocViewsRegistry"),h=Object(n.once)((()=>{const e=Object(i.createHashHistory)();return e.listen((()=>{})),e})),b=()=>{const e=h();return Object.assign(e.location,Object(i.createHashHistory)().location),e},[g,v]=Object(o.createGetterSetter)("scopedHistory")},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/embeddable/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Lodash},function(e,t,r){"use strict";var n=r(4);r.d(t,"a",(function(){return n.SEARCH_EMBEDDABLE_TYPE}))},function(e,t){e.exports=__kbnSharedDeps__.EmotionCache},function(e,t,r){"use strict";e.exports=r(28)},function(e,t){e.exports=__kbnSharedDeps__.ElasticEui},function(e,t){e.exports=__kbnSharedDeps__.RxjsOperators},function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return i}));const n="ad_hoc_data_view",i="searchSessionId"},function(e,t){e.exports=__kbnSharedDeps__.History},function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(18);const i=()=>Object(n.useKibana)().services},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaReact/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Rxjs},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/kibanaUtils/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){"use strict";e.exports=r(27)},function(e,t,r){"use strict";e.exports=r(35)},function(e,t,r){r.r(t);var n=__kbnBundles__.get("entry/core/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps_npm__},function(e,t,r){r(26),__kbnBundles__.define("plugin/discover/public",r,37),__kbnBundles__.define("plugin/discover/common",r,4)},function(e,t,r){r.p=window.__kbnPublicPath__.discover},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(11),r(12),r(22);var n=r(36).default({key:"css"}),i=n.flush,o=n.hydrate,s=n.cx,a=n.merge,c=n.getRegisteredStyles,d=n.injectGlobal,u=n.keyframes,l=n.css,p=n.sheet,f=n.cache;t.cache=f,t.css=l,t.cx=s,t.flush=i,t.getRegisteredStyles=c,t.hydrate=o,t.injectGlobal=d,t.keyframes=u,t.merge=a,t.sheet=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(29),i=r(31),o=r(33);function s(e){return e&&e.__esModule?e:{default:e}}var a=s(n),c=s(i),d=/[A-Z]|^ms/g,u=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},p=function(e){return null!=e&&"boolean"!=typeof e},f=s(o).default((function(e){return l(e)?e:e.replace(d,"-$&").toLowerCase()})),_=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(u,(function(e,t,r){return b={name:t,styles:r,next:b},t}))}return 1===c.default[e]||l(e)||"number"!=typeof t||0===t?t:t+"px"};function h(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return b={name:r.name,styles:r.styles,next:b},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)b={name:n.name,styles:n.styles,next:b},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=h(e,t,r[i])+";";else for(var o in r){var s=r[o];if("object"!=typeof s)null!=t&&void 0!==t[s]?n+=o+"{"+t[s]+"}":p(s)&&(n+=f(o)+":"+_(o,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=h(e,t,s);switch(o){case"animation":case"animationName":n+=f(o)+":"+a+";";break;default:n+=o+"{"+a+"}"}}else for(var c=0;c<s.length;c++)p(s[c])&&(n+=f(o)+":"+_(o,s[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=b,o=r(e);return b=i,h(e,t,o)}}if(null==t)return r;var s=t[r];return void 0!==s?s:r}var b,g=/label:\s*([^\s;\n{]+)\s*(;|$)/g;t.serializeStyles=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";b=void 0;var o=e[0];null==o||void 0===o.raw?(n=!1,i+=h(r,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=h(r,t,e[s]),n&&(i+=o[s]);g.lastIndex=0;for(var c,d="";null!==(c=g.exec(i));)d+="-"+c[1];return{name:a.default(i)+d,styles:i,next:b}}},function(e,t,r){"use strict";e.exports=r(30)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}},function(e,t,r){"use strict";e.exports=r(32)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1}},function(e,t,r){"use strict";e.exports=r(34)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="undefined"!=typeof document,i=function(e,t,r){var i=e.key+"-"+t.name;(!1===r||!1===n&&void 0!==e.compat)&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};t.getRegisteredStyles=function(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n},t.insertStyles=function(e,t,r){i(e,t,r);var o=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var s="",a=t;do{var c=e.insert(t===a?"."+o:"",a,e.sheet,!0);n||void 0===c||(s+=c),a=a.next}while(void 0!==a);if(!n&&0!==s.length)return s}},t.registerStyles=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),i=r(12),o=r(22);function s(e){return e&&e.__esModule?e:{default:e}}var a=s(n);function c(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function d(e,t,r){var n=[],i=o.getRegisteredStyles(e,n,r);return n.length<2?r:i+t(n)}var u=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(null!=i){var o=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))o=e(i);else for(var s in o="",i)i[s]&&s&&(o&&(o+=" "),o+=s);break;default:o=i}o&&(r&&(r+=" "),r+=o)}}return r};t.default=function(e){var t=a.default(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var s=i.serializeStyles(r,t.registered,void 0);return o.insertStyles(t,s,!1),t.key+"-"+s.name};return{css:r,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return d(t.registered,r,u(n))},injectGlobal:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=i.serializeStyles(r,t.registered);c(t,o)},keyframes:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=i.serializeStyles(r,t.registered),s="animation-"+o.name;return c(t,{name:o.name,styles:"@keyframes "+s+"{"+o.styles+"}"}),s},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:o.getRegisteredStyles.bind(null,t.registered),merge:d.bind(null,t.registered,r)}}},function(e,t,r){"use strict";r.r(t),r.d(t,"plugin",(function(){return R})),r.d(t,"SEARCH_EMBEDDABLE_TYPE",(function(){return b.a})),r.d(t,"loadSharingDataHelpers",(function(){return M})),r.d(t,"getSavedSearch",(function(){return v.getSavedSearch})),r.d(t,"getSavedSearchFullPathUrl",(function(){return v.getSavedSearchFullPathUrl})),r.d(t,"getSavedSearchUrl",(function(){return v.getSavedSearchUrl})),r.d(t,"getSavedSearchUrlConflictMessage",(function(){return v.getSavedSearchUrlConflictMessage})),r.d(t,"throwErrorOnSavedSearchUrlConflict",(function(){return v.throwErrorOnSavedSearchUrlConflict})),r.d(t,"VIEW_MODE",(function(){return v.VIEW_MODE}));var n=r(0),i=r.n(n),o=r(3),s=r(5),a=r.n(s),c=r(19),d=r(13),u=r(23),l=r(1),p=r(4);class doc_views_registry_DocViewsRegistry{constructor(){i()(this,"docViews",[])}addDocView(e){const t="function"==typeof e?e():e;"function"!=typeof t.shouldShow&&(t.shouldShow=()=>!0),this.docViews.push(t)}getDocViewsSorted(e){return this.docViews.filter((t=>t.shouldShow(e))).sort(((e,t)=>Number(e.order)>Number(t.order)?1:-1))}}var f=r(7),_=r(9);const h=Object(_.memoize)((function(e,t,r,n,i,o){var s;const{usageCollection:a}=t,c=new l.Storage(localStorage);return{application:e.application,addBasePath:e.http.basePath.prepend,capabilities:e.application.capabilities,chrome:e.chrome,core:e,data:t.data,docLinks:e.docLinks,embeddable:t.embeddable,theme:t.charts.theme,fieldFormats:t.fieldFormats,filterManager:t.data.query.filterManager,history:f.c,dataViews:t.data.dataViews,inspector:t.inspector,metadata:{branch:r.env.packageInfo.branch},navigation:t.navigation,share:t.share,urlForwarding:t.urlForwarding,timefilter:t.data.query.timefilter.timefilter,toastNotifications:e.notifications.toasts,notifications:e.notifications,uiSettings:e.uiSettings,storage:c,trackUiMetric:null==a?void 0:a.reportUiCounter.bind(a,"discover"),dataViewFieldEditor:t.dataViewFieldEditor,http:e.http,spaces:t.spaces,dataViewEditor:t.dataViewEditor,triggersActionsUi:t.triggersActionsUi,locator:n,contextLocator:i,singleDocLocator:o,expressions:t.expressions,charts:t.charts,savedObjectsTagging:null===(s=t.savedObjectsTaggingOss)||void 0===s?void 0:s.getTaggingApi(),savedObjectsManagement:t.savedObjectsManagement,unifiedSearch:t.unifiedSearch,lens:t.lens}}));var b=r(10),g=r(8),v=r(2);class search_embeddable_factory_SearchEmbeddableFactory{constructor(e,t){i()(this,"type",b.a),i()(this,"savedObjectMetaData",{name:o.i18n.translate("discover.savedSearch.savedObjectName",{defaultMessage:"Saved search"}),type:"search",getIconForSavedObject:()=>"discoverApp"}),i()(this,"isEditable",(async()=>(await this.getStartServices()).isEditable())),i()(this,"createFromSavedObject",(async(e,t,n)=>{const i=await this.getDiscoverServices(),o=i.filterManager,s=Object(v.getSavedSearchUrl)(e),a=i.addBasePath(`/app/discover${s}`);try{const c=await Object(v.getSavedSearch)(e,{search:i.data.search,savedObjectsClient:i.core.savedObjects.client,spaces:i.spaces,savedObjectsTagging:i.savedObjectsTagging});await Object(v.throwErrorOnSavedSearchUrlConflict)(c);const d=c.searchSource.getField("index"),{executeTriggerActions:u}=await this.getStartServices(),{SavedSearchEmbeddable:l}=await Promise.all([r.e(0),r.e(1),r.e(6)]).then(r.bind(null,230));return new l({savedSearch:c,editUrl:a,editPath:s,filterManager:o,editable:i.capabilities.discover.save,indexPatterns:d?[d]:[],services:i},t,u,n)}catch(e){return console.error(e),new g.ErrorEmbeddable(e,t,n)}})),this.getStartServices=e,this.getDiscoverServices=t}canCreateNew(){return!1}getDisplayName(){return o.i18n.translate("discover.embeddable.search.displayName",{defaultMessage:"search"})}async create(e){return new g.ErrorEmbeddable("Saved searches can only be created from a saved object",e)}}var S=r(6);const O=({children:e})=>{const t=Object(s.useRef)(),[r,n]=Object(s.useState)(!1);return Object(s.useEffect)((()=>(t.current=window.setTimeout((()=>{n(!0)}),300),()=>{t.current&&clearTimeout(t.current)})),[]),r?Object(S.jsx)(a.a.Fragment,null,e):null},y="ACTION_VIEW_SAVED_SEARCH";class view_saved_search_action_ViewSavedSearchAction{constructor(e){i()(this,"id",y),i()(this,"type",y),this.application=e}async execute(e){const{embeddable:t}=e,r=t.getSavedSearch().id,n=Object(v.getSavedSearchUrl)(r),i=t?t.getOutput().editApp:void 0;await this.application.navigateToApp(i||"discover",{path:n})}getDisplayName(e){return o.i18n.translate("discover.savedSearchEmbeddable.action.viewSavedSearch.displayName",{defaultMessage:"Open in Discover"})}getIconType(e){return"inspect"}async isCompatible(e){const{embeddable:t}=e,{capabilities:r}=this.application,n=r.discover.show||r.discover.save;return Boolean(t.type===p.SEARCH_EMBEDDABLE_TYPE&&t.getInput().viewMode===g.ViewMode.VIEW&&n)}}var m=r(11),w=r.n(m),E=r(21),j=r(12);const D=w()({key:"truncation"});var T=r(17),P=r(14),x=r(20),A=r(15);const[k,C]=Object(l.createGetterSetter)("urlTrackingEnabled");class locator_DiscoverContextAppLocatorDefinition{constructor(e){i()(this,"id","DISCOVER_CONTEXT_APP_LOCATOR"),i()(this,"getLocation",(async e=>{const t=this.deps.useHash,{index:n,rowId:i,columns:o,filters:s,referrer:a}=e,c={},d={},{isFilterPinned:u}=await Promise.resolve().then(r.t.bind(null,41,7));let p;s&&s.length&&(c.filters=null==s?void 0:s.filter((e=>!u(e)))),o&&(c.columns=o),s&&s.length&&(d.filters=null==s?void 0:s.filter((e=>u(e))));const f={referrer:a};"object"==typeof n?(f.dataViewSpec=n,p=n.id):p=n;let _=`#/context/${p}/${i}`;return _=Object(l.setStateToKbnUrl)("_g",d,{useHash:t},_),_=Object(l.setStateToKbnUrl)("_a",c,{useHash:t},_),{app:"discover",path:_,state:f}})),this.deps=e}}class locator_DiscoverSingleDocLocatorDefinition{constructor(){i()(this,"id","DISCOVER_SINGLE_DOC_LOCATOR"),i()(this,"getLocation",(async e=>{const{index:t,rowId:r,rowIndex:n,referrer:i}=e;let o;const s={referrer:i};return"object"==typeof t?(s.dataViewSpec=t,o=t.id):o=t,{app:"discover",path:`#/doc/${o}/${n}?id=${r}`,state:s}}))}}const I=a.a.lazy((()=>Promise.all([r.e(2),r.e(10)]).then(r.bind(null,229)))),L=a.a.lazy((()=>Promise.all([r.e(2),r.e(9)]).then(r.bind(null,231)))),U=a.a.lazy((()=>r.e(5).then(r.bind(null,232))));class plugin_DiscoverPlugin{constructor(e){i()(this,"appStateUpdater",new c.BehaviorSubject((()=>({})))),i()(this,"docViewsRegistry",null),i()(this,"stopUrlTracking",void 0),i()(this,"locator",void 0),i()(this,"contextLocator",void 0),i()(this,"singleDocLocator",void 0),this.initializerContext=e}setup(e,t){const n=e.http.basePath.prepend("/app/discover"),i=this.initializerContext.env.mode.dev;if(t.share){const r=e.uiSettings.get("state:storeInSessionStorage");this.locator=t.share.url.locators.create(new p.DiscoverAppLocatorDefinition({useHash:r,setStateToKbnUrl:l.setStateToKbnUrl})),this.contextLocator=t.share.url.locators.create(new locator_DiscoverContextAppLocatorDefinition({useHash:r})),this.singleDocLocator=t.share.url.locators.create(new locator_DiscoverSingleDocLocatorDefinition)}this.docViewsRegistry=new doc_views_registry_DocViewsRegistry,Object(f.g)(this.docViewsRegistry),this.docViewsRegistry.addDocView({title:o.i18n.translate("discover.docViews.table.tableTitle",{defaultMessage:"Table"}),order:10,component:e=>{const t=Object(T.a)().uiSettings.get(p.DOC_TABLE_LEGACY)?I:L;return Object(S.jsx)(a.a.Suspense,{fallback:Object(S.jsx)(O,null,Object(S.jsx)(d.EuiLoadingContent,null))},Object(S.jsx)(t,e))}}),this.docViewsRegistry.addDocView({title:o.i18n.translate("discover.docViews.json.jsonTitle",{defaultMessage:"JSON"}),order:20,component:({hit:e,dataView:t})=>Object(S.jsx)(a.a.Suspense,{fallback:Object(S.jsx)(O,null,Object(S.jsx)(d.EuiLoadingContent,null))},Object(S.jsx)(U,{index:e.raw._index,id:e.raw._id,dataView:t,hasLineNumbers:!0}))});const{setTrackedUrl:s,restorePreviousUrl:c,stopUrlTracker:_,appMounted:b,appUnMounted:g,setTrackingEnabled:v}=function(e,t,n,i){C({enabled:!0});const{appMounted:o,appUnMounted:s,stop:a,setActiveUrl:c,restorePreviousUrl:d}=Object(l.createKbnUrlTracker)({getHistory:f.d,baseUrl:e,defaultSubUrl:"#/",storageKey:`lastUrl:${t.http.basePath.get()}:discover`,navLinkUpdater$:n,toastNotifications:t.notifications.toasts,stateParams:[{kbnUrlKey:"_g",stateUpdate$:i.data.query.state$.pipe(Object(P.filter)((({changes:e})=>!!(e.globalFilters||e.time||e.refreshInterval))),Object(P.map)((async({state:e})=>{var t;const{isFilterPinned:n}=await Promise.resolve().then(r.t.bind(null,41,7));return{...e,filters:null===(t=e.filters)||void 0===t?void 0:t.filter(n)}})))}],shouldTrackUrlUpdate:()=>k().enabled,onBeforeNavLinkSaved:e=>(e.includes(A.b)&&(e=Object(x.replaceUrlHashQuery)(e,(e=>(delete e[A.b],e)))),e)});return{appMounted:o,appUnMounted:s,stopUrlTracker:a,setTrackedUrl:c,restorePreviousUrl:d,setTrackingEnabled:e=>{C({enabled:e})}}}(n,e,this.appStateUpdater,t);return Object(f.k)({setTrackedUrl:s,restorePreviousUrl:c,setTrackingEnabled:v}),this.stopUrlTracking=()=>{_()},e.application.register({id:p.PLUGIN_ID,title:"Discover",updater$:this.appStateUpdater.asObservable(),order:1e3,euiIconType:"logoKibana",defaultPath:"#/",category:u.DEFAULT_APP_CATEGORIES.kibana,mount:async t=>{const[n,o]=await e.getStartServices();Object(f.i)(t.history),Object(f.h)(t.setHeaderActionMenu),Object(f.l)(),b();const s=t.history.listen((()=>{window.dispatchEvent(new HashChangeEvent("hashchange"))})),a=h(n,o,this.initializerContext,this.locator,this.contextLocator,this.singleDocLocator);await o.dataViews.clearCache();const{renderApp:c}=await Promise.all([r.e(0),r.e(1),r.e(4)]).then(r.bind(null,228));t.element.classList.add("dscAppWrapper");const d=c(t.element,a,i);return()=>{s(),d(),g()}}}),t.urlForwarding.forwardApp("doc","discover",(e=>`#${e}`)),t.urlForwarding.forwardApp("context","discover",(e=>{const t=e.split("/");return t[4]?`#${[...t.slice(0,3),...t.slice(4)].join("/")}`:`#${e}`})),t.urlForwarding.forwardApp("discover","discover",(e=>{const[,t,r]=/discover\/([^\?]+)(.*)/.exec(e)||[];return t?`#/view/${t}${r||""}`:`#${e.replace("/discover","")||"/"}`})),t.home&&t.home.featureCatalogue.register({id:"discover",title:o.i18n.translate("discover.discoverTitle",{defaultMessage:"Discover"}),subtitle:o.i18n.translate("discover.discoverSubtitle",{defaultMessage:"Search and find insights."}),description:o.i18n.translate("discover.discoverDescription",{defaultMessage:"Interactively explore your data by querying and filtering raw documents."}),icon:"discoverApp",path:"/app/discover#/",showOnHomePage:!1,category:"data",solutionId:"kibana",order:200}),this.registerEmbeddable(e,t),{docViews:{addDocView:this.docViewsRegistry.addDocView.bind(this.docViewsRegistry)},locator:this.locator}}start(e,t){const{uiActions:r}=t,n=new view_saved_search_action_ViewSavedSearchAction(e.application);return r.addTriggerAction("CONTEXT_MENU_TRIGGER",n),Object(f.j)(t.uiActions),(e=>{const t=Object(j.serializeStyles)((e=>e?[`\n    .dscTruncateByHeight {\n      overflow: hidden;\n      max-height: ${e}px !important;\n    }\n    .dscTruncateByHeight:before {\n      top: ${e-15}px;\n    }\n  `]:["\n    .dscTruncateByHeight {\n      max-height: none;\n    }"])(e),E.cache.registered);D.inserted[t.name]||D.insert("",t,D.sheet,!0)})(e.uiSettings.get(p.TRUNCATE_MAX_HEIGHT)),{locator:this.locator}}stop(){this.stopUrlTracking&&this.stopUrlTracking()}registerEmbeddable(e,t){const r=new search_embeddable_factory_SearchEmbeddableFactory((async()=>{const[t,r]=await e.getStartServices();return{executeTriggerActions:r.uiActions.executeTriggerActions,isEditable:()=>t.application.capabilities.discover.save}}),(async()=>{const[t,r]=await e.getStartServices();return h(t,r,this.initializerContext,this.locator,this.contextLocator,this.singleDocLocator)}));t.embeddable.registerEmbeddableFactory(r.type,r)}}async function M(){return await Promise.all([r.e(0),r.e(7)]).then(r.bind(null,117))}function R(e){return new plugin_DiscoverPlugin(e)}},function(e,t){e.exports=__kbnSharedDeps__.KbnI18nReact},function(e,t){e.exports=__kbnSharedDeps__.Classnames},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnEsQuery},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/dataViews/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.ReactRouterDom},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedFieldList/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/data/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnUiTheme},function(e,t){e.exports=__kbnSharedDeps__.KbnAnalytics},function(e,t){e.exports=__kbnSharedDeps__.ReactDom},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedHistogram/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnMonaco},function(e,t){e.exports=__kbnSharedDeps__.LodashFp},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/unifiedSearch/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.Uuid},function(e,t){e.exports=__kbnSharedDeps__.Moment},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/fieldFormats/common");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.TsLib},function(e,t){e.exports=__kbnSharedDeps__.KbnDatemath},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/inspector/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t){e.exports=__kbnSharedDeps__.KbnRison},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjectsFinder/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))},function(e,t,r){r.r(t);var n=__kbnBundles__.get("plugin/savedObjects/public");Object.defineProperties(t,Object.getOwnPropertyDescriptors(n))}]);