/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.triggersActionsUi_bundle_jsonpfunction=window.triggersActionsUi_bundle_jsonpfunction||[]).push([[4,54],{122:function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"e",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return o}));const n=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.show},i=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.save},r=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.execute},l=e=>{var t;return null==e||null===(t=e.actions)||void 0===t?void 0:t.delete};function a(e,t){var s,n;return null!==(s=null==t||null===(n=t.authorizedConsumers[e])||void 0===n?void 0:n.all)&&void 0!==s&&s}const o=e=>{var t,s;return null==e||null===(t=e.management)||void 0===t||null===(s=t.security)||void 0===s?void 0:s.api_keys}},123:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(9),i=s.n(n),r=(s(1),s(62)),l=s(25),a=s(0);function o(e){return t=>{const{http:s}=Object(l.b)().services;return Object(a.jsx)(e,i()({},t,{muteRules:async e=>Object(r.x)({http:s,ids:e.filter((e=>!u(e))).map((e=>e.id))}),unmuteRules:async e=>Object(r.D)({http:s,ids:e.filter(u).map((e=>e.id))}),muteRule:async e=>{if(!u(e))return await Object(r.w)({http:s,id:e.id})},unmuteRule:async e=>{if(u(e))return await Object(r.C)({http:s,id:e.id})},muteAlertInstance:async(e,t)=>{if(!c(e,t))return Object(r.v)({http:s,id:e.id,instanceId:t})},unmuteAlertInstance:async(e,t)=>{if(c(e,t))return Object(r.B)({http:s,id:e.id,instanceId:t})},loadRule:async e=>Object(r.q)({http:s,ruleId:e}),loadRuleState:async e=>Object(r.r)({http:s,ruleId:e}),loadRuleSummary:async(e,t)=>Object(r.s)({http:s,ruleId:e,numberOfExecutions:t}),loadRuleTypes:async()=>Object(r.u)({http:s}),loadExecutionLogAggregations:async e=>Object(r.n)({...e,http:s}),loadGlobalExecutionLogAggregations:async e=>Object(r.p)({...e,http:s}),loadActionErrorLog:async e=>Object(r.l)({...e,http:s}),loadExecutionKPIAggregations:async e=>Object(r.m)({...e,http:s}),loadGlobalExecutionKPIAggregations:async e=>Object(r.o)({...e,http:s}),resolveRule:async e=>Object(r.y)({http:s,ruleId:e}),getHealth:async()=>Object(r.a)({http:s}),snoozeRule:async(e,t)=>await Object(r.A)({http:s,id:e.id,snoozeSchedule:t}),bulkSnoozeRules:async e=>await Object(r.e)({http:s,...e}),unsnoozeRule:async(e,t)=>await Object(r.E)({http:s,id:e.id,scheduleIds:t}),bulkUnsnoozeRules:async e=>await Object(r.f)({http:s,...e}),cloneRule:async e=>await Object(r.h)({http:s,ruleId:e}),bulkDeleteRules:async e=>await Object(r.b)({http:s,...e}),bulkEnableRules:async e=>await Object(r.d)({http:s,...e}),bulkDisableRules:async e=>await Object(r.c)({http:s,...e})}))}}function u(e){return!0===e.muteAll}function c(e,t){return e.mutedInstanceIds.findIndex((e=>e===t))>=0}},124:function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return u})),s.d(t,"h",(function(){return d})),s.d(t,"j",(function(){return g})),s.d(t,"f",(function(){return p})),s.d(t,"K",(function(){return f})),s.d(t,"J",(function(){return b})),s.d(t,"I",(function(){return E})),s.d(t,"L",(function(){return U})),s.d(t,"s",(function(){return y})),s.d(t,"u",(function(){return v})),s.d(t,"w",(function(){return L})),s.d(t,"r",(function(){return R})),s.d(t,"t",(function(){return w})),s.d(t,"d",(function(){return z})),s.d(t,"l",(function(){return C})),s.d(t,"m",(function(){return N})),s.d(t,"q",(function(){return B})),s.d(t,"n",(function(){return D})),s.d(t,"o",(function(){return P})),s.d(t,"p",(function(){return F})),s.d(t,"i",(function(){return W})),s.d(t,"k",(function(){return _})),s.d(t,"g",(function(){return K})),s.d(t,"v",(function(){return G})),s.d(t,"e",(function(){return H})),s.d(t,"c",(function(){return Y})),s.d(t,"y",(function(){return q})),s.d(t,"x",(function(){return Z})),s.d(t,"F",(function(){return J})),s.d(t,"H",(function(){return V})),s.d(t,"G",(function(){return $})),s.d(t,"z",(function(){return Q})),s.d(t,"B",(function(){return X})),s.d(t,"A",(function(){return ee})),s.d(t,"C",(function(){return te})),s.d(t,"E",(function(){return se})),s.d(t,"D",(function(){return ne}));var n=s(2);const i=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusOk",{defaultMessage:"Ok"}),r=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusActive",{defaultMessage:"Active"}),l=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusError",{defaultMessage:"Error"}),a=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusLicenseError",{defaultMessage:"License Error"}),o=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusPending",{defaultMessage:"Pending"}),u=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusUnknown",{defaultMessage:"Unknown"}),c=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleStatusWarning",{defaultMessage:"Warning"}),d=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeSucceeded",{defaultMessage:"Succeeded"}),g=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeWarning",{defaultMessage:"Warning"}),p=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleLastRunOutcomeFailed",{defaultMessage:"Failed"}),f={ok:i,active:r,error:l,pending:o,unknown:u,warning:c},b={succeeded:d,warning:g,failed:p},m=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonUnknown",{defaultMessage:"An error occurred for unknown reasons."}),x=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonReading",{defaultMessage:"An error occurred when reading the rule."}),O=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDecrypting",{defaultMessage:"An error occurred when decrypting the rule."}),j=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonRunning",{defaultMessage:"An error occurred when running the rule."}),S=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonLicense",{defaultMessage:"Cannot run rule"}),k=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonTimeout",{defaultMessage:"Rule execution cancelled due to timeout."}),A=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonDisabled",{defaultMessage:"Rule failed to execute because rule ran after it was disabled."}),h=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleErrorReasonValidate",{defaultMessage:"An error occurred when validating the rule parameters."}),T=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxExecutableActions",{defaultMessage:"Action limit exceeded"}),I=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonMaxAlerts",{defaultMessage:"Alert limit exceeded"}),M=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ruleWarningReasonUnknown",{defaultMessage:"Unknown reason"}),E={read:x,decrypt:O,execute:j,unknown:m,license:S,timeout:k,disabled:A,validate:h},U={maxExecutableActions:T,maxAlerts:I,unknown:M},y=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectAllAriaLabel",{defaultMessage:"Toggle select all rules"}),v=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListTable.columns.selectShowBulkActionsAriaLabel",{defaultMessage:"Show bulk actions"}),L=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalRulesLabel",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"{formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),R=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectedRulesButton",{values:{formattedSelectedRules:e,selectedRules:t},defaultMessage:"Selected {formattedSelectedRules} {selectedRules, plural, =1 {rule} other {rules}}"}),w=(e,t)=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.selectAllRulesButton",{values:{formattedTotalRules:e,totalRules:t},defaultMessage:"Select all {formattedTotalRules} {totalRules, plural, =1 {rule} other {rules}}"}),z=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.clearAllSelectionButton",{defaultMessage:"Clear selection"}),C=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesActiveDescription",{defaultMessage:"Active: {totalStatusesActive}",values:{totalStatusesActive:e}}),N=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesErrorDescription",{defaultMessage:"Error: {totalStatusesError}",values:{totalStatusesError:e}}),B=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesWarningDescription",{defaultMessage:"Warning: {totalStatusesWarning}",values:{totalStatusesWarning:e}}),D=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesOkDescription",{defaultMessage:"Ok: {totalStatusesOk}",values:{totalStatusesOk:e}}),P=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesPendingDescription",{defaultMessage:"Pending: {totalStatusesPending}",values:{totalStatusesPending:e}}),F=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.totalStatusesUnknownDescription",{defaultMessage:"Unknown: {totalStatusesUnknown}",values:{totalStatusesUnknown:e}}),W=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeSucceededDescription",{defaultMessage:"Succeeded: {total}",values:{total:e}}),_=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeWarningDescription",{defaultMessage:"Warning: {total}",values:{total:e}}),K=e=>n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.lastRunOutcomeFailedDescription",{defaultMessage:"Failed: {total}",values:{total:e}}),G=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.singleTitle",{defaultMessage:"rule"}),H=n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.multipleTitle",{defaultMessage:"rules"}),Y=n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.cancelButtonLabel",{defaultMessage:"Cancel"}),q=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.descriptionText",{defaultMessage:"You won't be able to recover {numIdsToDelete, plural, one {a deleted {singleTitle}} other {deleted {multipleTitle}}}.",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),Z=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.deleteSelectedIdsConfirmModal.deleteButtonLabel",{defaultMessage:"Delete {numIdsToDelete, plural, one {{singleTitle}} other {# {multipleTitle}}} ",values:{numIdsToDelete:e,singleTitle:t,multipleTitle:s}}),J=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Deleted {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),V=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Enabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),$=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsSuccessNotification.descriptionText",{defaultMessage:"Disabled {numSuccesses, number} {numSuccesses, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numSuccesses:e,singleTitle:t,multipleTitle:s}}),Q=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to delete {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),X=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to enable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),ee=(e,t,s)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsErrorNotification.descriptionText",{defaultMessage:"Failed to disable {numErrors, number} {numErrors, plural, one {{singleTitle}} other {{multipleTitle}}}",values:{numErrors:e,singleTitle:t,multipleTitle:s}}),te=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.deleteSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Deleted {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}}),se=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.enableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Enabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}}),ne=(e,t,s,i)=>n.i18n.translate("xpack.triggersActionsUI.components.disableSelectedIdsPartialSuccessNotification.descriptionText",{defaultMessage:"Disabled {numberOfSuccess, number} {numberOfSuccess, plural, one {{singleTitle}} other {{multipleTitle}}}, {numberOfErrors, number} {numberOfErrors, plural, one {{singleTitle}} other {{multipleTitle}}} encountered errors",values:{numberOfSuccess:e,numberOfErrors:t,singleTitle:s,multipleTitle:i}})},130:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s(28);async function i({http:e}){return await e.get(`${n.a}/_config`)}},173:function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s(1),i=s(23),r=s(3),l=s(2),a=s(20),o=s(25),u=s(0);const c=(e,t,s)=>l.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.someSuccess",{defaultMessage:"Updated {property} for {success, plural, one {# rule} other {# rules}}, {failure, plural, one {# rule} other {# rules}} encountered errors.",values:{success:e,failure:t,property:s}}),d=(e,t)=>l.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.failure",{defaultMessage:"Failed to update {property} for {failure, plural, one {# rule} other {# rules}}.",values:{failure:e,property:t}}),g=l.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.snoozeSettings",{defaultMessage:"snooze settings"}),p={snooze:g,snoozeSchedule:g,apiKey:l.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.property.apiKey",{defaultMessage:"API key"})};function f(e){const{onSearchPopulate:t}=e,{notifications:{toasts:s}}=Object(o.b)().services,g=Object(n.useCallback)((e=>{if(!t)return;const s=e.errors.map((e=>e.rule.name)).join(",");t(s)}),[t]),f=Object(n.useCallback)((e=>Object(u.jsx)(r.EuiFlexGroup,{direction:"column",gutterSize:"xs"},t&&Object(u.jsx)(r.EuiFlexItem,{grow:!1},Object(u.jsx)("div",null,Object(u.jsx)(r.EuiButtonEmpty,{iconType:"search",size:"xs",flush:"left",onClick:()=>g(e),"data-test-subj":"bulkEditResponseFilterErrors"},Object(u.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"})))))),[t,g]),b=Object(n.useCallback)(((e,t)=>{const{errors:n,total:i}=e,r=i-n.length,o=n.length;o?o!==i?s.addWarning({title:c(r,o,p[t]),text:Object(a.toMountPoint)(f(e))}):s.addDanger({title:d(o,p[t]),text:Object(a.toMountPoint)(f(e))}):s.addSuccess(((e,t)=>l.i18n.translate("xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.success",{defaultMessage:"Updated {property} for {total, plural, one {# rule} other {# rules}}.",values:{total:e,property:t}}))(r,p[t]))}),[s,f]);return Object(n.useMemo)((()=>({showToast:b})),[b])}},183:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s(3),i=s(1),r=s.n(i),l=s(124),a=s(0);const o=({confirmButtonText:e,confirmModalText:t,onCancel:s,onConfirm:i,showWarningText:o,warningText:u})=>Object(a.jsx)(n.EuiConfirmModal,{buttonColor:"danger","data-test-subj":"rulesDeleteConfirmation",title:e,onCancel:s,onConfirm:i,cancelButtonText:l.c,confirmButtonText:e},Object(a.jsx)("p",null,t),o&&Object(a.jsx)(n.EuiCallOut,{title:Object(a.jsx)(r.a.Fragment,null,u),color:"warning",iconType:"alert"}))},184:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s(3),i=s(2),r=s(1),l=s(25),a=s(173),o=s(0);const u=({onCancel:e,idsToUpdate:t,rulesToUpdate:s,idsToUpdateFilter:u,numberOfSelectedRules:c=0,apiUpdateApiKeyCall:d,setIsLoadingState:g,onUpdated:p,onSearchPopulate:f})=>{const{http:b,notifications:{toasts:m}}=Object(l.b)().services,[x,O]=Object(r.useState)(!1),{showToast:j}=Object(a.a)({onSearchPopulate:f}),S=Object(r.useMemo)((()=>null!=t&&t.length?t:null!=s&&s.length?s.map((e=>e.id)):[]),[t,s]);Object(r.useEffect)((()=>{O(void 0!==u||S.length>0)}),[S,u]);const k=Object(r.useMemo)((()=>void 0!==u?c:S.length),[u,c,S]);return x?Object(o.jsx)(n.EuiConfirmModal,{buttonColor:"primary","data-test-subj":"updateApiKeyIdsConfirmation",title:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.title",{defaultMessage:"Update API key"}),onCancel:()=>{O(!1),e()},onConfirm:async()=>{O(!1),g(!0);try{const e=await d({ids:S,filter:u,http:b});j(e,"apiKey")}catch(e){m.addError(e,{title:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.failureMessage",{defaultMessage:"Failed to update the API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:k}})})}g(!1),p()},cancelButtonText:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.confirmButton",{defaultMessage:"Update"})},i.i18n.translate("xpack.triggersActionsUI.updateApiKeyConfirmModal.description",{defaultMessage:"You will not be able to recover the old API {idsToUpdate, plural, one {key} other {keys}}",values:{idsToUpdate:k}})):null}},185:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s(2),i=s(62);async function r(e,t,s){try{const r=await Object(i.z)({http:e,id:s});r?t.addWarning({title:r}):t.addSuccess({title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.ableToRunRuleSoon",{defaultMessage:"Your rule is scheduled to run"})})}catch(e){t.addError(e,{title:n.i18n.translate("xpack.triggersActionsUI.sections.rulesList.unableToRunRuleSoon",{defaultMessage:"Unable to schedule your rule to run"})})}}},186:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(1),i=s(23),r=s(3),l=s(20),a=s(25),o=s(124),u=s(0);const c={DELETE:{getSuccessfulNotificationText:o.F,getFailedNotificationText:o.z,getPartialSuccessNotificationText:o.C},ENABLE:{getSuccessfulNotificationText:o.H,getFailedNotificationText:o.B,getPartialSuccessNotificationText:o.E},DISABLE:{getSuccessfulNotificationText:o.G,getFailedNotificationText:o.A,getPartialSuccessNotificationText:o.D}},d=({onSearchPopulate:e})=>{const{notifications:{toasts:t}}=Object(a.b)().services,s=Object(n.useCallback)((t=>{if(!e)return;const s=t.map((e=>e.rule.name)).join(",");e(s)}),[e]),d=Object(n.useCallback)(((t,n)=>Object(u.jsx)(r.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"xs"},e&&Object(u.jsx)(r.EuiFlexItem,{grow:!1},Object(u.jsx)(r.EuiButton,{color:n,size:"s",onClick:()=>s(t),"data-test-subj":"bulkDeleteResponseFilterErrors"},Object(u.jsx)(i.FormattedMessage,{id:"xpack.triggersActionsUI.sections.ruleApi.bulkEditResponse.filterByErrors",defaultMessage:"Filter by errored rules"}))))),[e,s]),g=Object(n.useCallback)((({action:e,errors:s,total:n})=>{const i=n-s.length,r=s.length;r?r!==n?t.addWarning({title:c[e].getPartialSuccessNotificationText(i,r,o.v,o.e),text:Object(l.toMountPoint)(d(s,"warning"))}):t.addDanger({title:c[e].getFailedNotificationText(r,o.v,o.e),text:Object(l.toMountPoint)(d(s,"danger"))}):t.addSuccess(c[e].getSuccessfulNotificationText(i,o.v,o.e))}),[t,d]);return Object(n.useMemo)((()=>({showToast:g})),[g])}},94:function(e,t,s){"use strict";s.r(t),s.d(t,"RulesListNotifyBadge",(function(){return x})),s.d(t,"SNOOZE_SUCCESS_MESSAGE",(function(){return g})),s.d(t,"UNSNOOZE_SUCCESS_MESSAGE",(function(){return p})),s.d(t,"SNOOZE_FAILED_MESSAGE",(function(){return f})),s.d(t,"default",(function(){return O}));var n=s(1),i=s(25),r=s(62),l=s(61),a=s.n(l),o=s(3),u=s(2),c=s(136),d=s(129);const g=u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeSuccess",{defaultMessage:"Rule successfully snoozed"}),p=u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.unsnoozeSuccess",{defaultMessage:"Rule successfully unsnoozed"}),f=u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListSnoozePanel.snoozeFailed",{defaultMessage:"Unable to change rule snooze settings"}),b=u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.openSnoozePanel",{defaultMessage:"Open snooze panel"});var m=s(0);const x=e=>{var t,s;const{isLoading:r=!1,rule:l,isOpen:x,onClick:O,onClose:j,onLoading:S,onRuleChanged:k,snoozeRule:A,unsnoozeRule:h,showOnHover:T=!1,showTooltipInline:I=!1}=e,{isSnoozedUntil:M,muteAll:E,isEditable:U}=l,y=E,{notifications:{toasts:v}}=Object(i.b)().services,L=Object(n.useMemo)((()=>(e=>Boolean(e.isSnoozedUntil&&new Date(e.isSnoozedUntil).getTime()>Date.now()||e.muteAll))(l)),[l]),R=Object(n.useMemo)((()=>(e=>{if(!e.snoozeSchedule)return null;const t=e.snoozeSchedule.filter((e=>Boolean(e.id)));return 0===t.length?null:t.reduce(((e,t)=>a()(t.rRule.dtstart).isBefore(a()(e.rRule.dtstart))?t:e))})(l)),[l]),w=Object(n.useMemo)((()=>!L&&Boolean(R)),[R,L]),z=Object(n.useMemo)((()=>M?Object(c.a)(a()(M)):R?Object(c.a)(a()(R.rRule.dtstart)):""),[M,R]),C=Object(n.useMemo)((()=>y?u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedIndefinitelyTooltip",{defaultMessage:"Notifications snoozed indefinitely"}):w?u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozeScheduledTooltip",{defaultMessage:"Notifications scheduled to snooze starting {schedStart}",values:{schedStart:Object(c.b)(a()(R.rRule.dtstart))}}):L?u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.snoozedTooltip",{defaultMessage:"Notifications snoozing for {snoozeTime}",values:{snoozeTime:a()(M).fromNow(!0)}}):I?u.i18n.translate("xpack.triggersActionsUI.sections.rulesList.rulesListNotifyBadge.noSnoozeAppliedTooltip",{defaultMessage:"Notify when alerts generated"}):""),[y,w,L,M,R,I]),N=Object(n.useMemo)((()=>Object(m.jsx)(o.EuiButton,{size:"s",isLoading:r,disabled:r||!U,"data-test-subj":"rulesListNotifyBadge-snoozed","aria-label":b,minWidth:85,iconType:"bellSlash",color:"accent",onClick:O},Object(m.jsx)(o.EuiText,{size:"xs"},z))),[z,r,U,O]),B=Object(n.useMemo)((()=>Object(m.jsx)(o.EuiButton,{size:"s",isLoading:r,disabled:r||!U,"data-test-subj":"rulesListNotifyBadge-scheduled",minWidth:85,iconType:"calendar",color:"text","aria-label":b,onClick:O},Object(m.jsx)(o.EuiText,{size:"xs"},z))),[z,r,U,O]),D=Object(n.useMemo)((()=>{const e=T?"ruleSidebarItem__action":"";return Object(m.jsx)(o.EuiButtonIcon,{size:"s",isLoading:r,disabled:r||!U,display:r?"base":"empty","data-test-subj":"rulesListNotifyBadge-unsnoozed","aria-label":b,className:x||r?"":e,iconType:"bell",onClick:O})}),[x,r,U,T,O]),P=Object(n.useMemo)((()=>Object(m.jsx)(o.EuiButtonIcon,{size:"s",isLoading:r,disabled:r||!U,display:"base","data-test-subj":"rulesListNotifyBadge-snoozedIndefinitely","aria-label":b,iconType:"bellSlash",color:"accent",onClick:O})),[r,U,O]),F=Object(n.useMemo)((()=>w?B:y?P:L?N:D),[L,w,y,B,N,P,D]),W=Object(n.useMemo)((()=>x||I?F:Object(m.jsx)(o.EuiToolTip,{content:C},F)),[x,F,C,I]),_=Object(n.useCallback)((()=>{j()}),[j]),K=Object(n.useCallback)((async e=>{try{S(!0),_(),await A(e),k(),v.addSuccess(g)}catch(e){v.addDanger(f)}finally{S(!1)}}),[S,A,k,v,_]),G=Object(n.useCallback)((async e=>{try{S(!0),_(),await h(e),k(),v.addSuccess(p)}catch(e){v.addDanger(f)}finally{S(!1)}}),[S,h,k,v,_]),H=Object(m.jsx)(o.EuiPopover,{"data-test-subj":"rulesListNotifyBadge",isOpen:x,closePopover:_,button:W,anchorPosition:"rightCenter",panelStyle:{maxHeight:"100vh",overflowY:"auto"}},Object(m.jsx)(d.a,{snoozeRule:K,unsnoozeRule:G,interval:Object(d.b)(M),showCancel:L,scheduledSnoozes:null!==(t=l.snoozeSchedule)&&void 0!==t?t:[],activeSnoozes:null!==(s=l.activeSnoozes)&&void 0!==s?s:[],inPopover:!0}));return I?Object(m.jsx)(o.EuiFlexGroup,{alignItems:"center"},Object(m.jsx)(o.EuiFlexItem,{grow:!1},H),Object(m.jsx)(o.EuiFlexItem,null,Object(m.jsx)(o.EuiText,{color:"subdued",size:"xs"},C))):H},O=e=>{const{onRuleChanged:t,rule:s,isLoading:l,showTooltipInline:a,showOnHover:o}=e,{http:u}=Object(i.b)().services,[c,d]=Object(n.useState)(),[g,p]=Object(n.useState)(!1),[f,b]=Object(n.useState)(s),O=Object(n.useCallback)((e=>Object(r.A)({http:u,id:f.id,snoozeSchedule:e})),[u,f.id]),j=Object(n.useCallback)((e=>Object(r.E)({http:u,id:f.id,scheduleIds:e})),[u,f.id]),S=Object(n.useCallback)((async()=>{const e=await Object(r.q)({http:u,ruleId:f.id});p(!1),b((t=>({...t,activeSnoozes:e.activeSnoozes,isSnoozedUntil:e.isSnoozedUntil,muteAll:e.muteAll,snoozeSchedule:e.snoozeSchedule}))),t()}),[u,f.id,t]),k=Object(n.useCallback)((()=>{d(e.rule.id)}),[e.rule.id]),A=Object(n.useCallback)((()=>{d("")}),[]),h=Object(n.useCallback)((e=>{e&&p(e)}),[]);return Object(m.jsx)(x,{rule:f,isOpen:c===f.id,isLoading:l||g,onClick:k,onClose:A,onLoading:h,onRuleChanged:S,snoozeRule:O,unsnoozeRule:j,showTooltipInline:a,showOnHover:o})}}}]);